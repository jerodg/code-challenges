/**
 * Auryc JavaScript SDK v0.2.48, 1529624981361
 * (c) Copyright 2018, Auryc Inc. http://www.auryc.com
 */

!function(){"use strict";var win;win="undefined"==typeof window?{navigator:{},console:{},location:{},document:{}}:window;var windowNavigator=win.navigator,windowConsole=win.console,windowLocation=win.location,windowDocument=win.document;function log(e,t){}function warn(e){}function error(e){}function critical(e){}var logger={log:log,warn:warn,error:error,critical:critical},time={FULL_DAY:864e5},symbols={CANCELED:"ic",CANCELEDPERMANENT:"icp",SESSION:"SESS",DATA:"DATA",PERMANENT:"PERMANENT",EXPIRED:"expired",SESSIONID:"sessid",APITOKEN:"at",DEFINEDEVENTS:"DEFINEDEVENTS",FEEDBACKEPILOGUE:"FEEDBACKEPILOGUE",FEEDBACKCONTENT:"FEEDBACKCONTENT",GLOBALSESSIONID:"gsid",UNDEFINED:"undefined",DEVICE:"auryc20160418",OVERRIDEFLAG:"aurycoverrideflag"},css={DISPLAY_VISIBLE:"aurycVisible",PX:"px",H1:"h1",TOP:"top",LEFT:"left",AUTO:"auto",FB_SELECT:"auryc-feedback__select",FB_TEXTAREA:"auryc-feedback__textarea",SELECT:"select",DEFAULT_HEIGHT:35,TEXT_LIMIT:1e3,FB_TOPIC:"auryc-visible__topic",FB_BLOCK:"auryc-feedback__block",FB_QUESTION:"auryc-feedback__question",FB_QID:"questionid",FB_QTYPE:"data-question-type",CHECKBOX:"CHECKBOX",RADIO:"RADIO",HIDDEN:"HIDDEN",HEADING_H1:"auryc-feedback__heading auryc-feedback__heading--h1",FB_SUBMIT:"auryc-submit-feedback__button",FB_TOPIC_SEL:"auryc-topic__selector"},record={mutatationConfig:{ignoreNodeContentsList:["hr","script","input","select","img","link","title","textarea","br","meta"]},tags:{SVG:"svg",SELECT:"select"},cache:{minLength:100,maxItems:500}},events={PAGEVIEWTRIGGER:"pageViewTrigger",URLCHANGETRIGGER:"urlChangeTrigger",IDENTIFYTRIGGER:"identifyTrigger",PAGEVIEWTRACKER:"ubt:pageview",FEEDBACKTRIGGER:"feedbackTrigger",FEEDBACKTRACKER:"ubt:feedback",CLICKTRACKER:"ubt:click",CLICKTRIGGER:"clickTrigger",PINGTRACKER:"ubt:ping",IDENTIFYTRACKER:"ubt:identify",PINGTRIGGER:"pingTrigger",USERIDENTIFY:"userIdentify",USERPROP:"up",TRACKCUSTOMEVENT:"trackCustomEvent",SESSIONPROP:"_sp_",INTERNALSESSIONPROP:"_isp_",SESSIONTIME:"st",SESSIONDURATION:"session_duration",USERID:"userId",UBTINIT:"ubt_init",IDENTITYVALUE:"iv",UBT_INDEPENDENT:"ubt_independent",PV_START_TS:"pst",TRANSMITTING:"ut",WRITABLE:"ut",TRANSMIT_ENABLED:"ut",CANCELED:"uc",NEW_SESSION:"new_session",VISIT_DURATION:18e5,SESSION_EXP:"se",WIN_SIZE:"ws",CUSTOM_EVENT:"CUSTOM"},uba_event_type={CUSTOM_EVENT:"CUSTOM"},storage={DEFAULT_LIMIT:8e5,MAX_PACKET_SIZE:2e6,AJAX_URL_LIMIT:256,AJAX_RESPONSE_LIMIT:32,MAX_LATENCY:3e4,LATENCY_BUCKET_WIDTH:3e3,RETRY_LIMIT:10,SESSIONID:"sid",VIEWID:"vid",USERID:"uid",HOST:"host",SESSION_METADATA:"session_md",TRANSMIT_ENABLED:"te",SESSION_STATE:"ss",PV:"pv",PVCT:"pv_count",IS_NEW:"isNew",SCOPE:{SESSION:{TAB:"TAB",BROWSER:"BROWSER"}}},event_types={HTML_CONTENT:1,DOMPATH_MAPPING:2,WIN_SIZE:3,WINDOW_SCROLL:4,MOUSE_MOVE:5,MOUSE_OUT_ENTER:6,INPUT_SERIALIZE:7,INPUT_FOCUS:8,KEY_DOWN:9,CURSOR_INFO:10,VALUE_MODIFIED:11,MUTATION_NODE:12,MUTATION_ATTR:13,JAVASCRIPT_ERROR:14,MOUSE_CLICK:15,MOUSE_DOWN:16,MOUSE_UP:17,PAGEVIEW:18,DOCUMENT_SIZE:19,NODE_SCROLL:20,ZOOM_IN_OUT:25,TOUCH:26,CUSTOM_EVENT:30,TAP:32,PRESS:33,SWIPE:34,PINCH:35,PING:50,USER_PROFILE:51,SESSION_PROPERTY:52,IDENTIFY_USER:53,SESSION_START:54,SESSION_END:55,VIEW_START:56,VIEW_END:57,DEVICE_INFO:58,VIEW_CHANGE:64,INTERNAL_SESSION_PROPERTY:65,MERGE_SESSION:66},features={PACKET_SPLIT:!0,AJAX:!1},ajax_types={xhr:"xhr",fetch:"fetch"},constants={time:time,symbols:symbols,events:events,uba_event_type:uba_event_type,storage:storage,event_types:event_types,features:features,ajax_types:ajax_types,css:css,record:record};function identity(e){return e}var identity_1=identity;function apply(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var _apply=apply,nativeMax=Math.max;function overRest(a,o,s){return o=nativeMax(void 0===o?a.length-1:o,0),function(){for(var e=arguments,t=-1,r=nativeMax(e.length-o,0),n=Array(r);++t<r;)n[t]=e[o+t];t=-1;for(var i=Array(o+1);++t<o;)i[t]=e[t];return i[o]=s(n),_apply(a,this,i)}}var _overRest=overRest;function constant(e){return function(){return e}}var constant_1=constant,commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var freeGlobal="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,_freeGlobal=freeGlobal,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=_freeGlobal||freeSelf||Function("return this")(),_root=root,Symbol$1=_root.Symbol,_Symbol=Symbol$1,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=_Symbol?_Symbol.toStringTag:void 0;function getRawTag(e){var t=hasOwnProperty.call(e,symToStringTag),r=e[symToStringTag];try{var n=!(e[symToStringTag]=void 0)}catch(e){}var i=nativeObjectToString.call(e);return n&&(t?e[symToStringTag]=r:delete e[symToStringTag]),i}var _getRawTag=getRawTag,objectProto$1=Object.prototype,nativeObjectToString$1=objectProto$1.toString;function objectToString(e){return nativeObjectToString$1.call(e)}var _objectToString=objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag$1=_Symbol?_Symbol.toStringTag:void 0;function baseGetTag(e){return null==e?void 0===e?undefinedTag:nullTag:symToStringTag$1&&symToStringTag$1 in Object(e)?_getRawTag(e):_objectToString(e)}var _baseGetTag=baseGetTag;function isObject(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var isObject_1=isObject,asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(e){if(!isObject_1(e))return!1;var t=_baseGetTag(e);return t==funcTag||t==genTag||t==asyncTag||t==proxyTag}var isFunction_1=isFunction,coreJsData=_root["__core-js_shared__"],_coreJsData=coreJsData,maskSrcKey=(J=/[^.]+$/.exec(_coreJsData&&_coreJsData.keys&&_coreJsData.keys.IE_PROTO||""),J?"Symbol(src)_1."+J:""),J;function isMasked(e){return!!maskSrcKey&&maskSrcKey in e}var _isMasked=isMasked,funcProto=Function.prototype,funcToString=funcProto.toString;function toSource(e){if(null!=e){try{return funcToString.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var _toSource=toSource,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$2=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$1=objectProto$2.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$1).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(e){return!(!isObject_1(e)||_isMasked(e))&&(isFunction_1(e)?reIsNative:reIsHostCtor).test(_toSource(e))}var _baseIsNative=baseIsNative;function getValue(e,t){return null==e?void 0:e[t]}var _getValue=getValue;function getNative(e,t){var r=_getValue(e,t);return _baseIsNative(r)?r:void 0}var _getNative=getNative,defineProperty=function(){try{var e=_getNative(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),_defineProperty=defineProperty,baseSetToString=_defineProperty?function(e,t){return _defineProperty(e,"toString",{configurable:!0,enumerable:!1,value:constant_1(t),writable:!0})}:identity_1,_baseSetToString=baseSetToString,HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(r){var n=0,i=0;return function(){var e=nativeNow(),t=HOT_SPAN-(e-i);if(i=e,0<t){if(++n>=HOT_COUNT)return arguments[0]}else n=0;return r.apply(void 0,arguments)}}var _shortOut=shortOut,setToString=_shortOut(_baseSetToString),_setToString=setToString;function baseRest(e,t){return _setToString(_overRest(e,t,identity_1),e+"")}var _baseRest=baseRest,WeakMap=_getNative(_root,"WeakMap"),_WeakMap=WeakMap,metaMap=_WeakMap&&new _WeakMap,_metaMap=metaMap,baseSetData=_metaMap?function(e,t){return _metaMap.set(e,t),e}:identity_1,_baseSetData=baseSetData,objectCreate=Object.create,baseCreate=function(){function r(){}return function(e){if(!isObject_1(e))return{};if(objectCreate)return objectCreate(e);r.prototype=e;var t=new r;return r.prototype=void 0,t}}(),_baseCreate=baseCreate;function createCtor(n){return function(){var e=arguments;switch(e.length){case 0:return new n;case 1:return new n(e[0]);case 2:return new n(e[0],e[1]);case 3:return new n(e[0],e[1],e[2]);case 4:return new n(e[0],e[1],e[2],e[3]);case 5:return new n(e[0],e[1],e[2],e[3],e[4]);case 6:return new n(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new n(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var t=_baseCreate(n.prototype),r=n.apply(t,e);return isObject_1(r)?r:t}}var _createCtor=createCtor,WRAP_BIND_FLAG=1;function createBind(t,e,r){var n=e&WRAP_BIND_FLAG,i=_createCtor(t);return function e(){return(this&&this!==_root&&this instanceof e?i:t).apply(n?r:this,arguments)}}var _createBind=createBind,nativeMax$1=Math.max;function composeArgs(e,t,r,n){for(var i=-1,a=e.length,o=r.length,s=-1,c=t.length,l=nativeMax$1(a-o,0),u=Array(c+l),h=!n;++s<c;)u[s]=t[s];for(;++i<o;)(h||i<a)&&(u[r[i]]=e[i]);for(;l--;)u[s++]=e[i++];return u}var _composeArgs=composeArgs,nativeMax$2=Math.max;function composeArgsRight(e,t,r,n){for(var i=-1,a=e.length,o=-1,s=r.length,c=-1,l=t.length,u=nativeMax$2(a-s,0),h=Array(u+l),f=!n;++i<u;)h[i]=e[i];for(var d=i;++c<l;)h[d+c]=t[c];for(;++o<s;)(f||i<a)&&(h[d+r[o]]=e[i++]);return h}var _composeArgsRight=composeArgsRight;function countHolders(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}var _countHolders=countHolders;function baseLodash(){}var _baseLodash=baseLodash,MAX_ARRAY_LENGTH=4294967295;function LazyWrapper(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=MAX_ARRAY_LENGTH,this.__views__=[]}LazyWrapper.prototype=_baseCreate(_baseLodash.prototype),LazyWrapper.prototype.constructor=LazyWrapper;var _LazyWrapper=LazyWrapper;function noop(){}var noop_1=noop,getData=_metaMap?function(e){return _metaMap.get(e)}:noop_1,_getData=getData,realNames={},_realNames=realNames,objectProto$3=Object.prototype,hasOwnProperty$2=objectProto$3.hasOwnProperty;function getFuncName(e){for(var t=e.name+"",r=_realNames[t],n=hasOwnProperty$2.call(_realNames,t)?r.length:0;n--;){var i=r[n],a=i.func;if(null==a||a==e)return i.name}return t}var _getFuncName=getFuncName;function LodashWrapper(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}LodashWrapper.prototype=_baseCreate(_baseLodash.prototype),LodashWrapper.prototype.constructor=LodashWrapper;var _LodashWrapper=LodashWrapper,isArray=Array.isArray,isArray_1=isArray;function isObjectLike(e){return null!=e&&"object"==typeof e}var isObjectLike_1=isObjectLike;function copyArray(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var _copyArray=copyArray;function wrapperClone(e){if(e instanceof _LazyWrapper)return e.clone();var t=new _LodashWrapper(e.__wrapped__,e.__chain__);return t.__actions__=_copyArray(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var _wrapperClone=wrapperClone,objectProto$4=Object.prototype,hasOwnProperty$3=objectProto$4.hasOwnProperty;function lodash(e){if(isObjectLike_1(e)&&!isArray_1(e)&&!(e instanceof _LazyWrapper)){if(e instanceof _LodashWrapper)return e;if(hasOwnProperty$3.call(e,"__wrapped__"))return _wrapperClone(e)}return new _LodashWrapper(e)}lodash.prototype=_baseLodash.prototype,lodash.prototype.constructor=lodash;var wrapperLodash=lodash;function isLaziable(e){var t=_getFuncName(e),r=wrapperLodash[t];if("function"!=typeof r||!(t in _LazyWrapper.prototype))return!1;if(e===r)return!0;var n=_getData(r);return!!n&&e===n[0]}var _isLaziable=isLaziable,setData=_shortOut(_baseSetData),_setData=setData,reWrapDetails=/\{\n\/\* \[wrapped with (.+)\] \*/,reSplitDetails=/,? & /;function getWrapDetails(e){var t=e.match(reWrapDetails);return t?t[1].split(reSplitDetails):[]}var _getWrapDetails=getWrapDetails,reWrapComment=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function insertWrapDetails(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(1<r?"& ":"")+t[n],t=t.join(2<r?", ":" "),e.replace(reWrapComment,"{\n/* [wrapped with "+t+"] */\n")}var _insertWrapDetails=insertWrapDetails;function arrayEach(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}var _arrayEach=arrayEach;function baseFindIndex(e,t,r,n){for(var i=e.length,a=r+(n?1:-1);n?a--:++a<i;)if(t(e[a],a,e))return a;return-1}var _baseFindIndex=baseFindIndex;function baseIsNaN(e){return e!=e}var _baseIsNaN=baseIsNaN;function strictIndexOf(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}var _strictIndexOf=strictIndexOf;function baseIndexOf(e,t,r){return t==t?_strictIndexOf(e,t,r):_baseFindIndex(e,_baseIsNaN,r)}var _baseIndexOf=baseIndexOf;function arrayIncludes(e,t){return!!(null==e?0:e.length)&&-1<_baseIndexOf(e,t,0)}var _arrayIncludes=arrayIncludes,WRAP_BIND_FLAG$1=1,WRAP_BIND_KEY_FLAG=2,WRAP_CURRY_FLAG=8,WRAP_CURRY_RIGHT_FLAG=16,WRAP_PARTIAL_FLAG=32,WRAP_PARTIAL_RIGHT_FLAG=64,WRAP_ARY_FLAG=128,WRAP_REARG_FLAG=256,WRAP_FLIP_FLAG=512,wrapFlags=[["ary",WRAP_ARY_FLAG],["bind",WRAP_BIND_FLAG$1],["bindKey",WRAP_BIND_KEY_FLAG],["curry",WRAP_CURRY_FLAG],["curryRight",WRAP_CURRY_RIGHT_FLAG],["flip",WRAP_FLIP_FLAG],["partial",WRAP_PARTIAL_FLAG],["partialRight",WRAP_PARTIAL_RIGHT_FLAG],["rearg",WRAP_REARG_FLAG]];function updateWrapDetails(r,n){return _arrayEach(wrapFlags,function(e){var t="_."+e[0];n&e[1]&&!_arrayIncludes(r,t)&&r.push(t)}),r.sort()}var _updateWrapDetails=updateWrapDetails;function setWrapToString(e,t,r){var n=t+"";return _setToString(e,_insertWrapDetails(n,_updateWrapDetails(_getWrapDetails(n),r)))}var _setWrapToString=setWrapToString,WRAP_BIND_FLAG$2=1,WRAP_BIND_KEY_FLAG$1=2,WRAP_CURRY_BOUND_FLAG=4,WRAP_CURRY_FLAG$1=8,WRAP_PARTIAL_FLAG$1=32,WRAP_PARTIAL_RIGHT_FLAG$1=64;function createRecurry(e,t,r,n,i,a,o,s,c,l){var u=t&WRAP_CURRY_FLAG$1;t|=u?WRAP_PARTIAL_FLAG$1:WRAP_PARTIAL_RIGHT_FLAG$1,(t&=~(u?WRAP_PARTIAL_RIGHT_FLAG$1:WRAP_PARTIAL_FLAG$1))&WRAP_CURRY_BOUND_FLAG||(t&=~(WRAP_BIND_FLAG$2|WRAP_BIND_KEY_FLAG$1));var h=[e,t,i,u?a:void 0,u?o:void 0,u?void 0:a,u?void 0:o,s,c,l],f=r.apply(void 0,h);return _isLaziable(e)&&_setData(f,h),f.placeholder=n,_setWrapToString(f,e,t)}var _createRecurry=createRecurry;function getHolder(e){return e.placeholder}var _getHolder=getHolder,MAX_SAFE_INTEGER=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(e,t){var r=typeof e;return!!(t=null==t?MAX_SAFE_INTEGER:t)&&("number"==r||"symbol"!=r&&reIsUint.test(e))&&-1<e&&e%1==0&&e<t}var _isIndex=isIndex,nativeMin=Math.min;function reorder(e,t){for(var r=e.length,n=nativeMin(t.length,r),i=_copyArray(e);n--;){var a=t[n];e[n]=_isIndex(a,r)?i[a]:void 0}return e}var _reorder=reorder,PLACEHOLDER="__lodash_placeholder__";function replaceHolders(e,t){for(var r=-1,n=e.length,i=0,a=[];++r<n;){var o=e[r];o!==t&&o!==PLACEHOLDER||(e[r]=PLACEHOLDER,a[i++]=r)}return a}var _replaceHolders=replaceHolders,WRAP_BIND_FLAG$3=1,WRAP_BIND_KEY_FLAG$2=2,WRAP_CURRY_FLAG$2=8,WRAP_CURRY_RIGHT_FLAG$1=16,WRAP_ARY_FLAG$1=128,WRAP_FLIP_FLAG$1=512;function createHybrid(l,u,h,f,d,g,p,b,y,m){var v=u&WRAP_ARY_FLAG$1,I=u&WRAP_BIND_FLAG$3,w=u&WRAP_BIND_KEY_FLAG$2,C=u&(WRAP_CURRY_FLAG$2|WRAP_CURRY_RIGHT_FLAG$1),A=u&WRAP_FLIP_FLAG$1,S=w?void 0:_createCtor(l);return function e(){for(var t=arguments.length,r=Array(t),n=t;n--;)r[n]=arguments[n];if(C)var i=_getHolder(e),a=_countHolders(r,i);if(f&&(r=_composeArgs(r,f,d,C)),g&&(r=_composeArgsRight(r,g,p,C)),t-=a,C&&t<m){var o=_replaceHolders(r,i);return _createRecurry(l,u,createHybrid,e.placeholder,h,r,o,b,y,m-t)}var s=I?h:this,c=w?s[l]:l;return t=r.length,b?r=_reorder(r,b):A&&1<t&&r.reverse(),v&&y<t&&(r.length=y),this&&this!==_root&&this instanceof e&&(c=S||_createCtor(c)),c.apply(s,r)}}var _createHybrid=createHybrid;function createCurry(o,s,c){var l=_createCtor(o);return function e(){for(var t=arguments.length,r=Array(t),n=t,i=_getHolder(e);n--;)r[n]=arguments[n];var a=t<3&&r[0]!==i&&r[t-1]!==i?[]:_replaceHolders(r,i);return(t-=a.length)<c?_createRecurry(o,s,_createHybrid,e.placeholder,void 0,r,a,void 0,void 0,c-t):_apply(this&&this!==_root&&this instanceof e?l:o,this,r)}}var _createCurry=createCurry,WRAP_BIND_FLAG$4=1;function createPartial(s,e,c,l){var u=e&WRAP_BIND_FLAG$4,h=_createCtor(s);return function e(){for(var t=-1,r=arguments.length,n=-1,i=l.length,a=Array(i+r),o=this&&this!==_root&&this instanceof e?h:s;++n<i;)a[n]=l[n];for(;r--;)a[n++]=arguments[++t];return _apply(o,u?c:this,a)}}var _createPartial=createPartial,PLACEHOLDER$1="__lodash_placeholder__",WRAP_BIND_FLAG$5=1,WRAP_BIND_KEY_FLAG$3=2,WRAP_CURRY_BOUND_FLAG$1=4,WRAP_CURRY_FLAG$3=8,WRAP_ARY_FLAG$2=128,WRAP_REARG_FLAG$1=256,nativeMin$1=Math.min;function mergeData(e,t){var r=e[1],n=t[1],i=r|n,a=i<(WRAP_BIND_FLAG$5|WRAP_BIND_KEY_FLAG$3|WRAP_ARY_FLAG$2),o=n==WRAP_ARY_FLAG$2&&r==WRAP_CURRY_FLAG$3||n==WRAP_ARY_FLAG$2&&r==WRAP_REARG_FLAG$1&&e[7].length<=t[8]||n==(WRAP_ARY_FLAG$2|WRAP_REARG_FLAG$1)&&t[7].length<=t[8]&&r==WRAP_CURRY_FLAG$3;if(!a&&!o)return e;n&WRAP_BIND_FLAG$5&&(e[2]=t[2],i|=r&WRAP_BIND_FLAG$5?0:WRAP_CURRY_BOUND_FLAG$1);var s=t[3];if(s){var c=e[3];e[3]=c?_composeArgs(c,s,t[4]):s,e[4]=c?_replaceHolders(e[3],PLACEHOLDER$1):t[4]}return(s=t[5])&&(c=e[5],e[5]=c?_composeArgsRight(c,s,t[6]):s,e[6]=c?_replaceHolders(e[5],PLACEHOLDER$1):t[6]),(s=t[7])&&(e[7]=s),n&WRAP_ARY_FLAG$2&&(e[8]=null==e[8]?t[8]:nativeMin$1(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e}var _mergeData=mergeData,symbolTag="[object Symbol]";function isSymbol(e){return"symbol"==typeof e||isObjectLike_1(e)&&_baseGetTag(e)==symbolTag}var isSymbol_1=isSymbol,NAN=NaN,reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(e){if("number"==typeof e)return e;if(isSymbol_1(e))return NAN;if(isObject_1(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=isObject_1(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(reTrim,"");var r=reIsBinary.test(e);return r||reIsOctal.test(e)?freeParseInt(e.slice(2),r?2:8):reIsBadHex.test(e)?NAN:+e}var toNumber_1=toNumber,INFINITY=1/0,MAX_INTEGER=17976931348623157e292;function toFinite(e){return e?(e=toNumber_1(e))===INFINITY||e===-INFINITY?(e<0?-1:1)*MAX_INTEGER:e==e?e:0:0===e?e:0}var toFinite_1=toFinite;function toInteger(e){var t=toFinite_1(e),r=t%1;return t==t?r?t-r:t:0}var toInteger_1=toInteger,FUNC_ERROR_TEXT="Expected a function",WRAP_BIND_FLAG$6=1,WRAP_BIND_KEY_FLAG$4=2,WRAP_CURRY_FLAG$4=8,WRAP_CURRY_RIGHT_FLAG$2=16,WRAP_PARTIAL_FLAG$2=32,WRAP_PARTIAL_RIGHT_FLAG$2=64,nativeMax$3=Math.max;function createWrap(e,t,r,n,i,a,o,s){var c=t&WRAP_BIND_KEY_FLAG$4;if(!c&&"function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT);var l=n?n.length:0;if(l||(t&=~(WRAP_PARTIAL_FLAG$2|WRAP_PARTIAL_RIGHT_FLAG$2),n=i=void 0),o=void 0===o?o:nativeMax$3(toInteger_1(o),0),s=void 0===s?s:toInteger_1(s),l-=i?i.length:0,t&WRAP_PARTIAL_RIGHT_FLAG$2){var u=n,h=i;n=i=void 0}var f=c?void 0:_getData(e),d=[e,t,r,n,i,u,h,a,o,s];if(f&&_mergeData(d,f),e=d[0],t=d[1],r=d[2],n=d[3],i=d[4],!(s=d[9]=void 0===d[9]?c?0:e.length:nativeMax$3(d[9]-l,0))&&t&(WRAP_CURRY_FLAG$4|WRAP_CURRY_RIGHT_FLAG$2)&&(t&=~(WRAP_CURRY_FLAG$4|WRAP_CURRY_RIGHT_FLAG$2)),t&&t!=WRAP_BIND_FLAG$6)g=t==WRAP_CURRY_FLAG$4||t==WRAP_CURRY_RIGHT_FLAG$2?_createCurry(e,t,s):t!=WRAP_PARTIAL_FLAG$2&&t!=(WRAP_BIND_FLAG$6|WRAP_PARTIAL_FLAG$2)||i.length?_createHybrid.apply(void 0,d):_createPartial(e,t,r,n);else var g=_createBind(e,t,r);return _setWrapToString((f?_baseSetData:_setData)(g,d),e,t)}var _createWrap=createWrap,WRAP_BIND_FLAG$7=1,WRAP_PARTIAL_FLAG$3=32,bind=_baseRest(function(e,t,r){var n=WRAP_BIND_FLAG$7;if(r.length){var i=_replaceHolders(r,_getHolder(bind));n|=WRAP_PARTIAL_FLAG$3}return _createWrap(e,n,t,r,i)});bind.placeholder={};var bind_1=bind;function listCacheClear(){this.__data__=[],this.size=0}var _listCacheClear=listCacheClear;function eq(e,t){return e===t||e!=e&&t!=t}var eq_1=eq;function assocIndexOf(e,t){for(var r=e.length;r--;)if(eq_1(e[r][0],t))return r;return-1}var _assocIndexOf=assocIndexOf,arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(e){var t=this.__data__,r=_assocIndexOf(t,e);return!(r<0)&&(r==t.length-1?t.pop():splice.call(t,r,1),--this.size,!0)}var _listCacheDelete=listCacheDelete;function listCacheGet(e){var t=this.__data__,r=_assocIndexOf(t,e);return r<0?void 0:t[r][1]}var _listCacheGet=listCacheGet;function listCacheHas(e){return-1<_assocIndexOf(this.__data__,e)}var _listCacheHas=listCacheHas;function listCacheSet(e,t){var r=this.__data__,n=_assocIndexOf(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var _listCacheSet=listCacheSet;function ListCache(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ListCache.prototype.clear=_listCacheClear,ListCache.prototype.delete=_listCacheDelete,ListCache.prototype.get=_listCacheGet,ListCache.prototype.has=_listCacheHas,ListCache.prototype.set=_listCacheSet;var _ListCache=ListCache;function stackClear(){this.__data__=new _ListCache,this.size=0}var _stackClear=stackClear;function stackDelete(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var _stackDelete=stackDelete;function stackGet(e){return this.__data__.get(e)}var _stackGet=stackGet;function stackHas(e){return this.__data__.has(e)}var _stackHas=stackHas,Map=_getNative(_root,"Map"),_Map=Map,nativeCreate=_getNative(Object,"create"),_nativeCreate=nativeCreate;function hashClear(){this.__data__=_nativeCreate?_nativeCreate(null):{},this.size=0}var _hashClear=hashClear;function hashDelete(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var _hashDelete=hashDelete,HASH_UNDEFINED="__lodash_hash_undefined__",objectProto$5=Object.prototype,hasOwnProperty$4=objectProto$5.hasOwnProperty;function hashGet(e){var t=this.__data__;if(_nativeCreate){var r=t[e];return r===HASH_UNDEFINED?void 0:r}return hasOwnProperty$4.call(t,e)?t[e]:void 0}var _hashGet=hashGet,objectProto$6=Object.prototype,hasOwnProperty$5=objectProto$6.hasOwnProperty;function hashHas(e){var t=this.__data__;return _nativeCreate?void 0!==t[e]:hasOwnProperty$5.call(t,e)}var _hashHas=hashHas,HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=_nativeCreate&&void 0===t?HASH_UNDEFINED$1:t,this}var _hashSet=hashSet;function Hash(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Hash.prototype.clear=_hashClear,Hash.prototype.delete=_hashDelete,Hash.prototype.get=_hashGet,Hash.prototype.has=_hashHas,Hash.prototype.set=_hashSet;var _Hash=Hash;function mapCacheClear(){this.size=0,this.__data__={hash:new _Hash,map:new(_Map||_ListCache),string:new _Hash}}var _mapCacheClear=mapCacheClear;function isKeyable(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}var _isKeyable=isKeyable;function getMapData(e,t){var r=e.__data__;return _isKeyable(t)?r["string"==typeof t?"string":"hash"]:r.map}var _getMapData=getMapData;function mapCacheDelete(e){var t=_getMapData(this,e).delete(e);return this.size-=t?1:0,t}var _mapCacheDelete=mapCacheDelete;function mapCacheGet(e){return _getMapData(this,e).get(e)}var _mapCacheGet=mapCacheGet;function mapCacheHas(e){return _getMapData(this,e).has(e)}var _mapCacheHas=mapCacheHas;function mapCacheSet(e,t){var r=_getMapData(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var _mapCacheSet=mapCacheSet;function MapCache(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}MapCache.prototype.clear=_mapCacheClear,MapCache.prototype.delete=_mapCacheDelete,MapCache.prototype.get=_mapCacheGet,MapCache.prototype.has=_mapCacheHas,MapCache.prototype.set=_mapCacheSet;var _MapCache=MapCache,LARGE_ARRAY_SIZE=200;function stackSet(e,t){var r=this.__data__;if(r instanceof _ListCache){var n=r.__data__;if(!_Map||n.length<LARGE_ARRAY_SIZE-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new _MapCache(n)}return r.set(e,t),this.size=r.size,this}var _stackSet=stackSet;function Stack(e){var t=this.__data__=new _ListCache(e);this.size=t.size}Stack.prototype.clear=_stackClear,Stack.prototype.delete=_stackDelete,Stack.prototype.get=_stackGet,Stack.prototype.has=_stackHas,Stack.prototype.set=_stackSet;var _Stack=Stack;function baseAssignValue(e,t,r){"__proto__"==t&&_defineProperty?_defineProperty(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var _baseAssignValue=baseAssignValue;function assignMergeValue(e,t,r){(void 0===r||eq_1(e[t],r))&&(void 0!==r||t in e)||_baseAssignValue(e,t,r)}var _assignMergeValue=assignMergeValue;function createBaseFor(c){return function(e,t,r){for(var n=-1,i=Object(e),a=r(e),o=a.length;o--;){var s=a[c?o:++n];if(!1===t(i[s],s,i))break}return e}}var _createBaseFor=createBaseFor,baseFor=_createBaseFor(),_baseFor=baseFor,_cloneBuffer=createCommonjsModule(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,i=n&&n.exports===r?_root.Buffer:void 0,a=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=a?a(r):new e.constructor(r);return e.copy(n),n}}),Uint8Array$1=_root.Uint8Array,_Uint8Array=Uint8Array$1;function cloneArrayBuffer(e){var t=new e.constructor(e.byteLength);return new _Uint8Array(t).set(new _Uint8Array(e)),t}var _cloneArrayBuffer=cloneArrayBuffer;function cloneTypedArray(e,t){var r=t?_cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var _cloneTypedArray=cloneTypedArray;function overArg(t,r){return function(e){return t(r(e))}}var _overArg=overArg,getPrototype=_overArg(Object.getPrototypeOf,Object),_getPrototype=getPrototype,objectProto$7=Object.prototype;function isPrototype(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||objectProto$7)}var _isPrototype=isPrototype;function initCloneObject(e){return"function"!=typeof e.constructor||_isPrototype(e)?{}:_baseCreate(_getPrototype(e))}var _initCloneObject=initCloneObject,argsTag="[object Arguments]";function baseIsArguments(e){return isObjectLike_1(e)&&_baseGetTag(e)==argsTag}var _baseIsArguments=baseIsArguments,objectProto$8=Object.prototype,hasOwnProperty$6=objectProto$8.hasOwnProperty,propertyIsEnumerable=objectProto$8.propertyIsEnumerable,isArguments=_baseIsArguments(function(){return arguments}())?_baseIsArguments:function(e){return isObjectLike_1(e)&&hasOwnProperty$6.call(e,"callee")&&!propertyIsEnumerable.call(e,"callee")},isArguments_1=isArguments,MAX_SAFE_INTEGER$1=9007199254740991;function isLength(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=MAX_SAFE_INTEGER$1}var isLength_1=isLength;function isArrayLike(e){return null!=e&&isLength_1(e.length)&&!isFunction_1(e)}var isArrayLike_1=isArrayLike;function isArrayLikeObject(e){return isObjectLike_1(e)&&isArrayLike_1(e)}var isArrayLikeObject_1=isArrayLikeObject;function stubFalse(){return!1}var stubFalse_1=stubFalse,isBuffer_1=createCommonjsModule(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,i=n&&n.exports===r?_root.Buffer:void 0,a=(i?i.isBuffer:void 0)||stubFalse_1;e.exports=a}),objectTag="[object Object]",funcProto$2=Function.prototype,objectProto$9=Object.prototype,funcToString$2=funcProto$2.toString,hasOwnProperty$7=objectProto$9.hasOwnProperty,objectCtorString=funcToString$2.call(Object);function isPlainObject(e){if(!isObjectLike_1(e)||_baseGetTag(e)!=objectTag)return!1;var t=_getPrototype(e);if(null===t)return!0;var r=hasOwnProperty$7.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&funcToString$2.call(r)==objectCtorString}var isPlainObject_1=isPlainObject,argsTag$1="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag$1="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag$1="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};function baseIsTypedArray(e){return isObjectLike_1(e)&&isLength_1(e.length)&&!!typedArrayTags[_baseGetTag(e)]}typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag$1]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag$1]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var _baseIsTypedArray=baseIsTypedArray;function baseUnary(t){return function(e){return t(e)}}var _baseUnary=baseUnary,_nodeUtil=createCommonjsModule(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,i=n&&n.exports===r&&_freeGlobal.process,a=function(){try{return i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=a}),nodeIsTypedArray=_nodeUtil&&_nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?_baseUnary(nodeIsTypedArray):_baseIsTypedArray,isTypedArray_1=isTypedArray;function safeGet(e,t){return"__proto__"==t?void 0:e[t]}var _safeGet=safeGet,objectProto$10=Object.prototype,hasOwnProperty$8=objectProto$10.hasOwnProperty;function assignValue(e,t,r){var n=e[t];hasOwnProperty$8.call(e,t)&&eq_1(n,r)&&(void 0!==r||t in e)||_baseAssignValue(e,t,r)}var _assignValue=assignValue;function copyObject(e,t,r,n){var i=!r;r||(r={});for(var a=-1,o=t.length;++a<o;){var s=t[a],c=n?n(r[s],e[s],s,r,e):void 0;void 0===c&&(c=e[s]),i?_baseAssignValue(r,s,c):_assignValue(r,s,c)}return r}var _copyObject=copyObject;function baseTimes(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var _baseTimes=baseTimes,objectProto$11=Object.prototype,hasOwnProperty$9=objectProto$11.hasOwnProperty;function arrayLikeKeys(e,t){var r=isArray_1(e),n=!r&&isArguments_1(e),i=!r&&!n&&isBuffer_1(e),a=!r&&!n&&!i&&isTypedArray_1(e),o=r||n||i||a,s=o?_baseTimes(e.length,String):[],c=s.length;for(var l in e)!t&&!hasOwnProperty$9.call(e,l)||o&&("length"==l||i&&("offset"==l||"parent"==l)||a&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||_isIndex(l,c))||s.push(l);return s}var _arrayLikeKeys=arrayLikeKeys;function nativeKeysIn(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}var _nativeKeysIn=nativeKeysIn,objectProto$12=Object.prototype,hasOwnProperty$10=objectProto$12.hasOwnProperty;function baseKeysIn(e){if(!isObject_1(e))return _nativeKeysIn(e);var t=_isPrototype(e),r=[];for(var n in e)("constructor"!=n||!t&&hasOwnProperty$10.call(e,n))&&r.push(n);return r}var _baseKeysIn=baseKeysIn;function keysIn(e){return isArrayLike_1(e)?_arrayLikeKeys(e,!0):_baseKeysIn(e)}var keysIn_1=keysIn;function toPlainObject(e){return _copyObject(e,keysIn_1(e))}var toPlainObject_1=toPlainObject;function baseMergeDeep(e,t,r,n,i,a,o){var s=_safeGet(e,r),c=_safeGet(t,r),l=o.get(c);if(l)_assignMergeValue(e,r,l);else{var u=a?a(s,c,r+"",e,t,o):void 0,h=void 0===u;if(h){var f=isArray_1(c),d=!f&&isBuffer_1(c),g=!f&&!d&&isTypedArray_1(c);u=c,f||d||g?u=isArray_1(s)?s:isArrayLikeObject_1(s)?_copyArray(s):d?_cloneBuffer(c,!(h=!1)):g?_cloneTypedArray(c,!(h=!1)):[]:isPlainObject_1(c)||isArguments_1(c)?isArguments_1(u=s)?u=toPlainObject_1(s):(!isObject_1(s)||n&&isFunction_1(s))&&(u=_initCloneObject(c)):h=!1}h&&(o.set(c,u),i(u,c,n,a,o),o.delete(c)),_assignMergeValue(e,r,u)}}var _baseMergeDeep=baseMergeDeep;function baseMerge(n,i,a,o,s){n!==i&&_baseFor(i,function(e,t){if(isObject_1(e))s||(s=new _Stack),_baseMergeDeep(n,i,t,a,baseMerge,o,s);else{var r=o?o(_safeGet(n,t),e,t+"",n,i,s):void 0;void 0===r&&(r=e),_assignMergeValue(n,t,r)}},keysIn_1)}var _baseMerge=baseMerge;function isIterateeCall(e,t,r){if(!isObject_1(r))return!1;var n=typeof t;return!!("number"==n?isArrayLike_1(r)&&_isIndex(t,r.length):"string"==n&&t in r)&&eq_1(r[t],e)}var _isIterateeCall=isIterateeCall;function createAssigner(s){return _baseRest(function(e,t){var r=-1,n=t.length,i=1<n?t[n-1]:void 0,a=2<n?t[2]:void 0;for(i=3<s.length&&"function"==typeof i?(n--,i):void 0,a&&_isIterateeCall(t[0],t[1],a)&&(i=n<3?void 0:i,n=1),e=Object(e);++r<n;){var o=t[r];o&&s(e,o,r,i)}return e})}var _createAssigner=createAssigner,merge=_createAssigner(function(e,t,r){_baseMerge(e,t,r)}),merge_1=merge;function baseExtremum(e,t,r){for(var n=-1,i=e.length;++n<i;){var a=e[n],o=t(a);if(null!=o&&(void 0===s?o==o&&!isSymbol_1(o):r(o,s)))var s=o,c=a}return c}var _baseExtremum=baseExtremum;function baseGt(e,t){return t<e}var _baseGt=baseGt;function max(e){return e&&e.length?_baseExtremum(e,identity_1,_baseGt):void 0}var max_1=max,reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(e,t){if(isArray_1(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!isSymbol_1(e))||(reIsPlainProp.test(e)||!reIsDeepProp.test(e)||null!=t&&e in Object(t))}var _isKey=isKey,FUNC_ERROR_TEXT$1="Expected a function";function memoize(i,a){if("function"!=typeof i||null!=a&&"function"!=typeof a)throw new TypeError(FUNC_ERROR_TEXT$1);var o=function(){var e=arguments,t=a?a.apply(this,e):e[0],r=o.cache;if(r.has(t))return r.get(t);var n=i.apply(this,e);return o.cache=r.set(t,n)||r,n};return o.cache=new(memoize.Cache||_MapCache),o}memoize.Cache=_MapCache;var memoize_1=memoize,MAX_MEMOIZE_SIZE=500;function memoizeCapped(e){var t=memoize_1(e,function(e){return r.size===MAX_MEMOIZE_SIZE&&r.clear(),e}),r=t.cache;return t}var _memoizeCapped=memoizeCapped,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=_memoizeCapped(function(e){var i=[];return 46===e.charCodeAt(0)&&i.push(""),e.replace(rePropName,function(e,t,r,n){i.push(r?n.replace(reEscapeChar,"$1"):t||e)}),i}),_stringToPath=stringToPath;function arrayMap(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var _arrayMap=arrayMap,INFINITY$1=1/0,symbolProto=_Symbol?_Symbol.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;function baseToString(e){if("string"==typeof e)return e;if(isArray_1(e))return _arrayMap(e,baseToString)+"";if(isSymbol_1(e))return symbolToString?symbolToString.call(e):"";var t=e+"";return"0"==t&&1/e==-INFINITY$1?"-0":t}var _baseToString=baseToString;function toString(e){return null==e?"":_baseToString(e)}var toString_1=toString;function castPath(e,t){return isArray_1(e)?e:_isKey(e,t)?[e]:_stringToPath(toString_1(e))}var _castPath=castPath,INFINITY$2=1/0;function toKey(e){if("string"==typeof e||isSymbol_1(e))return e;var t=e+"";return"0"==t&&1/e==-INFINITY$2?"-0":t}var _toKey=toKey;function baseGet(e,t){for(var r=0,n=(t=_castPath(t,e)).length;null!=e&&r<n;)e=e[_toKey(t[r++])];return r&&r==n?e:void 0}var _baseGet=baseGet;function get(e,t,r){var n=null==e?void 0:_baseGet(e,t);return void 0===n?r:n}var get_1=get,now=function(){return _root.Date.now()},now_1=now,FUNC_ERROR_TEXT$2="Expected a function",nativeMax$4=Math.max,nativeMin$2=Math.min;function debounce(n,i,e){var a,o,s,c,l,u,h=0,f=!1,d=!1,t=!0;if("function"!=typeof n)throw new TypeError(FUNC_ERROR_TEXT$2);function g(e){var t=a,r=o;return a=o=void 0,h=e,c=n.apply(r,t)}function p(e){var t=e-u;return void 0===u||i<=t||t<0||d&&s<=e-h}function b(){var e,t,r=now_1();if(p(r))return y(r);l=setTimeout(b,(t=i-((e=r)-u),d?nativeMin$2(t,s-(e-h)):t))}function y(e){return l=void 0,t&&a?g(e):(a=o=void 0,c)}function r(){var e,t=now_1(),r=p(t);if(a=arguments,o=this,u=t,r){if(void 0===l)return h=e=u,l=setTimeout(b,i),f?g(e):c;if(d)return l=setTimeout(b,i),g(u)}return void 0===l&&(l=setTimeout(b,i)),c}return i=toNumber_1(i)||0,isObject_1(e)&&(f=!!e.leading,s=(d="maxWait"in e)?nativeMax$4(toNumber_1(e.maxWait)||0,i):s,t="trailing"in e?!!e.trailing:t),r.cancel=function(){void 0!==l&&clearTimeout(l),a=u=o=l=void(h=0)},r.flush=function(){return void 0===l?c:y(now_1())},r}var debounce_1=debounce,FUNC_ERROR_TEXT$3="Expected a function";function throttle(e,t,r){var n=!0,i=!0;if("function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT$3);return isObject_1(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),debounce_1(e,t,{leading:n,maxWait:t,trailing:i})}var throttle_1=throttle;function baseSlice(e,t,r){var n=-1,i=e.length;t<0&&(t=i<-t?0:i+t),(r=i<r?i:r)<0&&(r+=i),i=r<t?0:r-t>>>0,t>>>=0;for(var a=Array(i);++n<i;)a[n]=e[n+t];return a}var _baseSlice=baseSlice;function castSlice(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&n<=r?e:_baseSlice(e,t,r)}var _castSlice=castSlice;function charsEndIndex(e,t){for(var r=e.length;r--&&-1<_baseIndexOf(t,e[r],0););return r}var _charsEndIndex=charsEndIndex;function charsStartIndex(e,t){for(var r=-1,n=e.length;++r<n&&-1<_baseIndexOf(t,e[r],0););return r}var _charsStartIndex=charsStartIndex;function asciiToArray(e){return e.split("")}var _asciiToArray=asciiToArray,rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsVarRange="\\ufe0e\\ufe0f",rsZWJ="\\u200d",reHasUnicode=RegExp("["+rsZWJ+rsAstralRange+rsComboRange+rsVarRange+"]");function hasUnicode(e){return reHasUnicode.test(e)}var _hasUnicode=hasUnicode,rsAstralRange$1="\\ud800-\\udfff",rsComboMarksRange$1="\\u0300-\\u036f",reComboHalfMarksRange$1="\\ufe20-\\ufe2f",rsComboSymbolsRange$1="\\u20d0-\\u20ff",rsComboRange$1=rsComboMarksRange$1+reComboHalfMarksRange$1+rsComboSymbolsRange$1,rsVarRange$1="\\ufe0e\\ufe0f",rsAstral="["+rsAstralRange$1+"]",rsCombo="["+rsComboRange$1+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange$1+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ$1="\\u200d",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange$1+"]?",rsOptJoin="(?:"+rsZWJ$1+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")",reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g");function unicodeToArray(e){return e.match(reUnicode)||[]}var _unicodeToArray=unicodeToArray;function stringToArray(e){return _hasUnicode(e)?_unicodeToArray(e):_asciiToArray(e)}var _stringToArray=stringToArray,reTrim$1=/^\s+|\s+$/g;function trim(e,t,r){if((e=toString_1(e))&&(r||void 0===t))return e.replace(reTrim$1,"");if(!e||!(t=_baseToString(t)))return e;var n=_stringToArray(e),i=_stringToArray(t),a=_charsStartIndex(n,i),o=_charsEndIndex(n,i)+1;return _castSlice(n,a,o).join("")}var trim_1=trim,nativeKeys=_overArg(Object.keys,Object),_nativeKeys=nativeKeys,objectProto$13=Object.prototype,hasOwnProperty$11=objectProto$13.hasOwnProperty;function baseKeys(e){if(!_isPrototype(e))return _nativeKeys(e);var t=[];for(var r in Object(e))hasOwnProperty$11.call(e,r)&&"constructor"!=r&&t.push(r);return t}var _baseKeys=baseKeys;function keys(e){return isArrayLike_1(e)?_arrayLikeKeys(e):_baseKeys(e)}var keys_1=keys;function baseForOwn(e,t){return e&&_baseFor(e,t,keys_1)}var _baseForOwn=baseForOwn;function createBaseEach(a,o){return function(e,t){if(null==e)return e;if(!isArrayLike_1(e))return a(e,t);for(var r=e.length,n=o?r:-1,i=Object(e);(o?n--:++n<r)&&!1!==t(i[n],n,i););return e}}var _createBaseEach=createBaseEach,baseEach=_createBaseEach(_baseForOwn),_baseEach=baseEach;function castFunction(e){return"function"==typeof e?e:identity_1}var _castFunction=castFunction;function forEach(e,t){return(isArray_1(e)?_arrayEach:_baseEach)(e,_castFunction(t))}var forEach_1=forEach,assignIn=_createAssigner(function(e,t){_copyObject(t,keysIn_1(t),e)}),assignIn_1=assignIn,extend=assignIn_1,DataView$1=_getNative(_root,"DataView"),_DataView=DataView$1,Promise$1=_getNative(_root,"Promise"),_Promise=Promise$1,Set=_getNative(_root,"Set"),_Set=Set,mapTag$1="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag$1="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$1="[object DataView]",dataViewCtorString=_toSource(_DataView),mapCtorString=_toSource(_Map),promiseCtorString=_toSource(_Promise),setCtorString=_toSource(_Set),weakMapCtorString=_toSource(_WeakMap),getTag=_baseGetTag;(_DataView&&getTag(new _DataView(new ArrayBuffer(1)))!=dataViewTag$1||_Map&&getTag(new _Map)!=mapTag$1||_Promise&&getTag(_Promise.resolve())!=promiseTag||_Set&&getTag(new _Set)!=setTag$1||_WeakMap&&getTag(new _WeakMap)!=weakMapTag$1)&&(getTag=function(e){var t=_baseGetTag(e),r=t==objectTag$2?e.constructor:void 0,n=r?_toSource(r):"";if(n)switch(n){case dataViewCtorString:return dataViewTag$1;case mapCtorString:return mapTag$1;case promiseCtorString:return promiseTag;case setCtorString:return setTag$1;case weakMapCtorString:return weakMapTag$1}return t});var _getTag=getTag,stringTag$1="[object String]";function isString(e){return"string"==typeof e||!isArray_1(e)&&isObjectLike_1(e)&&_baseGetTag(e)==stringTag$1}var isString_1=isString;function iteratorToArray(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}var _iteratorToArray=iteratorToArray;function mapToArray(e){var r=-1,n=Array(e.size);return e.forEach(function(e,t){n[++r]=[t,e]}),n}var _mapToArray=mapToArray;function setToArray(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}var _setToArray=setToArray;function baseValues(t,e){return _arrayMap(e,function(e){return t[e]})}var _baseValues=baseValues;function values(e){return null==e?[]:_baseValues(e,keys_1(e))}var values_1=values,mapTag$2="[object Map]",setTag$2="[object Set]",symIterator=_Symbol?_Symbol.iterator:void 0;function toArray(e){if(!e)return[];if(isArrayLike_1(e))return isString_1(e)?_stringToArray(e):_copyArray(e);if(symIterator&&e[symIterator])return _iteratorToArray(e[symIterator]());var t=_getTag(e);return(t==mapTag$2?_mapToArray:t==setTag$2?_setToArray:values_1)(e)}var toArray_1=toArray,mapTag$3="[object Map]",setTag$3="[object Set]",objectProto$14=Object.prototype,hasOwnProperty$12=objectProto$14.hasOwnProperty;function isEmpty(e){if(null==e)return!0;if(isArrayLike_1(e)&&(isArray_1(e)||"string"==typeof e||"function"==typeof e.splice||isBuffer_1(e)||isTypedArray_1(e)||isArguments_1(e)))return!e.length;var t=_getTag(e);if(t==mapTag$3||t==setTag$3)return!e.size;if(_isPrototype(e))return!_baseKeys(e).length;for(var r in e)if(hasOwnProperty$12.call(e,r))return!1;return!0}var isEmpty_1=isEmpty,dateTag$1="[object Date]";function baseIsDate(e){return isObjectLike_1(e)&&_baseGetTag(e)==dateTag$1}var _baseIsDate=baseIsDate,nodeIsDate=_nodeUtil&&_nodeUtil.isDate,isDate=nodeIsDate?_baseUnary(nodeIsDate):_baseIsDate,isDate_1=isDate,numberTag$1="[object Number]";function isNumber(e){return"number"==typeof e||isObjectLike_1(e)&&_baseGetTag(e)==numberTag$1}var isNumber_1=isNumber;function isNil(e){return null==e}var isNil_1=isNil;function isElement(e){return isObjectLike_1(e)&&1===e.nodeType&&!isPlainObject_1(e)}var isElement_1=isElement,objectProto$15=Object.prototype,hasOwnProperty$13=objectProto$15.hasOwnProperty;function baseHas(e,t){return null!=e&&hasOwnProperty$13.call(e,t)}var _baseHas=baseHas;function hasPath(e,t,r){for(var n=-1,i=(t=_castPath(t,e)).length,a=!1;++n<i;){var o=_toKey(t[n]);if(!(a=null!=e&&r(e,o)))break;e=e[o]}return a||++n!=i?a:!!(i=null==e?0:e.length)&&isLength_1(i)&&_isIndex(o,i)&&(isArray_1(e)||isArguments_1(e))}var _hasPath=hasPath;function has(e,t){return null!=e&&_hasPath(e,t,_baseHas)}var has_1=has,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),defineProperty$2=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},objectWithoutProperties=function(e,t){var r={};for(var n in e)0<=t.indexOf(n)||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r},_={max:max_1,merge:merge_1,get:get_1,throttle:throttle_1,trim:trim_1,bind:bind_1,each:forEach_1,ext:merge_1,extend:extend,isArray:isArray_1,isFunction:isFunction_1,isObject:isObject_1,isArguments:isArguments_1,toArray:toArray_1,values:values_1,identity:identity_1,isEmpty:isEmpty_1,isEmptyObject:isEmpty_1,isString:isString_1,isDate:isDate_1,isNumber:isNumber_1,isElement:isElement_1,isNil:isNil_1,debounce:debounce_1,has:has_1},ArrayProto=Array.prototype,nativeIndexOf=ArrayProto.indexOf,breaker={},lm;_.bind_instance_methods=function(e){for(var t in e)"function"==typeof e[t]&&(e[t]=_.bind(e[t],e))},_.isDefined=function(e){return!_.isUndefined(e)},_.isUndefined=function(e){return null===e||(void 0===e?"undefined":_typeof(e))===constants.symbols.UNDEFINED},_.include=function(e,t){var r=!1;return null===e?r:nativeIndexOf&&e.indexOf===nativeIndexOf?-1!=e.indexOf(t):(_.each(e,function(e){if(r||(r=e===t))return breaker}),r)},_.includes=function(e,t){return-1!==e.indexOf(t)},_.timestamp=function(){return Date.now=Date.now||function(){return+new Date},Date.now()},_.now=_.timestamp,_.formatDate=function(e){function t(e){return e<10?"0"+e:e}return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())},_.strip_empty_properties=function(e){var r={};return _.each(e,function(e,t){_.isString(e)&&0<e.length&&(r[t]=e)}),r},_.UUID=(lm=function(){for(var e=1*new Date,t=0;e==1*new Date;)t++;return e.toString(16)+t.toString(16)},function(){var e=(screen.height*screen.width).toString(16);return lm()+"-"+Math.random().toString(16).replace(".","")+"-"+function(){var e,t,r=windowNavigator.userAgent,i=[],n=0;function a(e,t){var r,n=0;for(r=0;r<t.length;r++)n|=i[r]<<8*r;return e^n}for(e=0;e<r.length;e++)t=r.charCodeAt(e),i.unshift(255&t),4<=i.length&&(n=a(n,i),i=[]);return 0<i.length&&(n=a(n,i)),n.toString(16)}()+"-"+e+"-"+lm()}),_.isBlockedUA=function(e){return!!/(google web preview|baiduspider|yandexbot|bingbot|googlebot|yahoo! slurp)/i.test(e)&&(logger.warn("Blocked UA Agent:"+e),!0)},_.isBlockedUAComplex=function(e){return!!new RegExp("(googlebot/|Googlebot-Mobile|Googlebot-Image|Google favicon|Mediapartners-Google|bingbot|slurp|java|wget|curl|Commons-HttpClient|Python-urllib|libwww|httpunit|nutch|phpcrawl|msnbot|jyxobot|FAST-WebCrawler|FAST Enterprise Crawler|biglotron|teoma|convera|seekbot|gigablast|exabot|ngbot|ia_archiver|GingerCrawler|webmon |httrack|webcrawler|grub.org|UsineNouvelleCrawler|antibot|netresearchserver|speedy|fluffy|bibnum.bnf|findlink|msrbot|panscient|yacybot|AISearchBot|IOI|ips-agent|tagoobot|MJ12bot|dotbot|woriobot|yanga|buzzbot|mlbot|yandexbot|purebot|Linguee Bot|Voyager|CyberPatrol|voilabot|baiduspider|citeseerxbot|spbot|twengabot|postrank|turnitinbot|scribdbot|page2rss|sitebot|linkdex|Adidxbot|blekkobot|ezooms|dotbot|Mail.RU_Bot|discobot|heritrix|findthatfile|europarchive.org|NerdByNature.Bot|sistrix crawler|ahrefsbot|Aboundex|domaincrawler|wbsearchbot|summify|ccbot|edisterbot|seznambot|ec2linkfinder|gslfbot|aihitbot|intelium_bot|facebookexternalhit|yeti|RetrevoPageAnalyzer|lb-spider|sogou|lssbot|careerbot|wotbox|wocbot|ichiro|DuckDuckBot|lssrocketcrawler|drupact|webcompanycrawler|acoonbot|openindexspider|gnam gnam spider|web-archive-net.com.bot|backlinkcrawler|coccoc|integromedb|content crawler spider|toplistbot|seokicks-robot|it2media-domain-crawler|ip-web-crawler.com|siteexplorer.info|elisabot|proximic|changedetection|blexbot|arabot|WeSEE:Search|niki-bot|CrystalSemanticsBot|rogerbot|360Spider|psbot|InterfaxScanBot|Lipperhey SEO Service|CC Metadata Scaper|g00g1e.net|GrapeshotCrawler|urlappendbot|brainobot|fr-crawler|binlar|SimpleCrawler|Livelapbot|Twitterbot|cXensebot|smtbot|bnf.fr_bot|A6-Indexer|ADmantX|Facebot|Twitterbot|OrangeBot|memorybot|AdvBot|MegaIndex|SemanticScholarBot|ltx71|nerdybot|xovibot|BUbiNG|Qwantify|archive.org_bot|Applebot|TweetmemeBot|crawler4j|findxbot|SemrushBot|yoozBot|lipperhey|y!j-asr|Domain Re-Animator Bot|AddThis)","i").test(windowNavigator.userAgent)&&(logger.warn("Blocked UA Agent Complex:"+e),!0)},_.domReady=function(r){var e,n=[],t=windowDocument,i=t.documentElement,a=i.doScroll,o="DOMContentLoaded",s="addEventListener",c="onreadystatechange",l="readyState",u=(a?/^loaded|^c/:/^loaded|c/).test(t[l]);function h(e){for(u=1,e=n.shift();e;)e(),e=n.shift()}return t[s]&&t[s](o,e=function(){t.removeEventListener(o,e,!1),h()},!1),a&&t.attachEvent(c,e=function(){/^c/.test(t[l])&&(t.detachEvent(c,e),h())}),r=a?function(t){self!=top?u?t():n.push(t):function(){try{i.doScroll("left")}catch(e){return setTimeout(function(){r(t)},50)}t()}()}:function(e){u?e():n.push(e)}},_.aurycOverride=function(e){var t=(""+window.location.hash).toLowerCase();return t&&8<t.length&&-1<t.indexOf("aurycoverride")&&-1<t.indexOf(e)},_.Diff=function(e,t){for(var r=_.max([e.length,t.length]),n=0,i=0,a=0;15<r-n;)a=r-Math.round((r-n)/2),e.substr(0,a)!=t.substr(0,a)?r=a:n=a;var o=t.substr(n);for(r=o.length;15<r-i;)a=r-Math.round((r-i)/2),o.substr(o.length-a)!==e.substr(e.length-a)?r=a:i=a;return{s:n,e:i,v:t.substring(n,t.length-i)}},_.addEventListener=function(e,t,r,n){"propertychange"!=t&&e.addEventListener?e.addEventListener(t,r,n):e.attachEvent&&e.attachEvent("on"+t,r)},_.inArray=function(e,t){var r=-1;for(var n in t)t[n]===e&&(r=n);return-1!=r},_.isValidColor=function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},_.isEmail=function(e){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)};var b64c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",b64pad="=";function decodeBase64(e){var t="";if(5<e.length){var r=e.length-5;t=e.substring(r)+e.substring(0,r)}return base64_decode(t)}function encodeBase64(e){var t=base64url_encode(e);if(5<t.length){var r=t.substring(0,5);t=t.substring(5)+r}return t}function base64_encode_data(e,t,r){var n,i="";for(n=0;n<=t-3;n+=3)i+=r.charAt(e.charCodeAt(n)>>>2),i+=r.charAt((3&e.charCodeAt(n))<<4|e.charCodeAt(n+1)>>>4),i+=r.charAt((15&e.charCodeAt(n+1))<<2|e.charCodeAt(n+2)>>>6),i+=r.charAt(63&e.charCodeAt(n+2));return t%3==2?(i+=r.charAt(e.charCodeAt(n)>>>2),i+=r.charAt((3&e.charCodeAt(n))<<4|e.charCodeAt(n+1)>>>4),i+=r.charAt((15&e.charCodeAt(n+1))<<2),i+=b64pad):t%3==1&&(i+=r.charAt(e.charCodeAt(n)>>>2),i+=r.charAt((3&e.charCodeAt(n))<<4),i+=b64pad,i+=b64pad),i}function base64_encode(e){var t=unescape(encodeURIComponent(e));return base64_encode_data(t,t.length,b64c)}function base64url_encode(e){var t=unescape(encodeURIComponent(e));return base64_encode_data(t,t.length,b64u)}function base64_charIndex(e){return"+"==e?62:"/"==e?63:b64u.indexOf(e)}function base64_decode(e){var t,r,n,i,a,o="",s=e.length;for(t=0;t<=s-2;t+=4)r=base64_charIndex(e.charAt(t+0)),n=base64_charIndex(e.charAt(t+1)),i=base64_charIndex(e.charAt(t+2)),a=base64_charIndex(e.charAt(t+3)),o+=String.fromCharCode(r<<2|n>>>4),t+2<s&&e.charAt(t+2)!==b64pad&&(o+=String.fromCharCode(n<<4&240|i>>>2&15)),t+3<s&&e.charAt(t+3)!==b64pad&&(o+=String.fromCharCode(i<<6&192|a));return o=decodeURIComponent(escape(o))}function sha1(e){var t,r,n,i,a,o,s,c,l,u,h=function(e,t){return e<<t|e>>>32-t},f=function(e){var t,r="";for(t=7;0<=t;t--)r+=(e>>>4*t&15).toString(16);return r},d=[],g=1732584193,p=4023233417,b=2562383102,y=271733878,m=3285377520,v=[];for(u=(e=unescape(encodeURIComponent(e))).length,r=0;r<u-3;r+=4)n=e.charCodeAt(r)<<24|e.charCodeAt(r+1)<<16|e.charCodeAt(r+2)<<8|e.charCodeAt(r+3),v.push(n);switch(3&u){case 0:r=2147483648;break;case 1:r=e.charCodeAt(u-1)<<24|8388608;break;case 2:r=e.charCodeAt(u-2)<<24|e.charCodeAt(u-1)<<16|32768;break;case 3:r=e.charCodeAt(u-3)<<24|e.charCodeAt(u-2)<<16|e.charCodeAt(u-1)<<8|128}for(v.push(r);14!=(15&v.length);)v.push(0);for(v.push(u>>>29),v.push(u<<3&4294967295),t=0;t<v.length;t+=16){for(r=0;r<16;r++)d[r]=v[t+r];for(r=16;r<=79;r++)d[r]=h(d[r-3]^d[r-8]^d[r-14]^d[r-16],1);for(i=g,a=p,o=b,s=y,c=m,r=0;r<=19;r++)l=h(i,5)+(a&o|~a&s)+c+d[r]+1518500249&4294967295,c=s,s=o,o=h(a,30),a=i,i=l;for(r=20;r<=39;r++)l=h(i,5)+(a^o^s)+c+d[r]+1859775393&4294967295,c=s,s=o,o=h(a,30),a=i,i=l;for(r=40;r<=59;r++)l=h(i,5)+(a&o|a&s|o&s)+c+d[r]+2400959708&4294967295,c=s,s=o,o=h(a,30),a=i,i=l;for(r=60;r<=79;r++)l=h(i,5)+(a^o^s)+c+d[r]+3395469782&4294967295,c=s,s=o,o=h(a,30),a=i,i=l;g=g+i&4294967295,p=p+a&4294967295,b=b+o&4294967295,y=y+s&4294967295,m=m+c&4294967295}return(l=f(g)+f(p)+f(b)+f(y)+f(m)).toLowerCase()}function hashCode(e){var t=0,r=0;if(0===e.length)return t;for(r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t&=t;return t}var encoder={decodeBase64:decodeBase64,encodeBase64:encodeBase64,base64_decode_original:base64_encode,sha1:sha1,hashCode:hashCode};function hasFeature(e){var t=getExternalConfig()||{};return _.has(t,e)}function getExternalConfig(){return window.aurycJSSDKFE||window.aurycJSSDKEFE&&(window.aurycJSSDKFE=JSON.parse(encoder.decodeBase64(window.aurycJSSDKEFE))),window.aurycJSSDKFE}function getFeature(e){var t=getExternalConfig()||{};return _.get(t,e)}function isFeatureEnabled(t,e){if(e&&_.aurycOverride(e))return!0;try{if(hasFeature(t))return getFeature(t+".flag");var r=null,n=t.split(".");for(var i in n)if(0!==(i=Number(i))){var a=n.slice(0,-i);if(hasFeature(a)){a.push("flag");var o=getFeature(a);if(null!==o){r=o,a.pop(),n=a;break}}else;}if(null!==r){var s=n.join(".");return logger.warn("Feature Toggle ["+t+"] not defined, inherit ["+r+"] from parent ["+s+"]"),r}return r=!1}catch(e){return logger.warn("Exception occurred when fetching features for "+t),logger.warn(e),!1}}var featureToggle={hasFeature:hasFeature,getExternalConfig:getExternalConfig,getFeature:getFeature,isFeatureEnabled:isFeatureEnabled};function buildQuery(e,t,r){var n,i,a=e||"",o=[];return _.isUndefined(r)&&(r="&"),_.each(t,function(e,t){n=encodeURIComponent(e.toString()),i=encodeURIComponent(t),o[o.length]=i+"="+n}),a+o.join(r)}function ajax(e){var t,r,n=new window.XMLHttpRequest,i=_.isDefined(e.skipEncode)&&!0===e.skipEncode?e.data:buildQuery("",e.data),a=e.url;e.failure=e.failure||function(){},"GET"==e.method&&i&&0<i.length&&(-1<a.indexOf("?")?a+="&":a+="?",a+=i);try{n.open(e.method,a,!0)}catch(e){return}n.setRequestHeader("Accept","*/*"),n.setRequestHeader("Content-Type",e.contentType||"application/x-www-form-urlencoded"),n.onreadystatechange=(t=e,r=n,function(){4==r.readyState&&200==r.status?t.success&&t.success.apply(t,[r.responseText]):4==r.readyState&&200!=r.status&&t.failure&&t.failure.apply(t,[r.responseText])}),n.send(i)}var uaParser=createCommonjsModule(function(C,A){!function(i,h){var f="function",e="undefined",t="model",r="name",n="type",a="vendor",o="version",s="architecture",c="console",l="mobile",u="tablet",d="smarttv",g="wearable",p={extend:function(e,t){var r={};for(var n in e)t[n]&&t[n].length%2==0?r[n]=t[n].concat(e[n]):r[n]=e[n];return r},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:h},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},b={rgx:function(e,t){for(var r,n,i,a,o,s,c=0;c<t.length&&!o;){var l=t[c],u=t[c+1];for(r=n=0;r<l.length&&!o;)if(o=l[r++].exec(e))for(i=0;i<u.length;i++)s=o[++n],"object"==typeof(a=u[i])&&0<a.length?2==a.length?typeof a[1]==f?this[a[0]]=a[1].call(this,s):this[a[0]]=a[1]:3==a.length?typeof a[1]!==f||a[1].exec&&a[1].test?this[a[0]]=s?s.replace(a[1],a[2]):h:this[a[0]]=s?a[1].call(this,s,a[2]):h:4==a.length&&(this[a[0]]=s?a[3].call(this,s.replace(a[1],a[2])):h):this[a]=s||h;c+=2}},str:function(e,t){for(var r in t)if("object"==typeof t[r]&&0<t[r].length){for(var n=0;n<t[r].length;n++)if(p.has(t[r][n],e))return"?"===r?h:r}else if(p.has(t[r],e))return"?"===r?h:r;return e}},y={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},m={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[r,o],[/(opios)[\/\s]+([\w\.]+)/i],[[r,"Opera Mini"],o],[/\s(opr)\/([\w\.]+)/i],[[r,"Opera"],o],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark)\/([\w\.-]+)/i],[r,o],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[r,"IE"],o],[/(edge|edgios|edgea)\/((\d+)?[\w\.]+)/i],[[r,"Edge"],o],[/(yabrowser)\/([\w\.]+)/i],[[r,"Yandex"],o],[/(puffin)\/([\w\.]+)/i],[[r,"Puffin"],o],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[r,"UCBrowser"],o],[/(comodo_dragon)\/([\w\.]+)/i],[[r,/_/g," "],o],[/(micromessenger)\/([\w\.]+)/i],[[r,"WeChat"],o],[/(qqbrowserlite)\/([\w\.]+)/i],[r,o],[/(QQ)\/([\d\.]+)/i],[r,o],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[r,o],[/(BIDUBrowser)[\/\s]?([\w\.]+)/i],[r,o],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[r,o],[/(MetaSr)[\/\s]?([\w\.]+)/i],[r],[/(LBBROWSER)/i],[r],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[o,[r,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[o,[r,"Facebook"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[o,[r,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[r,/(.+)/,"$1 WebView"],o],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[r,/(.+(?:g|us))(.+)/,"$1 $2"],o],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[o,[r,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[r,o],[/(dolfin)\/([\w\.]+)/i],[[r,"Dolphin"],o],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[r,"Chrome"],o],[/(coast)\/([\w\.]+)/i],[[r,"Opera Coast"],o],[/fxios\/([\w\.-]+)/i],[o,[r,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[o,[r,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[o,r],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[r,"GSA"],o],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[r,[o,b.str,y.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[r,o],[/(navigator|netscape)\/([\w\.-]+)/i],[[r,"Netscape"],o],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[r,o]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[s,"amd64"]],[/(ia32(?=;))/i],[[s,p.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[s,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[s,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[s,/ower/,"",p.lowerize]],[/(sun4\w)[;\)]/i],[[s,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[s,p.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[t,a,[n,u]],[/applecoremedia\/[\w\.]+ \((ipad)/],[t,[a,"Apple"],[n,u]],[/(apple\s{0,1}tv)/i],[[t,"Apple TV"],[a,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[a,t,[n,u]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[t,[a,"Amazon"],[n,u]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[t,b.str,y.device.amazon.model],[a,"Amazon"],[n,l]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[t,a,[n,l]],[/\((ip[honed|\s\w*]+);/i],[t,[a,"Apple"],[n,l]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[a,t,[n,l]],[/\(bb10;\s(\w+)/i],[t,[a,"BlackBerry"],[n,l]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[t,[a,"Asus"],[n,u]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[a,"Sony"],[t,"Xperia Tablet"],[n,u]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[t,[a,"Sony"],[n,l]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[a,t,[n,c]],[/android.+;\s(shield)\sbuild/i],[t,[a,"Nvidia"],[n,c]],[/(playstation\s[34portablevi]+)/i],[t,[a,"Sony"],[n,c]],[/(sprint\s(\w+))/i],[[a,b.str,y.device.sprint.vendor],[t,b.str,y.device.sprint.model],[n,l]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[a,t,[n,u]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[a,[t,/_/g," "],[n,l]],[/(nexus\s9)/i],[t,[a,"HTC"],[n,u]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[t,[a,"Huawei"],[n,l]],[/(microsoft);\s(lumia[\s\w]+)/i],[a,t,[n,l]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[t,[a,"Microsoft"],[n,c]],[/(kin\.[onetw]{3})/i],[[t,/\./g," "],[a,"Microsoft"],[n,l]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[t,[a,"Motorola"],[n,l]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[t,[a,"Motorola"],[n,u]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[a,p.trim],[t,p.trim],[n,d]],[/hbbtv.+maple;(\d+)/i],[[t,/^/,"SmartTV"],[a,"Samsung"],[n,d]],[/\(dtv[\);].+(aquos)/i],[t,[a,"Sharp"],[n,d]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[a,"Samsung"],t,[n,u]],[/smart-tv.+(samsung)/i],[a,[n,d],t],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[a,"Samsung"],t,[n,l]],[/sie-(\w*)/i],[t,[a,"Siemens"],[n,l]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[a,"Nokia"],t,[n,l]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[t,[a,"Acer"],[n,u]],[/android.+([vl]k\-?\d{3})\s+build/i],[t,[a,"LG"],[n,u]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[a,"LG"],t,[n,u]],[/(lg) netcast\.tv/i],[a,t,[n,d]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[t,[a,"LG"],[n,l]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[t,[a,"Lenovo"],[n,u]],[/linux;.+((jolla));/i],[a,t,[n,l]],[/((pebble))app\/[\d\.]+\s/i],[a,t,[n,g]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[a,t,[n,l]],[/crkey/i],[[t,"Chromecast"],[a,"Google"]],[/android.+;\s(glass)\s\d/i],[t,[a,"Google"],[n,g]],[/android.+;\s(pixel c)\s/i],[t,[a,"Google"],[n,u]],[/android.+;\s(pixel xl|pixel)\s/i],[t,[a,"Google"],[n,l]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[t,/_/g," "],[a,"Xiaomi"],[n,l]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[t,/_/g," "],[a,"Xiaomi"],[n,u]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[t,[a,"Meizu"],[n,u]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})\s+build/i],[t,[a,"OnePlus"],[n,l]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[t,[a,"RCA"],[n,u]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[t,[a,"Dell"],[n,u]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[t,[a,"Verizon"],[n,u]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[a,"Barnes & Noble"],t,[n,u]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[t,[a,"NuVision"],[n,u]],[/android.+;\s(k88)\sbuild/i],[t,[a,"ZTE"],[n,u]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[t,[a,"Swiss"],[n,l]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[t,[a,"Swiss"],[n,u]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[t,[a,"Zeki"],[n,u]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[a,"Dragon Touch"],t,[n,u]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[t,[a,"Insignia"],[n,u]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[t,[a,"NextBook"],[n,u]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[a,"Voice"],t,[n,l]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[a,"LvTel"],t,[n,l]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[t,[a,"Envizen"],[n,u]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[a,t,[n,u]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[t,[a,"MachSpeed"],[n,u]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[a,t,[n,u]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[t,[a,"Rotor"],[n,u]],[/android.+(KS(.+))\s+build/i],[t,[a,"Amazon"],[n,u]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[a,t,[n,u]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[n,p.lowerize],a,t],[/(android[\w\.\s\-]{0,9});.+build/i],[t,[a,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[o,[r,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[r,o],[/rv\:([\w\.]{1,9}).+(gecko)/i],[o,r]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[r,o],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[r,[o,b.str,y.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[r,"Windows"],[o,b.str,y.os.windows.version]],[/\((bb)(10);/i],[[r,"BlackBerry"],o],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]*)/i,/linux;.+(sailfish);/i],[r,o],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[r,"Symbian"],o],[/\((series40);/i],[r],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[r,"Firefox OS"],o],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[r,o],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[r,"Chromium OS"],o],[/(sunos)\s?([\w\.\d]*)/i],[[r,"Solaris"],o],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[r,o],[/(haiku)\s(\w+)/i],[r,o],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[o,/_/g,"."],[r,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[r,"Mac OS"],[o,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]*)/i],[r,o]]},v=function(e,t){if("object"==typeof e&&(t=e,e=h),!(this instanceof v))return new v(e,t).getResult();var r=e||(i&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),n=t?p.extend(m,t):m;return this.getBrowser=function(){var e={name:h,version:h};return b.rgx.call(e,r,n.browser),e.major=p.major(e.version),e},this.getCPU=function(){var e={architecture:h};return b.rgx.call(e,r,n.cpu),e},this.getDevice=function(){var e={vendor:h,model:h,type:h};return b.rgx.call(e,r,n.device),e},this.getEngine=function(){var e={name:h,version:h};return b.rgx.call(e,r,n.engine),e},this.getOS=function(){var e={name:h,version:h};return b.rgx.call(e,r,n.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=e,this},this};v.VERSION="0.7.18",v.BROWSER={NAME:r,MAJOR:"major",VERSION:o},v.CPU={ARCHITECTURE:s},v.DEVICE={MODEL:t,VENDOR:a,TYPE:n,CONSOLE:c,MOBILE:l,SMARTTV:d,TABLET:u,WEARABLE:g,EMBEDDED:"embedded"},v.ENGINE={NAME:r,VERSION:o},v.OS={NAME:r,VERSION:o},C.exports&&(A=C.exports=v),A.UAParser=v;var I=i&&(i.jQuery||i.Zepto);if(typeof I!==e){var w=new v;I.ua=w.getResult(),I.ua.get=function(){return w.getUA()},I.ua.set=function(e){w.setUA(e);var t=w.getResult();for(var r in t)I.ua[r]=t[r]}}}("object"==typeof window?window:commonjsGlobal)}),uaParser_1=uaParser.UAParser,PubSubTopic=function(){function e(){classCallCheck(this,e),this.name=name,this.subscriptions=[],this.fired=!1,this.lastFiredArguments=null}return createClass(e,[{key:"subscribe",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];this.subscriptions[this.subscriptions.length]=e,t&&this.fired&&e.apply(this,this.lastFiredArguments)}},{key:"unsubscribe",value:function(e){for(var t=0;t<this.subscriptions.length;t++)this.subscriptions[t].cb===e&&(this.subscriptions.splice(t,1),t--)}},{key:"unsubscribeAll",value:function(){this.subscriptions=[]}},{key:"fire",value:function(){this.fired=!0,this.lastFiredArguments=arguments;for(var e=0;e<this.subscriptions.length;e++){this.subscriptions[e].apply(this,arguments)}}}]),e}(),PubSub=function(){function e(){classCallCheck(this,e),this.topics={},this.topicId=-1}return createClass(e,[{key:"subscribe",value:function(e,t,r){if("function"!=typeof t||"string"!=typeof e)return!1;this.topics.hasOwnProperty(e)||(this.topics[e]=new PubSubTopic(e)),this.topics[e].subscribe(t,r)}},{key:"publish",value:function(e,t){if(!this.topics.hasOwnProperty(e))return!1;try{this.topics[e].fire(t)}catch(e){return logger.log("publish event error: ",e),!0}return!0}},{key:"findTopic",value:function(e){return!!this.topics.hasOwnProperty(e)}}]),e}(),AurycPubSub=new PubSub;function buildQuery$1(e,t,r){var n,i,a=e||"",o=a+(-1<a.indexOf("?")?"&":"?"),s=[];return _.isUndefined(r)&&(r="&"),_.each(t,function(e,t){n=encodeURIComponent(e.toString()),i=encodeURIComponent(t),s[s.length]=i+"="+n}),o+s.join(r)}function parseQueryString(e){var i={};return e.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,t,r,n){i[t]=n}),i}function getQueryParam(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null===r||r&&"string"!=typeof r[1]&&r[1].length?"":decodeURIComponent(r[1]).replace(/\+/g," ")}function getHashParam(e,t){var r=e.match(new RegExp(t+"=([^&]*)"));return r?decodeURIComponent(r[1]):null}function isPrivateIP(e){return!(!e||!(-1<e.indexOf("localhost")||/(^127\.)|(^192\.168\.)|(^10\.)|(^172\.1[6-9]\.)|(^172\.2[0-9]\.)|(^172\.3[0-1]\.)|(^::1$)|(^[fF][cCdD])/.test(e)))&&(logger.log("found private ip:"+e),!0)}function isSameDomain(e,t){var r=windowDocument.createElement("a");r.href=windowLocation.href;var n=r.hostname,i=r.protocol;r.href=e;var a=r.hostname||n,o=0===r.protocol.indexOf("http")?r.protocol:i;r.href=t;var s=r.hostname||n,c=0===r.protocol.indexOf("http")?r.protocol:i;return a.toLowerCase()===s.toLowerCase()&&o.toLowerCase()===c.toLowerCase()}function getRootDomain(e){var t=getTopDomain();return t?(logger.log("domain 1: "+t),t):isPrivateIP(e)?"localhost":e.toLowerCase().split(".").slice(-2).join(".")}function getTopDomain(){var e,t,r="weird_get_top_level_domain=cookie",n=document.location.hostname.split(".");for(e=n.length-1;0<=e;e--)if(t=n.slice(e).join("."),document.cookie=r+";domain=."+t+";",-1<document.cookie.indexOf(r))return document.cookie=r.split("=")[0]+"=;domain=."+t+";expires=Thu, 01 Jan 1970 00:00:01 GMT;",t}function isUrlInList(e,t){for(var r,n=!1,i=e.toLowerCase(),a=0;a<t.length;a++){r=t[a].replace(/^\s+|\s+$/g,"").replace(/[*]{2,}/g,"*").toLowerCase();for(var o=[];-1<r.indexOf("*");)0<r.indexOf("*")&&o.push(r.substr(0,r.indexOf("*"))),o.push("*"),r=r.substr(r.indexOf("*")+1);0<r.length&&o.push(r),n=!0;for(var s=0;s<o.length;s++){if("*"===(r=o[s])){if(o.length>s+1){if(s++,-1===i.indexOf(o[s])){n=!1;break}i=i.substr(i.indexOf(o[s])+o[s].length);continue}break}if(i.length<r.length){n=!1;break}if(i.substr(0,r.length)!==r&&i!==r+"/"){n=!1;break}i=i.substr(r.length)}if(0<i.length&&"*"!==o[o.length-1]&&(n=!1),n)return!0}return n}function campaignParams(){var e="utm_source utm_medium utm_campaign utm_content utm_term".split(" "),t="",r={};return _.each(e,function(e){(t=_.trim(getQueryParam(document.URL,e))).length&&(r[e]=t)}),r}function searchEngine(e){return 0===e.search("https?://(.*)google.([^/?]*)")?"google":0===e.search("https?://(.*)bing.com")?"bing":0===e.search("https?://(.*)yahoo.com")?"yahoo":0===e.search("https?://(.*)duckduckgo.com")?"duckduckgo":null}function browser(e,t,r){return t=t||window.navigator.vendor||"",r||_.includes(e," OPR/")?_.includes(e,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":_.includes(e,"IEMobile")||_.includes(e,"WPDesktop")?"Internet Explorer Mobile":_.includes(e,"Edge")?"Microsoft Edge":_.includes(e,"FBIOS")?"Facebook Mobile":_.includes(e,"Chrome")?"Chrome":_.includes(e,"CriOS")?"Chrome iOS":_.includes(e,"FxiOS")?"Firefox iOS":/Version\/([0-9\.]*)[\w\W]*Safari/i.test(e)?"Safari":_.includes(e,"Android")?"Android Mobile":_.includes(e,"Konqueror")?"Konqueror":_.includes(e,"Firefox")?"Firefox":_.includes(e,"MSIE")||_.includes(e,"Trident/")?"Internet Explorer":_.includes(e,"Gecko")?"Mozilla":""}function browserVersion(e,t,r){return browserAndVersion(e,t,r).version}function browserAndVersion(e,t,r){var n=browser(e=e||window.navigator.userAgent,t=t||window.navigator.vendor,r),i=null,a={"Internet Explorer Mobile":/rv:(\d+(\.\d+)?)/,"Microsoft Edge":/Edge\/(\d+(\.\d+)?)/,Chrome:/Chrome\/(\d+(\.\d+)?)/,"Chrome iOS":/CriOS\/(\d+(\.\d+)?)/,Safari:/Version\/(\d+(\.\d+)?)/,"Mobile Safari":/Version\/(\d+(\.\d+)?)/,Opera:/(Opera|OPR)\/(\d+(\.\d+)?)/,Firefox:/Firefox\/(\d+(\.\d+)?)/,"Firefox iOS":/FxiOS\/(\d+(\.\d+)?)/,Konqueror:/Konqueror:(\d+(\.\d+)?)/,BlackBerry:/BlackBerry (\d+(\.\d+)?)/,"Android Mobile":/android\s(\d+(\.\d+)?)/,"Internet Explorer":/(rv:|MSIE )(\d+(\.\d+)?)/,Mozilla:/rv:(\d+(\.\d+)?)/}[n];if(void 0===a)i=null;else{var o=e.match(a);i=o?parseFloat(o[o.length-2]):null}return{name:n,version:i}}function osVersion(e){return new uaParser(e||window.navigator.userAgent).getResult().os.version}function device(e){return/Windows Phone/i.test(e)||/WPDesktop/.test(e)?"Windows Phone":/iPad/.test(e)?"iPad":/iPod/.test(e)?"iPod Touch":/iPhone/.test(e)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Android/.test(e)?"Android":""}function isMobile(e){return/iphone|ipad|ipod|android|kindle|silk|bntv|nook|blackberry|playbook|mini|windows\sce|windows\sphone|palm|bb10/i.test(e)}function visibilityEventPrefix(){var e=null;if(void 0!==document.hidden)e="";else for(var t=["webkit","moz","ms","o"],r=0;r<t.length;r++)if(void 0!==document[t[r]+"Hidden"]){e=t[r];break}return e}function isSafari(){var e=browser(windowNavigator.userAgent,windowNavigator.vendor);return _.includes(e,"Safari")}function canUseVisibilityChange(){var e=browser(windowNavigator.userAgent,windowNavigator.vendor);return!!e&&(-1<e.indexOf("Firefox")||-1<e.indexOf("Chrome")?null!==visibilityEventPrefix():-1<e.indexOf("Safari")&&isMobile(windowNavigator.userAgent))}function referringDomain(e){var t=e.split("/");return 3<=t.length?t[2]:""}function isTouchDevice(){return"ontouchstart"in document.documentElement}function properties(){return _.extend(_.strip_empty_properties({$os:config.os(),$browser:browser(windowNavigator.userAgent,windowNavigator.vendor,win.opera),$referrer:document.referrer,$referring_domain:referringDomain(document.referrer),$device:device(windowNavigator.userAgent)}),{$current_url:windowLocation.href,$browser_version:browserVersion(windowNavigator.userAgent,windowNavigator.vendor,win.opera),$screen_height:screen.height,$screen_width:screen.width,$lib_version:config.getConfig("code_version")})}function locationInfo(){var e=windowLocation.protocol,t=":"===e.slice(-1)?e.slice(0,-1):e;return _.strip_empty_properties({protocol:t,domain:windowLocation.hostname,port:windowLocation.port,path:windowLocation.pathname,query:windowLocation.search,hash:windowLocation.hash})}function pageviewInfo(e){return _.strip_empty_properties({page:e,referrer:document.referrer,browser:browser(windowNavigator.userAgent,windowNavigator.vendor,win.opera),platform:config.os()})}function addDomEvent(e,t,r,n){e.attachEvent?e.attachEvent("on"+t,r):e.addEventListener(t,r,n)}function removeDomEvent(e,t,r){e.detachEvent?e.detachEvent("on"+t,r):e.removeEventListener(t,r)}function getWinSize(e){return{w:e.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,h:e.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}}function getScroll(e){var t=0,r=0,n=e.document,i=n.documentElement,a=n.body;return"number"==typeof e.pageXOffset&&"number"==typeof e.pageYOffset?(t=e.pageXOffset,r=e.pageYOffset):i&&i.scrollLeft?(t=i.scrollLeft,r=i.scrollTop):a&&a.scrollLeft&&(t=a.scrollLeft,r=a.scrollTop),{x:t,y:r}}function getScreenResolution(){var e=window.screen;return _.isDefined(e)&&_.isDefined(e.width)&&"number"==typeof e.width?{w:e.width,h:e.height}:{w:0,h:0}}var Browser=function(){function r(e){classCallCheck(this,r),this.browserReady=new PubSubTopic,this.os={name:"",version:0},this.browser={name:"",version:0},this.isMobile=!1,this.isTablet=!1,this.deviceType="Desktop",this.isIE=!1,this.supportsSVG=document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),this.isReady=!1,this.isIos=!1;var t=config.getConfig("device_uri")||"uba-detector.userty.com/useragent/";this.deviceUri=location.protocol+"//"+t+"?accessToken=",this.agent=e||navigator.userAgent,this.isMobile=/iphone|ipad|ipod|android|kindle|silk|bntv|nook|blackberry|playbook|mini|windows\sce|windows\sphone|palm|bb10/i.test(this.agent),this.isWinPhone=/Windows Phone/i.test(this.agent),this.isMobile&&(/iphone|ipad|ipod/i.test(this.agent)&&(this.isIos=!0),/ipad|silk|kindle|playbook|nook|bntv/i.test(this.agent)&&(this.isTablet=!0),this.deviceType=this.isTablet?"Tablet":"Smartphone"),this.isMobilePhone=this.isMobile&&!this.isTablet||this.isWinPhone,this.init()}return createClass(r,[{key:"initClientSide",value:function(){var e=browserAndVersion();this.browser.name=e.name,this.browser.version=e.version,this.os.name=config.os(this.agent),this.os.version=osVersion(this.agent),this.isReady=!0,this.isIE="IE"===this.browser.name,this.browserReady.fire()}},{key:"setupBrowserObj",value:function(e){var t=JSON.parse(e);this.browser.name=t.browser.name;var r=t.browser.version.split(".")[0];this.browser.version=r,this.os={name:t.os.name,version:t.os.version};var n=t.device&&t.device.type;this.isTablet="Tablet"===n,this.isMobile="Tablet"===n||"Smartphone"===n||"Feature Phone"===n||"Other Mobile"===n,this.deviceType=n,this.isReady=!0,this.browserReady.fire()}},{key:"detect",value:function(){var t=this;if(this.isMobile)if(this.isIos||""===this.deviceUri||this.isTablet||this.isWinPhone)this.initClientSide();else{var e=sessionStorage&&sessionStorage.getItem("AURYC_BROWSER");if(e)this.setupBrowserObj(e);else{ajax({method:"GET",url:this.deviceUri+constants.symbols.DEVICE+"&ua="+this.agent,type:"*/*",contentType:"application/x-www-form-urlencoded",success:function(e){sessionStorage&&sessionStorage.setItem("AURYC_BROWSER",e),t.setupBrowserObj(e)},failure:function(){t.initClientSide()}})}}else this.initClientSide()}},{key:"init",value:function(){this.detect()}}]),r}(),browserObj=null;function getInstance(){return null===browserObj&&(browserObj=new Browser),browserObj}function addDomMethods(e){e.$=function(e){return this.querySelectorAll(e)},e.hasClass=function(e){return-1!=this.className.indexOf(e)},e.addClass=function(e){this.hasClass(e)||(this.className+=" "+e)},e.removeClass=function(e){this.className=(this.className||"").replace(e,"")},e.remove=function(){this.parentNode&&this.parentNode.removeChild(this)},e.css=function(e){for(var t in e)e.hasOwnProperty(t)&&(this.style[t]=e[t])},e.getStyle=function(e){return window.getComputedStyle?window.getComputedStyle(this)[e]:this.currentStyle?this.currentStyle[e]:void 0}}function dollarFn(e){if(_.isString(e)&&-1===e.indexOf("<"))return document.querySelectorAll(e);var t=e;if(_.isString(e)){var r=document.createElement("div");r.innerHTML=e,t=r.firstChild}return addDomMethods(t),t}var $=dollarFn,browser$1={buildQuery:buildQuery$1,parseQueryString:parseQueryString,getHashParam:getHashParam,isPrivateIP:isPrivateIP,isSameDomain:isSameDomain,getRootDomain:getRootDomain,getTopDomain:getTopDomain,isUrlInList:isUrlInList,campaignParams:campaignParams,searchEngine:searchEngine,browser:browser,browserVersion:browserVersion,browserAndVersion:browserAndVersion,device:device,isMobile:isMobile,visibilityEventPrefix:visibilityEventPrefix,isSafari:isSafari,canUseVisibilityChange:canUseVisibilityChange,referringDomain:referringDomain,isTouchDevice:isTouchDevice,properties:properties,locationInfo:locationInfo,pageviewInfo:pageviewInfo,addDomEvent:addDomEvent,removeDomEvent:removeDomEvent,getWinSize:getWinSize,getScroll:getScroll,getScreenResolution:getScreenResolution,Browser:Browser,getInstance:getInstance,$:dollarFn,dollarFn:dollarFn},Cookie=function(){function s(e){classCallCheck(this,s),this.opts=e||{}}return createClass(s,[{key:"set",value:function(e,t,r,n){var i=this.opts;r&&(i=_.merge({},i,r)),e=encodeURIComponent(e),t=_.isDefined(i.encode)?encodeURIComponent(t):t;var a=i.domain;for(var o in a&&("localhost"==a||-1<a.indexOf("192.")||-1<a.indexOf("127."))&&delete i.domain,i)if(i[o]){var s=i[o];switch(t+=";"+("duration"===o?"expires":o),o){case"duration":t+="="+new Date(_.now()+s*constants.time.FULL_DAY).toUTCString();break;default:t+="="+s}}n&&(t+="; secure");var c=e+"="+t;return windowDocument.cookie=c}},{key:"kill",value:function(e){var t=new Date;t.setTime(t.getTime()-9999),this.set(e,"",{expires:t.toUTCString()})}},{key:"get",value:function(e){return s.Get(e)}},{key:"parse",value:function(e){return s.Parse(e)}}],[{key:"Replace",value:function(e,t,r,n){var i=s.Get(e),a=s.Get(t),o=new s(r);return null!==i&&null===a&&(o.set(t,i),n&&o.kill(e)),o}},{key:"GetSize",value:function(){return windowDocument.cookie.length}},{key:"Get",value:function(e){for(var t=e+"=",r=windowDocument.cookie.split(";"),n=0;n<r.length;n++){for(var i=r[n];" "==i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return decodeURIComponent(i.substring(t.length,i.length))}return null}},{key:"Parse",value:function(e){var t={};try{t=JSON.parse(s.Get(e))||{}}catch(e){}return t}}]),s}(),AURYCStorage=function(){function a(e){classCallCheck(this,a),this.cfg=e,this.storId=e.storId||"auryc.s",this.storUid=this.storId+".u";var t=browser$1.getRootDomain(window.location.hostname);logger.warn(this.cfg);var r={path:"/",domain:t,secure:!(this.userProp={}),encode:!0};if(this.cfg.persistence!==constants.symbols.SESSION){var n=new Date,i=this.cfg.ttl||3650;n.setTime(n.getTime()+24*i*60*60*1e3),r.expires=n.toUTCString()}e.replace?this.ckie=Cookie.Replace(e.replace,this.storId,r,!!e.killOld):(this.ckie=new Cookie(r),window.localStorage.removeItem(this.storUid)),window.localStorage.getItem(this.storUid)&&(this.userProp=JSON.parse(window.localStorage.getItem(this.storUid))),this.data=this.ckie.parse(this.storId)}return createClass(a,[{key:"save",value:function(){var e=JSON.stringify(this.data);this.ckie.set(this.storId,e)}},{key:"replace",value:function(e){this.ckie.set(this.storId,e)}},{key:"set",value:function(e,t){this.data=this.ckie.parse(this.storId),this.data[e]=t,this.save()}},{key:"setSession",value:function(e,t,r){r===constants.storage.SCOPE.SESSION.TAB?sessionStorage.setItem(e,JSON.stringify(t)):this.set(e,t)}},{key:"setTab",value:function(e,t){this.setSession(e,t,constants.storage.SCOPE.SESSION.TAB)}},{key:"setUserProp",value:function(e,t){this.userProp[e]=t,localStorage.setItem(this.storUid,JSON.stringify(this.userProp))}},{key:"getUserProp",value:function(e){return this.userProp[e]}},{key:"get",value:function(e){var t=sessionStorage.getItem(e),r=void 0;if(_.isDefined(t)&&!_.isNil(t))return JSON.parse(t);if(this.data=this.ckie.parse(this.storId),_.isArray(e)){r={};for(var n=0;n<e.length;n++)r[e[n]]=this.data[e[n]];return r}return this.data[e]}},{key:"erase",value:function(e){if(sessionStorage.removeItem(e),this.data=this.ckie.parse(this.storId),this.data[e]){delete this.data[e];var t=JSON.stringify(this.data);return this.ckie.set(this.storId,t),!0}return!1}},{key:"reset",value:function(){this.ckie.kill(this.storId),this.data={}}},{key:"isEmpty",value:function(){return _.isEmptyObject(this.data)}},{key:"getSize",value:function(){return Cookie.GetSize()}},{key:"getStorageSize",value:function(){var e=0;for(var t in window.localStorage)window.localStorage.hasOwnProperty(t)&&(e+=2*(t.length+window.localStorage.getItem(t).length));return e}}]),a}(),WindowStorage=function(){function r(e){classCallCheck(this,r);var t=e||"SHARED";this.ns="AR_"+t.replace(/[- _.&]/g,"").toUpperCase(),this.storageLimit=constants.storage.DEFAULT_LIMIT,this.objSize=0,this.blobSize=0,this.objStartMarker=this.ns+"_B_O",this.objEndMarker=this.ns+"_E_O",this.blobStartMarker=this.ns+"_B_B",this.blobEndMarker=this.ns+"_E_B",this.eventStorageFull=new PubSubTopic,this.kill(),this.reload()}return createClass(r,null,[{key:"isSupported",value:function(){return"object"===("undefined"==typeof window?"undefined":_typeof(window))&&"string"==typeof window.name}}]),createClass(r,[{key:"testStorageLimit",value:function(){return this.objSize+this.blobSize>=this.storageLimit&&(this.eventStorageFull.fire(this),!0)}},{key:"delete",value:function(e){this.dataObj[e]&&(delete this.dataObj[e],this.objSize=JSON.stringify(this.dataObj).length)}},{key:"kill",value:function(){this.objSize=0,this.blobSize=0,this.dataObj={},this.dataBlob="",this.isNewStorage=!0}},{key:"get",value:function(e){return this.dataObj[e]}},{key:"getBlob",value:function(){return this.dataBlob}},{key:"set",value:function(e,t){_.isDefined(e)&&_.isDefined(t)&&(this.dataObj[e]=t,this.objSize=JSON.stringify(this.dataObj).length,this.isNewStorage=!1,this.testStorageLimit())}},{key:"reset",value:function(){this.kill(),this.commit()}},{key:"setBlob",value:function(e){_.isUndefined(e)||(this.dataBlob=e,this.blobSize=this.dataBlob.length,this.isNewStorage=!1,this.testStorageLimit())}},{key:"isNew",value:function(){return this.isNewStorage}},{key:"reload",value:function(){var e=_.isDefined(window.name)?window.name:"",t="",r=e.indexOf(this.objStartMarker);if(-1<r){var n=r+this.objStartMarker.length,i=e.indexOf(this.objEndMarker)-n;t=e.substr(n,i)}try{0<t.length&&(this.dataObj=JSON.parse(t),this.objSize=t.length,this.isNewStorage=!1)}catch(e){}t="";var a=e.indexOf(this.blobStartMarker);if(-1<a){var o=a+this.blobStartMarker.length,s=e.indexOf(this.blobEndMarker)-o;t=e.substr(o,s)}try{0<t.length&&(this.dataBlob=t,this.blogSize=t.length,this.isNewStorage=!1)}catch(e){}}},{key:"commit",value:function(){try{var e=_.isDefined(window.name)?window.name:"",t=e.indexOf(this.objStartMarker),r=JSON.stringify(this.dataObj),n=this.objStartMarker+r+this.objEndMarker;-1<t?e=e.substring(0,t)+n+e.substr(e.indexOf(this.objEndMarker)+this.objEndMarker.length):e+=n;var i=e.indexOf(this.blobStartMarker),a=this.blobStartMarker+this.dataBlob+this.blobEndMarker;-1<i?e=e.substring(0,i)+a+e.substr(e.indexOf(this.blobEndMarker)+this.blobEndMarker.length):e+=a,window.name=e}catch(e){}}}],[{key:"getInstance",value:function(e){return r.instance||(r.instance=new r(e)),r.instance}}]),r}(),DomStorage=function(){function a(e,t,r,n){var i=this;classCallCheck(this,a),this.isLocal=!!r,e||(e="STORAGE"),this.guid="AR_"+e.replace(/[- _.&]/g,"").toUpperCase(),this.StorageFull=new PubSubTopic,this.storageLimit=45e5,this.kill(),this.sync(),!n||_.isDefined(t)&&!t||_.addEventListener(window,BROWSER.isIE||BROWSER.isMobile?"unload":"beforeunload",function(){i.commit()}),this.clearHistoryStorage()}return createClass(a,[{key:"clearHistoryStorage",value:function(){var e="AR_"+config.getSiteid().replace(/[- _.&]/g,"").toUpperCase();window.localStorage.removeItem(e+"_OBJ"),window.localStorage.removeItem(e+"_BLOB"),window.localStorage.removeItem(e+"UBA_OBJ"),window.localStorage.removeItem(e+"UBA_BLOB"),window.localStorage.removeItem(e+"BA_OBJ"),window.localStorage.removeItem(e+"BA_BLOB")}},{key:"testStorageLimit",value:function(){return this.storageBytesObj+this.storageBytesBlob>=this.storageLimit&&(this.StorageFull.fire(this),!0)}},{key:"dispose",value:function(e){this._data_obj[e]&&(delete this._data_obj[e],this.storageBytesObj=JSON.stringify(this._data_obj).length)}},{key:"kill",value:function(){this.storageBytesObj=0,this.storageBytesBlob=0,this._data_obj={},this._data_blob="",this.isNewStorage=!0}},{key:"get",value:function(e){return this._data_obj[e]}},{key:"getBlob",value:function(){return this._data_blob}},{key:"set",value:function(e,t){t&&(this._data_obj[e]=t,this.storageBytesObj=JSON.stringify(this._data_obj).length,this.isNewStorage=!1,this.testStorageLimit())}},{key:"setBlob",value:function(e){this._data_blob=e,this.storageBytesBlob=this._data_blob.length,this.isNewStorage=!1,this.testStorageLimit()}},{key:"isNew",value:function(){var e;return window.opener&&!this.get("isNew")&&(e=!0,this.set("isNew",e)),e||this.isNewStorage}},{key:"initialize",value:function(e){e.apply(utils.DomStorage)}},{key:"isSupported",value:function(){return!!localStorage}},{key:"sync",value:function(){var e;try{(e=localStorage.getItem(this.guid+"_OBJ"))&&0<e.length&&(this._data_obj=JSON.parse(e),this.storageBytesObj=e.length,this.isNewStorage=!1)}catch(e){}try{(e=localStorage.getItem(this.guid+"_BLOB"))&&0<e.length&&(this._data_blob=e,this.storageBytesBlob=e.length,this.isNewStorage=!1)}catch(e){}}},{key:"commit",value:function(){try{localStorage.setItem(this.guid+"_OBJ",JSON.stringify(this._data_obj)),localStorage.setItem(this.guid+"_BLOB",this._data_blob)}catch(e){}}}]),a}(),StorageFactory=function(){function i(){classCallCheck(this,i)}return createClass(i,null,[{key:"getInstance",value:function(e,t){return i._getInstance()(e,t)}},{key:"_getInstance",value:function(){return function(e,t){var r=e===constants.symbols.SESSION?"s":"p",n={storId:"userty."+(t=t||"core")+"."+(r+"."+encoder.sha1(config.getSiteid()).slice(0,6)),replace:"userty."+t+"."+r};return e===constants.symbols.SESSION?function(e){if(!i.SessionStorage){var t={storId:_.get(e,"storId","userty.s"),persistence:constants.symbols.SESSION};e.replace&&(t.replace=e.replace,t.killOld=!0),i.SessionStorage=new AURYCStorage(t)}return i.SessionStorage}(n):(n.ttl=3650,function(e){e=e||{};var t={storId:_.get(e,"storId","userty.p"),persistence:constants.symbols.PERMANENT,ttl:_.get(e,"ttl",3650)};return e.replace&&(t.replace=e.replace),new AURYCStorage(t)}(n))}}}]),i}(),replay_samplelist="2redbeans.com:1,thredup.com:0.1,arenasolutions.com:1,lovewithfood.com:1",token_url="services.auryc.com/cc-services/sites",tracking_url_proxy="https://tracking.api.auryc.com:4433",inspectlet_wid="1309714722",device_detector_domain="uba-detector.userty.com/useragent",editor_url="//visualeditor.auryc.com",services_url="https://services.auryc.com",tracking_url="tracking.auryc.com",auto_tracking_url="uba-tracking.auryc.com",inspectlet_blacklist="auryc.com,localhost",record_uri="https://uba-tracking.auryc.com/rec/",uba_api_url="uba-api.auryc.com",portal_replay_url="https://portal.auryc.com/auth/replay/playback?q=",domain_name="userty",configServerJson={replay_samplelist:replay_samplelist,token_url:token_url,tracking_url_proxy:tracking_url_proxy,inspectlet_wid:inspectlet_wid,device_detector_domain:device_detector_domain,editor_url:editor_url,services_url:services_url,tracking_url:tracking_url,auto_tracking_url:auto_tracking_url,inspectlet_blacklist:inspectlet_blacklist,record_uri:record_uri,uba_api_url:uba_api_url,portal_replay_url:portal_replay_url,domain_name:domain_name};function getCfg(e,t,r,n){r||(r="base");var i=_.get(e,r+"["+t+"]",null);if(n||"base"===r)return i;var a=_.get(e,"base["+t+"]",null),o=_.get(e,t,null);return null!==i?i:null!==a?i:o}function isCookieSupported$1(){var e=windowNavigator.cookieEnabled;return e||(window.cookie="testcookie",e=-1!==window.cookie.indexOf("testcookie")),e}function getConfig(e,t,r){return getCfg(window.aurycJsLibConfig||{},e,t,r)}function getProductConfig(e,t){var r=window.window.aurycJsLibConfig||{};return r[e]?r[e]:t?r.base||r:{}}function isVisualEditorMode(){var e=window.location.hash;if(e&&getHashParam$1(e,"mode")&&"editor"===getHashParam$1(e,"mode"))return!0;return"editor"===StorageFactory.getInstance(constants.symbols.SESSION).get("_aurychash")}function getHashParam$1(e,t){var r=e.match(new RegExp(t+"=([^&]*)"));return r?r[1]:null}function os(e){var t=e;return/Windows/i.test(t)?/Phone/.test(t)||/WPDesktop/.test(t)?"Windows Phone":"Windows":/(iPhone|iPad|iPod)/.test(t)?"iOS":/Android/.test(t)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":/Mac/i.test(t)?"Mac OS X":/Linux/.test(t)?"Linux":""}function isSPAEnabled(){var e=getConfig("spaUnsupported","behavior"),t=os(windowNavigator.userAgent);if(e&&e.os&&t)for(var r=0;r<e.os.length;r++)if(t===e.os[r])return!1;return!0}function isAppcueBuilderEnabled(){return document.getElementsByTagName("appcues-crx")&&0<document.getElementsByTagName("appcues-crx").length}function hasConflicting3PJS(){return isAppcueBuilderEnabled()}function isProductEnabled(e,t){if(!window.JSON)return!1;if(_.isBlockedUAComplex(windowNavigator.userAgent))return logger.warn(e+" disabled. UA not supported: "+windowNavigator.userAgent),!1;if(hasConflicting3PJS())return logger.warn(e+" disabled. Found conflicting 3rd part JS"),!1;if(!isCookieSupported$1())return logger.warn(e+" disabled. cookie is not supported"),!1;if(_.aurycOverride(e))return logger.warn(e+" enabled as per aurycOverride"),!0;if(!getConfig("enabled",e,!0))return logger.warn(e+" disabled as per client config"),!1;if(t&&!featureToggle.isFeatureEnabled(t))return logger.warn(e+" disabled as per feature flag"),!1;var r=!0,n=getConfig("sampling","behavior");if(logger.log("sampling rate: "+n+", typeof: "+(void 0===n?"undefined":_typeof(n))),null==n)return logger.log("sampling undefined. enabled: "+r),r;if(0===n)r=!1;else{var i=StorageFactory.getInstance(constants.symbols.SESSION),a=i.get("p");if(logger.log("check sampling, session data: "+a),a)r="t"===a,logger.log("check sampling enabled: "+r);else{var o=100*Math.random();r=o<n,logger.log("random: "+o+", sampling:"+n+", enabled: "+r),i.setSession("p",r?"t":"f")}}return r}function getSiteid(){var e=getConfig("siteid","base")||getConfig("siteid","behavior")||getConfig("siteid","feedback");return!1===e&&(e=getConfig("site_id","base")||getConfig("site_id","behavior")||getConfig("site_id","feedback")),!1===e&&logger.critical("Unable to find a siteid"),e}function isSnapshotEnabled(){var e=getConfig("spEnabled","behavior");if(!e)return!1;for(var t=(window.location.href||"about:blank").toLowerCase(),r=0;r<e.length;r++){if(new RegExp(e[r],"i").test(t))return!0}return!1}function getBaseBlockedEls(){var e=getConfig("doNotTrack","behavior");return e&&e.blocked?e.blocked:null}function isAjaxProxyEnabled(){return!0===constants.features.AJAX||!0===getConfig("ajax","behavior")}function init(){var e=configServerJson;if(_.isUndefined(win.aurycJsLibConfig))return logger.critical("Unable to initialize. Missing aurycConfig"),void(win.aurycJsLibConfig={base:{enabled:!1},behavior:{enabled:!1},feedback:{enabled:!0}});var baseConfig={enabled:!0,code_version:"0.2.48",device_uri:e.device_detector_domain,services_url:e.services_url,tracking_uri:e.tracking_url,tracking_uri_proxy:e.tracking_url_proxy,uba_api_uri:e.uba_api_url,token_uri:e.token_url,auto_tracking_uri:e.auto_tracking_url,record_uri:e.record_uri,editor_uri:e.editor_url,replay_url:e.portal_replay_url};win.aurycJsLibConfig.feedback.enabled=!0,win.aurycJsLibConfig.base=_.extend(win.aurycJsLibConfig.base,baseConfig)}var config={getConfig:getConfig,isSPAEnabled:isSPAEnabled,hasConflicting3PJS:hasConflicting3PJS,isProductEnabled:isProductEnabled,getSiteid:getSiteid,isVisualEditorMode:isVisualEditorMode,getProductConfig:getProductConfig,isSnapshotEnabled:isSnapshotEnabled,init:init,getBaseBlockedEls:getBaseBlockedEls,isCookieSupported:isCookieSupported$1,os:os,isAjaxProxyEnabled:isAjaxProxyEnabled},AurycPublicApi=function(){function n(e,t,r){classCallCheck(this,n),_.merge(this,e),_.merge(this,t),_.merge(this,r),this.mergeAPI(e),this.mergeAPI(t)}return createClass(n,[{key:"mergeAPI",value:function(t){for(var r=this;t=Object.getPrototypeOf(t);){Object.getOwnPropertyNames(t).forEach(function(e){"constructor"!==e&&"__proto__"!==e&&(r[e]=t[e])})}}}]),n}(),attempts=20;function checkAndSet(){if(logger.log("check and set called"),window.aurycBehaviorAPI&&window.aurycFeedbackAPI&&window.aurycRecordAPI){logger.log("expose public API"),window.auryc=new AurycPublicApi(window.aurycBehaviorAPI,window.aurycFeedbackAPI,window.aurycRecordAPI);var e=window.aurycReadyCb,t=window.usertyReadyCb;if(e&&0<e.length)for(var r=e.length,n=0;n<r;n++)e[n]();if(t&&_.isArray(t))for(var i=t.length,a=0;a<i;a++)t[a]()}else 0<attempts&&(setTimeout(checkAndSet,250),attempts--)}function init$1(){logger.log("api domready"),config.isProductEnabled("behavior")?checkAndSet():logger.log("product disabled. Don't expose API")}var api={init:init$1};function isPlatformSupported(e,t,r){var n=config.getConfig("browser_cutoff","base"),i=config.getConfig("platform_cutoff","base"),a=n[e.browser.name];if(a&&e.browser.version<a)r&&r();else{var o=i[e.os.name];o&&e.os.version<o?r&&r():t&&t()}}function isSupported(e,t){var r=getInstance();r.isReady?isPlatformSupported(r,e,t):r.browserReady.subscribe(function(){isPlatformSupported(r,e,t)})}function init$2(e,t){logger.log("*** init called",!0),config.init(),isSupported(e,t)}var utils$1={init:init$2};function styleInject(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===r&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}var css$1='@charset "UTF-8";.auryc-feedback .auryc-star-rating .fa-pull-left.auryc-star-rating__star:before,.auryc-feedback .auryc-star-rating .pull-left.auryc-star-rating__star:before,.auryc-feedback .auryc-star-rating label.fa-pull-left:before,.auryc-feedback .auryc-star-rating label.pull-left:before,.auryc-feedback .fa-pull-left.auryc-feedback__cbradio:before,.auryc-feedback .fa-pull-left.auryc-feedback__select:after,.auryc-feedback .pull-left.auryc-feedback__cbradio:before,.auryc-feedback .pull-left.auryc-feedback__select:after,.aurycModalInnerContent .fa-pull-left.flashIcon:before,.aurycModalInnerContent .pull-left.flashIcon:before,.fa.fa-pull-left,.fa.pull-left{margin-right:.3em}.fa-fw,.fa-li{text-align:center}#oo_tab{display:none!important}._aurycIsCssLoaded{width:50px}\n/*!\n *  Font Awesome 4.7.0 by @davegandy - http://fontawesome.io - @fontawesome\n *  License - http://fontawesome.io/license (Font: SIL OFL 1.1, CSS: MIT License)\n */@font-face{font-family:FontAwesome;src:url(//netdna.bootstrapcdn.com/font-awesome/4.7.0/fonts/fontawesome-webfont.eot?v=4.7.0);src:url(//netdna.bootstrapcdn.com/font-awesome/4.7.0/fonts/fontawesome-webfont.eot#iefix&v=4.7.0) format("embedded-opentype"),url(//netdna.bootstrapcdn.com/font-awesome/4.7.0/fonts/fontawesome-webfont.woff2?v=4.7.0) format("woff2"),url(//netdna.bootstrapcdn.com/font-awesome/4.7.0/fonts/fontawesome-webfont.woff?v=4.7.0) format("woff"),url(//netdna.bootstrapcdn.com/font-awesome/4.7.0/fonts/fontawesome-webfont.ttf?v=4.7.0) format("truetype"),url(//netdna.bootstrapcdn.com/font-awesome/4.7.0/fonts/fontawesome-webfont.svg?v=4.7.0#fontawesomeregular) format("svg");font-weight:400;font-style:normal}.auryc-feedback .auryc-feedback__cbradio:before,.auryc-feedback .auryc-feedback__select:after,.auryc-feedback .auryc-star-rating .auryc-star-rating__star:before,.auryc-feedback .auryc-star-rating label:before,.aurycmobile .aurycModalInnerContent .flashIcon:before,.aurycModalInnerContent .flashIcon:before,.fa{font:normal normal normal 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.aurycmobile .aurycModalContent,.aurycModalContent,.aurycModalContent input[type=text],.aurycModalContent textarea{font-family:open sans,sans-serif}.fa-lg{font-size:1.33333em;line-height:.75em;vertical-align:-15%}.fa-2x{font-size:2em}.fa-3x{font-size:3em}.fa-4x{font-size:4em}.fa-5x{font-size:5em}.fa-fw{width:1.28571em}.fa-ul{padding-left:0;margin-left:2.14286em;list-style-type:none}.auryc-feedback .auryc-star-rating .fa-pull-right.auryc-star-rating__star:before,.auryc-feedback .auryc-star-rating .pull-right.auryc-star-rating__star:before,.auryc-feedback .auryc-star-rating label.fa-pull-right:before,.auryc-feedback .auryc-star-rating label.pull-right:before,.auryc-feedback .fa-pull-right.auryc-feedback__cbradio:before,.auryc-feedback .fa-pull-right.auryc-feedback__select:after,.auryc-feedback .pull-right.auryc-feedback__cbradio:before,.auryc-feedback .pull-right.auryc-feedback__select:after,.aurycModalInnerContent .fa-pull-right.flashIcon:before,.aurycModalInnerContent .pull-right.flashIcon:before,.fa.fa-pull-right,.fa.pull-right{margin-left:.3em}.fa-ul>li{position:relative}.fa-li{position:absolute;left:-2.14286em;width:2.14286em;top:.14286em}.fa-li.fa-lg{left:-1.85714em}.fa-border{padding:.2em .25em .15em;border:.08em solid #eee;border-radius:.1em}.fa-pull-left{float:left}.fa-pull-right,.pull-right{float:right}.pull-left{float:left}.fa-spin{-webkit-animation:a 2s infinite linear;animation:a 2s infinite linear}.fa-pulse{-webkit-animation:a 1s infinite steps(8);animation:a 1s infinite steps(8)}@-webkit-keyframes a{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes a{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}.fa-rotate-90{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";-webkit-transform:rotate(90deg);transform:rotate(90deg)}.fa-rotate-180{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";-webkit-transform:rotate(180deg);transform:rotate(180deg)}.fa-rotate-270{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";-webkit-transform:rotate(270deg);transform:rotate(270deg)}.fa-flip-horizontal{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";-webkit-transform:scaleX(-1);transform:scaleX(-1)}.fa-flip-vertical{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";-webkit-transform:scaleY(-1);transform:scaleY(-1)}:root .fa-flip-horizontal,:root .fa-flip-vertical,:root .fa-rotate-90,:root .fa-rotate-180,:root .fa-rotate-270{-webkit-filter:none;filter:none}.fa-stack{position:relative;display:inline-block;width:2em;height:2em;line-height:2em;vertical-align:middle}.fa-stack-1x,.fa-stack-2x{position:absolute;left:0;width:100%;text-align:center}.fa-stack-1x{line-height:inherit}.fa-stack-2x{font-size:2em}.fa-inverse{color:#fff}.fa-glass:before{content:""}.fa-music:before{content:""}.fa-search:before{content:""}.fa-envelope-o:before{content:""}.fa-heart:before{content:""}.fa-star:before{content:""}.fa-star-o:before{content:""}.fa-user:before{content:""}.fa-film:before{content:""}.fa-th-large:before{content:""}.fa-th:before{content:""}.fa-th-list:before{content:""}.fa-check:before{content:""}.fa-close:before,.fa-remove:before,.fa-times:before{content:""}.fa-search-plus:before{content:""}.fa-search-minus:before{content:""}.fa-power-off:before{content:""}.fa-signal:before{content:""}.fa-cog:before,.fa-gear:before{content:""}.fa-trash-o:before{content:""}.fa-home:before{content:""}.fa-file-o:before{content:""}.fa-clock-o:before{content:""}.fa-road:before{content:""}.fa-download:before{content:""}.fa-arrow-circle-o-down:before{content:""}.fa-arrow-circle-o-up:before{content:""}.fa-inbox:before{content:""}.fa-play-circle-o:before{content:""}.fa-repeat:before,.fa-rotate-right:before{content:""}.fa-refresh:before{content:""}.fa-list-alt:before{content:""}.fa-lock:before{content:""}.fa-flag:before{content:""}.fa-headphones:before{content:""}.fa-volume-off:before{content:""}.fa-volume-down:before{content:""}.fa-volume-up:before{content:""}.fa-qrcode:before{content:""}.fa-barcode:before{content:""}.fa-tag:before{content:""}.fa-tags:before{content:""}.fa-book:before{content:""}.fa-bookmark:before{content:""}.fa-print:before{content:""}.fa-camera:before{content:""}.fa-font:before{content:""}.fa-bold:before{content:""}.fa-italic:before{content:""}.fa-text-height:before{content:""}.fa-text-width:before{content:""}.fa-align-left:before{content:""}.fa-align-center:before{content:""}.fa-align-right:before{content:""}.fa-align-justify:before{content:""}.fa-list:before{content:""}.fa-dedent:before,.fa-outdent:before{content:""}.fa-indent:before{content:""}.fa-video-camera:before{content:""}.fa-image:before,.fa-photo:before,.fa-picture-o:before{content:""}.fa-pencil:before{content:""}.fa-map-marker:before{content:""}.fa-adjust:before{content:""}.fa-tint:before{content:""}.fa-edit:before,.fa-pencil-square-o:before{content:""}.fa-share-square-o:before{content:""}.fa-check-square-o:before{content:""}.fa-arrows:before{content:""}.fa-step-backward:before{content:""}.fa-fast-backward:before{content:""}.fa-backward:before{content:""}.fa-play:before{content:""}.fa-pause:before{content:""}.fa-stop:before{content:""}.fa-forward:before{content:""}.fa-fast-forward:before{content:""}.fa-step-forward:before{content:""}.fa-eject:before{content:""}.fa-chevron-left:before{content:""}.fa-chevron-right:before{content:""}.fa-plus-circle:before{content:""}.fa-minus-circle:before{content:""}.fa-times-circle:before{content:""}.fa-check-circle:before{content:""}.fa-question-circle:before{content:""}.fa-info-circle:before{content:""}.fa-crosshairs:before{content:""}.fa-times-circle-o:before{content:""}.fa-check-circle-o:before{content:""}.fa-ban:before{content:""}.fa-arrow-left:before{content:""}.fa-arrow-right:before{content:""}.fa-arrow-up:before{content:""}.fa-arrow-down:before{content:""}.fa-mail-forward:before,.fa-share:before{content:""}.fa-expand:before{content:""}.fa-compress:before{content:""}.fa-plus:before{content:""}.fa-minus:before{content:""}.fa-asterisk:before{content:""}.fa-exclamation-circle:before{content:""}.fa-gift:before{content:""}.fa-leaf:before{content:""}.fa-fire:before{content:""}.fa-eye:before{content:""}.fa-eye-slash:before{content:""}.fa-exclamation-triangle:before,.fa-warning:before{content:""}.fa-plane:before{content:""}.fa-calendar:before{content:""}.fa-random:before{content:""}.fa-comment:before{content:""}.fa-magnet:before{content:""}.fa-chevron-up:before{content:""}.fa-chevron-down:before{content:""}.fa-retweet:before{content:""}.fa-shopping-cart:before{content:""}.fa-folder:before{content:""}.fa-folder-open:before{content:""}.fa-arrows-v:before{content:""}.fa-arrows-h:before{content:""}.fa-bar-chart-o:before,.fa-bar-chart:before{content:""}.fa-twitter-square:before{content:""}.fa-facebook-square:before{content:""}.fa-camera-retro:before{content:""}.fa-key:before{content:""}.fa-cogs:before,.fa-gears:before{content:""}.fa-comments:before{content:""}.fa-thumbs-o-up:before{content:""}.fa-thumbs-o-down:before{content:""}.fa-star-half:before{content:""}.fa-heart-o:before{content:""}.fa-sign-out:before{content:""}.fa-linkedin-square:before{content:""}.fa-thumb-tack:before{content:""}.fa-external-link:before{content:""}.fa-sign-in:before{content:""}.fa-trophy:before{content:""}.fa-github-square:before{content:""}.fa-upload:before{content:""}.fa-lemon-o:before{content:""}.fa-phone:before{content:""}.fa-square-o:before{content:""}.fa-bookmark-o:before{content:""}.fa-phone-square:before{content:""}.fa-twitter:before{content:""}.fa-facebook-f:before,.fa-facebook:before{content:""}.fa-github:before{content:""}.fa-unlock:before{content:""}.fa-credit-card:before{content:""}.fa-feed:before,.fa-rss:before{content:""}.fa-hdd-o:before{content:""}.fa-bullhorn:before{content:""}.fa-bell:before{content:""}.fa-certificate:before{content:""}.fa-hand-o-right:before{content:""}.fa-hand-o-left:before{content:""}.fa-hand-o-up:before{content:""}.fa-hand-o-down:before{content:""}.fa-arrow-circle-left:before{content:""}.fa-arrow-circle-right:before{content:""}.fa-arrow-circle-up:before{content:""}.fa-arrow-circle-down:before{content:""}.fa-globe:before{content:""}.fa-wrench:before{content:""}.fa-tasks:before{content:""}.fa-filter:before{content:""}.fa-briefcase:before{content:""}.fa-arrows-alt:before{content:""}.fa-group:before,.fa-users:before{content:""}.fa-chain:before,.fa-link:before{content:""}.fa-cloud:before{content:""}.fa-flask:before{content:""}.fa-cut:before,.fa-scissors:before{content:""}.fa-copy:before,.fa-files-o:before{content:""}.fa-paperclip:before{content:""}.fa-floppy-o:before,.fa-save:before{content:""}.fa-square:before{content:""}.fa-bars:before,.fa-navicon:before,.fa-reorder:before{content:""}.fa-list-ul:before{content:""}.fa-list-ol:before{content:""}.fa-strikethrough:before{content:""}.fa-underline:before{content:""}.fa-table:before{content:""}.fa-magic:before{content:""}.fa-truck:before{content:""}.fa-pinterest:before{content:""}.fa-pinterest-square:before{content:""}.fa-google-plus-square:before{content:""}.fa-google-plus:before{content:""}.fa-money:before{content:""}.fa-caret-down:before{content:""}.fa-caret-up:before{content:""}.fa-caret-left:before{content:""}.fa-caret-right:before{content:""}.fa-columns:before{content:""}.fa-sort:before,.fa-unsorted:before{content:""}.fa-sort-desc:before,.fa-sort-down:before{content:""}.fa-sort-asc:before,.fa-sort-up:before{content:""}.fa-envelope:before{content:""}.fa-linkedin:before{content:""}.fa-rotate-left:before,.fa-undo:before{content:""}.fa-gavel:before,.fa-legal:before{content:""}.fa-dashboard:before,.fa-tachometer:before{content:""}.fa-comment-o:before{content:""}.fa-comments-o:before{content:""}.fa-bolt:before,.fa-flash:before{content:""}.fa-sitemap:before{content:""}.fa-umbrella:before{content:""}.fa-clipboard:before,.fa-paste:before{content:""}.fa-lightbulb-o:before{content:""}.fa-exchange:before{content:""}.fa-cloud-download:before{content:""}.fa-cloud-upload:before{content:""}.fa-user-md:before{content:""}.fa-stethoscope:before{content:""}.fa-suitcase:before{content:""}.fa-bell-o:before{content:""}.fa-coffee:before{content:""}.fa-cutlery:before{content:""}.fa-file-text-o:before{content:""}.fa-building-o:before{content:""}.fa-hospital-o:before{content:""}.fa-ambulance:before{content:""}.fa-medkit:before{content:""}.fa-fighter-jet:before{content:""}.fa-beer:before{content:""}.fa-h-square:before{content:""}.fa-plus-square:before{content:""}.fa-angle-double-left:before{content:""}.fa-angle-double-right:before{content:""}.fa-angle-double-up:before{content:""}.fa-angle-double-down:before{content:""}.fa-angle-left:before{content:""}.fa-angle-right:before{content:""}.fa-angle-up:before{content:""}.fa-angle-down:before{content:""}.fa-desktop:before{content:""}.fa-laptop:before{content:""}.fa-tablet:before{content:""}.fa-mobile-phone:before,.fa-mobile:before{content:""}.fa-circle-o:before{content:""}.fa-quote-left:before{content:""}.fa-quote-right:before{content:""}.fa-spinner:before{content:""}.fa-circle:before{content:""}.fa-mail-reply:before,.fa-reply:before{content:""}.fa-github-alt:before{content:""}.fa-folder-o:before{content:""}.fa-folder-open-o:before{content:""}.fa-smile-o:before{content:""}.fa-frown-o:before{content:""}.fa-meh-o:before{content:""}.fa-gamepad:before{content:""}.fa-keyboard-o:before{content:""}.fa-flag-o:before{content:""}.fa-flag-checkered:before{content:""}.fa-terminal:before{content:""}.fa-code:before{content:""}.fa-mail-reply-all:before,.fa-reply-all:before{content:""}.fa-star-half-empty:before,.fa-star-half-full:before,.fa-star-half-o:before{content:""}.fa-location-arrow:before{content:""}.fa-crop:before{content:""}.fa-code-fork:before{content:""}.fa-chain-broken:before,.fa-unlink:before{content:""}.fa-question:before{content:""}.fa-info:before{content:""}.fa-exclamation:before{content:""}.fa-superscript:before{content:""}.fa-subscript:before{content:""}.fa-eraser:before{content:""}.fa-puzzle-piece:before{content:""}.fa-microphone:before{content:""}.fa-microphone-slash:before{content:""}.fa-shield:before{content:""}.fa-calendar-o:before{content:""}.fa-fire-extinguisher:before{content:""}.fa-rocket:before{content:""}.fa-maxcdn:before{content:""}.fa-chevron-circle-left:before{content:""}.fa-chevron-circle-right:before{content:""}.fa-chevron-circle-up:before{content:""}.fa-chevron-circle-down:before{content:""}.fa-html5:before{content:""}.fa-css3:before{content:""}.fa-anchor:before{content:""}.fa-unlock-alt:before{content:""}.fa-bullseye:before{content:""}.fa-ellipsis-h:before{content:""}.fa-ellipsis-v:before{content:""}.fa-rss-square:before{content:""}.fa-play-circle:before{content:""}.fa-ticket:before{content:""}.fa-minus-square:before{content:""}.fa-minus-square-o:before{content:""}.fa-level-up:before{content:""}.fa-level-down:before{content:""}.fa-check-square:before{content:""}.fa-pencil-square:before{content:""}.fa-external-link-square:before{content:""}.fa-share-square:before{content:""}.fa-compass:before{content:""}.fa-caret-square-o-down:before,.fa-toggle-down:before{content:""}.fa-caret-square-o-up:before,.fa-toggle-up:before{content:""}.fa-caret-square-o-right:before,.fa-toggle-right:before{content:""}.fa-eur:before,.fa-euro:before{content:""}.fa-gbp:before{content:""}.fa-dollar:before,.fa-usd:before{content:""}.fa-inr:before,.fa-rupee:before{content:""}.fa-cny:before,.fa-jpy:before,.fa-rmb:before,.fa-yen:before{content:""}.fa-rouble:before,.fa-rub:before,.fa-ruble:before{content:""}.fa-krw:before,.fa-won:before{content:""}.fa-bitcoin:before,.fa-btc:before{content:""}.fa-file:before{content:""}.fa-file-text:before{content:""}.fa-sort-alpha-asc:before{content:""}.fa-sort-alpha-desc:before{content:""}.fa-sort-amount-asc:before{content:""}.fa-sort-amount-desc:before{content:""}.fa-sort-numeric-asc:before{content:""}.fa-sort-numeric-desc:before{content:""}.fa-thumbs-up:before{content:""}.fa-thumbs-down:before{content:""}.fa-youtube-square:before{content:""}.fa-youtube:before{content:""}.fa-xing:before{content:""}.fa-xing-square:before{content:""}.fa-youtube-play:before{content:""}.fa-dropbox:before{content:""}.fa-stack-overflow:before{content:""}.fa-instagram:before{content:""}.fa-flickr:before{content:""}.fa-adn:before{content:""}.fa-bitbucket:before{content:""}.fa-bitbucket-square:before{content:""}.fa-tumblr:before{content:""}.fa-tumblr-square:before{content:""}.fa-long-arrow-down:before{content:""}.fa-long-arrow-up:before{content:""}.fa-long-arrow-left:before{content:""}.fa-long-arrow-right:before{content:""}.fa-apple:before{content:""}.fa-windows:before{content:""}.fa-android:before{content:""}.fa-linux:before{content:""}.fa-dribbble:before{content:""}.fa-skype:before{content:""}.fa-foursquare:before{content:""}.fa-trello:before{content:""}.fa-female:before{content:""}.fa-male:before{content:""}.fa-gittip:before,.fa-gratipay:before{content:""}.fa-sun-o:before{content:""}.fa-moon-o:before{content:""}.fa-archive:before{content:""}.fa-bug:before{content:""}.fa-vk:before{content:""}.fa-weibo:before{content:""}.fa-renren:before{content:""}.fa-pagelines:before{content:""}.fa-stack-exchange:before{content:""}.fa-arrow-circle-o-right:before{content:""}.fa-arrow-circle-o-left:before{content:""}.fa-caret-square-o-left:before,.fa-toggle-left:before{content:""}.fa-dot-circle-o:before{content:""}.fa-wheelchair:before{content:""}.fa-vimeo-square:before{content:""}.fa-try:before,.fa-turkish-lira:before{content:""}.fa-plus-square-o:before{content:""}.fa-space-shuttle:before{content:""}.fa-slack:before{content:""}.fa-envelope-square:before{content:""}.fa-wordpress:before{content:""}.fa-openid:before{content:""}.fa-bank:before,.fa-institution:before,.fa-university:before{content:""}.fa-graduation-cap:before,.fa-mortar-board:before{content:""}.fa-yahoo:before{content:""}.fa-google:before{content:""}.fa-reddit:before{content:""}.fa-reddit-square:before{content:""}.fa-stumbleupon-circle:before{content:""}.fa-stumbleupon:before{content:""}.fa-delicious:before{content:""}.fa-digg:before{content:""}.fa-pied-piper-pp:before{content:""}.fa-pied-piper-alt:before{content:""}.fa-drupal:before{content:""}.fa-joomla:before{content:""}.fa-language:before{content:""}.fa-fax:before{content:""}.fa-building:before{content:""}.fa-child:before{content:""}.fa-paw:before{content:""}.fa-spoon:before{content:""}.fa-cube:before{content:""}.fa-cubes:before{content:""}.fa-behance:before{content:""}.fa-behance-square:before{content:""}.fa-steam:before{content:""}.fa-steam-square:before{content:""}.fa-recycle:before{content:""}.fa-automobile:before,.fa-car:before{content:""}.fa-cab:before,.fa-taxi:before{content:""}.fa-tree:before{content:""}.fa-spotify:before{content:""}.fa-deviantart:before{content:""}.fa-soundcloud:before{content:""}.fa-database:before{content:""}.fa-file-pdf-o:before{content:""}.fa-file-word-o:before{content:""}.fa-file-excel-o:before{content:""}.fa-file-powerpoint-o:before{content:""}.fa-file-image-o:before,.fa-file-photo-o:before,.fa-file-picture-o:before{content:""}.fa-file-archive-o:before,.fa-file-zip-o:before{content:""}.fa-file-audio-o:before,.fa-file-sound-o:before{content:""}.fa-file-movie-o:before,.fa-file-video-o:before{content:""}.fa-file-code-o:before{content:""}.fa-vine:before{content:""}.fa-codepen:before{content:""}.fa-jsfiddle:before{content:""}.fa-life-bouy:before,.fa-life-buoy:before,.fa-life-ring:before,.fa-life-saver:before,.fa-support:before{content:""}.fa-circle-o-notch:before{content:""}.fa-ra:before,.fa-rebel:before,.fa-resistance:before{content:""}.fa-empire:before,.fa-ge:before{content:""}.fa-git-square:before{content:""}.fa-git:before{content:""}.fa-hacker-news:before,.fa-y-combinator-square:before,.fa-yc-square:before{content:""}.fa-tencent-weibo:before{content:""}.fa-qq:before{content:""}.fa-wechat:before,.fa-weixin:before{content:""}.fa-paper-plane:before,.fa-send:before{content:""}.fa-paper-plane-o:before,.fa-send-o:before{content:""}.fa-history:before{content:""}.fa-circle-thin:before{content:""}.fa-header:before{content:""}.fa-paragraph:before{content:""}.fa-sliders:before{content:""}.fa-share-alt:before{content:""}.fa-share-alt-square:before{content:""}.fa-bomb:before{content:""}.fa-futbol-o:before,.fa-soccer-ball-o:before{content:""}.fa-tty:before{content:""}.fa-binoculars:before{content:""}.fa-plug:before{content:""}.fa-slideshare:before{content:""}.fa-twitch:before{content:""}.fa-yelp:before{content:""}.fa-newspaper-o:before{content:""}.fa-wifi:before{content:""}.fa-calculator:before{content:""}.fa-paypal:before{content:""}.fa-google-wallet:before{content:""}.fa-cc-visa:before{content:""}.fa-cc-mastercard:before{content:""}.fa-cc-discover:before{content:""}.fa-cc-amex:before{content:""}.fa-cc-paypal:before{content:""}.fa-cc-stripe:before{content:""}.fa-bell-slash:before{content:""}.fa-bell-slash-o:before{content:""}.fa-trash:before{content:""}.fa-copyright:before{content:""}.fa-at:before{content:""}.fa-eyedropper:before{content:""}.fa-paint-brush:before{content:""}.fa-birthday-cake:before{content:""}.fa-area-chart:before{content:""}.fa-pie-chart:before{content:""}.fa-line-chart:before{content:""}.fa-lastfm:before{content:""}.fa-lastfm-square:before{content:""}.fa-toggle-off:before{content:""}.fa-toggle-on:before{content:""}.fa-bicycle:before{content:""}.fa-bus:before{content:""}.fa-ioxhost:before{content:""}.fa-angellist:before{content:""}.fa-cc:before{content:""}.fa-ils:before,.fa-shekel:before,.fa-sheqel:before{content:""}.fa-meanpath:before{content:""}.fa-buysellads:before{content:""}.fa-connectdevelop:before{content:""}.fa-dashcube:before{content:""}.fa-forumbee:before{content:""}.fa-leanpub:before{content:""}.fa-sellsy:before{content:""}.fa-shirtsinbulk:before{content:""}.fa-simplybuilt:before{content:""}.fa-skyatlas:before{content:""}.fa-cart-plus:before{content:""}.fa-cart-arrow-down:before{content:""}.fa-diamond:before{content:""}.fa-ship:before{content:""}.fa-user-secret:before{content:""}.fa-motorcycle:before{content:""}.fa-street-view:before{content:""}.fa-heartbeat:before{content:""}.fa-venus:before{content:""}.fa-mars:before{content:""}.fa-mercury:before{content:""}.fa-intersex:before,.fa-transgender:before{content:""}.fa-transgender-alt:before{content:""}.fa-venus-double:before{content:""}.fa-mars-double:before{content:""}.fa-venus-mars:before{content:""}.fa-mars-stroke:before{content:""}.fa-mars-stroke-v:before{content:""}.fa-mars-stroke-h:before{content:""}.fa-neuter:before{content:""}.fa-genderless:before{content:""}.fa-facebook-official:before{content:""}.fa-pinterest-p:before{content:""}.fa-whatsapp:before{content:""}.fa-server:before{content:""}.fa-user-plus:before{content:""}.fa-user-times:before{content:""}.fa-bed:before,.fa-hotel:before{content:""}.fa-viacoin:before{content:""}.fa-train:before{content:""}.fa-subway:before{content:""}.fa-medium:before{content:""}.fa-y-combinator:before,.fa-yc:before{content:""}.fa-optin-monster:before{content:""}.fa-opencart:before{content:""}.fa-expeditedssl:before{content:""}.fa-battery-4:before,.fa-battery-full:before,.fa-battery:before{content:""}.fa-battery-3:before,.fa-battery-three-quarters:before{content:""}.fa-battery-2:before,.fa-battery-half:before{content:""}.fa-battery-1:before,.fa-battery-quarter:before{content:""}.fa-battery-0:before,.fa-battery-empty:before{content:""}.fa-mouse-pointer:before{content:""}.fa-i-cursor:before{content:""}.fa-object-group:before{content:""}.fa-object-ungroup:before{content:""}.fa-sticky-note:before{content:""}.fa-sticky-note-o:before{content:""}.fa-cc-jcb:before{content:""}.fa-cc-diners-club:before{content:""}.fa-clone:before{content:""}.fa-balance-scale:before{content:""}.fa-hourglass-o:before{content:""}.fa-hourglass-1:before,.fa-hourglass-start:before{content:""}.fa-hourglass-2:before,.fa-hourglass-half:before{content:""}.fa-hourglass-3:before,.fa-hourglass-end:before{content:""}.fa-hourglass:before{content:""}.fa-hand-grab-o:before,.fa-hand-rock-o:before{content:""}.fa-hand-paper-o:before,.fa-hand-stop-o:before{content:""}.fa-hand-scissors-o:before{content:""}.fa-hand-lizard-o:before{content:""}.fa-hand-spock-o:before{content:""}.fa-hand-pointer-o:before{content:""}.fa-hand-peace-o:before{content:""}.fa-trademark:before{content:""}.fa-registered:before{content:""}.fa-creative-commons:before{content:""}.fa-gg:before{content:""}.fa-gg-circle:before{content:""}.fa-tripadvisor:before{content:""}.fa-odnoklassniki:before{content:""}.fa-odnoklassniki-square:before{content:""}.fa-get-pocket:before{content:""}.fa-wikipedia-w:before{content:""}.fa-safari:before{content:""}.fa-chrome:before{content:""}.fa-firefox:before{content:""}.fa-opera:before{content:""}.fa-internet-explorer:before{content:""}.fa-television:before,.fa-tv:before{content:""}.fa-contao:before{content:""}.fa-500px:before{content:""}.fa-amazon:before{content:""}.fa-calendar-plus-o:before{content:""}.fa-calendar-minus-o:before{content:""}.fa-calendar-times-o:before{content:""}.fa-calendar-check-o:before{content:""}.fa-industry:before{content:""}.fa-map-pin:before{content:""}.fa-map-signs:before{content:""}.fa-map-o:before{content:""}.fa-map:before{content:""}.fa-commenting:before{content:""}.fa-commenting-o:before{content:""}.fa-houzz:before{content:""}.fa-vimeo:before{content:""}.fa-black-tie:before{content:""}.fa-fonticons:before{content:""}.fa-reddit-alien:before{content:""}.fa-edge:before{content:""}.fa-credit-card-alt:before{content:""}.fa-codiepie:before{content:""}.fa-modx:before{content:""}.fa-fort-awesome:before{content:""}.fa-usb:before{content:""}.fa-product-hunt:before{content:""}.fa-mixcloud:before{content:""}.fa-scribd:before{content:""}.fa-pause-circle:before{content:""}.fa-pause-circle-o:before{content:""}.fa-stop-circle:before{content:""}.fa-stop-circle-o:before{content:""}.fa-shopping-bag:before{content:""}.fa-shopping-basket:before{content:""}.fa-hashtag:before{content:""}.fa-bluetooth:before{content:""}.fa-bluetooth-b:before{content:""}.fa-percent:before{content:""}.fa-gitlab:before{content:""}.fa-wpbeginner:before{content:""}.fa-wpforms:before{content:""}.fa-envira:before{content:""}.fa-universal-access:before{content:""}.fa-wheelchair-alt:before{content:""}.fa-question-circle-o:before{content:""}.fa-blind:before{content:""}.fa-audio-description:before{content:""}.fa-volume-control-phone:before{content:""}.fa-braille:before{content:""}.fa-assistive-listening-systems:before{content:""}.fa-american-sign-language-interpreting:before,.fa-asl-interpreting:before{content:""}.fa-deaf:before,.fa-deafness:before,.fa-hard-of-hearing:before{content:""}.fa-glide:before{content:""}.fa-glide-g:before{content:""}.fa-sign-language:before,.fa-signing:before{content:""}.fa-low-vision:before{content:""}.fa-viadeo:before{content:""}.fa-viadeo-square:before{content:""}.fa-snapchat:before{content:""}.fa-snapchat-ghost:before{content:""}.fa-snapchat-square:before{content:""}.fa-pied-piper:before{content:""}.fa-first-order:before{content:""}.fa-yoast:before{content:""}.fa-themeisle:before{content:""}.fa-google-plus-circle:before,.fa-google-plus-official:before{content:""}.fa-fa:before,.fa-font-awesome:before{content:""}.fa-handshake-o:before{content:""}.fa-envelope-open:before{content:""}.fa-envelope-open-o:before{content:""}.fa-linode:before{content:""}.fa-address-book:before{content:""}.fa-address-book-o:before{content:""}.fa-address-card:before,.fa-vcard:before{content:""}.fa-address-card-o:before,.fa-vcard-o:before{content:""}.fa-user-circle:before{content:""}.fa-user-circle-o:before{content:""}.fa-user-o:before{content:""}.fa-id-badge:before{content:""}.fa-drivers-license:before,.fa-id-card:before{content:""}.fa-drivers-license-o:before,.fa-id-card-o:before{content:""}.fa-quora:before{content:""}.fa-free-code-camp:before{content:""}.fa-telegram:before{content:""}.fa-thermometer-4:before,.fa-thermometer-full:before,.fa-thermometer:before{content:""}.fa-thermometer-3:before,.fa-thermometer-three-quarters:before{content:""}.fa-thermometer-2:before,.fa-thermometer-half:before{content:""}.fa-thermometer-1:before,.fa-thermometer-quarter:before{content:""}.fa-thermometer-0:before,.fa-thermometer-empty:before{content:""}.fa-shower:before{content:""}.fa-bath:before,.fa-bathtub:before,.fa-s15:before{content:""}.fa-podcast:before{content:""}.fa-window-maximize:before{content:""}.fa-window-minimize:before{content:""}.fa-window-restore:before{content:""}.fa-times-rectangle:before,.fa-window-close:before{content:""}.fa-times-rectangle-o:before,.fa-window-close-o:before{content:""}.fa-bandcamp:before{content:""}.fa-grav:before{content:""}.fa-etsy:before{content:""}.fa-imdb:before{content:""}.fa-ravelry:before{content:""}.fa-eercast:before{content:""}.fa-microchip:before{content:""}.fa-snowflake-o:before{content:""}.fa-superpowers:before{content:""}.fa-wpexplorer:before{content:""}.fa-meetup:before{content:""}.aurycmobile .aurycModalInnerContent .flashIcon:before,.aurycModalInnerContent .flashIcon:before{content:""}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.sr-only-focusable:active,.sr-only-focusable:focus{position:static;width:auto;height:auto;margin:0;overflow:visible;clip:auto}.aurycModalBackFace,.aurycModalChrome,.aurycModalContainer{padding:0;margin:0;width:100%;left:0;top:0}.aurycModalContainer{display:table;height:100%;position:fixed;z-index:2147483647}.aurycModalBackFace{background:#343941;height:100%;position:fixed;z-index:888;opacity:0;-webkit-transition:opacity .5s;transition:opacity .5s}.aurycModalBackFace.aurycIE8{background:url(ie8backdrop.gif)}.aurycModalBackFace._aurycActive{opacity:.85}.aurycModalBackFace._aurycFixed{position:center!important}.aurycModalChrome{z-index:2147483647;position:fixed;height:100%;overflow:scroll}.aurycModalContent{font-size:18px;margin:0 auto 100px;text-align:left;padding:10px;height:100%;width:calc(100vw - 20px)}@media only screen and (min-width:480px){.aurycModalContent{max-width:540px}}.aurycModalContent input[type=text],.aurycModalContent textarea{-webkit-box-sizing:border-box;box-sizing:border-box}.aurycModalInnerContent{background:#fff;-webkit-box-shadow:0 0 40px 0 rgba(0,0,0,.3);box-shadow:0 0 40px 0 rgba(0,0,0,.3);border-radius:5px;opacity:0;-webkit-transition:opacity .5s ease;transition:opacity .5s ease;width:100%}@media only screen and (min-device-width:320px) and (max-device-width:480px) and (-webkit-min-device-pixel-ratio:2) and (orientation:portrait){.aurycModalInnerContent{border-radius:0}}.aurycModalInnerContent.aurycVisible{opacity:1;text-align:center!important}.aurycModalHead{width:100%;display:block;clear:both;opacity:0;-webkit-transition:opacity .5s ease;transition:opacity .5s ease}.aurycModalHead.aurycVisible{opacity:1}.aurycModalChrome .aurycModalCloseButton{width:19px;height:19px;float:right;opacity:.5;-webkit-transition:.5s;transition:.5s;position:relative;top:15px;left:-15px;z-index:1}.aurycModalChrome .aurycModalCloseButton:hover{cursor:pointer;opacity:1}.aurycModalChrome .auryc-button-expand{display:inline-block}.aurycModalChrome .auryc-feedback__canvas{margin-top:15px;position:relative;text-align:right;width:100%}.aurycModalChrome .auryc-feedback__canvas canvas{width:100%}.aurycmobile .aurycModalContainer{width:100%;padding:0;display:table;position:fixed!important;top:0;left:0;right:0;bottom:0;margin:0;z-index:2147483647}.aurycmobile .aurycModalContent{font-size:18px;height:100%;text-align:left;width:inherit}.aurycmobile .aurycModalContent input[type=text],.aurycmobile .aurycModalContent textarea{font-family:open sans,sans-serif;-webkit-box-sizing:border-box;box-sizing:border-box}.aurycmobile .aurycModalInnerContent{background:#fafafa;-webkit-box-shadow:0 0 40px 0 rgba(0,0,0,.3);box-shadow:0 0 40px 0 rgba(0,0,0,.3);border-radius:0;opacity:0;-webkit-transition:opacity .5s ease;transition:opacity .5s ease;height:90vh;width:100%;overflow:scroll;position:relative;top:-20px}.aurycmobile .aurycModalInnerContent.aurycVisible{opacity:1;text-align:center!important}.aurycmobile .auryc-feedback{padding:1.5em}.aurycmobile .auryc-epilogue-container{padding:55% 2.5em!important}.aurycmobile .auryc-button-expand{display:block!important}.aurycmobile .auryc-button-expand #submit-feedback{width:100%!important}.aurycmobile .aurycModalChrome{padding:0;margin:0;height:auto;width:auto;z-index:1000;position:relative}.aurycmobile .aurycModalChrome .aurycModalCloseButton{width:19px;height:19px;float:right;opacity:.5;-webkit-transition:.5s;transition:.5s;position:relative;top:5px;left:-5px;z-index:1}.aurycmobile.formSelection .aurycModalChrome{display:table-cell;text-align:center;vertical-align:middle}.aurycmobile.formSelection .aurycModalChrome .auryc-feedback__canvas{margin-top:0!important;position:relative;text-align:right;width:100%}.aurycRateHolder,.aurycTYCloseLink,.submitButtonHolder{text-align:center}.aurycmobile.formSelection .aurycModalChrome .auryc-feedback__canvas canvas{width:100%}.aurycmobile.formSelection .aurycModalContent,.aurycmobile.formSelection .aurycModalInnerContent{height:auto;margin:auto}.aurycTextContainer{padding:1em .5em;text-align:center;border-bottom:thin solid #959ba3}.aurycTextHead{font-size:18px;font-weight:700;color:#343941}.aurycTextBody{font-size:14px;color:#959ba3;margin-left:2px;margin-right:2px;margin-top:5px}.aurycMainContent{position:relative;overflow:hidden;height:100%;width:100%}.aurycTYCloseLink{margin:2em;font-size:12px}.aurycPrivacyPolicy{display:inline-block;float:left;margin-left:.5em}.aurycRateHolder{color:#343941;font-weight:700;padding:1em;font-size:18px}.aurycRateHolder .rating{width:226px;margin:auto auto 2px;font-size:45px;overflow:hidden}.aurycRateHolder .rating input{float:right;opacity:0;position:absolute}.aurycRateHolder .rating a,.aurycRateHolder .rating label{float:right;color:#aaa;text-decoration:none;-webkit-transition:color .4s;transition:color .4s}.aurycRateHolder .rating a:focus,.aurycRateHolder .rating a:focus~a,.aurycRateHolder .rating a:hover,.aurycRateHolder .rating a:hover~a,.aurycRateHolder .rating input:focus~label,.aurycRateHolder .rating label:hover,.aurycRateHolder .rating label:hover~label{color:orange;cursor:pointer}.aurycRateHolder .rating2{direction:rtl}.aurycRateHolder .rating2 a{float:none}.auryc-feedback__topic{display:none}.auryc-feedback__topic.auryc-visible__topic{display:block}.aurycModalContentFooter{bottom:0;width:100%;height:20px;margin-top:.5em}.auryc-clear{clear:both}._aurycbadge{font-size:80%}._aurycbadge._aurycbottomright,._aurycreport._aurycbottomright{margin-right:.6em;left:auto!important;right:0!important;top:auto;bottom:.6em}._aurycbadge._aurycbottomright ._aurycBadgeLabel,._aurycreport._aurycbottomright ._aurycBadgeLabel{padding-left:.3em}._aurycbadge._aurycbottomright._aurycVertical_right,._aurycreport._aurycbottomright._aurycVertical_right{-webkit-transform:rotate(-90deg) translate(100%,22%);-webkit-transform-origin:100% 100%;-moz-transform:rotate(-90deg) translate(100%,22%);-moz-transform-origin:100% 100%;-ms-transform:rotate(-90deg) translate(100%,22%);-ms-transform-origin:100% 100%;transform:rotate(-90deg) translate(100%,22%);transform-origin:100% 100%;border-radius:5px 5px 0 0;-webkit-box-shadow:0 -2px 4px rgba(0,0,0,.1);box-shadow:0 -2px 4px rgba(0,0,0,.1)}._aurycbadge._aurycbottomright._aurycVertical_right ._aurycBadgeLabel:after,._aurycreport._aurycbottomright._aurycVertical_right ._aurycBadgeLabel:after{content:"\\f106";font-family:fontawesome;padding-left:10px}._aurycbadge._aurycbottomleft,._aurycreport._aurycbottomleft{right:auto!important;margin-left:.6em;top:auto;bottom:1.2em}._aurycbadge._aurycbottomleft ._aurycBadgeLabel,._aurycreport._aurycbottomleft ._aurycBadgeLabel{padding-right:.3em;padding-left:.3em}._aurycbadge._aurycbottomleft._aurycVertical_left,._aurycreport._aurycbottomleft._aurycVertical_left{-webkit-transform:translate(-8%,100%) rotate(-90deg);-webkit-transform-origin:0 0;-moz-transform:translate(-8%,100%) rotate(-90deg);-moz-transform-origin:0 0;-ms-transform:translate(-8%,100%) rotate(-90deg);-ms-transform-origin:0 0;transform:translate(-8%,100%) rotate(-90deg);transform-origin:0 0;border-radius:0 0 5px 5px;-webkit-box-shadow:0 -2px 4px rgba(0,0,0,.1);box-shadow:0 -2px 4px rgba(0,0,0,.1)}._aurycbadge._aurycbottomleft._aurycVertical_left ._aurycBadgeLabel:after,._aurycreport._aurycbottomleft._aurycVertical_left ._aurycBadgeLabel:after{content:"\\f107";font-family:fontawesome;padding-left:10px}._aurycbadge._auryctopright,._aurycreport._auryctopright{margin-right:.6em;left:auto!important;right:0!important;top:.6em;bottom:auto}._aurycbadge._auryctopright ._aurycBadgeLabel,._aurycreport._auryctopright ._aurycBadgeLabel{padding-left:.3em}._aurycbadge._auryctopright._aurycVertical_right,._aurycreport._auryctopright._aurycVertical_right{-webkit-transform:rotate(-90deg) translateY(-78%);-webkit-transform-origin:100% 0;-moz-transform:rotate(-90deg) translateY(-78%);-moz-transform-origin:100% 0;-ms-transform:rotate(-90deg) translateY(-78%);-ms-transform-origin:100% 0;transform:rotate(-90deg) translateY(-78%);transform-origin:100% 0;border-radius:5px 5px 0 0;-webkit-box-shadow:0 -2px 4px rgba(0,0,0,.1);box-shadow:0 -2px 4px rgba(0,0,0,.1)}._aurycbadge._auryctopright._aurycVertical_right ._aurycBadgeLabel:after,._aurycreport._auryctopright._aurycVertical_right ._aurycBadgeLabel:after{content:"\\f106";font-family:fontawesome;padding-left:10px}._aurycbadge._auryctopleft,._aurycreport._auryctopleft{right:auto!important;margin-left:.6em;top:.6em;bottom:auto}._aurycbadge._auryctopleft ._aurycBadgeLabel,._aurycreport._auryctopleft ._aurycBadgeLabel{padding-right:.3em;padding-left:.3em}._aurycbadge._auryctopleft._aurycVertical_left,._aurycreport._auryctopleft._aurycVertical_left{-webkit-transform:rotate(-90deg) translate(-100%,-22%);-webkit-transform-origin:0 0;-moz-transform:rotate(-90deg) translate(-100%,-22%);-moz-transform-origin:0 0;-ms-transform:rotate(-90deg) translate(-100%,-22%);-ms-transform-origin:0 0;transform:rotate(-90deg) translate(-100%,-22%);transform-origin:0 0;border-radius:0 0 5px 5px;-webkit-box-shadow:0 -2px 4px rgba(0,0,0,.1);box-shadow:0 -2px 4px rgba(0,0,0,.1)}._aurycbadge._auryctopleft._aurycVertical_left ._aurycBadgeLabel:after,._aurycreport._auryctopleft._aurycVertical_left ._aurycBadgeLabel:after{content:"\\f107";font-family:fontawesome;padding-left:10px}._aurycbadge._aurycmiddleleft,._aurycreport._aurycmiddleleft{right:auto!important;margin-left:.6em;top:50%}._aurycbadge._aurycmiddleleft ._aurycBadgeLabel,._aurycreport._aurycmiddleleft ._aurycBadgeLabel{padding-right:.3em;padding-left:.3em}._aurycbadge._aurycmiddleleft._aurycVertical_left,._aurycreport._aurycmiddleleft._aurycVertical_left{-webkit-transform:rotate(-90deg) translate(-50%,-22%);-webkit-transform-origin:0 0;-moz-transform:rotate(-90deg) translate(-50%,-22%);-moz-transform-origin:0 0;-ms-transform:rotate(-90deg) translate(-50%,-22%);-ms-transform-origin:0 0;transform:rotate(-90deg) translate(-50%,-22%);transform-origin:0 0;border-radius:0 0 5px 5px;-webkit-box-shadow:0 -2px 4px rgba(0,0,0,.1);box-shadow:0 -2px 4px rgba(0,0,0,.1)}._aurycbadge._aurycmiddleleft._aurycVertical_left ._aurycBadgeLabel:after,._aurycreport._aurycmiddleleft._aurycVertical_left ._aurycBadgeLabel:after{content:"\\f107";font-family:fontawesome;padding-left:10px}._aurycbadge._aurycmiddleright,._aurycreport._aurycmiddleright{margin-right:.6em;left:auto!important;right:0!important;top:50%}._aurycbadge._aurycmiddleright ._aurycBadgeLabel,._aurycreport._aurycmiddleright ._aurycBadgeLabel{padding-left:.3em}._aurycbadge._aurycmiddleright._aurycVertical_right,._aurycreport._aurycmiddleright._aurycVertical_right{-webkit-transform:rotate(-90deg) translate(50%,-78%);-webkit-transform-origin:100% 0;-moz-transform:rotate(-90deg) translate(50%,-78%);-moz-transform-origin:100% 0;-ms-transform:rotate(-90deg) translate(50%,-78%);-ms-transform-origin:100% 0;transform:rotate(-90deg) translate(50%,-78%);transform-origin:100% 0;border-radius:5px 5px 0 0;-webkit-box-shadow:0 -2px 4px rgba(0,0,0,.1);box-shadow:0 -2px 4px rgba(0,0,0,.1)}._aurycbadge._aurycmiddleright._aurycVertical_right ._aurycBadgeLabel:after,._aurycreport._aurycmiddleright._aurycVertical_right ._aurycBadgeLabel:after{content:"\\f106";font-family:fontawesome;padding-left:10px}.auryc-feedback .auryc-validation-block{font-family:open sans,sans-serif;font-size:14px;color:#fc6a56;border-radius:.5em;margin-bottom:.5em;margin-top:2em;display:none;text-align:left}._aurycbadge,._aurycreport{position:fixed;top:0;left:0;display:block;background:#692893;cursor:pointer;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:2147483647}._aurycbadge,._aurycbadge._aurycAnimate,._aurycreport,._aurycreport._aurycAnimate{opacity:.85;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=85)";filter:alpha(opacity=85)}._aurycbadge._aurycAnimate,._aurycreport._aurycAnimate{-webkit-transition-duration:.3s;transition-duration:.3s}._aurycbadge._aurycFixed,._aurycreport._aurycFixed{position:absolute}._aurycbadge._aurycHover,._aurycreport._aurycHover{font-size:100%}._aurycbadge ._aurycBadgeImg,._aurycreport ._aurycBadgeImg{width:20px;height:20px;vertical-align:middle}._aurycbadge ._aurycCounter,._aurycreport ._aurycCounter{padding-top:5px;padding-bottom:5px;vertical-align:middle}._aurycbadge ._aurycCounter ._aurycCounterInner,._aurycreport ._aurycCounter ._aurycCounterInner{background-color:#f87473;color:#fff;font-family:Open Sans,sans-serif;padding-left:.2em;border-radius:15px}._aurycbadge ._aurycCounter ._aurycCounterInner._aurycNum,._aurycreport ._aurycCounter ._aurycCounterInner._aurycNum{padding:2.5px 5px}._aurycbadge ._aurycBadgeLabel,._aurycreport ._aurycBadgeLabel{font-family:Open Sans,sans-serif;color:#fff;font-size:14px!important;z-index:5;font-weight:400}._aurycbadge ._aurycBadgeLabel:after,._aurycreport ._aurycBadgeLabel:after{content:"\\f106";font-family:fontawesome;padding-left:10px}.auryc-feedback,div .auryc-feedback__block>p{font-family:open sans,sans-serif}._aurycBadgeDesktop,._aurycBadgeTablet{height:40px;line-height:40px;display:block;-webkit-box-shadow:0 0 .9em 0 rgba(0,0,0,.4);-moz-box-shadow:0 0 .9em 0 rgba(0,0,0,.4);border-radius:100px;-webkit-box-shadow:0 -2px 4px rgba(0,0,0,.1);box-shadow:0 -2px 4px rgba(0,0,0,.1);padding:0 15px;overflow:hidden}.aurycFrameContainer,.aurycFrameContainer .aurycReportFrame{padding:0;width:700px;height:100%;border:none;display:block}._aurycBadgeSmartphone{width:60px;height:60px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;background:#2f8cff;border-radius:50%;cursor:pointer;fill:#fff;-webkit-box-shadow:0 1px 5px rgba(0,0,0,.06),0 2px 30px rgba(0,0,0,.12);box-shadow:0 1px 5px rgba(0,0,0,.06),0 2px 30px rgba(0,0,0,.12)}._aurycBadgeSmartphone:hover{opacity:1}@media \\0screen\\, screen\\9 {._aurycVertical_right{filter:progid: DXImageTransform.Microsoft.BasicImage(rotation=1)}._aurycVertical_left{filter:progid: DXImageTransform.Microsoft.BasicImage(rotation=3)}}@media print{._aurycBadgeDesktop,._aurycBadgeTablet{display:none!important}}._aurycreport{background-color:#343441}.aurycFrameContainer{position:fixed;top:0;right:-700px;background-color:#343941;margin:0;z-index:999999999;-webkit-transition:right .5s,-webkit-box-shadow .5s;transition:right .5s,-webkit-box-shadow .5s;transition:box-shadow .5s,right .5s;transition:box-shadow .5s,right .5s,-webkit-box-shadow .5s;-webkit-box-shadow:-9px 2px 205px 103px transparent;box-shadow:-9px 2px 205px 103px transparent}.aurycFrameContainer.aurycVisibleFrame{right:0;-webkit-box-shadow:-9px 2px 205px 103px rgba(0,0,0,.5);box-shadow:-9px 2px 205px 103px rgba(0,0,0,.5)}.aurycFrameContainer.aurycVisibleFrame .aurycReportCloseBtn{display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box}.aurycFrameContainer .aurycReportFrame{margin:0}.aurycFrameContainer .aurycReportCloseBtn{position:absolute;width:18px;left:-28px;font-size:20px!important;text-decoration:none;font-weight:400;top:10px;padding:5px 3px 5px 7px;background-color:#343941;color:#fff;-webkit-border-top-left-radius:1.5em;-webkit-border-bottom-left-radius:1.5em;-moz-border-radius-topleft:1.5em;-moz-border-radius-bottomleft:1.5em;border-top-left-radius:1.5em;border-bottom-left-radius:1.5em;cursor:pointer;display:none}.aurycFrameContainer .aurycReportCloseBtn:hover{color:#ccc}.aurycReportNotifications{background-color:#f57778;color:#fff;border:thin solid #f438b8!important;display:inline-block;min-width:10px;padding:3px 9px!important;font-size:18px!important;font-weight:700!important;line-height:1!important;text-align:center;white-space:nowrap;vertical-align:baseline!important;border-radius:30px;margin:5px!important}.aurycReportCounterImg{padding:2px;top:3px;position:relative}.aurycModalContainer .auryc-loader{width:1.5em;height:1.5em;display:block;padding:0;margin:0;position:absolute;top:0;left:0;border:0;z-index:2147483648}.aurycModalInnerContent .auryc-serviceunavailable{text-align:center}.aurycModalInnerContent .auryc-serviceunavailable p{font-size:1.5em;margin-bottom:.2em}.aurycModalInnerContent .auryc-serviceunavailable--flashIcon{font-size:3.5em;color:#f24554}.aurycModalInnerContent .auryc-serviceunavailable .auryc-serviceunavailable__heading{font-size:3em;margin-bottom:.5em;color:#f24554}.aurcy-feedback__selection{color:#4a4a4a;text-align:left;padding:25px 15px 15px}.aurcy-feedback__selection .aurcy-feedback__selection_title{font-size:18px;font-weight:600;line-height:24px}.aurcy-feedback__selection .auryc-feedback__general,.aurcy-feedback__selection .auryc-feedback__screenshot{background-color:#f6f6f6;border:1px solid #cfcfcf;border-radius:3px;-webkit-box-sizing:border-box;box-sizing:border-box;cursor:default;display:table;margin-top:10px;padding:5px;white-space:nowrap;width:100%}.aurcy-feedback__selection .auryc-feedback__general .auryc-feedback_option_row,.aurcy-feedback__selection .auryc-feedback__screenshot .auryc-feedback_option_row{display:table-row;height:60px}.aurcy-feedback__selection .auryc-feedback__general .auryc-feedback_option_column,.aurcy-feedback__selection .auryc-feedback__screenshot .auryc-feedback_option_column{display:table-cell;vertical-align:middle}.aurcy-feedback__selection .auryc-feedback__general .auryc-feedback__selection__label1,.aurcy-feedback__selection .auryc-feedback__screenshot .auryc-feedback__selection__label1{font-size:16px;font-weight:600;line-height:22px}.aurcy-feedback__selection .auryc-feedback__general .auryc-feedback__selection__label2,.aurcy-feedback__selection .auryc-feedback__screenshot .auryc-feedback__selection__label2{font-size:14px;font-weight:400;line-height:19px;white-space:normal}.aurcy-feedback__selection .auryc-feedback__general .auryc-feedback__selection__labels,.aurcy-feedback__selection .auryc-feedback__screenshot .auryc-feedback__selection__labels{padding-left:5px;vertical-align:middle}.aurcy-feedback__selection .auryc-feedback__general .auryc-feedback_option_image,.aurcy-feedback__selection .auryc-feedback__screenshot .auryc-feedback_option_image{width:50px}.aurcy-feedback__selection .auryc-feedback__general img,.aurcy-feedback__selection .auryc-feedback__screenshot img{vertical-align:middle;padding:0 5px}.aurcy-feedback__selection .auryc-feedback__general:hover,.aurcy-feedback__selection .auryc-feedback__screenshot:hover{background-color:#e4ecfc}div .auryc-feedback__block>p{font-size:14px;text-align:center;font-weight:400;color:#4a4a4a;letter-spacing:0}.aurcy-feedback__content,.aurcy-feedback__selection{display:none}.aurycVisibleContent{display:block}.auryc-feedback{font-size:10px;line-height:1.618;padding:2em;color:#4a4a4a;text-align:left;text-align:left\\9;border-radius:5px;resize:both}.auryc-feedback a,.auryc-feedback abbr,.auryc-feedback acronym,.auryc-feedback address,.auryc-feedback applet,.auryc-feedback article,.auryc-feedback aside,.auryc-feedback audio,.auryc-feedback b,.auryc-feedback big,.auryc-feedback blockquote,.auryc-feedback canvas,.auryc-feedback caption,.auryc-feedback center,.auryc-feedback cite,.auryc-feedback code,.auryc-feedback dd,.auryc-feedback del,.auryc-feedback details,.auryc-feedback dfn,.auryc-feedback div,.auryc-feedback dl,.auryc-feedback dt,.auryc-feedback em,.auryc-feedback embed,.auryc-feedback fieldset,.auryc-feedback figcaption,.auryc-feedback figure,.auryc-feedback footer,.auryc-feedback form,.auryc-feedback h1,.auryc-feedback h2,.auryc-feedback h3,.auryc-feedback h4,.auryc-feedback h5,.auryc-feedback h6,.auryc-feedback header,.auryc-feedback hgroup,.auryc-feedback i,.auryc-feedback iframe,.auryc-feedback img,.auryc-feedback ins,.auryc-feedback kbd,.auryc-feedback label,.auryc-feedback legend,.auryc-feedback li,.auryc-feedback mark,.auryc-feedback menu,.auryc-feedback nav,.auryc-feedback object,.auryc-feedback ol,.auryc-feedback output,.auryc-feedback p,.auryc-feedback pre,.auryc-feedback q,.auryc-feedback ruby,.auryc-feedback s,.auryc-feedback samp,.auryc-feedback section,.auryc-feedback small,.auryc-feedback span,.auryc-feedback strike,.auryc-feedback strong,.auryc-feedback sub,.auryc-feedback summary,.auryc-feedback sup,.auryc-feedback table,.auryc-feedback tbody,.auryc-feedback td,.auryc-feedback tfoot,.auryc-feedback th,.auryc-feedback thead,.auryc-feedback time,.auryc-feedback tr,.auryc-feedback tt,.auryc-feedback u,.auryc-feedback ul,.auryc-feedback var,.auryc-feedback video{margin:0;padding:0;border:0;font:inherit;vertical-align:baseline}.auryc-feedback table{border-collapse:collapse;border-spacing:0}.auryc-feedback caption,.auryc-feedback td,.auryc-feedback th{text-align:left;font-weight:400;vertical-align:middle}.auryc-feedback blockquote,.auryc-feedback q{quotes:none}.auryc-feedback blockquote:after,.auryc-feedback blockquote:before,.auryc-feedback q:after,.auryc-feedback q:before{content:"";content:none}.auryc-feedback a img{border:none}.auryc-feedback ol,.auryc-feedback ul{list-style:none}@media (min-width:1024px){.auryc-feedback{text-align:left}.auryc-feedback .auryc-star-rating{font-size:15px}}.auryc-feedback .auryc-feedback__heading{font-family:light,Open Sans,sans-serif;margin-bottom:10px;line-height:1.2;color:#4a4a4a;letter-spacing:-.1px}.auryc-feedback .auryc-feedback__heading--h1{font-size:25px;font-family:open sans,sans-serif;font-weight:400;text-align:center;width:inherit;text-transform:none!important}.auryc-feedback .auryc-feedback__heading--h2{font-size:2.4em}.auryc-feedback .auryc-feedback__label p{font-weight:600;font-size:14px;color:#4a4a4a;letter-spacing:0}.auryc-feedback .auryc-feedback__label--sublabel{font-weight:600;font-size:1em}.auryc-feedback p{font-size:1.2em;line-height:1.2;margin-bottom:.2em}.auryc-feedback em{font-style:italic}.auryc-feedback .auryc-feedback--l-align{float:left}.auryc-feedback .auryc-feedback--r-align{float:right}.auryc-feedback .auryc-feedback--keyline{font-family:open sans,sans-serif;text-align:center;font-size:14px;margin-bottom:20px}.auryc-feedback .auryc-feedback--keyline .auryc-feedback__logo{height:3.5em;margin:0 auto 1.7em;display:block;max-height:144px;width:auto}.auryc-feedback .auryc-star-rating{width:96%!important;color:#cfcfcf!important}.auryc-feedback .auryc-star-rating label{color:#cfcfcf!important}.auryc-feedback #submit-feedback{background:#23c6f5;border:1px solid #23c6f5;border-radius:3px;padding:.03em 4.7em;font-family:open sans-semibold,sans-serif;color:#555;letter-spacing:.2px;clear:right;overflow:auto;resize:none!important;width:220px!important;height:35px!important;margin-top:20px}.auryc-feedback #submit-feedback span{font-size:14px}.auryc-feedback .auryc-feedback__block.auryc-starrating__block{margin-bottom:.5em;font-size:18px}.auryc-feedback .auryc-feedback__block+.auryc-feedback__block{margin-top:10px}.auryc-feedback .auryc-feedback__question--text{font-size:1.4em;font-weight:700;margin-bottom:.5em}.auryc-feedback .auryc-feedback__label{display:block;text-align:center;font-size:12px;font-family:open sans,sans-serif;color:#4a4a4a;font-weight:600;margin-bottom:0}.auryc-feedback .auryc-feedback__label--error{color:red;font-size:1.2em;display:block}.auryc-feedback .auryc-feedback__options--vertical .auryc-feedback__option{direction:rtl;text-align:left}.auryc-feedback .auryc-feedback__options--horizontal .auryc-feedback__option{display:inline-block;text-align:center}.auryc-feedback .auryc-feedback__options--horizontal .auryc-feedback__label{display:block;font-weight:600}.auryc-feedback .auryc-feedback__control{position:relative;border:1px solid #979797;border-radius:3px;background:#fff;width:100%;font-size:1.4em;resize:none;padding:.5em;-webkit-box-sizing:border-box;box-sizing:border-box;text-align:left;-webkit-appearance:none}.auryc-feedback .auryc-feedback__control.input--focus,.auryc-feedback .auryc-feedback__control:active,.auryc-feedback .auryc-feedback__control:focus{outline:0;border:1px solid #464c55;color:#464c55}.auryc-feedback .auryc-feedback__control:hover{border:1px solid #464c55;color:#464c55}.auryc-feedback .auryc-feedback__control--textarea{height:54px;border:1px solid #cfcfcf}.auryc-feedback .auryc-feedback__textarea{position:relative;margin:0!important;text-align:right}.auryc-feedback .auryc-feedback__textarea .auryc-feedback__control{padding-bottom:1.2em;margin:0!important;max-width:100%}.auryc-feedback .auryc-feedback__textarea .auryc-feedback_countWrapper{display:block;text-align:right;font-size:10px;font-weight:400;color:#4a4a4a}.auryc-feedback .auryc_logo_parent{position:relative;text-align:center}.auryc-feedback .auryc_logo_parent .auryc_modal_footer{background:inherit;position:relative;left:1px;display:table;font-size:10px;color:#4a4a4a;letter-spacing:-.35px;z-index:3;width:100%}.auryc-feedback .auryc_logo_parent .auryc_modal_footer img{display:inline;position:relative;top:-1px;left:1px;vertical-align:middle}.auryc-feedback .auryc-feedback__select{color:#313943}.auryc-feedback .auryc-feedback__select:after{position:absolute;top:30%;right:1em;content:"";padding-left:5px;color:inherit;pointer-events:none}.auryc-feedback .auryc-feedback__select--opened:after{content:""}.auryc-feedback .auryc-feedback__select .auryc-feedback__selector{opacity:.001;filter:alpha(opacity=.001);position:absolute;left:0;top:0;width:100%;text-transform:none;-webkit-appearance:none;border-radius:0;cursor:pointer;font-size:1.4em}.auryc-feedback .auryc-clear .auryc-footer{display:block;clear:both;padding-top:20px}.auryc-feedback .auryc-clear .auryc-footer .auryc-powered img{width:11em;float:right}.auryc-feedback .auryc-clear .auryc-footer .auryc-privacy{float:left}.auryc-feedback .auryc-clear .auryc-footer .auryc-privacy a,.auryc-feedback .auryc-clear .auryc-footer .auryc-privacy a:active,.auryc-feedback .auryc-clear .auryc-footer .auryc-privacy a:hover{color:#464c55;text-decoration:none}.auryc-feedback .auryc-close-button{background:#23c6f5;width:222px!important;height:36px!important;padding:.4em 2.7143em!important;border:1px solid #23c6f5}.auryc-feedback .closeButtonAuryc{position:relative!important;padding:.3em 2em!important;font-family:open sans,sans-serif!important;font-size:18px!important;line-height:0!important;text-align:center!important;color:#555!important;font-weight:400!important;width:200px!important}.auryc-feedback .auryc-feedback__select-button{font-family:open sans,sans-serif;font-size:14px;font-weight:400;color:#4a4a4a;text-align:left}.auryc-feedback .auryc-feedback__button-row{text-align:center}.auryc-feedback .auryc-feedback__button{display:inline-block;overflow:hidden;text-overflow:ellipsis;padding:.5em .71429em;white-space:nowrap;-webkit-appearance:none;border-radius:0;background-color:#464c55;border:1px solid #464c55;cursor:pointer;color:#fff;font-size:1.7em;line-height:1.618;text-align:center;outline:0;font-weight:400;transition:all .15s ease;-webkit-transition:all .15s ease;-moz-transition:all .15s ease;-o-transition:all .15s ease;margin:0 auto}.auryc-feedback .auryc-feedback__button:hover{background:#808891;color:#fff}.auryc-feedback .auryc-feedback__button--expand{width:100%}.auryc-feedback .auryc-feedback__button--large{padding:.57143em 1.78571em}.auryc-feedback .auryc-feedback__button--medium{padding:.42857em 1.07143em;font-size:1.2em}.auryc-feedback .auryc-feedback__button--small{padding:.28571em .71429em;font-size:1.2em}@media (min-width:1024px){.auryc-feedback .auryc-feedback__button{width:auto;margin-top:1em}.auryc-feedback .auryc-feedback__button:after{content:"";display:table;clear:auto}}.auryc-feedback .auryc-feedback__button--center{float:none;text-align:center;-ms-flex-item-align:center;align-self:center}.auryc-feedback .auryc-star-rating{text-indent:0;margin:0 auto;text-align:center}.auryc-feedback .auryc-star-rating .auryc-star-rating__star{font-size:6em;cursor:pointer;border:0}.auryc-feedback .auryc-star-rating .auryc-star-rating__star:before{font-family:Open sans,sans-serif;content:""}.auryc-feedback .auryc-star-rating .auryc-star-rating__star--fill:before{content:""}.auryc-feedback .auryc-star-rating--disabled{color:#eaebec}.auryc-feedback .auryc-star-rating--disabled .auryc-star-rating__star{cursor:default;border:0}.auryc-feedback .auryc-star-rating input.auryc-star-rating__star--fill+label:before{content:"";color:#f8c454}.auryc-feedback .auryc-star-rating._aurycRatingSet label._aurycHover:before{color:#f8c454!important}.auryc-feedback .auryc-star-rating input[type=radio]{display:none}@media \\0screen\\, screen\\9 {.auryc-feedback .auryc-star-rating input[type=radio]{display:inline-block;opacity:0;margin:0;padding:0;width:0}}.auryc-feedback .auryc-star-rating input.auryc-star-rating__star+label{padding:0;font-size:2em!important;cursor:pointer;display:inline;margin:0;border:0}.aurycMainContainerMobile .auryc-feedback .auryc-star-rating input.auryc-star-rating__star+label{font-size:2.5em!important}.auryc-feedback .auryc-star-rating label:before{transition:color .15s ease;-webkit-transition:color .15s ease;-moz-transition:color .15s ease;-o-transition:color .15s ease;content:"";background:0 0;height:auto;width:auto;top:0}.auryc-feedback .auryc-star-rating input.auryc-star-rating__star:checked+label:before{content:"";color:#f8c454;background:0 0}.auryc-feedback .auryc-star-rating label._aurycHover:before{color:#f8c454;content:""}.auryc-feedback .auryc-star-rating .auryc-star-rating__num{display:none}.auryc-feedback .auryc-star-rating[disabled=disabled]{color:#eaebec}.auryc-feedback .auryc-star-rating[disabled=disabled] .auryc-star-rating__star+label{cursor:default;border:0}.auryc-feedback .auryc-nps__container{border:1px solid #9d9d9d;border-radius:5px;padding:10px 0;background-color:#f7f7f7}@media only screen and (min-device-width:320px) and (max-device-width:360px) and (-webkit-min-device-pixel-ratio:2) and (orientation:portrait){.auryc-feedback .auryc-nps__container{padding:10px 0 0}.auryc-feedback .auryc-nps__container .nps-rating .nps_rating_left_label,.auryc-feedback .auryc-nps__container .nps-rating .nps_rating_right_label{display:none}}.auryc-feedback .auryc-nps__container .nps-rating{padding:10px 10px 0;margin:auto auto 10px;min-height:35px;text-align:justify}.auryc-feedback .auryc-nps__container .nps-rating .nps_rating_left_label,.auryc-feedback .auryc-nps__container .nps-rating .nps_rating_right_label{font-size:12px;color:#9b9b9b}@media only screen and (min-device-width:361px) and (max-device-width:420px) and (-webkit-min-device-pixel-ratio:2) and (orientation:portrait){.auryc-feedback .auryc-nps__container .nps-rating .nps_rating_left_label,.auryc-feedback .auryc-nps__container .nps-rating .nps_rating_right_label{display:none}}.auryc-feedback .auryc-nps__container .nps-rating .nps_rating_left_label{float:left}.auryc-feedback .auryc-nps__container .nps-rating .nps_rating_right_label{float:right}.auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges{text-align:center;min-height:30px}.auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges label{padding:0;cursor:pointer;display:inline;margin:0;border:0}.auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges label:before{display:none}.auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges label:hover{color:#fff;background-color:#23c6f5}.auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges .nps-rating__badge{border-radius:50%;width:28px;padding:2px;font-size:12px;line-height:1em;position:relative;background-color:#e2e2e2;display:inline-block;-webkit-box-sizing:border-box;box-sizing:border-box}.auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges .aurycNpsRatingChecked,.auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges input[type=radio]:checked+label{color:#fff;background-color:#23c6f5}.auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges .nps-rating__badge .nps-rating__height_fix{margin-top:100%}.auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges .nps-rating__badge .nps-rating__num{position:absolute;left:0;top:50%;height:100%;width:100%;text-align:center;margin-top:-6px}.auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges .stretch{width:100%;display:inline-block;font-size:0;line-height:0;padding:0;margin:0;height:0}.auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges input[type=radio]{display:none}@media only screen and (min-width:361px) and (max-width:420px) and (-webkit-min-device-pixel-ratio:2) and (orientation:portrait){.auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges .nps-rating__badge{width:20px}}@media only screen and (min-width:320px) and (max-width:360px) and (-webkit-min-device-pixel-ratio:2) and (orientation:portrait){.auryc-feedback .auryc-nps__container .nps-rating .nps-rating__badges .nps-rating__badge{margin:3px 5px}}@media only screen and (min-width:500px){.auryc-feedback .auryc-nps__container .nps-rating{padding:10px 30px 0}}.auryc-feedback .auryc-feedback__cbradio{text-align:left;display:block;cursor:pointer}.auryc-feedback .auryc-feedback__cbradio:nth-child(1n+2){margin-top:.5em}.auryc-feedback .auryc-feedback__cbradio input{display:none}.auryc-feedback .auryc-feedback__cbradio:before{content:"";padding-left:.3em;padding-right:.3em;color:inherit;opacity:.3}.auryc-feedback .auryc-feedback__cbradio.aurycChecked:before{content:"";opacity:1;color:#23c6f5}.auryc-feedback .auryc-feedback__cbradio.auryc-feedback__cb-radio:before{content:""}.auryc-feedback .auryc-feedback__cbradio.auryc-feedback__cb-radio.aurycChecked:before{content:""}div.auryc-feedback-banner-img-container{overflow:hidden;width:539.4px;min-height:123px;max-height:auto}div.auryc-feedback-banner-img-container img.auryc-feedback-banner-img{max-width:100%;height:auto;display:block;padding:0;margin:0}.aurycMainContainerMobile{max-width:34em;margin-left:auto;margin-right:auto;opacity:0;-webkit-transition:opacity .5s;transition:opacity .5s}.aurycMainContainerMobile img.auryc-feedback-banner-img-desktop{display:none!important}.auryc-website-ipt{display:none}textarea::-moz-placeholder{font-style:italic;color:#9b9b9b;font-size:12px}textarea::-webkit-input-placeholder{font-style:italic;color:#9b9b9b;font-size:12px}';styleInject(css$1);var Event=function(){function t(e){classCallCheck(this,t),this.event=new PubSubTopic,this.listener=new e(this.handleEvent.bind(this))}return createClass(t,[{key:"subscribe",value:function(){this.event.subscribe.apply(this.event,arguments),0<this.event.subscriptions.length&&this.listener.start()}},{key:"unsubscribe",value:function(){this.event.unsubscribe.apply(this.event,arguments),0===this.event.subscriptions.length&&this.listener.stop()}},{key:"handleEvent",value:function(){this.event.fire()}}]),t}(),NavigationListener=function(){function t(e){classCallCheck(this,t),this.handleEvent=e,this.started=!1}return createClass(t,[{key:"start",value:function(){this.started||history.pushState&&window.addEventListener&&(this.originalPushState=history.pushState,history.pushState=function(e,t){this.originalPushState.apply(history,arguments),this.handleEvent()}.bind(this),this.originalReplaceState=history.replaceState,history.replaceState=function(e,t){this.originalReplaceState.apply(history,arguments),this.handleEvent()}.bind(this),window.addEventListener("popstate",this.handleEvent),this.started=!0)}},{key:"stop",value:function(){this.started&&(history.pushState=this.originalPushState,history.replaceState=this.originalReplaceState,window.removeEventListener("popstate",this.handleEvent),this.originalPushState=null,this.originalReplaceState=null,this.started=!1)}}]),t}(),unloadListener=function(){function t(e){classCallCheck(this,t),this.handleEvent=e,this.started=!1}return createClass(t,[{key:"start",value:function(){this.started||(addDomEvent(window,"unload",this.handleEvent),this.started=!0)}},{key:"stop",value:function(){this.started&&(removeDomEvent(window,"unload",this.handleEvent),this.started=!1)}}]),t}(),navigationEvent=new Event(NavigationListener),unloadEvent=new Event(unloadListener),mobileBadgeLabel='\n  <svg width="26px" height="26px" viewBox="0 0 26 26" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <g id="Page-1" stroke="none" stroke-width="1" fill-rule="evenodd">\n          <g id="Artboard" transform="translate(-2.000000, -4.000000)">\n              <path d="M23,12 L23,10 L7,10 L7,12 L23,12 Z M23,16 L23,14 L7,14 L7,16 L23,16 Z M23,20 L23,18 L7,18 L7,20 L23,20 Z M25.4366197,4 C26.128329,4 26.7284795,4.25430106 27.2370892,4.7629108 C27.7456989,5.27152054 28,5.87167103 28,6.56338028 L28,22.1877934 C28,22.8795027 27.7456989,23.4898252 27.2370892,24.0187793 C26.7284795,24.5477335 26.128329,24.8122066 25.4366197,24.8122066 L7.18779343,24.8122066 L2,30 L2,6.56338028 C2,5.87167103 2.25430106,5.27152054 2.7629108,4.7629108 C3.27152054,4.25430106 3.87167103,4 4.56338028,4 L25.4366197,4 Z"></path>\n          </g>\n      </g>\n  </svg>',Badge=function(){function s(e){classCallCheck(this,s),this.cfg=e,this.br=getInstance(),this.fbVisible=!1,this.chatVisible=!1;var t=this;this.badgeClicked=new PubSubTopic,this.animationMove=4,this.interval=null;var r=void 0;if(e.badgeTemplate){var n=encoder.decodeBase64(e.badgeTemplate);(r=$(n)).$(".__aurycFeedbackLabel")[0].innerHTML=e.label,e.chat&&setTimeout(function(){t.handleChat(e,5)},0)}else if(document.getElementById("__aurycFeedback_"+e.projectId))(r=$(document.getElementById("__aurycFeedback_"+e.projectId))).className+="__aurycFeedback";else{this.isIcon=!0;var i="",a="";this.br.isMobilePhone?(e.fontColor&&_.isValidColor(e.fontColor)&&(a='style="fill:'+e.fontColor+';position:relative;top:2px;"'),i='<div class="_aurycBadgeLabelMobile"'+a+">"+mobileBadgeLabel+"</div>"):(e.fontColor&&_.isValidColor(e.fontColor)&&(a='style="color:'+e.fontColor+'"'),i='<span class="_aurycBadgeLabel"'+a+'">'+e.label+"</span>"),r=$('<div style=""><div class="__aurycFeedback">'+i+"</div></div>");var o=this.br.isMobilePhone?"bottomright":e.fblocation;r.addClass("_auryc _aurycbadge _aurycBadge"+this.br.deviceType+" _auryc"+o),e.backgroundColor&&_.isValidColor(e.backgroundColor)&&r.css({backgroundColor:e.backgroundColor})}(this.$el=r,e.badgeTemplate&&e.chat)?addDomEvent(this.$el.$(".__aurycFeedback")[0],"click",function(){logger.log("badge clicked with chat"),t.badgeClicked.fire(e)}):addDomEvent(r,"click",function(){logger.log("badge clicked"),t.badgeClicked.fire(e)})}return createClass(s,[{key:"init",value:function(){this.$el.$(".__aurycFeedback");var e=this.cfg;this.setVisible(!1),"vertical"!=this.cfg.fbdirection||this.br.isMobilePhone||(-1<this.cfg.fblocation.indexOf("right")?this.$el.addClass("_aurycVertical_right"):this.$el.addClass("_aurycVertical_left")),this.cfg.fbfixed&&this.$el.addClass("_aurycFixed"),this.cfg.preview&&(e.badgeTemplate&&this.setChatVisible(!0),this.setVisible(!0)),this.applyCustomProperties(this.cfg)}},{key:"setFeedbackVisible",value:function(e){var t,r=e?"block":"none";if((t=0<=this.$el.className.indexOf("__aurycFeedback")?[this.$el]:this.$el.$(".__aurycFeedback"))&&0<t.length){var n=$(t[0]);n.css({display:r}),(this.fbVisible=e)?this.setVisible(e):(1===this.$el.children.length&&this.$el.children[0]===n&&this.setVisible(!1),this.chatVisible||this.setVisible(!1))}}},{key:"setChatVisible",value:function(e){var t=e?"":"none",r=this.$el.$("__aurycChat");if(r&&0<r.length){var n=$(r[0]);n.css({display:t}),(this.chatVisible=e)?this.setVisible(e):(1===this.$el.children.length&&this.$el.children[0]===n&&this.setVisible(!1),this.fbVisible||this.setVisible(!1))}}},{key:"setVisible",value:function(e){if(this.cfg.chat)this.fbVisible=e;else{var t=e?"":"none";this.$el.css({display:t})}}},{key:"remove",value:function(){this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}},{key:"removeFeedback",value:function(){var e=this.$el.$(".__aurycFeedback");if(e&&0<e.length){var t=$(e[0]);1===this.$el.children.length&&this.$el.children[0]===t?this.remove():this.$el.removeChild(t)}}},{key:"handleChat",value:function(e,t){if("olark"===e.chat.vendor){void 0===t&&(t=5);var r=this;if("function"!=typeof olark){if(t<=0)return;return void setTimeout(function(){r.handleChat(e,--t)},1e3)}olark("api.box.onShrink",function(){}),olark("api.box.onExpand",function(){})}}},{key:"applyCustomProperties",value:function(e){if(e.customProperties&&e.customProperties.badge)for(var t=e.customProperties.badge,r=this,n=0;n<t.length;n++){var i=t[n];if(s(i.context))try{for(var a=document.querySelectorAll(i.cssSelector),o=0;o<a.length;o++){c(a[o],i.properties)}}catch(e){logger.log(e)}}function s(t){if(!t)return!0;var e=[];return!(e="string"==typeof t.deviceType?[t.deviceType]:t.deviceType)||0===e.length||e.some(function(e){return e===r.br.deviceType||"mobilePhone"===t.deviceType&&r.br.isMobilePhone})}function c(e,t){for(var r=Object.keys(t),n=0;n<r.length;n++){var i=r[n],a=t[i];"style"===i?e.style.cssText+=a:e[i]=a}}}}]),s}(),crypt=createCommonjsModule(function(e){var a,r;a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&r.rotl(e,8)|4278255360&r.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=r.endian(e[t]);return e},randomBytes:function(e){for(var t=[];0<e;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],r=0,n=0;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},bytesToHex:function(e){for(var t=[],r=0;r<e.length;r++)t.push((e[r]>>>4).toString(16)),t.push((15&e[r]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},bytesToBase64:function(e){for(var t=[],r=0;r<e.length;r+=3)for(var n=e[r]<<16|e[r+1]<<8|e[r+2],i=0;i<4;i++)8*r+6*i<=8*e.length?t.push(a.charAt(n>>>6*(3-i)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],r=0,n=0;r<e.length;n=++r%4)0!=n&&t.push((a.indexOf(e.charAt(r-1))&Math.pow(2,-2*n+8)-1)<<2*n|a.indexOf(e.charAt(r))>>>6-2*n);return t}},e.exports=r}),charenc={utf8:{stringToBytes:function(e){return charenc.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(charenc.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}},charenc_1=charenc,isBuffer_1$2=function(e){return null!=e&&(isBuffer$1(e)||isSlowBuffer(e)||!!e._isBuffer)};function isBuffer$1(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function isSlowBuffer(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&isBuffer$1(e.slice(0,0))}var md5=createCommonjsModule(function(e){var y,m,v,I,w;y=crypt,m=charenc_1.utf8,v=isBuffer_1$2,I=charenc_1.bin,(w=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?I.stringToBytes(e):m.stringToBytes(e):v(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||(e=e.toString());for(var r=y.bytesToWords(e),n=8*e.length,i=1732584193,a=-271733879,o=-1732584194,s=271733878,c=0;c<r.length;c++)r[c]=16711935&(r[c]<<8|r[c]>>>24)|4278255360&(r[c]<<24|r[c]>>>8);r[n>>>5]|=128<<n%32,r[14+(n+64>>>9<<4)]=n;var l=w._ff,u=w._gg,h=w._hh,f=w._ii;for(c=0;c<r.length;c+=16){var d=i,g=a,p=o,b=s;a=f(a=f(a=f(a=f(a=h(a=h(a=h(a=h(a=u(a=u(a=u(a=u(a=l(a=l(a=l(a=l(a,o=l(o,s=l(s,i=l(i,a,o,s,r[c+0],7,-680876936),a,o,r[c+1],12,-389564586),i,a,r[c+2],17,606105819),s,i,r[c+3],22,-1044525330),o=l(o,s=l(s,i=l(i,a,o,s,r[c+4],7,-176418897),a,o,r[c+5],12,1200080426),i,a,r[c+6],17,-1473231341),s,i,r[c+7],22,-45705983),o=l(o,s=l(s,i=l(i,a,o,s,r[c+8],7,1770035416),a,o,r[c+9],12,-1958414417),i,a,r[c+10],17,-42063),s,i,r[c+11],22,-1990404162),o=l(o,s=l(s,i=l(i,a,o,s,r[c+12],7,1804603682),a,o,r[c+13],12,-40341101),i,a,r[c+14],17,-1502002290),s,i,r[c+15],22,1236535329),o=u(o,s=u(s,i=u(i,a,o,s,r[c+1],5,-165796510),a,o,r[c+6],9,-1069501632),i,a,r[c+11],14,643717713),s,i,r[c+0],20,-373897302),o=u(o,s=u(s,i=u(i,a,o,s,r[c+5],5,-701558691),a,o,r[c+10],9,38016083),i,a,r[c+15],14,-660478335),s,i,r[c+4],20,-405537848),o=u(o,s=u(s,i=u(i,a,o,s,r[c+9],5,568446438),a,o,r[c+14],9,-1019803690),i,a,r[c+3],14,-187363961),s,i,r[c+8],20,1163531501),o=u(o,s=u(s,i=u(i,a,o,s,r[c+13],5,-1444681467),a,o,r[c+2],9,-51403784),i,a,r[c+7],14,1735328473),s,i,r[c+12],20,-1926607734),o=h(o,s=h(s,i=h(i,a,o,s,r[c+5],4,-378558),a,o,r[c+8],11,-2022574463),i,a,r[c+11],16,1839030562),s,i,r[c+14],23,-35309556),o=h(o,s=h(s,i=h(i,a,o,s,r[c+1],4,-1530992060),a,o,r[c+4],11,1272893353),i,a,r[c+7],16,-155497632),s,i,r[c+10],23,-1094730640),o=h(o,s=h(s,i=h(i,a,o,s,r[c+13],4,681279174),a,o,r[c+0],11,-358537222),i,a,r[c+3],16,-722521979),s,i,r[c+6],23,76029189),o=h(o,s=h(s,i=h(i,a,o,s,r[c+9],4,-640364487),a,o,r[c+12],11,-421815835),i,a,r[c+15],16,530742520),s,i,r[c+2],23,-995338651),o=f(o,s=f(s,i=f(i,a,o,s,r[c+0],6,-198630844),a,o,r[c+7],10,1126891415),i,a,r[c+14],15,-1416354905),s,i,r[c+5],21,-57434055),o=f(o,s=f(s,i=f(i,a,o,s,r[c+12],6,1700485571),a,o,r[c+3],10,-1894986606),i,a,r[c+10],15,-1051523),s,i,r[c+1],21,-2054922799),o=f(o,s=f(s,i=f(i,a,o,s,r[c+8],6,1873313359),a,o,r[c+15],10,-30611744),i,a,r[c+6],15,-1560198380),s,i,r[c+13],21,1309151649),o=f(o,s=f(s,i=f(i,a,o,s,r[c+4],6,-145523070),a,o,r[c+11],10,-1120210379),i,a,r[c+2],15,718787259),s,i,r[c+9],21,-343485551),i=i+d>>>0,a=a+g>>>0,o=o+p>>>0,s=s+b>>>0}return y.endian([i,a,o,s])})._ff=function(e,t,r,n,i,a,o){var s=e+(t&r|~t&n)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},w._gg=function(e,t,r,n,i,a,o){var s=e+(t&n|r&~n)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},w._hh=function(e,t,r,n,i,a,o){var s=e+(t^r^n)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},w._ii=function(e,t,r,n,i,a,o){var s=e+(r^(t|~n))+(i>>>0)+o;return(s<<a|s>>>32-a)+t},w._blocksize=16,w._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var r=y.wordsToBytes(w(e,t));return t&&t.asBytes?r:t&&t.asString?I.bytesToString(r):y.bytesToHex(r)}});function generateSessionId(e,t){var r=config.getSiteid();return!1===r?(logger.log("siteid is false. using old global session id"),md5(_.UUID())):e&&t?md5(r+e+t):(logger.log("userId or lastvisitTS is false. using old global session id"),md5(_.UUID()))}function generateViewId(){return md5(_.UUID())}function generateUserId(){return md5(config.getSiteid()+"-"+_.UUID())}var idGen={generateSessionId:generateSessionId,generateViewId:generateViewId,generateUserId:generateUserId},SessionTracker=function(){function r(e,t){classCallCheck(this,r),this.sessStg=e,this.persStg=t,this.siteid=config.getSiteid(),this.duration=1e3*config.getConfig("sessionDuration","behavior"),this.timeoutId=null,this.heartbeatTransmit=null,this.isNew=!0,this.heartbeatInterval=12e4,this.pvCount=0,this.host=window.location.protocol+"//"+window.location.host,this.windowStg=WindowStorage.getInstance(this.siteid)}return createClass(r,[{key:"removeUser",value:function(){this.persStg.erase(constants.events.USERID),this.persStg.erase(constants.events.IDENTITYVALUE),this.windowStg.reset(),this.endSession(!0)}},{key:"setSessionIds",value:function(e,t,r,n){var i=constants.storage.SESSIONID,a=constants.storage.VIEWID,o=constants.events.USERID,s=r||idGen.generateSessionId(e,t),c=n||idGen.generateViewId();return logger.log("userid: "+e+", time:"+t+" sid: "+s+", vid: "+c),this.sessStg.setSession(a,c,constants.storage.SCOPE.SESSION.TAB),this.sessStg.setSession(i,s),this.sessStg.setSession(constants.events.SESSIONTIME,t),this.windowStg.set(a,c),this.windowStg.set(i,s),this.windowStg.set(o,e),this.windowStg.set(constants.events.SESSIONTIME,t),this.windowStg.commit(),{sessionId:s,viewId:c}}},{key:"setSessionValues",value:function(r){var n=this;return Object.keys(r).forEach(function(e){var t=r[e];void 0!==t&&(n.sessStg.setSession(e,t),n.windowStg.set(e,t))}),this.windowStg.commit(),this.sessStg}},{key:"isNewTab",value:function(){var e=constants.storage.IS_NEW,t=this.windowStg.get(e)||this.sessStg.get(e);return t||(t="true",this.sessStg.setSession(e,t,constants.storage.SCOPE.SESSION.TAB),this.windowStg.set(e,t),this.windowStg.commit()),t}},{key:"getSessionMetadata",value:function(){var e=constants.storage.VIEWID,t=this.windowStg.get(e)?this.windowStg.get(e):this.sessStg.get(e),r=this.sessStg.get(constants.storage.SESSIONID),n=this.persStg.get(constants.events.USERID),i=this.sessStg.get(constants.events.SESSIONTIME);return t||(t=idGen.generateViewId(),this.sessStg.setSession(e,t,constants.storage.SCOPE.SESSION.TAB),this.windowStg.set(e,t),this.windowStg.commit()),window.opener&&"true"===this.isNewTab()&&(t=idGen.generateViewId(),this.sessStg.setSession(e,t,constants.storage.SCOPE.SESSION.TAB),this.sessStg.setSession(constants.storage.IS_NEW,"false",constants.storage.SCOPE.SESSION.TAB),this.windowStg.set(constants.storage.VIEWID,t),this.windowStg.set(constants.storage.IS_NEW,"false"),this.windowStg.commit()),logger.log("userid: "+n+", time:"+i+" sessionId: "+r+", viewId: "+t),{sessionId:r,viewId:t,userId:n,sessionTime:i,siteId:this.siteid}}},{key:"isCrossDomain",value:function(){var e=this.windowStg.get(constants.storage.HOST);return!!e&&this.host!==e}},{key:"renewSession",value:function(){this.beginSession()}},{key:"beginSession",value:function(){var e=window.aurycStartTS?Math.max(_.now(),window.aurycStartTS):_.now(),t=e+this.duration;this.sessStg.setSession(constants.events.SESSION_EXP,t),logger.warn("begin a new session: "+e+" exp: "+(e+this.duration));var r=this.windowStg.get(constants.events.USERID);if(this.isCrossDomain()&&r){var n=this.windowStg.get(constants.storage.VIEWID),i=this.windowStg.get(constants.storage.SESSIONID),a=this.windowStg.get(constants.events.SESSIONTIME);a||(a=e),this.initPV(),this.setSessionIds(r,a,i,n)}else{(r=this.persStg.get(constants.events.USERID))||(r=idGen.generateUserId());var o=this.setSessionIds(r,e);logger.log("exp: "+this.sessStg.get(constants.events.SESSION_EXP)),this.resetPV(),AurycPubSub.publish(constants.events.NEW_SESSION,{sessionId:o.sessionId,viewId:o.viewId}),this.incPV()}this.persStg.setSession(constants.events.USERID,r),this.resetTimer(t),AurycPubSub.publish(constants.events.PAGEVIEWTRACKER),logger.log("published new session event"),this.syncWindowStg()}},{key:"incPV",value:function(){var e=this.getPVFromSessStorage();null==e&&(e=this.windowStg.get(constants.storage.PVCT)),null==e?e=0:e++,this.pvCount=e,this.setPVInStorage(e)}},{key:"resetPV",value:function(){this.sessStg.erase(constants.storage.PV),this.windowStg.delete(constants.storage.PVCT),this.pvCount=0}},{key:"getPV",value:function(){return this.pvCount}},{key:"getPVFromSessStorage",value:function(){return this.sessStg.get(constants.storage.PV)}},{key:"setPVInStorage",value:function(e){this.sessStg.setSession(constants.storage.PV,e),this.windowStg.set(constants.storage.PVCT,this.pvCount)}},{key:"endSession",value:function(e){this.isSessionOver()||e?(logger.warn("end a session. now:"+_.now()+", exp:"+this.sessStg.get(constants.events.SESSION_EXP)),this.sessStg.erase(constants.events.SESSION_EXP)):logger.log("session still alive. now:"+_.now()+", exp:"+this.sessStg.get(constants.events.SESSION_EXP))}},{key:"isSessionOver",value:function(){var e=_.now(),t=this.sessStg.get(constants.events.SESSION_EXP),r=!0;return!t||t<e?(r=!0,logger.log("session id:"+this.sessStg.get(constants.storage.SESSIONID)+", session is over. now: "+e+", exp: "+t)):r=!1,r}},{key:"resetTimer",value:function(e){window.clearTimeout(this.timeoutId);var t=this;if(this.timeoutId=window.setTimeout(function(){t.endSession()},this.duration),!e){var r=_.now()+this.duration;this.sessStg.setSession(constants.events.SESSION_EXP,r)}}},{key:"startHeartbeat",value:function(){config.isVisualEditorMode()||this.heartbeatTransmit||(this.heartbeatTransmit=setInterval(_.bind(function(){this.ping()},this),this.heartbeatInterval))}},{key:"stopHeartbeat",value:function(){this.heartbeatTransmit&&(clearInterval(this.heartbeatTransmit),delete this.heartbeatTransmit)}},{key:"ping",value:function(){this.isSessionOver()?(logger.log("session is over. skip ping"),this.endSession()):(logger.log("triggering ping"),AurycPubSub.publish(constants.events.PINGTRIGGER))}},{key:"handleUnload",value:function(){var e=browser$1.visibilityEventPrefix();null!==e?document.addEventListener(e+"visibilitychange",_.bind(function(){"hidden"===document[(""===e?"v":e+"V")+"isibilityState"]&&(logger.log("visibility hidden. ping"),this.ping(),this.windowStg&&this.windowStg.commit())},this)):browser$1.isMobile?window.addEventListener("unload",_.bind(function(){logger.log("unload fires. ping"),this.windowStg&&this.windowStg.commit(),this.ping()},this)):window.addEventListener("beforeunload",_.bind(function(){logger.log("befoerunload fires. ping"),this.windowStg&&this.windowStg.commit(),this.ping()},this))}},{key:"bindEvent",value:function(){var t=this;"pointerover pointerenter pointerdown pointermove pointerup pointercancel pointerout pointerleave".split(" ").forEach(function(e){browser$1.addDomEvent(window,e,_.throttle(function(){t.isSessionOver()?(logger.log("create a new session"),t.beginSession()):t.resetTimer()},1e3,{leading:!0,trailing:!1}))});var e=browser$1.visibilityEventPrefix();null!==e&&document.addEventListener(e+"visibilitychange",function(){"visible"===document[(""===e?"v":e+"V")+"isibilityState"]&&(logger.log("visibility visible"),t.isSessionOver()?(logger.log("create a new session"),t.beginSession()):t.resetTimer())})}},{key:"syncWindowStg",value:function(){var e=constants.storage.HOST,t=this.sessStg.get(constants.events.SESSIONTIME);this.windowStg.set(constants.events.SESSIONTIME,t);var r=this.persStg.get(constants.events.USERID);this.windowStg.set(constants.events.USERID,r);var n=this.sessStg.get(constants.storage.SESSIONID);this.windowStg.set(constants.storage.SESSIONID,n),this.windowStg.set(e,this.host),this.windowStg.commit()}},{key:"initSessionOrPV",value:function(){logger.log("init session called"),this.isSessionOver()?this.beginSession():(this.initPV(),AurycPubSub.publish(constants.events.PAGEVIEWTRACKER),this.resetTimer(),this.syncWindowStg()),this.bindEvent(),this.startHeartbeat()}},{key:"initPV",value:function(){var e=window.aurycStartTS?Math.max(_.now(),window.aurycStartTS):_.now();logger.log("create a new pv. setting startTS:"+e),this.sessStg.setSession(constants.events.PV_START_TS,e,constants.storage.SCOPE.SESSION.TAB);var t=browser$1.getWinSize(window);this.sessStg.set(constants.events.WIN_SIZE,JSON.stringify(t),constants.storage.SCOPE.SESSION.TAB),this.windowStg.set(constants.events.PV_START_TS,e),this.windowStg.set(constants.events.WIN_SIZE,JSON.stringify(t)),this.windowStg.commit(),this.incPV()}},{key:"getPVStartTS",value:function(){var e=this.windowStg.get(constants.events.PV_START_TS)||this.sessStg.get(constants.events.PV_START_TS);return e?(logger.log("Getting start ts from storage: "+e),e):(logger.log("Not getting start ts from storage. using now()"),_.now())}},{key:"getWinSize",value:function(){return this.windowStg.get(constants.events.WIN_SIZE)||this.sessStg.get(constants.events.WIN_SIZE)}},{key:"getSessionStorage",value:function(){return this.sessStg}},{key:"getSession",value:function(r){var n=this;return r&&Object.keys(r).forEach(function(e){var t=n.windowStg.get(r[e]);void 0!==t&&n.sessStg.setSession(r[e],t)}),this.sessStg}}]),r}(),globalSessionTracker=new SessionTracker(StorageFactory.getInstance(constants.symbols.SESSION),StorageFactory.getInstance(constants.symbols.PERMANENT)),FeedbackAPI=function(){function e(){classCallCheck(this,e),this.stg=StorageFactory.getInstance(constants.symbols.PERMANENT,"feedback"),this.feedbackEnabled=new PubSubTopic}return createClass(e,[{key:"setFeedbackEnabled",value:function(e){this.stg.set("enabled",e),this.feedbackEnabled.fire(e)}},{key:"getFeedbackEnabled",value:function(){return!1!==this.stg.get("enabled")}},{key:"makePublic",value:function(e){_.isDefined(e)&&(window.auryc||(window.aurycFeedbackAPI={}),window.aurycFeedbackAPI=e)}}]),e}(),feedbackAPI=new FeedbackAPI,TTF_TOKEN_DELIMITER=":",stg=StorageFactory.getInstance(constants.symbols.PERMANENT,"feedback"),Trigger=function(){function r(e,t){classCallCheck(this,r),this.cfg=e,this.criteria=t,this.badge=null,this.enabled=!0,this.delayedPopupTimer=!1,this.siteId=config.getConfig("siteid"),this.feedbackTriggered=new PubSubTopic,this.setupBadge()}return createClass(r,[{key:"disable",value:function(){this.enabled=!1,this.badge&&this.badge.removeFeedback()}},{key:"setEnabled",value:function(e){this.enabled=!!e,this.badge&&(this.enabled?this.setupBadge():this.badge.setFeedbackVisible(!1))}},{key:"setupBadge",value:function(){this.showBadge(),this.setupDelayedPopup(this.cfg)}},{key:"showBadge",value:function(){this.badge=new Badge(this.cfg),document.body.appendChild(this.badge.$el),this.badge.init(),this.displayBadge(!0);var e=this;this.badge.badgeClicked.subscribe(function(){e.cfg.projectId;e.feedbackTriggered.fire()})}},{key:"displayBadge",value:function(e){var t=this.badge,r=this.cfg,n=function(){var e=getScroll(window);feedbackAPI.getFeedbackEnabled()&&t.setFeedbackVisible(e.y>a)};if(void 0!==r.projectId&&!1!==r.showBadge&&feedbackAPI.getFeedbackEnabled()||(e=!1),"D"===r.triggerbehavior)this.delayBadgeTimer&&clearTimeout(this.delayBadgeTimer),e&&(this.delayBadgeTimer=setTimeout(function(){feedbackAPI.getFeedbackEnabled()&&t.setFeedbackVisible(!0)},1e3*r.triggerdelayseconds));else if("T"===r.triggerbehavior||"S"===r.triggerbehavior)if(e){var i=getWinSize(window);if(document.body.scrollHeight<=i.h)t.setFeedbackVisible(!0);else{var a=Math.min(i.h/4,(document.body.scrollHeight-i.h)/4);addDomEvent(window,"scroll",n)}}else removeDomEvent(window,"scroll",n),t.setFeedbackVisible(!1);else t.setFeedbackVisible(e)}},{key:"setupDelayedPopup",value:function(e){if(!this.hasDelayedPopup(e))return!1;this.startTimer(this.siteId,e.projectId);var t=this;return unloadEvent.subscribe(function(){t.handlePageUnload()}),!0}},{key:"handlePageUnload",value:function(){this.suspendTimer(this.siteId,this.cfg.projectId)}},{key:"handleTimeout",value:function(){var e=this.cfg,t=this.siteId;this.criteria.isDelayedPopupActive(e)&&null!==this.getTimeRemain(t,e.projectId)&&(this.setTimeRemain(t,e.projectId,null),window.launchAurycFeedback(e.projectId,!1,!0))}},{key:"handleNavigation",value:function(e){var t=this.cfg;this.badge&&this.displayBadge(e),this.hasDelayedPopup(t)&&(this.suspendTimer(this.siteId,t.projectId),e&&this.startTimer(this.siteId,t.projectId))}},{key:"hasDelayedPopup",value:function(e){return!e.popupDelayEnabled||e.disabled?(logger.warn("delayed popup is not enabled in config for project "+e.projectId),!1):this.criteria.isDelayedPopupActive(e)?(logger.warn("delayed popup is enabled for project "+e.projectId+", delay: "+e.popupDelaySeconds+" seconds"),!0):(logger.warn("deplayed popup is not active in this session for project "+e.projectId),!1)}},{key:"startTimer",value:function(e,t){if(!this.criteria.isFeedbackShown(this.config)){this.delayedPopupTimer&&clearTimeout(this.delayedPopupTimer);var r=this.getTimeRemain(e,t);r||0===r||(r=1e3*this.cfg.popupDelaySeconds,this.setTimeRemain(e,t,r));var n=this;this.startTime=(new Date).getTime(),this.delayedPopupTimer=setTimeout(function(){n.handleTimeout()},r)}}},{key:"suspendTimer",value:function(e,t){var r=(new Date).getTime()-this.startTime,n=this.getTimeRemain(e,t);if(null!==n){var i=r<n?n-r:0;this.setTimeRemain(e,t,i)}this.delayedPopupTimer&&clearTimeout(this.delayedPopupTimer),this.delayedPopupTimer=null}},{key:"getTimeRemain",value:function(e,t){var r=globalSessionTracker.getSessionMetadata().sessionId,n=stg.get("TTF_"+e+"_"+t);if(!n)return null;var i=n.split(TTF_TOKEN_DELIMITER);return i[0]!==r?null:1*i[1]}},{key:"setTimeRemain",value:function(e,t,r){var n="TTF_"+e+"_"+t;if(null!==r){var i=globalSessionTracker.getSessionMetadata().sessionId+TTF_TOKEN_DELIMITER+r;stg.set(n,i)}else stg.erase(n)}}]),r}(),FBModel=function(){function t(e){classCallCheck(this,t),this.browser=getInstance(),this.cfg=e,this.feedbackDef=null,this.htmlElem=null,this.feedbackUIUpdated=new PubSubTopic,this.feedbackSubmitStarted=new PubSubTopic,this.feedbackSubmitted=new PubSubTopic,this.starsRatings=!1,this.npsRatings="unknown",this.formType=null,this.questionGroup=null}return createClass(t,[{key:"_getDefaultData",value:function(){return"CI6MywibmFtZSI6IkRhbmdkYW5nIFN1cnZleSAyMDE2IiwiZGVzY3JpcHRpb24iOiJ0ZXN0IGZvciBkYW5nZGFuZyIsImxhbmd1YWdlQ29kZSI6bnVsbCwic2l0ZUtleSI6IjEtbHl5dGVzdDFzcG9ydGNvbSIsImNyZWF0ZWREYXRlIjoiMjAxNy0xMi0xOVQxMjoyNjo1MCIsImNyZWF0ZWRVc2VySWQiOjEsImRlbGV0ZWQiOnRydWUsImxhc3RVcGRhdGVEYXRlIjoiMjAxNy0xMi0xOVQxMzoyNToxMyIsImVuYWJsZWQiOmZhbHNlLCJmb3JtQ29uZmlnIjoie1wiYmFja2dyb3VuZENvbG9yXCI6XCIjMTIxNTFBXCIsXCJmb250Q29sb3JcIjpcIiNGRkZGRkZcIixcInRyaWdnZXJiZWhhdmlvclwiOlwiSVwiLFwiYnJhbmRcIjpcInNob3dcIixcInRyaWdnZXJkZWxheXNlY29uZHNcIjpcIjEwXCIsXCJ0cmlnZ2VyaGFsZndheWRvd25wYWdlXCI6ZmFsc2UsXCJ0YXJnZXRpbmdkZXZpY2VkZXNrdG9wXCI6dHJ1ZSxcInRhcmdldGluZ2RldmljZW1vYmlsZVwiOnRydWUsXCJ0cmlnZ2VycGFnZWZpbHRlclwiOlwiQVwiLFwiZmlsdGVycGFnZXNcIjpbXCJcIl0sXCJmaWx0ZXJwYWdlc0luY2x1ZGVcIjpbXCJcIl0sXCJmYmRpcmVjdGlvblwiOlwiaG9yaXpvbnRhbFwiLFwidGFyZ2V0aW5nY2FwXCI6XCIxMDBcIixcInBvcHVwRGVsYXlFbmFibGVkXCI6ZmFsc2UsXCJwb3B1cERlbGF5U2Vjb25kc1wiOlwiMzBcIixcInNwZWNpZmljRm9ybUVuYWJsZVwiOmZhbHNlLFwic3VydmV5VGhyb3R0bGVzXCI6e1wiY29va2llXCI6XCJhdXJ5Yy5mYnRcIixcImFiYW5kb25lZFwiOjcsXCJzdWJtaXR0ZWRcIjo5MCxcInNhbXBsaW5nXCI6MTAwfSxcImZlZWRiYWNrSWRcIjpcIjM0OTlcIixcImljb25cIjpcImFzcGFyazEwMC5wbmdcIixcImRlbGF5XCI6MCxcInRlbXBsYXRlXCI6XCJkZWZhdWx0XCIsXCJsYWJlbFwiOlwiT3B0aW9uUXVlc3Rpb25GZWVkQmFja1wiLFwiZmJsb2NhdGlvblwiOlwibWlkZGxlcmlnaHRcIixcInBvcHVwXCI6ZmFsc2UsXCJkaXNhYmxlZFwiOmZhbHNlLFwiZmJhbmltYXRlXCI6ZmFsc2UsXCJmYmZpeGVkXCI6ZmFsc2UsXCJzYXZlZFwiOlwiXCIsXCJ0b3BpY3NcIjpbe1wib3JkZXJcIjoxLFwiaWRcIjpcIjcyMThcIixcImFuc3dlcklkXCI6XCJDQU8wMDg0Nzg0QTAwMVwiLFwid2hpdGVsaXN0QWN0aXZlXCI6ZmFsc2UsXCJ3aGl0ZWxpc3REYXRhXCI6XCJcIixcInRvcGljVGV4dFwiOlwiTmV3IFF1ZXN0aW9uIEdyb3VwIDFcIn1dfSIsImZlZWRiYWNrVGl0bGUiOiJGZWVkYmFjayBTdXJ2ZXkiLCJsb2dvUGljIjoiaHR0cHM6Ly9mYi1sb2dvLnVzZXJ0eS5jb20vMTQ0N2Y3Y2FjYmJhNzBjNDFjZDRlZDkyMDA3ZDdjMmMvY2MtbG9nby5zdmciLCJwcm9sb2d1ZVRleHQiOiI8aDE+Q2xpY2sgaGVyZSB0byBlbnRlciBzdXJ2ZXkgVGl0bGU8L2gxPjxwPkNsaWNrIGhlcmUgdG8gdHlwZSBXZWxjb21lIE1lc3NhZ2U8L3A+IiwiZXBpbG9ndWVUZXh0IjoiPGgxPldlIEFwcHJlY2lhdGUgWW91ciBGZWVkYmFjazwvaDE+PHA+WW91ciBmZWVkYmFjayB3aWxsIGhlbHAgdXMgaW1wcm92ZTwvcD4iLCJ0b3BpY1F1ZXN0aW9uSWQiOiIxNTEzNjU3NjEwMjA4IiwicmF0aW5nUXVlc3Rpb25JZCI6IjE1MTM2NTc2MTAwOTUiLCJucHNRdWVzdGlvbklkIjoiMTUxMzY1NzYxMDE3NCIsInRvcGljR3JvdXBJZCI6ImM1ZmQ2ZjFiMTM0NTRiMjA5ZjlhYzdlZGVlM2Y4N2YxIiwicHVibGlzaGVkVmVyc2lvbiI6bnVsbCwicHVibGlzaGVkRGF0ZSI6bnVsbCwicXVlc3Rpb25zIjpbeyJpZCI6IjE1MTM2NTc2MTAxNzQiLCJmZWVkYmFja0lkIjozLCJxdWVzdGlvblRleHQiOiJIb3cgbGlrZWx5IGFyZSB5b3UgdG8gcmVjb21tZW5kIFRlc3QgQ29tcGFueSB0byBhIGZyaWVuZCBvciBjb2xsZWFndWU/IiwicmVxdWlyZWQiOnRydWUsIm51bWVyaWMiOnRydWUsInF1ZXN0aW9uVHlwZSI6Ik5QUyIsInF1ZXN0aW9uR3JvdXBJZCI6bnVsbCwicGFyZW50UXVlc3Rpb25JZCI6bnVsbCwicGFyZW50QW5zd2VySWQiOm51bGwsInF1ZXN0aW9uT3JkZXIiOjEsInF1ZXN0aW9uTGFiZWwiOm51bGwsImhpZGRlbiI6ZmFsc2UsIm1pblNjYWxlIjpudWxsLCJtYXhTY2FsZSI6bnVsbCwiYW5zd2VycyI6W3siaWQiOiIxNTEzNjU3NjEwMTc0QTAwMSIsImZlZWRiYWNrSWQiOjMsInF1ZXN0aW9uSWQiOiIxNTEzNjU3NjEwMTc0IiwibGFiZWwiOiJOb3QgQXQgQWxsIExpa2VseSIsInZhbHVlIjowLCJkaXNwbGF5T3JkZXIiOjEsImRpc3BsYXlMYWJlbCI6ZmFsc2UsImRpc3BsYXlWYWx1ZSI6dHJ1ZSwiaXNEZWZhdWx0IjpudWxsfSx7ImlkIjoiMTUxMzY1NzYxMDE3NEEwMDIiLCJmZWVkYmFja0lkIjozLCJxdWVzdGlvbklkIjoiMTUxMzY1NzYxMDE3NCIsImxhYmVsIjpudWxsLCJ2YWx1ZSI6MSwiZGlzcGxheU9yZGVyIjoyLCJkaXNwbGF5TGFiZWwiOmZhbHNlLCJkaXNwbGF5VmFsdWUiOnRydWUsImlzRGVmYXVsdCI6bnVsbH0seyJpZCI6IjE1MTM2NTc2MTAxNzRBMDAzIiwiZmVlZGJhY2tJZCI6MywicXVlc3Rpb25JZCI6IjE1MTM2NTc2MTAxNzQiLCJsYWJlbCI6bnVsbCwidmFsdWUiOjIsImRpc3BsYXlPcmRlciI6MywiZGlzcGxheUxhYmVsIjpmYWxzZSwiZGlzcGxheVZhbHVlIjp0cnVlLCJpc0RlZmF1bHQiOm51bGx9LHsiaWQiOiIxNTEzNjU3NjEwMTc0QTAwNCIsImZlZWRiYWNrSWQiOjMsInF1ZXN0aW9uSWQiOiIxNTEzNjU3NjEwMTc0IiwibGFiZWwiOm51bGwsInZhbHVlIjozLCJkaXNwbGF5T3JkZXIiOjQsImRpc3BsYXlMYWJlbCI6ZmFsc2UsImRpc3BsYXlWYWx1ZSI6dHJ1ZSwiaXNEZWZhdWx0IjpudWxsfSx7ImlkIjoiMTUxMzY1NzYxMDE3NEEwMDUiLCJmZWVkYmFja0lkIjozLCJxdWVzdGlvbklkIjoiMTUxMzY1NzYxMDE3NCIsImxhYmVsIjpudWxsLCJ2YWx1ZSI6NCwiZGlzcGxheU9yZGVyIjo1LCJkaXNwbGF5TGFiZWwiOmZhbHNlLCJkaXNwbGF5VmFsdWUiOnRydWUsImlzRGVmYXVsdCI6bnVsbH0seyJpZCI6IjE1MTM2NTc2MTAxNzRBMDA2IiwiZmVlZGJhY2tJZCI6MywicXVlc3Rpb25JZCI6IjE1MTM2NTc2MTAxNzQiLCJsYWJlbCI6bnVsbCwidmFsdWUiOjUsImRpc3BsYXlPcmRlciI6NiwiZGlzcGxheUxhYmVsIjpmYWxzZSwiZGlzcGxheVZhbHVlIjp0cnVlLCJpc0RlZmF1bHQiOm51bGx9LHsiaWQiOiIxNTEzNjU3NjEwMTc0QTAwNyIsImZlZWRiYWNrSWQiOjMsInF1ZXN0aW9uSWQiOiIxNTEzNjU3NjEwMTc0IiwibGFiZWwiOm51bGwsInZhbHVlIjo2LCJkaXNwbGF5T3JkZXIiOjcsImRpc3BsYXlMYWJlbCI6ZmFsc2UsImRpc3BsYXlWYWx1ZSI6dHJ1ZSwiaXNEZWZhdWx0IjpudWxsfSx7ImlkIjoiMTUxMzY1NzYxMDE3NEEwMDgiLCJmZWVkYmFja0lkIjozLCJxdWVzdGlvbklkIjoiMTUxMzY1NzYxMDE3NCIsImxhYmVsIjpudWxsLCJ2YWx1ZSI6NywiZGlzcGxheU9yZGVyIjo4LCJkaXNwbGF5TGFiZWwiOmZhbHNlLCJkaXNwbGF5VmFsdWUiOnRydWUsImlzRGVmYXVsdCI6bnVsbH0seyJpZCI6IjE1MTM2NTc2MTAxNzRBMDA5IiwiZmVlZGJhY2tJZCI6MywicXVlc3Rpb25JZCI6IjE1MTM2NTc2MTAxNzQiLCJsYWJlbCI6bnVsbCwidmFsdWUiOjgsImRpc3BsYXlPcmRlciI6OSwiZGlzcGxheUxhYmVsIjpmYWxzZSwiZGlzcGxheVZhbHVlIjp0cnVlLCJpc0RlZmF1bHQiOm51bGx9LHsiaWQiOiIxNTEzNjU3NjEwMTc0QTAxMCIsImZlZWRiYWNrSWQiOjMsInF1ZXN0aW9uSWQiOiIxNTEzNjU3NjEwMTc0IiwibGFiZWwiOm51bGwsInZhbHVlIjo5LCJkaXNwbGF5T3JkZXIiOjEwLCJkaXNwbGF5TGFiZWwiOmZhbHNlLCJkaXNwbGF5VmFsdWUiOnRydWUsImlzRGVmYXVsdCI6bnVsbH0seyJpZCI6IjE1MTM2NTc2MTAxNzRBMDExIiwiZmVlZGJhY2tJZCI6MywicXVlc3Rpb25JZCI6IjE1MTM2NTc2MTAxNzQiLCJsYWJlbCI6IkV4dHJlbWVseSBMaWtlbHkiLCJ2YWx1ZSI6MTAsImRpc3BsYXlPcmRlciI6MTEsImRpc3BsYXlMYWJlbCI6ZmFsc2UsImRpc3BsYXlWYWx1ZSI6dHJ1ZSwiaXNEZWZhdWx0IjpudWxsfV19LHsiaWQiOiIxNTEzNjU3NjEwMDk1IiwiZmVlZGJhY2tJZCI6MywicXVlc3Rpb25UZXh0IjoiUGxlYXNlIHJhdGUgeW91ciBleHBlcmllbmNlIG9uIG91ciB3ZWJzaXRlIiwicmVxdWlyZWQiOnRydWUsIm51bWVyaWMiOnRydWUsInF1ZXN0aW9uVHlwZSI6IlNDQUxFRCIsInF1ZXN0aW9uR3JvdXBJZCI6bnVsbCwicGFyZW50UXVlc3Rpb25JZCI6bnVsbCwicGFyZW50QW5zd2VySWQiOm51bGwsInF1ZXN0aW9uT3JkZXIiOjIsInF1ZXN0aW9uTGFiZWwiOm51bGwsImhpZGRlbiI6ZmFsc2UsIm1pblNjYWxlIjpudWxsLCJtYXhTY2FsZSI6bnVsbCwiYW5zd2VycyI6W3siaWQiOiIxNTEzNjU3NjEwMDk1QTAwMSIsImZlZWRiYWNrSWQiOjMsInF1ZXN0aW9uSWQiOiIxNTEzNjU3NjEwMDk1IiwibGFiZWwiOm51bGwsInZhbHVlIjoxLCJkaXNwbGF5T3JkZXIiOjEsImRpc3BsYXlMYWJlbCI6ZmFsc2UsImRpc3BsYXlWYWx1ZSI6dHJ1ZSwiaXNEZWZhdWx0IjpudWxsfSx7ImlkIjoiMTUxMzY1NzYxMDA5NUEwMDIiLCJmZWVkYmFja0lkIjozLCJxdWVzdGlvbklkIjoiMTUxMzY1NzYxMDA5NSIsImxhYmVsIjpudWxsLCJ2YWx1ZSI6MiwiZGlzcGxheU9yZGVyIjoyLCJkaXNwbGF5TGFiZWwiOmZhbHNlLCJkaXNwbGF5VmFsdWUiOnRydWUsImlzRGVmYXVsdCI6bnVsbH0seyJpZCI6IjE1MTM2NTc2MTAwOTVBMDAzIiwiZmVlZGJhY2tJZCI6MywicXVlc3Rpb25JZCI6IjE1MTM2NTc2MTAwOTUiLCJsYWJlbCI6bnVsbCwidmFsdWUiOjMsImRpc3BsYXlPcmRlciI6MywiZGlzcGxheUxhYmVsIjpmYWxzZSwiZGlzcGxheVZhbHVlIjp0cnVlLCJpc0RlZmF1bHQiOm51bGx9LHsiaWQiOiIxNTEzNjU3NjEwMDk1QTAwNCIsImZlZWRiYWNrSWQiOjMsInF1ZXN0aW9uSWQiOiIxNTEzNjU3NjEwMDk1IiwibGFiZWwiOm51bGwsInZhbHVlIjo0LCJkaXNwbGF5T3JkZXIiOjQsImRpc3BsYXlMYWJlbCI6ZmFsc2UsImRpc3BsYXlWYWx1ZSI6dHJ1ZSwiaXNEZWZhdWx0IjpudWxsfSx7ImlkIjoiMTUxMzY1NzYxMDA5NUEwMDUiLCJmZWVkYmFja0lkIjozLCJxdWVzdGlvbklkIjoiMTUxMzY1NzYxMDA5NSIsImxhYmVsIjpudWxsLCJ2YWx1ZSI6NSwiZGlzcGxheU9yZGVyIjo1LCJkaXNwbGF5TGFiZWwiOmZhbHNlLCJkaXNwbGF5VmFsdWUiOnRydWUsImlzRGVmYXVsdCI6bnVsbH1dfSx7ImlkIjoiMTUxMzY1NzYxMDIwOCIsImZlZWRiYWNrSWQiOjMsInF1ZXN0aW9uVGV4dCI6IldoYXQgaXMgeW91ciBmZWVkYmFjayByZWdhcmRpbmc/IiwicmVxdWlyZWQiOnRydWUsIm51bWVyaWMiOmZhbHNlLCJxdWVzdGlvblR5cGUiOiJEUk9QX0RPV04iLCJxdWVzdGlvbkdyb3VwSWQiOiJjNWZkNmYxYjEzNDU0YjIwOWY5YWM3ZWRlZTNmODdmMSIsInBhcmVudFF1ZXN0aW9uSWQiOm51bGwsInBhcmVudEFuc3dlcklkIjpudWxsLCJxdWVzdGlvbk9yZGVyIjozLCJxdWVzdGlvbkxhYmVsIjpudWxsLCJoaWRkZW4iOmZhbHNlLCJtaW5TY2FsZSI6bnVsbCwibWF4U2NhbGUiOm51bGwsImFuc3dlcnMiOlt7ImlkIjoiMTUxMzY1NzYxMDIwOEEwMDIiLCJmZWVkYmFja0lkIjozLCJxdWVzdGlvbklkIjoiMTUxMzY1NzYxMDIwOCIsImxhYmVsIjoibmV3IHRvcGljMSIsInZhbHVlIjoyLCJkaXNwbGF5T3JkZXIiOjEsImRpc3BsYXlMYWJlbCI6dHJ1ZSwiZGlzcGxheVZhbHVlIjpmYWxzZSwiaXNEZWZhdWx0IjpudWxsfSx7ImlkIjoiMTUxMzY1NzYxMDIwOEEwMDMiLCJmZWVkYmFja0lkIjozLCJxdWVzdGlvbklkIjoiMTUxMzY1NzYxMDIwOCIsImxhYmVsIjoibmV3IHRvcGljMiIsInZhbHVlIjozLCJkaXNwbGF5T3JkZXIiOjIsImRpc3BsYXlMYWJlbCI6dHJ1ZSwiZGlzcGxheVZhbHVlIjpmYWxzZSwiaXNEZWZhdWx0IjpudWxsfV19XSwidG9waWNzIjpbeyJpZCI6NiwiZmVlZGJhY2tJZCI6MywidG9waWNBbnN3ZXJJZCI6IjE1MTM2NTc2MTAyMDhBMDAyIiwidG9waWNUZXh0IjoibmV3IHRvcGljMSIsInRvcGljT3JkZXIiOjEsInRvcGljVmFsdWUiOjIsInF1ZXN0aW9ucyI6W3siaWQiOiIxNTEzNjYxMTEzMjExIiwiZmVlZGJhY2tJZCI6MywicXVlc3Rpb25UZXh0IjoiRG8geW91IHdhbnQgdG8gZWF0PyIsInJlcXVpcmVkIjp0cnVlLCJudW1lcmljIjpmYWxzZSwicXVlc3Rpb25UeXBlIjoiUkFESU9fQlVUVE9OIiwicXVlc3Rpb25Hcm91cElkIjoiYzVmZDZmMWIxMzQ1NGIyMDlmOWFjN2VkZWUzZjg3ZjEiLCJwYXJlbnRRdWVzdGlvbklkIjoiMTUxMzY1NzYxMDIwOCIsInBhcmVudEFuc3dlcklkIjoiMTUxMzY1NzYxMDIwOEEwMDIiLCJxdWVzdGlvbk9yZGVyIjo1LCJxdWVzdGlvbkxhYmVsIjpudWxsLCJoaWRkZW4iOmZhbHNlLCJtaW5TY2FsZSI6bnVsbCwibWF4U2NhbGUiOm51bGwsImFuc3dlcnMiOlt7ImlkIjoiMTUxMzY2MTExMzIxMUEwMDEiLCJmZWVkYmFja0lkIjozLCJxdWVzdGlvbklkIjoiMTUxMzY2MTExMzIxMSIsImxhYmVsIjoiWWVzIiwidmFsdWUiOjEsImRpc3BsYXlPcmRlciI6MSwiZGlzcGxheUxhYmVsIjp0cnVlLCJkaXNwbGF5VmFsdWUiOmZhbHNlLCJpc0RlZmF1bHQiOm51bGx9LHsiaWQiOiIxNTEzNjYxMTEzMjExQTAwMiIsImZlZWRiYWNrSWQiOjMsInF1ZXN0aW9uSWQiOiIxNTEzNjYxMTEzMjExIiwibGFiZWwiOiJObyIsInZhbHVlIjoyLCJkaXNwbGF5T3JkZXIiOjIsImRpc3BsYXlMYWJlbCI6dHJ1ZSwiZGlzcGxheVZhbHVlIjpmYWxzZSwiaXNEZWZhdWx0IjpudWxsfV19LHsiaWQiOiIxNTEzNjYxMTEzMjIzIiwiZmVlZGJhY2tJZCI6MywicXVlc3Rpb25UZXh0IjoiSG93IG9sZCBhcmUgeW91PyIsInJlcXVpcmVkIjp0cnVlLCJudW1lcmljIjpmYWxzZSwicXVlc3Rpb25UeXBlIjoiUkFESU9fQlVUVE9OIiwicXVlc3Rpb25Hcm91cElkIjoiYzVmZDZmMWIxMzQ1NGIyMDlmOWFjN2VkZWUzZjg3ZjEiLCJwYXJlbnRRdWVzdGlvbklkIjoiMTUxMzY1NzYxMDIwOCIsInBhcmVudEFuc3dlcklkIjoiMTUxMzY1NzYxMDIwOEEwMDIiLCJxdWVzdGlvbk9yZGVyIjo2LCJxdWVzdGlvbkxhYmVsIjpudWxsLCJoaWRkZW4iOmZhbHNlLCJtaW5TY2FsZSI6bnVsbCwibWF4U2NhbGUiOm51bGwsImFuc3dlcnMiOlt7ImlkIjoiMTUxMzY2MTExMzIyM0EwMDEiLCJmZWVkYmFja0lkIjozLCJxdWVzdGlvbklkIjoiMTUxMzY2MTExMzIyMyIsImxhYmVsIjoiPDUiLCJ2YWx1ZSI6MSwiZGlzcGxheU9yZGVyIjoxLCJkaXNwbGF5TGFiZWwiOnRydWUsImRpc3BsYXlWYWx1ZSI6ZmFsc2UsImlzRGVmYXVsdCI6bnVsbH0seyJpZCI6IjE1MTM2NjExMTMyMjNBMDAyIiwiZmVlZGJhY2tJZCI6MywicXVlc3Rpb25JZCI6IjE1MTM2NjExMTMyMjMiLCJsYWJlbCI6IjV+MTAiLCJ2YWx1ZSI6MiwiZGlzcGxheU9yZGVyIjoyLCJkaXNwbGF5TGFiZWwiOnRydWUsImRpc3BsYXlWYWx1ZSI6ZmFsc2UsImlzRGVmYXVsdCI6bnVsbH0seyJpZCI6IjE1MTM2NjExMTMyMjNBMDAzIiwiZmVlZGJhY2tJZCI6MywicXVlc3Rpb25JZCI6IjE1MTM2NjExMTMyMjMiLCJsYWJlbCI6Ij4xMCIsInZhbHVlIjozLCJkaXNwbGF5T3JkZXIiOjEwLCJkaXNwbGF5TGFiZWwiOnRydWUsImRpc3BsYXlWYWx1ZSI6ZmFsc2UsImlzRGVmYXVsdCI6bnVsbH1dfV19LHsiaWQiOjcsImZlZWRiYWNrSWQiOjMsInRvcGljQW5zd2VySWQiOiIxNTEzNjU3NjEwMjA4QTAwMyIsInRvcGljVGV4dCI6Im5ldyB0b3BpYzIiLCJ0b3BpY09yZGVyIjoyLCJ0b3BpY1ZhbHVlIjozLCJxdWVzdGlvbnMiOlt7ImlkIjoiMTUxMzY2MTExMzIzNiIsImZlZWRiYWNrSWQiOjMsInF1ZXN0aW9uVGV4dCI6IkRvIHlvdSBsaWtlIG1lPyIsInJlcXVpcmVkIjp0cnVlLCJudW1lcmljIjpmYWxzZSwicXVlc3Rpb25UeXBlIjoiUkFESU9fQlVUVE9OIiwicXVlc3Rpb25Hcm91cElkIjoiYzVmZDZmMWIxMzQ1NGIyMDlmOWFjN2VkZWUzZjg3ZjEiLCJwYXJlbnRRdWVzdGlvbklkIjoiMTUxMzY1NzYxMDIwOCIsInBhcmVudEFuc3dlcklkIjoiMTUxMzY1NzYxMDIwOEEwMDMiLCJxdWVzdGlvbk9yZGVyIjo3LCJxdWVzdGlvbkxhYmVsIjpudWxsLCJoaWRkZW4iOmZhbHNlLCJtaW5TY2FsZSI6bnVsbCwibWF4U2NhbGUiOm51bGwsImFuc3dlcnMiOlt7ImlkIjoiMTUxMzY2MTExMzIzNkEwMDEiLCJmZWVkYmFja0lkIjozLCJxdWVzdGlvbklkIjoiMTUxMzY2MTExMzIzNiIsImxhYmVsIjoiWWVzIiwidmFsdWUiOjEsImRpc3BsYXlPcmRlciI6MSwiZGlzcGxheUxhYmVsIjp0cnVlLCJkaXNwbGF5VmFsdWUiOmZhbHNlLCJpc0RlZmF1bHQiOm51bGx9LHsiaWQiOiIxNTEzNjYxMTEzMjM2QTAwMiIsImZlZWRiYWNrSWQiOjMsInF1ZXN0aW9uSWQiOiIxNTEzNjYxMTEzMjM2IiwibGFiZWwiOiJObyIsInZhbHVlIjoyLCJkaXNwbGF5T3JkZXIiOjIsImRpc3BsYXlMYWJlbCI6dHJ1ZSwiZGlzcGxheVZhbHVlIjpmYWxzZSwiaXNEZWZhdWx0IjpudWxsfV19XX1dLCJleHRyYUluZm8iOnsicmF0aW5nIjoiUGxlYXNlIHByb3ZpZGUgYSBiYXNpYyByYXRpbmciLCJjaG9vc2UiOiJDaG9vc2XigKYiLCJzdWJtaXQiOiJTdWJtaXQiLCJvayI6Ik9LIiwiZW1haWxlbXB0eSI6IkVtYWlsIGNhbm5vdCBiZSBlbXB0eSIsImVtYWlsdmFsaWQiOiJQbGVhc2UgZW50ZXIgYSB2YWxpZCBlbWFpbCBhZGRyZXNzIiwibnBzWmVybyI6Ik5vdCBBdCBBbGwgTGlrZWx5IiwibnBzVGVuIjoiRXh0cmVtZWx5IExpa2VseSIsInlvdXJBbnN3ZXIiOiJZb3VyIEFuc3dlciIsInBvd2VyZWRCeSI6IlBvd2VyZWQgYnkiLCJsZWZ0IjoiJHtOVU19IGNoYXJhY3RlcnMgbGVmdCJ9fQ==eyJpZ"}},{key:"getDefaultData",value:function(){return"CI6MywibmFtZSI6IkRhbmdkYW5nIFN1cnZleSAyMDE2IiwiZGVzY3JpcHRpb24iOiJ0ZXN0IGZvciBkYW5nZGFuZyIsImxhbmd1YWdlQ29kZSI6bnVsbCwic2l0ZUtleSI6IjEtbHl5dGVzdDFzcG9ydGNvbSIsImNyZWF0ZWREYXRlIjoiMjAxNy0xMi0xOVQxMjoyNjo1MCIsImNyZWF0ZWRVc2VySWQiOjEsImRlbGV0ZWQiOnRydWUsImxhc3RVcGRhdGVEYXRlIjoiMjAxNy0xMi0xOVQxMzoyNToxMyIsImVuYWJsZWQiOmZhbHNlLCJmb3JtQ29uZmlnIjoie1wiYmFja2dyb3VuZENvbG9yXCI6XCIjMTIxNTFBXCIsXCJmb250Q29sb3JcIjpcIiNGRkZGRkZcIixcInRyaWdnZXJiZWhhdmlvclwiOlwiSVwiLFwiYnJhbmRcIjpcInNob3dcIixcInRyaWdnZXJkZWxheXNlY29uZHNcIjpcIjEwXCIsXCJ0cmlnZ2VyaGFsZndheWRvd25wYWdlXCI6ZmFsc2UsXCJ0YXJnZXRpbmdkZXZpY2VkZXNrdG9wXCI6dHJ1ZSxcInRhcmdldGluZ2RldmljZW1vYmlsZVwiOnRydWUsXCJ0cmlnZ2VycGFnZWZpbHRlclwiOlwiQVwiLFwiZmlsdGVycGFnZXNcIjpbXCJcIl0sXCJmaWx0ZXJwYWdlc0luY2x1ZGVcIjpbXCJcIl0sXCJmYmRpcmVjdGlvblwiOlwiaG9yaXpvbnRhbFwiLFwidGFyZ2V0aW5nY2FwXCI6XCIxMDBcIixcInBvcHVwRGVsYXlFbmFibGVkXCI6ZmFsc2UsXCJwb3B1cERlbGF5U2Vjb25kc1wiOlwiMzBcIixcInNwZWNpZmljRm9ybUVuYWJsZVwiOmZhbHNlLFwic3VydmV5VGhyb3R0bGVzXCI6e1wiY29va2llXCI6XCJhdXJ5Yy5mYnRcIixcImFiYW5kb25lZFwiOjcsXCJzdWJtaXR0ZWRcIjo5MCxcInNhbXBsaW5nXCI6MTAwfSxcImZlZWRiYWNrSWRcIjpcIjM0OTlcIixcImljb25cIjpcImFzcGFyazEwMC5wbmdcIixcImRlbGF5XCI6MCxcInRlbXBsYXRlXCI6XCJkZWZhdWx0XCIsXCJsYWJlbFwiOlwiT3B0aW9uUXVlc3Rpb25GZWVkQmFja1wiLFwiZmJsb2NhdGlvblwiOlwibWlkZGxlcmlnaHRcIixcInBvcHVwXCI6ZmFsc2UsXCJkaXNhYmxlZFwiOmZhbHNlLFwiZmJhbmltYXRlXCI6ZmFsc2UsXCJmYmZpeGVkXCI6ZmFsc2UsXCJzYXZlZFwiOlwiXCIsXCJ0b3BpY3NcIjpbe1wib3JkZXJcIjoxLFwiaWRcIjpcIjcyMThcIixcImFuc3dlcklkXCI6XCJDQU8wMDg0Nzg0QTAwMVwiLFwid2hpdGVsaXN0QWN0aXZlXCI6ZmFsc2UsXCJ3aGl0ZWxpc3REYXRhXCI6XCJcIixcInRvcGljVGV4dFwiOlwiTmV3IFF1ZXN0aW9uIEdyb3VwIDFcIn1dfSIsImZlZWRiYWNrVGl0bGUiOiJGZWVkYmFjayBTdXJ2ZXkiLCJsb2dvUGljIjoiaHR0cHM6Ly9mYi1sb2dvLnVzZXJ0eS5jb20vMTQ0N2Y3Y2FjYmJhNzBjNDFjZDRlZDkyMDA3ZDdjMmMvY2MtbG9nby5zdmciLCJwcm9sb2d1ZVRleHQiOiI8aDE+Q2xpY2sgaGVyZSB0byBlbnRlciBzdXJ2ZXkgVGl0bGU8L2gxPjxwPkNsaWNrIGhlcmUgdG8gdHlwZSBXZWxjb21lIE1lc3NhZ2U8L3A+IiwiZXBpbG9ndWVUZXh0IjoiPGgxPldlIEFwcHJlY2lhdGUgWW91ciBGZWVkYmFjazwvaDE+PHA+WW91ciBmZWVkYmFjayB3aWxsIGhlbHAgdXMgaW1wcm92ZTwvcD4iLCJ0b3BpY1F1ZXN0aW9uSWQiOiIxNTEzNjU3NjEwMjA4IiwicmF0aW5nUXVlc3Rpb25JZCI6IjE1MTM2NTc2MTAwOTUiLCJucHNRdWVzdGlvbklkIjoiMTUxMzY1NzYxMDE3NCIsInRvcGljR3JvdXBJZCI6ImM1ZmQ2ZjFiMTM0NTRiMjA5ZjlhYzdlZGVlM2Y4N2YxIiwicHVibGlzaGVkVmVyc2lvbiI6bnVsbCwicHVibGlzaGVkRGF0ZSI6bnVsbCwicXVlc3Rpb25zIjpbeyJpZCI6IjE1MTM2NTc2MTAxNzQiLCJmZWVkYmFja0lkIjozLCJxdWVzdGlvblRleHQiOiJIb3cgbGlrZWx5IGFyZSB5b3UgdG8gcmVjb21tZW5kIFRlc3QgQ29tcGFueSB0byBhIGZyaWVuZCBvciBjb2xsZWFndWU/IiwicmVxdWlyZWQiOnRydWUsIm51bWVyaWMiOnRydWUsInF1ZXN0aW9uVHlwZSI6Ik5QUyIsInF1ZXN0aW9uR3JvdXBJZCI6bnVsbCwicGFyZW50UXVlc3Rpb25JZCI6bnVsbCwicGFyZW50QW5zd2VySWQiOm51bGwsInF1ZXN0aW9uT3JkZXIiOjEsInF1ZXN0aW9uTGFiZWwiOm51bGwsImhpZGRlbiI6ZmFsc2UsIm1pblNjYWxlIjpudWxsLCJtYXhTY2FsZSI6bnVsbCwiYW5zd2VycyI6W3siaWQiOiIxNTEzNjU3NjEwMTc0QTAwMSIsImZlZWRiYWNrSWQiOjMsInF1ZXN0aW9uSWQiOiIxNTEzNjU3NjEwMTc0IiwibGFiZWwiOiJOb3QgQXQgQWxsIExpa2VseSIsInZhbHVlIjowLCJkaXNwbGF5T3JkZXIiOjEsImRpc3BsYXlMYWJlbCI6ZmFsc2UsImRpc3BsYXlWYWx1ZSI6dHJ1ZSwiaXNEZWZhdWx0IjpudWxsfSx7ImlkIjoiMTUxMzY1NzYxMDE3NEEwMDIiLCJmZWVkYmFja0lkIjozLCJxdWVzdGlvbklkIjoiMTUxMzY1NzYxMDE3NCIsImxhYmVsIjpudWxsLCJ2YWx1ZSI6MSwiZGlzcGxheU9yZGVyIjoyLCJkaXNwbGF5TGFiZWwiOmZhbHNlLCJkaXNwbGF5VmFsdWUiOnRydWUsImlzRGVmYXVsdCI6bnVsbH0seyJpZCI6IjE1MTM2NTc2MTAxNzRBMDAzIiwiZmVlZGJhY2tJZCI6MywicXVlc3Rpb25JZCI6IjE1MTM2NTc2MTAxNzQiLCJsYWJlbCI6bnVsbCwidmFsdWUiOjIsImRpc3BsYXlPcmRlciI6MywiZGlzcGxheUxhYmVsIjpmYWxzZSwiZGlzcGxheVZhbHVlIjp0cnVlLCJpc0RlZmF1bHQiOm51bGx9LHsiaWQiOiIxNTEzNjU3NjEwMTc0QTAwNCIsImZlZWRiYWNrSWQiOjMsInF1ZXN0aW9uSWQiOiIxNTEzNjU3NjEwMTc0IiwibGFiZWwiOm51bGwsInZhbHVlIjozLCJkaXNwbGF5T3JkZXIiOjQsImRpc3BsYXlMYWJlbCI6ZmFsc2UsImRpc3BsYXlWYWx1ZSI6dHJ1ZSwiaXNEZWZhdWx0IjpudWxsfSx7ImlkIjoiMTUxMzY1NzYxMDE3NEEwMDUiLCJmZWVkYmFja0lkIjozLCJxdWVzdGlvbklkIjoiMTUxMzY1NzYxMDE3NCIsImxhYmVsIjpudWxsLCJ2YWx1ZSI6NCwiZGlzcGxheU9yZGVyIjo1LCJkaXNwbGF5TGFiZWwiOmZhbHNlLCJkaXNwbGF5VmFsdWUiOnRydWUsImlzRGVmYXVsdCI6bnVsbH0seyJpZCI6IjE1MTM2NTc2MTAxNzRBMDA2IiwiZmVlZGJhY2tJZCI6MywicXVlc3Rpb25JZCI6IjE1MTM2NTc2MTAxNzQiLCJsYWJlbCI6bnVsbCwidmFsdWUiOjUsImRpc3BsYXlPcmRlciI6NiwiZGlzcGxheUxhYmVsIjpmYWxzZSwiZGlzcGxheVZhbHVlIjp0cnVlLCJpc0RlZmF1bHQiOm51bGx9LHsiaWQiOiIxNTEzNjU3NjEwMTc0QTAwNyIsImZlZWRiYWNrSWQiOjMsInF1ZXN0aW9uSWQiOiIxNTEzNjU3NjEwMTc0IiwibGFiZWwiOm51bGwsInZhbHVlIjo2LCJkaXNwbGF5T3JkZXIiOjcsImRpc3BsYXlMYWJlbCI6ZmFsc2UsImRpc3BsYXlWYWx1ZSI6dHJ1ZSwiaXNEZWZhdWx0IjpudWxsfSx7ImlkIjoiMTUxMzY1NzYxMDE3NEEwMDgiLCJmZWVkYmFja0lkIjozLCJxdWVzdGlvbklkIjoiMTUxMzY1NzYxMDE3NCIsImxhYmVsIjpudWxsLCJ2YWx1ZSI6NywiZGlzcGxheU9yZGVyIjo4LCJkaXNwbGF5TGFiZWwiOmZhbHNlLCJkaXNwbGF5VmFsdWUiOnRydWUsImlzRGVmYXVsdCI6bnVsbH0seyJpZCI6IjE1MTM2NTc2MTAxNzRBMDA5IiwiZmVlZGJhY2tJZCI6MywicXVlc3Rpb25JZCI6IjE1MTM2NTc2MTAxNzQiLCJsYWJlbCI6bnVsbCwidmFsdWUiOjgsImRpc3BsYXlPcmRlciI6OSwiZGlzcGxheUxhYmVsIjpmYWxzZSwiZGlzcGxheVZhbHVlIjp0cnVlLCJpc0RlZmF1bHQiOm51bGx9LHsiaWQiOiIxNTEzNjU3NjEwMTc0QTAxMCIsImZlZWRiYWNrSWQiOjMsInF1ZXN0aW9uSWQiOiIxNTEzNjU3NjEwMTc0IiwibGFiZWwiOm51bGwsInZhbHVlIjo5LCJkaXNwbGF5T3JkZXIiOjEwLCJkaXNwbGF5TGFiZWwiOmZhbHNlLCJkaXNwbGF5VmFsdWUiOnRydWUsImlzRGVmYXVsdCI6bnVsbH0seyJpZCI6IjE1MTM2NTc2MTAxNzRBMDExIiwiZmVlZGJhY2tJZCI6MywicXVlc3Rpb25JZCI6IjE1MTM2NTc2MTAxNzQiLCJsYWJlbCI6IkV4dHJlbWVseSBMaWtlbHkiLCJ2YWx1ZSI6MTAsImRpc3BsYXlPcmRlciI6MTEsImRpc3BsYXlMYWJlbCI6ZmFsc2UsImRpc3BsYXlWYWx1ZSI6dHJ1ZSwiaXNEZWZhdWx0IjpudWxsfV19LHsiaWQiOiIxNTEzNjU3NjEwMDk1IiwiZmVlZGJhY2tJZCI6MywicXVlc3Rpb25UZXh0IjoiUGxlYXNlIHJhdGUgeW91ciBleHBlcmllbmNlIG9uIG91ciB3ZWJzaXRlIiwicmVxdWlyZWQiOnRydWUsIm51bWVyaWMiOnRydWUsInF1ZXN0aW9uVHlwZSI6IlNDQUxFRCIsInF1ZXN0aW9uR3JvdXBJZCI6bnVsbCwicGFyZW50UXVlc3Rpb25JZCI6bnVsbCwicGFyZW50QW5zd2VySWQiOm51bGwsInF1ZXN0aW9uT3JkZXIiOjIsInF1ZXN0aW9uTGFiZWwiOm51bGwsImhpZGRlbiI6ZmFsc2UsIm1pblNjYWxlIjpudWxsLCJtYXhTY2FsZSI6bnVsbCwiYW5zd2VycyI6W3siaWQiOiIxNTEzNjU3NjEwMDk1QTAwMSIsImZlZWRiYWNrSWQiOjMsInF1ZXN0aW9uSWQiOiIxNTEzNjU3NjEwMDk1IiwibGFiZWwiOm51bGwsInZhbHVlIjoxLCJkaXNwbGF5T3JkZXIiOjEsImRpc3BsYXlMYWJlbCI6ZmFsc2UsImRpc3BsYXlWYWx1ZSI6dHJ1ZSwiaXNEZWZhdWx0IjpudWxsfSx7ImlkIjoiMTUxMzY1NzYxMDA5NUEwMDIiLCJmZWVkYmFja0lkIjozLCJxdWVzdGlvbklkIjoiMTUxMzY1NzYxMDA5NSIsImxhYmVsIjpudWxsLCJ2YWx1ZSI6MiwiZGlzcGxheU9yZGVyIjoyLCJkaXNwbGF5TGFiZWwiOmZhbHNlLCJkaXNwbGF5VmFsdWUiOnRydWUsImlzRGVmYXVsdCI6bnVsbH0seyJpZCI6IjE1MTM2NTc2MTAwOTVBMDAzIiwiZmVlZGJhY2tJZCI6MywicXVlc3Rpb25JZCI6IjE1MTM2NTc2MTAwOTUiLCJsYWJlbCI6bnVsbCwidmFsdWUiOjMsImRpc3BsYXlPcmRlciI6MywiZGlzcGxheUxhYmVsIjpmYWxzZSwiZGlzcGxheVZhbHVlIjp0cnVlLCJpc0RlZmF1bHQiOm51bGx9LHsiaWQiOiIxNTEzNjU3NjEwMDk1QTAwNCIsImZlZWRiYWNrSWQiOjMsInF1ZXN0aW9uSWQiOiIxNTEzNjU3NjEwMDk1IiwibGFiZWwiOm51bGwsInZhbHVlIjo0LCJkaXNwbGF5T3JkZXIiOjQsImRpc3BsYXlMYWJlbCI6ZmFsc2UsImRpc3BsYXlWYWx1ZSI6dHJ1ZSwiaXNEZWZhdWx0IjpudWxsfSx7ImlkIjoiMTUxMzY1NzYxMDA5NUEwMDUiLCJmZWVkYmFja0lkIjozLCJxdWVzdGlvbklkIjoiMTUxMzY1NzYxMDA5NSIsImxhYmVsIjpudWxsLCJ2YWx1ZSI6NSwiZGlzcGxheU9yZGVyIjo1LCJkaXNwbGF5TGFiZWwiOmZhbHNlLCJkaXNwbGF5VmFsdWUiOnRydWUsImlzRGVmYXVsdCI6bnVsbH1dfSx7ImlkIjoiMTUxMzY1NzYxMDIwOCIsImZlZWRiYWNrSWQiOjMsInF1ZXN0aW9uVGV4dCI6IldoYXQgaXMgeW91ciBmZWVkYmFjayByZWdhcmRpbmc/IiwicmVxdWlyZWQiOnRydWUsIm51bWVyaWMiOmZhbHNlLCJxdWVzdGlvblR5cGUiOiJEUk9QX0RPV04iLCJxdWVzdGlvbkdyb3VwSWQiOiJjNWZkNmYxYjEzNDU0YjIwOWY5YWM3ZWRlZTNmODdmMSIsInBhcmVudFF1ZXN0aW9uSWQiOm51bGwsInBhcmVudEFuc3dlcklkIjpudWxsLCJxdWVzdGlvbk9yZGVyIjozLCJxdWVzdGlvbkxhYmVsIjpudWxsLCJoaWRkZW4iOmZhbHNlLCJtaW5TY2FsZSI6bnVsbCwibWF4U2NhbGUiOm51bGwsImFuc3dlcnMiOlt7ImlkIjoiMTUxMzY1NzYxMDIwOEEwMDIiLCJmZWVkYmFja0lkIjozLCJxdWVzdGlvbklkIjoiMTUxMzY1NzYxMDIwOCIsImxhYmVsIjoibmV3IHRvcGljMSIsInZhbHVlIjoyLCJkaXNwbGF5T3JkZXIiOjEsImRpc3BsYXlMYWJlbCI6dHJ1ZSwiZGlzcGxheVZhbHVlIjpmYWxzZSwiaXNEZWZhdWx0IjpudWxsfSx7ImlkIjoiMTUxMzY1NzYxMDIwOEEwMDMiLCJmZWVkYmFja0lkIjozLCJxdWVzdGlvbklkIjoiMTUxMzY1NzYxMDIwOCIsImxhYmVsIjoibmV3IHRvcGljMiIsInZhbHVlIjozLCJkaXNwbGF5T3JkZXIiOjIsImRpc3BsYXlMYWJlbCI6dHJ1ZSwiZGlzcGxheVZhbHVlIjpmYWxzZSwiaXNEZWZhdWx0IjpudWxsfV19XSwidG9waWNzIjpbeyJpZCI6NiwiZmVlZGJhY2tJZCI6MywidG9waWNBbnN3ZXJJZCI6IjE1MTM2NTc2MTAyMDhBMDAyIiwidG9waWNUZXh0IjoibmV3IHRvcGljMSIsInRvcGljT3JkZXIiOjEsInRvcGljVmFsdWUiOjIsInF1ZXN0aW9ucyI6W3siaWQiOiIxNTEzNjYxMTEzMjExIiwiZmVlZGJhY2tJZCI6MywicXVlc3Rpb25UZXh0IjoiRG8geW91IHdhbnQgdG8gZWF0PyIsInJlcXVpcmVkIjp0cnVlLCJudW1lcmljIjpmYWxzZSwicXVlc3Rpb25UeXBlIjoiUkFESU9fQlVUVE9OIiwicXVlc3Rpb25Hcm91cElkIjoiYzVmZDZmMWIxMzQ1NGIyMDlmOWFjN2VkZWUzZjg3ZjEiLCJwYXJlbnRRdWVzdGlvbklkIjoiMTUxMzY1NzYxMDIwOCIsInBhcmVudEFuc3dlcklkIjoiMTUxMzY1NzYxMDIwOEEwMDIiLCJxdWVzdGlvbk9yZGVyIjo1LCJxdWVzdGlvbkxhYmVsIjpudWxsLCJoaWRkZW4iOmZhbHNlLCJtaW5TY2FsZSI6bnVsbCwibWF4U2NhbGUiOm51bGwsImFuc3dlcnMiOlt7ImlkIjoiMTUxMzY2MTExMzIxMUEwMDEiLCJmZWVkYmFja0lkIjozLCJxdWVzdGlvbklkIjoiMTUxMzY2MTExMzIxMSIsImxhYmVsIjoiWWVzIiwidmFsdWUiOjEsImRpc3BsYXlPcmRlciI6MSwiZGlzcGxheUxhYmVsIjp0cnVlLCJkaXNwbGF5VmFsdWUiOmZhbHNlLCJpc0RlZmF1bHQiOm51bGx9LHsiaWQiOiIxNTEzNjYxMTEzMjExQTAwMiIsImZlZWRiYWNrSWQiOjMsInF1ZXN0aW9uSWQiOiIxNTEzNjYxMTEzMjExIiwibGFiZWwiOiJObyIsInZhbHVlIjoyLCJkaXNwbGF5T3JkZXIiOjIsImRpc3BsYXlMYWJlbCI6dHJ1ZSwiZGlzcGxheVZhbHVlIjpmYWxzZSwiaXNEZWZhdWx0IjpudWxsfV19LHsiaWQiOiIxNTEzNjYxMTEzMjIzIiwiZmVlZGJhY2tJZCI6MywicXVlc3Rpb25UZXh0IjoiSG93IG9sZCBhcmUgeW91PyIsInJlcXVpcmVkIjp0cnVlLCJudW1lcmljIjpmYWxzZSwicXVlc3Rpb25UeXBlIjoiUkFESU9fQlVUVE9OIiwicXVlc3Rpb25Hcm91cElkIjoiYzVmZDZmMWIxMzQ1NGIyMDlmOWFjN2VkZWUzZjg3ZjEiLCJwYXJlbnRRdWVzdGlvbklkIjoiMTUxMzY1NzYxMDIwOCIsInBhcmVudEFuc3dlcklkIjoiMTUxMzY1NzYxMDIwOEEwMDIiLCJxdWVzdGlvbk9yZGVyIjo2LCJxdWVzdGlvbkxhYmVsIjpudWxsLCJoaWRkZW4iOmZhbHNlLCJtaW5TY2FsZSI6bnVsbCwibWF4U2NhbGUiOm51bGwsImFuc3dlcnMiOlt7ImlkIjoiMTUxMzY2MTExMzIyM0EwMDEiLCJmZWVkYmFja0lkIjozLCJxdWVzdGlvbklkIjoiMTUxMzY2MTExMzIyMyIsImxhYmVsIjoiPDUiLCJ2YWx1ZSI6MSwiZGlzcGxheU9yZGVyIjoxLCJkaXNwbGF5TGFiZWwiOnRydWUsImRpc3BsYXlWYWx1ZSI6ZmFsc2UsImlzRGVmYXVsdCI6bnVsbH0seyJpZCI6IjE1MTM2NjExMTMyMjNBMDAyIiwiZmVlZGJhY2tJZCI6MywicXVlc3Rpb25JZCI6IjE1MTM2NjExMTMyMjMiLCJsYWJlbCI6IjV+MTAiLCJ2YWx1ZSI6MiwiZGlzcGxheU9yZGVyIjoyLCJkaXNwbGF5TGFiZWwiOnRydWUsImRpc3BsYXlWYWx1ZSI6ZmFsc2UsImlzRGVmYXVsdCI6bnVsbH0seyJpZCI6IjE1MTM2NjExMTMyMjNBMDAzIiwiZmVlZGJhY2tJZCI6MywicXVlc3Rpb25JZCI6IjE1MTM2NjExMTMyMjMiLCJsYWJlbCI6Ij4xMCIsInZhbHVlIjozLCJkaXNwbGF5T3JkZXIiOjEwLCJkaXNwbGF5TGFiZWwiOnRydWUsImRpc3BsYXlWYWx1ZSI6ZmFsc2UsImlzRGVmYXVsdCI6bnVsbH1dfSx7ImlkIjoiMTUxMzY2MTExMzMzMyIsImZlZWRiYWNrSWQiOjMsInF1ZXN0aW9uVGV4dCI6IlBsZWFzZSBlbnRlciB5b3VyIGNvbW1lbnRzIiwicmVxdWlyZWQiOmZhbHNlLCJudW1lcmljIjpmYWxzZSwicXVlc3Rpb25UeXBlIjoiT1BFTkVORCIsInF1ZXN0aW9uR3JvdXBJZCI6ImM1ZmQ2ZjFiMTM0NTRiMjA5ZjlhYzdlZGVlM2Y4N2YxIiwicGFyZW50UXVlc3Rpb25JZCI6IjE1MTM2NTc2MTAyMDgiLCJwYXJlbnRBbnN3ZXJJZCI6IjE1MTM2NTc2MTAyMDhBMDAyIiwicXVlc3Rpb25PcmRlciI6NywicXVlc3Rpb25MYWJlbCI6bnVsbCwiaGlkZGVuIjpmYWxzZSwibWluU2NhbGUiOm51bGwsIm1heFNjYWxlIjpudWxsfV19LHsiaWQiOjcsImZlZWRiYWNrSWQiOjMsInRvcGljQW5zd2VySWQiOiIxNTEzNjU3NjEwMjA4QTAwMyIsInRvcGljVGV4dCI6Im5ldyB0b3BpYzIiLCJ0b3BpY09yZGVyIjoyLCJ0b3BpY1ZhbHVlIjozLCJxdWVzdGlvbnMiOlt7ImlkIjoiMTUxMzY2MTExMzIzNiIsImZlZWRiYWNrSWQiOjMsInF1ZXN0aW9uVGV4dCI6IkRvIHlvdSBsaWtlIG1lPyIsInJlcXVpcmVkIjp0cnVlLCJudW1lcmljIjpmYWxzZSwicXVlc3Rpb25UeXBlIjoiUkFESU9fQlVUVE9OIiwicXVlc3Rpb25Hcm91cElkIjoiYzVmZDZmMWIxMzQ1NGIyMDlmOWFjN2VkZWUzZjg3ZjEiLCJwYXJlbnRRdWVzdGlvbklkIjoiMTUxMzY1NzYxMDIwOCIsInBhcmVudEFuc3dlcklkIjoiMTUxMzY1NzYxMDIwOEEwMDMiLCJxdWVzdGlvbk9yZGVyIjo3LCJxdWVzdGlvbkxhYmVsIjpudWxsLCJoaWRkZW4iOmZhbHNlLCJtaW5TY2FsZSI6bnVsbCwibWF4U2NhbGUiOm51bGwsImFuc3dlcnMiOlt7ImlkIjoiMTUxMzY2MTExMzIzNkEwMDEiLCJmZWVkYmFja0lkIjozLCJxdWVzdGlvbklkIjoiMTUxMzY2MTExMzIzNiIsImxhYmVsIjoiWWVzIiwidmFsdWUiOjEsImRpc3BsYXlPcmRlciI6MSwiZGlzcGxheUxhYmVsIjp0cnVlLCJkaXNwbGF5VmFsdWUiOmZhbHNlLCJpc0RlZmF1bHQiOm51bGx9LHsiaWQiOiIxNTEzNjYxMTEzMjM2QTAwMiIsImZlZWRiYWNrSWQiOjMsInF1ZXN0aW9uSWQiOiIxNTEzNjYxMTEzMjM2IiwibGFiZWwiOiJObyIsInZhbHVlIjoyLCJkaXNwbGF5T3JkZXIiOjIsImRpc3BsYXlMYWJlbCI6dHJ1ZSwiZGlzcGxheVZhbHVlIjpmYWxzZSwiaXNEZWZhdWx0IjpudWxsfV19XX1dLCJleHRyYUluZm8iOnsicmF0aW5nIjoiUGxlYXNlIHByb3ZpZGUgYSBiYXNpYyByYXRpbmciLCJjaG9vc2UiOiJDaG9vc2XigKYiLCJzdWJtaXQiOiJTdWJtaXQiLCJvayI6Ik9LIiwiZW1haWxlbXB0eSI6IkVtYWlsIGNhbm5vdCBiZSBlbXB0eSIsImVtYWlsdmFsaWQiOiJQbGVhc2UgZW50ZXIgYSB2YWxpZCBlbWFpbCBhZGRyZXNzIiwibnBzWmVybyI6Ik5vdCBBdCBBbGwgTGlrZWx5IiwibnBzVGVuIjoiRXh0cmVtZWx5IExpa2VseSIsInlvdXJBbnN3ZXIiOiJZb3VyIEFuc3dlciIsInBvd2VyZWRCeSI6IlBvd2VyZWQgYnkiLCJsZWZ0IjoiJHtOVU19IGNoYXJhY3RlcnMgbGVmdCJ9fQ==eyJpZ"}},{key:"processFeedbackData",value:function(e,t,r){var n=function(e,t){return e.questionOrder-t.questionOrder},i=function(e,t){return e.displayOrder-t.displayOrder},a=function(e){return!e.hidden};t.mainQ=t.fb.questions.filter(a).sort(n).map(function(e){return e.answers=e.answers.sort(i),e}),t.topics=t.fb.topics.sort(function(e,t){return e.topicOrder-t.topicOrder});for(var o=0;o<t.topics.length;o++)t.topics[o].questions=t.topics[o].questions.filter(a).sort(n).map(function(e){return e.answers&&(e.answers=e.answers.sort(i)),e});t.formConfig=JSON.parse(t.fb.formConfig),t.extraInfo=t.meta["ext-info"],t.meta=t.meta.info,t.logoPic=t.meta.logo1graphic,t.feedbackTitle=t.meta.surveytitle,t.prologueText=t.meta.prologuetext,this.feedbackDef=t,r&&r(t)}},{key:"getFeedbackData",value:function(n){var i=this,e={fid:i.cfg.mid,version:i.cfg.version||"1.0",type:"fb"};i.feedbackReqTimer=setTimeout(_.bind(function(){var e=encoder.decodeBase64(i.getDefaultData());i.processFeedbackData(i,e,n)},i),5e3);var a=function(e){clearTimeout(i.feedbackReqTimer);var t=encoder.decodeBase64(i.getDefaultData());JSON.parse(t)};ajax({method:"GET",url:i.cfg.datauri,data:e,success:function(t){clearTimeout(i.feedbackReqTimer);try{var e=encoder.decodeBase64(t);if(_.isEmpty(e))logger.log("empty feedback json"),a(t);else{var r=JSON.parse(e);i.processFeedbackData(i,r,n)}}catch(e){logger.warn("Unable to parse feedback definition: "+e),a(t)}},failure:a})}},{key:"getResponseSummary",value:function(e){var t=e.npsRatings;return t=0<=t&&t<=6?"detractors":6<t&&t<=8?"passives":8<t?"promoters":"unknown",{starRating:e.starsRatings,npsResponse:t,formType:e.formType,formName:e.cfg.label,questionGroup:e.questionGroup}}},{key:"getCBAnswers",value:function(e,t){for(var r=[],n=dollarFn(e).$("input"),i=0;i<n.length;i++){var a=n[i].getAttribute(constants.css.FB_QID);n[i].checked&&r.push({questionId:t,answerId:a})}return r}},{key:"handleSingleNonCB",value:function(e,t){var r={},n=dollarFn(e).$("select"),i=dollarFn(e).$("input"),a=dollarFn(e).$("textarea");if(1<=a.length){var o=a[0].value.replace(/\s+/g," ");r.answerText=o.length>=constants.css.TEXT_LIMIT?o.substr(0,constants.css.TEXT_LIMIT-1):o}else if(1<=i.length){var s=i[0],c=s.getAttribute("type");if(c===constants.css.HIDDEN.toLowerCase())r.answerId=s.value;else if(c!==constants.css.RADIO.toLowerCase())r.answerText=s.value;else for(var l=0;l<i.length;l++)i[l].checked&&(r.answerId=i[l].value,dollarFn(e).className.trim()===constants.css.FB_QUESTION&&5===i.length&&(this.starsRatings=l+1),"auryc-nps__container auryc-feedback__question"===dollarFn(e).className.trim()&&11===i.length&&(this.npsRatings=l))}else if(1<=n.length){var u=n[0];1<=u.selectedIndex&&(r.answerId=u.value,this.questionGroup=u.options[u.selectedIndex].value,r.answerId&&1<=r.answerId.length||(r.skip=!0))}return r.questionId=t,r}},{key:"getIdentity",value:function(){var e=StorageFactory.getInstance(constants.symbols.PERMANENT);return e&&e.getUserProp(constants.events.IDENTITYVALUE)}},{key:"assembleResponse",value:function(){var t=this;this.starsRatings=!1,this.npsRatings="unknown",this.questionGroup=null;var e=globalSessionTracker.getSessionMetadata(),r={siteKey:config.getSiteid(),mid:this.cfg.mid,globalId:e.sessionId,sessionId:e.viewId,url:window.location.href},n=this.getIdentity();n&&0<n.length&&(r.identity=n),this.cfg.version?r.version=this.cfg.version:r.version&&delete r.version;var i=[];if(1===this.feedbackDef.topics.length){var a=void 0;this.feedbackDef.topics[0].questions.forEach(function(e){e.parentAnswerId===t.feedbackDef.topics[0].topicAnswerId&&(a=e.parentQuestionId)}),i.push({questionId:a,answerId:this.feedbackDef.topics[0].topicAnswerId})}for(var o="."+constants.css.FB_TOPIC+" ."+constants.css.FB_BLOCK+", ."+constants.css.FB_QUESTION,s=this.htmlElem.$(o),c=0;c<s.length;c++){var l=s[c],u=l.getAttribute(constants.css.FB_QID);if(l.getAttribute(constants.css.FB_QTYPE)===constants.css.CHECKBOX){var h=this.getCBAnswers(l,u);h&&0<h.length&&(i=i.concat(h))}else{var f=this.handleSingleNonCB(l,u);!0!==f.skip&&i.push(f)}}r.responses=i;var d=this.htmlElem.$(".auryc-feedback__canvas canvas")[0];if(d)try{r.image=d.toDataURL("image/png").replace("image/png","image/octet-stream")}catch(e){logger.log(e)}for(var g=this.feedbackDef.topicQuestionId,p=!0,b=r.responses,y=0;y<b.length;y++)if(b[y].questionId!==g&&(b[y].answerId||b[y].answerText&&b[y].answerText.trim())){p=!1;break}return p?null:r=JSON.stringify(r)}},{key:"postFeedbackData",value:function(n){var i=this;if(this.cfg.preview)setTimeout(function(){n&&n()},100);else{var e=this.assembleResponse();if(e){var t=encoder.encodeBase64(e);ajax({method:"POST",url:i.cfg.posturi,data:t,success:function(e){var t=JSON.parse(e).respondentId,r=i.cfg.projectId;AurycPubSub.publish(constants.events.FEEDBACKTRACKER,{eventType:constants.events.CUSTOM_EVENT,eventName:"Feedback Submitted",tagName:"FeedbackSubmitted",eventProperties:_.extend({formid:r,name:"Feedback Submitted",respid:t,et:"submitted"},i.getResponseSummary(i))}),n&&n()},failure:function(e){n&&n()},skipEncode:!0,contentType:"application/json"})}}}},{key:"render",value:function(e,t){t=dollarFn(t),this.htmlElem=t,this.$modal=e,this.addEventListeners(t),this.canShowScreenshot()?(dollarFn(this.htmlElem.$(".aurcy-feedback__selection")[0]).addClass("aurycVisibleContent"),dollarFn(this.htmlElem.$(".aurcy-feedback__content")[0]).removeClass("aurycVisibleContent"),this.$modal.htmlElem.addClass("formSelection"),this.$modal.display(!0)):this.showFeedback()}},{key:"isValid",value:function(){var e=this.htmlElem.$(".auryc-visible__topic")[0];if(e)for(var t=e.$(".auryc-validation-block"),r=0;r<t.length;r++)if("none"!==dollarFn(t[r]).getStyle("display"))return!1;return!0}},{key:"showValidationMessage",value:function(e,t){if(e){var r=dollarFn(e.$(".auryc-validation-block")[0]);t?r.css({display:"block"}):r.css({display:"none"})}}},{key:"handleEmails",value:function(e){e=dollarFn(e);for(var i=this,t=e.$(".auryc-feedback__email"),r=0;r<t.length;r++){addDomEvent(dollarFn(t[r]).$("input")[0],"blur",n)}function n(e){var t=e.target||e.srcElement,r="";t.getAttribute("required")&&_.isEmpty(t.value)?r=i.feedbackDef.extraInfo.emailempty||i.feedbackDef.ext.emailempty:_.isEmpty(t.value)||_.isEmail(t.value)||(r=i.feedbackDef.extraInfo.emailvalid||i.feedbackDef.ext.emailvalid);var n=dollarFn(t.parentElement);n.$(".auryc-validation-block")[0].innerHTML=r,i.showValidationMessage(n,0<r.length)}}},{key:"handleOpenEnd",value:function(e){var t=function(e){var t,r=e.srcElement||e.target;if(constants.css.TEXT_LIMIT-r.value.replace(/\s+/g," ").length-1<0&&(((t=e.keyCode)<37||41<t)&&8!==t&&16!==t))return e.preventDefault(),!1},r=function(e){var t=e.srcElement||e.target,r=constants.css.TEXT_LIMIT-t.value.replace(/\s+/g," ").length;if(dollarFn(t.parentNode).$(".auryc-feedback__textarea--count")[0].innerHTML=Math.max(0,r),r<0)return t.value=t.value.substr(0,r+t.value.length),!1},n=dollarFn(e).$("."+constants.css.FB_TEXTAREA);try{for(var i=0;i<n.length;i++){var a=dollarFn(n[i]).$("textarea")[0];addDomEvent(a,"keydown",t),addDomEvent(a,"keyup",r),addDomEvent(a,"blur",r)}}catch(e){}}},{key:"updateSelects",value:function(e){var t=dollarFn(e).$("."+constants.css.FB_SELECT);[].forEach.call(t,function(e){var t=dollarFn(e),r=t.$(constants.css.SELECT)[0];0<t.offsetHeight&&dollarFn(r).css({height:t.offsetHeight+constants.css.PX})})}},{key:"handleSelects",value:function(e){var t=dollarFn(e).$("."+constants.css.FB_SELECT),r=this,n=function(){return r.updateSelects(dollarFn(e))};[].forEach.call(t,function(e){var r,n,t=dollarFn(e),i=t.$("select")[0],a=t.$("div.auryc-feedback__select-button")[0];dollarFn(i).css({height:t.offsetHeight+"px"}),addDomEvent(i,"change",(r=a,n=i,function(e){var t=dollarFn(n).$("option")[n.selectedIndex];r.innerHTML=t.innerHTML}))}),this.feedbackUIUpdated.subscribe(function(){setTimeout(n,96)})}},{key:"handleRadios",value:function(e){e=dollarFn(e);for(var a=this.createTempStyle(),t=e.$(".auryc-feedback__radio"),r=function(i){return function(e){for(var t=i.$("label"),r=0;r<t.length;r++){var n=dollarFn(t[r]);n.$("input[type=radio]")[0].checked?a?n.addClass(a):n.addClass("aurycChecked"):a?n.removeClass(a):n.removeClass("aurycChecked")}}},n=0;n<t.length;n++)for(var i=dollarFn(t[n]),o=i.$("input[type=radio]"),s=0;s<o.length;s++)addDomEvent(o[s],"change",r(i))}},{key:"createTempStyle",value:function(){var e="aurycCheckedOverride";if(this.cfg.backgroundColor&&_.isValidColor(this.cfg.backgroundColor)){var t=this.cfg.backgroundColor,r=document.createElement("style");r.type="text/css";var n=".auryc-feedback .auryc-feedback__cbradio."+e+":before { color: "+t+';content: "\\f14a"; opacity: 1.0; } .auryc-feedback .auryc-feedback__cbradio.auryc-feedback__cb-radio.'+e+":before { color: "+t+';content: "\\f111"; opacity: 1.0; } ';r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n)),document.getElementsByTagName("head")[0].appendChild(r)}else e=null;return e}},{key:"handleCheckBoxes",value:function(e){e=dollarFn(e);for(var a=this.createTempStyle(),t=e.$(".auryc-feedback__cbox"),r=function(i){return function(e){for(var t=i.$("label"),r=0;r<t.length;r++){var n=dollarFn(t[r]);n.$("input[type=checkbox]")[0].checked?a?n.addClass(a):n.addClass("aurycChecked"):a?n.removeClass(a):n.removeClass("aurycChecked")}}},n=0;n<t.length;n++)for(var i=dollarFn(t[n]),o=i.$("input[type=checkbox]"),s=0;s<o.length;s++)addDomEvent(o[s],"change",r(i))}},{key:"handleNps",value:function(e){var t=(e=dollarFn(e)).$(".nps-rating__badges"),a="";this.cfg.backgroundColor&&_.isValidColor(this.cfg.backgroundColor)&&(a=this.cfg.backgroundColor);var o="";this.cfg.fontColor&&_.isValidColor(this.cfg.fontColor)&&(o=this.cfg.fontColor);for(var r=function(n,i){return function(e){for(var t=e.srcElement||e.originalTarget,r=0;r<n.length;r++)n[r]!==t&&n[r]!==t.parentNode||i[r].checked||(dollarFn(n[r]).style.backgroundColor=a,dollarFn(n[r]).style.color=o)}},n=function(n,i){return function(e){for(var t=e.srcElement||e.originalTarget,r=0;r<n.length;r++)n[r]!==t&&n[r]!==t.parentNode||i[r].checked||(dollarFn(n[r]).style.backgroundColor="",dollarFn(n[r]).style.color="")}},i=function(n,i){return function(e){for(var t=e.srcElement||e.originalTarget,r=0;r<n.length;r++)n[r]===t||n[r]===t.parentNode?(dollarFn(n[r]).addClass("aurycNpsRatingChecked"),dollarFn(n[r]).style.backgroundColor=a,dollarFn(n[r]).style.color=o,i[r].checked=!0):(dollarFn(n[r]).removeClass("aurycNpsRatingChecked"),dollarFn(n[r]).style.backgroundColor="",dollarFn(n[r]).style.color="",i[r].checked=!1)}},s=0;s<t.length;s++)for(var c=dollarFn(t[s]),l=c.$("label"),u=c.$("input"),h=0;h<l.length;h++)addDomEvent(l[h],"mouseenter",r(l,u)),addDomEvent(l[h],"mouseleave",n(l,u)),addDomEvent(l[h],"click",i(l,u))}},{key:"handleStars",value:function(e){var t=(e=dollarFn(e)).$("fieldset.auryc-star-rating"),i=function(a,o,s,e){return function(e){var t=e.srcElement||e.originalTarget;!function(e){for(var t=0;t<e.length;t++)dollarFn(e[t]).removeClass("_aurycHover"),dollarFn(e[t]).removeClass("auryc-star-rating__star--fill")}(o);for(var r=0;r<s.length;r++){var n=s[r],i=o[r];if(dollarFn(i).addClass("auryc-star-rating__star--fill"),dollarFn(i).addClass("_aurycHover"),n===t){t.checked=!0;break}}a.addClass("_aurycRatingSet"),setTimeout(function(){return dollarFn(a).removeClass("_aurycRatingSet")},150)}};[].forEach.call(t,function(t,e){var r=(t=dollarFn(t)).$("label"),n=t.$("input");[].forEach.call(n,function(e){addDomEvent(e,"click",i(t,r,n))})})}},{key:"disableDefault",value:function(e){e&&e.preventDefault&&e.preventDefault()}},{key:"showTopic",value:function(e,t,r){var n=r.value,i=t.$("."+constants.css.FB_TOPIC);[].forEach.call(i,function(e){dollarFn(e).removeClass(constants.css.FB_TOPIC)});try{dollarFn(document.getElementById("topk_"+n)).addClass(constants.css.FB_TOPIC),e.topic=n}catch(e){}e.feedbackUIUpdated.fire()}},{key:"handleTopicSelector",value:function(t){var r=this,n=t.$("."+constants.css.FB_TOPIC_SEL)[0],i=this;n&&addDomEvent(n,"change",function(e){i.showTopic(i,t,n),r.disableDefault(e)}),1===this.feedbackDef.topics.length&&(dollarFn(document.getElementById("topk_"+this.feedbackDef.topics[0].topicAnswerId)).addClass(constants.css.FB_TOPIC),this.updateSelects(t))}},{key:"addEventListeners",value:function(e){var t=this;[].forEach.call(e.$(".auryc-headingzone h1"),function(e){dollarFn(e).addClass(constants.css.HEADING_H1)}),addDomEvent(e.$(".auryc-feedback__screenshot")[0],"click",function(e){return t.takeScreenshot(),t.disableDefault(e),!1}),addDomEvent(e.$(".auryc-feedback__general")[0],"click",function(e){return t.showFeedback(),t.disableDefault(e),!1}),addDomEvent(e.$("."+constants.css.FB_SUBMIT)[0],"click",function(e){return logger.log("Feedback submitted"),!t.submitted&&t.isValid()&&(t.feedbackSubmitStarted.fire(),t.submitted=!0,t.postFeedbackData(function(){t.feedbackSubmitted.fire()})),t.disableDefault(e),!1}),this.handleTopicSelector(e),this.handleNps(e),this.handleOpenEnd(e),this.handleCheckBoxes(e),this.handleSelects(e),this.handleStars(e),this.handleRadios(e),this.handleEmails(e),this.submitted=!1}},{key:"takeScreenshot",value:function(){this.$modal.htmlElem.removeClass("formSelection");ScreenShot.mark("Click on any part of this page you would like to give feedback about.",this.updateScreenshot.bind(this),this.$modal),this.$modal.display(!1),this.formType="screenshot"}},{key:"canShowScreenshot",value:function(){return this.browser.isIE&&this.browser.version<9||!0!==this.cfg.specificFormEnable&&window.location.hash.indexOf("screenshot"),!1}},{key:"updateScreenshot",value:function(e){var t=this.htmlElem.$(".auryc-feedback__canvas")[0];t.innerHTML="",t.appendChild(e.canvas),document.getElementById(e.answerDomId).click(),document.getElementsByClassName("auryc-submit-feedback__button")[0].click()}},{key:"showFeedback",value:function(){dollarFn(this.htmlElem.$(".aurcy-feedback__selection")[0]).removeClass("aurycVisibleContent"),dollarFn(this.htmlElem.$(".aurcy-feedback__content")[0]).addClass("aurycVisibleContent"),this.$modal.modalContainerEl.removeClass("formSelection"),this.$modal.display(!0),this.formType="feedbackform"}}]),t}(),cache={},Templater=function(){function n(){classCallCheck(this,n)}return createClass(n,null,[{key:"tmpl",value:function(e,t){var r=/\W/.test(e)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):cache[e]=cache[e]||n.tmpl(document.getElementById(e).innerHTML);return t?r(t):r}},{key:"instantiate",value:function(e,t){return n.tmpl(e,t)}}]),n}(),Loader=function(){function e(){classCallCheck(this,e);this.node=dollarFn('<img src="data:image/gif;base64,R0lGODlhIAAgAPMAADMzM////19fX5SUlGxsbIKCgtLS0rm5uVFRUUdHR2dnZ+bm5vr6+gAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAIAAgAAAE5xDISWlhperN52JLhSSdRgwVo1ICQZRUsiwHpTJT4iowNS8vyW2icCF6k8HMMBkCEDskxTBDAZwuAkkqIfxIQyhBQBFvAQSDITM5VDW6XNE4KagNh6Bgwe60smQUB3d4Rz1ZBApnFASDd0hihh12BkE9kjAJVlycXIg7CQIFA6SlnJ87paqbSKiKoqusnbMdmDC2tXQlkUhziYtyWTxIfy6BE8WJt5YJvpJivxNaGmLHT0VnOgSYf0dZXS7APdpB309RnHOG5gDqXGLDaC457D1zZ/V/nmOM82XiHRLYKhKP1oZmADdEAAAh+QQJCgAAACwAAAAAIAAgAAAE6hDISWlZpOrNp1lGNRSdRpDUolIGw5RUYhhHukqFu8DsrEyqnWThGvAmhVlteBvojpTDDBUEIFwMFBRAmBkSgOrBFZogCASwBDEY/CZSg7GSE0gSCjQBMVG023xWBhklAnoEdhQEfyNqMIcKjhRsjEdnezB+A4k8gTwJhFuiW4dokXiloUepBAp5qaKpp6+Ho7aWW54wl7obvEe0kRuoplCGepwSx2jJvqHEmGt6whJpGpfJCHmOoNHKaHx61WiSR92E4lbFoq+B6QDtuetcaBPnW6+O7wDHpIiK9SaVK5GgV543tzjgGcghAgAh+QQJCgAAACwAAAAAIAAgAAAE7hDISSkxpOrN5zFHNWRdhSiVoVLHspRUMoyUakyEe8PTPCATW9A14E0UvuAKMNAZKYUZCiBMuBakSQKG8G2FzUWox2AUtAQFcBKlVQoLgQReZhQlCIJesQXI5B0CBnUMOxMCenoCfTCEWBsJColTMANldx15BGs8B5wlCZ9Po6OJkwmRpnqkqnuSrayqfKmqpLajoiW5HJq7FL1Gr2mMMcKUMIiJgIemy7xZtJsTmsM4xHiKv5KMCXqfyUCJEonXPN2rAOIAmsfB3uPoAK++G+w48edZPK+M6hLJpQg484enXIdQFSS1u6UhksENEQAAIfkECQoAAAAsAAAAACAAIAAABOcQyEmpGKLqzWcZRVUQnZYg1aBSh2GUVEIQ2aQOE+G+cD4ntpWkZQj1JIiZIogDFFyHI0UxQwFugMSOFIPJftfVAEoZLBbcLEFhlQiqGp1Vd140AUklUN3eCA51C1EWMzMCezCBBmkxVIVHBWd3HHl9JQOIJSdSnJ0TDKChCwUJjoWMPaGqDKannasMo6WnM562R5YluZRwur0wpgqZE7NKUm+FNRPIhjBJxKZteWuIBMN4zRMIVIhffcgojwCF117i4nlLnY5ztRLsnOk+aV+oJY7V7m76PdkS4trKcdg0Zc0tTcKkRAAAIfkECQoAAAAsAAAAACAAIAAABO4QyEkpKqjqzScpRaVkXZWQEximw1BSCUEIlDohrft6cpKCk5xid5MNJTaAIkekKGQkWyKHkvhKsR7ARmitkAYDYRIbUQRQjWBwJRzChi9CRlBcY1UN4g0/VNB0AlcvcAYHRyZPdEQFYV8ccwR5HWxEJ02YmRMLnJ1xCYp0Y5idpQuhopmmC2KgojKasUQDk5BNAwwMOh2RtRq5uQuPZKGIJQIGwAwGf6I0JXMpC8C7kXWDBINFMxS4DKMAWVWAGYsAdNqW5uaRxkSKJOZKaU3tPOBZ4DuK2LATgJhkPJMgTwKCdFjyPHEnKxFCDhEAACH5BAkKAAAALAAAAAAgACAAAATzEMhJaVKp6s2nIkolIJ2WkBShpkVRWqqQrhLSEu9MZJKK9y1ZrqYK9WiClmvoUaF8gIQSNeF1Er4MNFn4SRSDARWroAIETg1iVwuHjYB1kYc1mwruwXKC9gmsJXliGxc+XiUCby9ydh1sOSdMkpMTBpaXBzsfhoc5l58Gm5yToAaZhaOUqjkDgCWNHAULCwOLaTmzswadEqggQwgHuQsHIoZCHQMMQgQGubVEcxOPFAcMDAYUA85eWARmfSRQCdcMe0zeP1AAygwLlJtPNAAL19DARdPzBOWSm1brJBi45soRAWQAAkrQIykShQ9wVhHCwCQCACH5BAkKAAAALAAAAAAgACAAAATrEMhJaVKp6s2nIkqFZF2VIBWhUsJaTokqUCoBq+E71SRQeyqUToLA7VxF0JDyIQh/MVVPMt1ECZlfcjZJ9mIKoaTl1MRIl5o4CUKXOwmyrCInCKqcWtvadL2SYhyASyNDJ0uIiRMDjI0Fd30/iI2UA5GSS5UDj2l6NoqgOgN4gksEBgYFf0FDqKgHnyZ9OX8HrgYHdHpcHQULXAS2qKpENRg7eAMLC7kTBaixUYFkKAzWAAnLC7FLVxLWDBLKCwaKTULgEwbLA4hJtOkSBNqITT3xEgfLpBtzE/jiuL04RGEBgwWhShRgQExHBAAh+QQJCgAAACwAAAAAIAAgAAAE7xDISWlSqerNpyJKhWRdlSAVoVLCWk6JKlAqAavhO9UkUHsqlE6CwO1cRdCQ8iEIfzFVTzLdRAmZX3I2SfZiCqGk5dTESJeaOAlClzsJsqwiJwiqnFrb2nS9kmIcgEsjQydLiIlHehhpejaIjzh9eomSjZR+ipslWIRLAgMDOR2DOqKogTB9pCUJBagDBXR6XB0EBkIIsaRsGGMMAxoDBgYHTKJiUYEGDAzHC9EACcUGkIgFzgwZ0QsSBcXHiQvOwgDdEwfFs0sDzt4S6BK4xYjkDOzn0unFeBzOBijIm1Dgmg5YFQwsCMjp1oJ8LyIAACH5BAkKAAAALAAAAAAgACAAAATwEMhJaVKp6s2nIkqFZF2VIBWhUsJaTokqUCoBq+E71SRQeyqUToLA7VxF0JDyIQh/MVVPMt1ECZlfcjZJ9mIKoaTl1MRIl5o4CUKXOwmyrCInCKqcWtvadL2SYhyASyNDJ0uIiUd6GGl6NoiPOH16iZKNlH6KmyWFOggHhEEvAwwMA0N9GBsEC6amhnVcEwavDAazGwIDaH1ipaYLBUTCGgQDA8NdHz0FpqgTBwsLqAbWAAnIA4FWKdMLGdYGEgraigbT0OITBcg5QwPT4xLrROZL6AuQAPUS7bxLpoWidY0JtxLHKhwwMJBTHgPKdEQAACH5BAkKAAAALAAAAAAgACAAAATrEMhJaVKp6s2nIkqFZF2VIBWhUsJaTokqUCoBq+E71SRQeyqUToLA7VxF0JDyIQh/MVVPMt1ECZlfcjZJ9mIKoaTl1MRIl5o4CUKXOwmyrCInCKqcWtvadL2SYhyASyNDJ0uIiUd6GAULDJCRiXo1CpGXDJOUjY+Yip9DhToJA4RBLwMLCwVDfRgbBAaqqoZ1XBMHswsHtxtFaH1iqaoGNgAIxRpbFAgfPQSqpbgGBqUD1wBXeCYp1AYZ19JJOYgH1KwA4UBvQwXUBxPqVD9L3sbp2BNk2xvvFPJd+MFCN6HAAIKgNggY0KtEBAAh+QQJCgAAACwAAAAAIAAgAAAE6BDISWlSqerNpyJKhWRdlSAVoVLCWk6JKlAqAavhO9UkUHsqlE6CwO1cRdCQ8iEIfzFVTzLdRAmZX3I2SfYIDMaAFdTESJeaEDAIMxYFqrOUaNW4E4ObYcCXaiBVEgULe0NJaxxtYksjh2NLkZISgDgJhHthkpU4mW6blRiYmZOlh4JWkDqILwUGBnE6TYEbCgevr0N1gH4At7gHiRpFaLNrrq8HNgAJA70AWxQIH1+vsYMDAzZQPC9VCNkDWUhGkuE5PxJNwiUK4UfLzOlD4WvzAHaoG9nxPi5d+jYUqfAhhykOFwJWiAAAIfkECQoAAAAsAAAAACAAIAAABPAQyElpUqnqzaciSoVkXVUMFaFSwlpOCcMYlErAavhOMnNLNo8KsZsMZItJEIDIFSkLGQoQTNhIsFehRww2CQLKF0tYGKYSg+ygsZIuNqJksKgbfgIGepNo2cIUB3V1B3IvNiBYNQaDSTtfhhx0CwVPI0UJe0+bm4g5VgcGoqOcnjmjqDSdnhgEoamcsZuXO1aWQy8KAwOAuTYYGwi7w5h+Kr0SJ8MFihpNbx+4Erq7BYBuzsdiH1jCAzoSfl0rVirNbRXlBBlLX+BP0XJLAPGzTkAuAOqb0WT5AH7OcdCm5B8TgRwSRKIHQtaLCwg1RAAAOwAAAAAAAAAAAA==" class="auryc-loader" id="auryc-loader">')}return createClass(e,[{key:"hide",value:function(){this.node.parentNode.removeChild(this.node)}},{key:"position",value:function(e){var t=this.node.parentNode.offsetWidth-this.node.offsetWidth,r={};r[constants.css.TOP]=e?t/2+constants.css.PX:constants.css.AUTO,r[constants.css.LEFT]=t/2+constants.css.PX,this.node.css(r)}}]),e}(),FBView=function(){function r(e,t){classCallCheck(this,r),this.model=e,this.cfg=e.cfg,this.instcfg=t,this.browser=getInstance(),this.bodyOverflowStyle=null,this.bodyScrollTop=0,this.loader=null,e.cfg.launchedFromTimer||this.show(),this.onTYPage=!1,this.feedbackCanceled=new PubSubTopic,this.feedbackSubmitted=new PubSubTopic,this.setupEventHandlers(e,this),this.template=this.getTemplateContent(constants.symbols.FEEDBACKCONTENT),this.eptemplate=this.getTemplateContent(constants.symbols.FEEDBACKEPILOGUE)}return createClass(r,[{key:"getTemplateContent",value:function(e){var t=window[e];return encoder.decodeBase64(t)}},{key:"setupEventHandlers",value:function(t,r){t.getFeedbackData(function(e){r.fbmodel=e,t.cfg.launchedFromTimer&&r.show(),r.renderFB()}),t.feedbackSubmitStarted.subscribe(function(){r.modalInnerEl.removeClass(constants.css.DISPLAY_VISIBLE),r.showLoader()}),t.feedbackSubmitted.subscribe(function(){r.modalInnerEl.addClass(constants.css.DISPLAY_VISIBLE),r.onTYPage=!0,r.showEpilogue(),r.feedbackSubmitted.fire(),r.removeLoader()})}},{key:"showEpilogue",value:function(){var e=this,t=Templater.instantiate(this.eptemplate,this.fbmodel);this.modalInnerEl.innerHTML=t;for(var r=this.modalInnerEl.$(constants.css.H1),n=0;n<r.length;n++)dollarFn(r[n]).addClass("auryc-feedback__heading auryc-feedback__heading--h1");this.positionModal(),addDomEvent(this.modalInnerEl.$(".auryc-close-button")[0],"click",function(){e.hideMyself()})}},{key:"removeLoader",value:function(){this.loader?(logger.log("removing the loader"),this.loader.hide(),this.loader=null):logger.log("loader is not found")}},{key:"showLoader",value:function(){if(this.removeLoader(),this.loader)logger.log("loader still exists");else{this.loader=new Loader,this.modalContainerEl.appendChild(this.loader.node),this.loader.position();var e=getScroll(window),t=getWinSize(window);this.loader.node.css({top:(t.h-this.loader.node.offsetHeight)/2+e.y+constants.css.PX})}}},{key:"hideMyself",value:function(e){this.modalContainerEl.remove(),this.enableBodyOverflow(!0,e)}},{key:"trackAbanonded",value:function(e){AurycPubSub.publish(constants.events.FEEDBACKTRACKER,{eventType:constants.events.CUSTOM_EVENT,eventName:"Feedback Abandoned",tagName:"FeedbackAbandoned",eventProperties:{formid:this.cfg.projectId,name:"Feedback Abandoned",et:"abandoned"}})}},{key:"show",value:function(){var e=this,t=window,r=t.document.body,n=t.document.documentElement,i=Math.max(r.scrollHeight,r.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight);this.modalContainerEl=dollarFn('<div class="aurycModalContainer"></div>'),this.modalContainerEl.css({height:i});var a=this,o=dollarFn('<div class="aurycModalBackFace"></div>'),s=dollarFn('<div class="aurycModalChrome"></div>');this.cfg.preview||(addDomEvent(o,"click",_.bind(function(e){this.fbmodel&&(this.onTYPage||(this.trackAbanonded(a),a.feedbackCanceled.fire()),this.hideMyself())},this)),addDomEvent(s,"click",function(e){var t=e.target;t&&t===s&&(a.onTYPage||(a.trackAbanonded(a),a.feedbackCanceled.fire()),a.hideMyself())}));var c=this.head=dollarFn('<div class="aurycModalContent"></div>'),l=dollarFn('<div class="aurycModalHead"></div>'),u=dollarFn('<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAAhpJREFUWAntmLFuwjAQhkkjMYD6HBUSA2ufoBsbYugjdGnnTh068xQdKFIrsfEEfYIi8RwVqCpE6f0oZzkmiS/2DQxYAnO5+L+Pi+P40ulcWnMGEtc9Ho+vsyx76vV6r4vFInP9GvZkMkl3u91zmqaz5XL5Y2te2UYBs8rz/GW73b5hoO3X+A1NaCMG/fEVYtq6JkMWzK11wrzf799rZYphSH/KMZIk+aJM3XGmTIZwmYjahsGYqVamqmAQADERG7/RDBDmDNnz49HyVzRUHUwRZl7EPppmjqzX63w0Gn3u9/sb8gzLTJ0hjsOP8xxfo+mDcaeEAYKqNlRbGDCUgDShQmAqgTSgQmFqgWKgYmAagUKgYmEQ0yyMMOqaJBDGYs2izix6lp54gRUBQdgHVQSPgoGGGAgne6BwitvEmeGBJ7c9O6p6zzrlDmkNA4FWQBgghAqCgb55lsE4h9Y6Q8J5FPzsawUkhOFEB0GJgTww2LZ80yd6lyAC8sFgC9Htdj80ti5eIAkMtrieu098+RqBpDA8aTSgaoHawmhBVQKFwmhAnQDFwsRClYC0YGKgDJA2TCiUeZah1iaR6P0Mg9g9lgWsVXSssu4rYh+HGCAU/ihrbSEIuHWT4xebdVBFKT1jodIGzanv1WA4GHp7arh1PfxmDsHYbDZ/g8HgnertX8rMo9ZLBmhz48XzcDhkdFUe+CUD+y+9LwP/zXFjLMMtVtQAAAAASUVORK5CYII=" class="aurycModalCloseButton">');(this.$head=l).appendChild(u),c.appendChild(l),this.modalInnerEl=dollarFn('<div class="aurycModalInnerContent"></div>'),c.appendChild(this.modalInnerEl),s.appendChild(c),this.modalContainerEl.appendChild(o),this.modalContainerEl.appendChild(s),t.document.body.appendChild(this.modalContainerEl),this.enableBodyOverflow(!1,t),addDomEvent(u,"click",function(){return e.handleClose()}),setTimeout(function(){o.addClass("_aurycActive")},20),this.cfg.launchedFromTimer||this.showLoader()}},{key:"enableBodyOverflow",value:function(e,t){if(t=t||window,e)this.bodyOverflowStyle&&(dollarFn(t.document.body).css(this.bodyOverflowStyle),this.browser.isMobile&&(dollarFn(t.document.body).scrollTop=this.bodyScrollTop),this.bodyOverflowStyle=null,this.bodyScrollTop=0);else{var r=dollarFn(t.document.body);this.bodyOverflowStyle||(this.bodyOverflowStyle={overflow:r.getStyle("overflow")},this.browser.isMobile&&(this.bodyOverflowStyle.position=r.getStyle("position"),this.bodyScrollTop=r.scrollTop)),r.css({overflow:"hidden"}),this.browser.isMobile&&setTimeout(function(){r.css({position:"fixed"})},200)}}},{key:"renderFB",value:function(){this.onTYPage=!1,this.cfg.preview||AurycPubSub.publish(constants.events.FEEDBACKTRACKER,{eventType:constants.events.CUSTOM_EVENT,eventName:"Feedback Started",tagName:"FeedbackStarted",eventProperties:{formid:this.cfg.projectId,name:"Feedback Started",et:"started"}}),this.removeLoader(),this.$head.addClass("aurycVisible"),this.cfg&&(this.cfg.fontColor&&_.isValidColor(this.cfg.fontColor)&&(this.fbmodel.formConfig.btnFontColor=this.cfg.fontColor),this.cfg.backgroundColor&&_.isValidColor(this.cfg.backgroundColor)&&(this.fbmodel.formConfig.btnBackgroundColor=this.cfg.backgroundColor));var e=Templater.instantiate(this.template,this.fbmodel);this.modalInnerEl.innerHTML=e,this.model.render(this,this.modalInnerEl)}},{key:"positionModal",value:function(){var e=getWinSize(window),t=this.modalInnerEl.offsetHeight;this.browser.isMobile||this.head.css({marginTop:Math.max(0,(e.h-t-50)/2)+"px"})}},{key:"display",value:function(e){this.enableBodyOverflow(!e),e?(this.modalInnerEl.removeClass(constants.css.DISPLAY_VISIBLE),this.modalContainerEl.style.display="",this.positionModal(),this.modalInnerEl.addClass(constants.css.DISPLAY_VISIBLE),this.model.feedbackUIUpdated.fire()):this.modalContainerEl.style.display="none"}},{key:"handleClose",value:function(){this.cfg.preview||(this.trackAbanonded(this),this.feedbackCanceled.fire()),this.hideMyself()}}]),r}(),ScreenShot$1=function(){function e(){classCallCheck(this,e)}return createClass(e,[{key:"mark",value:function(){}}]),e}(),PopupController=function(){function e(){classCallCheck(this,e),this.popups=[],this.feedbackSubmitted=new PubSubTopic,this.cookie=null}return createClass(e,[{key:"getPopup",value:function(e){for(var t=this.popups.length,r=0;r<t;r++){var n=this.popups[r];if(n.cfg.uid===e)return n}return!1}},{key:"setCookie",value:function(e,t){var r={path:"/",domain:getRootDomain(window.location.hostname),secure:!1,encode:!0};if(e){var n=new Date,i=t||90,a=n.getTime()+24*i*60*60*1e3;n.setTime(a),r.expires=n.toUTCString(),this.cookie=new Cookie(r),this.cookie.set(e,a)}else logger.error("throttle cookie is not defined")}},{key:"hasPopup",value:function(){return 0<this.popups.length}},{key:"initialize",value:function(r){var n=this,e=this.getPopup(r.uid);e=new PopupUI(r),this.popups.push(e),e.feedbackSubmitted.subscribe(function(){if(n.feedbackSubmitted.fire(),r.launchedFromTimer){var e=r.surveyThrottles&&r.surveyThrottles.submitted||90,t=r.surveyThrottles&&r.surveyThrottles.cookie||"auryc.fbt";n.setCookie(t,e)}}),e.feedbackCanceled.subscribe(function(){if(r.launchedFromTimer){var e=r.surveyThrottles&&r.surveyThrottles.abandoned||7,t=r.surveyThrottles&&r.surveyThrottles.cookie||"auryc.fbt";n.setCookie(t,e)}})}}]),e}(),PopupUI=function(){function t(e){classCallCheck(this,t),this.cfg=e,this.feedbackSubmitted=new PubSubTopic,this.feedbackCanceled=new PubSubTopic,this.init()}return createClass(t,[{key:"init",value:function(){var e=this;this.chrome=new FBView(new FBModel(this.cfg),this.cfg),this.chrome.feedbackSubmitted.subscribe(function(){e.feedbackSubmitted.fire()}),this.chrome.feedbackCanceled.subscribe(function(){e.feedbackCanceled.fire()})}}]),t}(),globalPopupController=new PopupController,Preview=function(){function t(){classCallCheck(this,t);var e=window.location.hash;this.previewmode=!!getHashParam(e,"previewmode")&&getHashParam(e,"previewmode").toLowerCase(),this.previewbadgemode=!!getHashParam(e,"previewbadgemode")&&getHashParam(e,"previewbadgemode").toLowerCase(),this.previewbadgemode?(this.cfg=getHashParam(e,"cfg"),this.cfgObj=this.cfg?JSON.parse(this.cfg):{}):this.previewmode&&(this.datauri=getHashParam(e,"datauri"),this.mid=getHashParam(e,"mid"),this.backgroundColor=getHashParam(e,"backgroundColor"),this.fontColor=getHashParam(e,"fontColor"))}return createClass(t,[{key:"showFeedback",value:function(){var e={datauri:this.datauri,mid:this.mid,preview:!0,backgroundColor:this.backgroundColor,fontColor:this.fontColor};globalPopupController.initialize(e)}},{key:"showBadge",value:function(){var t=this.cfgObj;t.preview=!0;var e=function(){var e=new Badge(t);document.body.appendChild(e.$el),e.init()};switch(this.previewbadgemode){case"desktop":case"tablet":case"phone":this.cfgObj.delay&&0<this.cfgObj.delay?setTimeout(_.bind(e,this),this.cfgObj.delay):e()}}}]),t}(),Criteria=function(){function e(){classCallCheck(this,e),this.sessionStorage=StorageFactory.getInstance(constants.symbols.SESSION)}return createClass(e,[{key:"isConfigInstanceActive",value:function(e,t){var r=getInstance();if(e.disabled)return!1;if(100*Math.random()>=e.targetingcap)return!1;if(!(r.isMobile&&e.targetingdevicemobile||!r.isMobile&&e.targetingdevicedesktop))return!1;if("A"!==e.triggerpagefilter){var n="string"==typeof e.filterpages?e.filterpages.split(","):e.filterpages||[],i="string"==typeof e.filterpagesInclude?e.filterpagesInclude.split(","):e.filterpagesInclude||[];if("I"===e.triggerpagefilter&&!isUrlInList(t,i))return!1;if("E"===e.triggerpagefilter&&isUrlInList(t,n))return!1}return!0}},{key:"isDelayedPopupActive",value:function(e){if(this.isFeedbackShown(e))return!1;var t=!1,r=e.surveyThrottles;if(r){var n=r.sampling;if(void 0===n)return t;if(0===n)t=!1;else{var i=sessionStorage.getItem("auryc.fbt");if(i)t="t"===i;else t=100*Math.random()<n,sessionStorage.setItem("auryc.fbt",t?"t":"f")}}else t=!0;return t}},{key:"isFeedbackShown",value:function(e){var t=e&&e.surveyThrottles&&e.surveyThrottles.cookie||"auryc.fbt";return!!Cookie.Get(t)}}]),e}();function initTemplate(){window[constants.symbols.FEEDBACKCONTENT]="iBjbGFzcz0iYXVyY3ktZmVlZGJhY2tfX3NlbGVjdGlvbiI-CiAgPGRpdiBjbGFzcz0iYXVyY3ktZmVlZGJhY2tfX3NlbGVjdGlvbl90aXRsZSI-SG93IHdvdWxkIHlvdSBsaWtlIHRvIGdpdmUgZmVlZGJhY2s_PC9kaXY-CiAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2tfX3NjcmVlbnNob3QiPgogICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2tfb3B0aW9uX3JvdyI-CiAgICAgIDxkaXYgY2xhc3M9ImF1cnljLWZlZWRiYWNrX29wdGlvbl9jb2x1bW4gYXVyeWMtZmVlZGJhY2tfb3B0aW9uX2ltYWdlIj4KICAgICAgICA8aW1nIHNyYz0iZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFDVUFBQUFnQ0FZQUFBQ1ZVN0d3QUFBQmZFbEVRVlJZUisyWHEyNkVVQkNHejZBUUtGYjFTVnFCYXFxNEdJSXNtRjQwNFFXNmZRR0M3c1dRU29MaG9wcFZpUFpKNmxBSUZOTWMwbTBJM2U2V3kxbEl3M0VuaEpudi9QOHdad0F5d3dVelpDSUwxRjlkV1pUcXJKUXN5MGhmU3RPMFZvL0ZudU80K3ppTzE0Zmd2dTFqQWJIdmtQdkE1bHRUYlpVT3ljdjYrYzc2WVpHMHk4R1BadC8vZ09weWlyN1dkc214MUZTemIwM1dweEFSTkUyN1JzUXJSRHlsSUFEd0RnRFBVUlE5QVVCOWk3UVhNL3QwWFQ4cHkvS0ZFSEwraXlvYm51Y3Z3ekQ4T0FvVVZVaFJsRmNLdEZxdDBEUk44RHl2em0zYk52RjlIL004cDRKc2tpUzVhQ3ZHcEUrcHFucFRWZFdES0lyb3VpNElna0FNdzZpaGdpQWdSVkVReDNGcU1JN2pidU00Zm15cXhRUktVWlEzV2tOVUZVbVM2bnhOS0xyUHNveFE5V2lOSlVseTlnTnFyQW1oYncvYldWT3FxcTZycXJvYk9rdU5DalZXc0cyY1Vld2JHMnFXaGQ1c0NmUUx0Q3hyK3BaQWxSL2NQTWUyYnh0djBEWERDcW9adC9Qb3NrQjkvVmRPTnJyMHRlOFRZL2RINmxDVXIzWUFBQUFBU1VWT1JLNUNZSUk9Ij48L2ltZz4KICAgICAgPC9kaXY-CiAgICAgIDxkaXYgY2xhc3M9ImF1cnljLWZlZWRiYWNrX29wdGlvbl9jb2x1bW4gYXVyeWMtZmVlZGJhY2tfX3NlbGVjdGlvbl9fbGFiZWxzIj4KICAgICAgICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mZWVkYmFja19fc2VsZWN0aW9uX19sYWJlbDEiPlNlbGVjdCBTZWN0aW9uPC9kaXY-CiAgICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2tfX3NlbGVjdGlvbl9fbGFiZWwyIj5TZWxlY3QgYSBzZWN0aW9uIG9mIHRoaXMgcGFnZSBvbiB3aGljaCB0byBnaXZlIGZlZWRiYWNrLjwvZGl2PgogICAgICA8L2Rpdj4KICAgIDwvZGl2PgogIDwvZGl2PgogIDxkaXYgY2xhc3M9ImF1cnljLWZlZWRiYWNrX19nZW5lcmFsIj4KICAgIDxkaXYgY2xhc3M9ImF1cnljLWZlZWRiYWNrX29wdGlvbl9yb3ciPgogICAgICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mZWVkYmFja19vcHRpb25fY29sdW1uIGF1cnljLWZlZWRiYWNrX29wdGlvbl9pbWFnZSI-CiAgICAgICAgPGltZyBzcmM9ImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQ0FBQUFBZ0NBWUFBQUJ6ZW5yMEFBQUEvVWxFUVZSWVIrMlhQUTZDUUJDRlp5UmFjQVAxUEZyc1NrbnBPYlN5c05KeldGTGlVT2g5UEFLRkJzZHNRVUlJWVJhV1pHT3lXN0x6ODgzamJURUluZzlLL2RNMFhaUmxlUWFBUFRPdnBIaHpqNGd2QUxqRmNYektzdXpkbHlNQ2FLMHZ6SHl3YWR5T1FjUXJFUjJkQUpSU1pwb2xJdTZJaUd4QXROYWFtZTlHQ1NKYUR3WlFTbkU3cVNnS1VhMW1qbTJOenFMTlpFVDhNdk5zakFJQThBR0FlUTNXTlVRdmdFbVl3Z1AxUUtNQXBuZ0ZUZ0EycHBOaUFrQlF3Rm1CSkVrZVZWVnRKTE0xNzZNb2V1WjV2alhmL2g5Z3lPUmRzYzRLQklCZ3d1QUI3d29FRTNyL0JRSEFtd0t1alcyV0czRXhtUkxDZWkrWXNxbFU2d2ZUZTBBd1VVdkpCQUFBQUFCSlJVNUVya0pnZ2c9PSI-PC9pbWc-CiAgICAgIDwvZGl2PgogICAgICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mZWVkYmFja19vcHRpb25fY29sdW1uIGF1cnljLWZlZWRiYWNrX19zZWxlY3Rpb25fX2xhYmVscyI-CiAgICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2tfX3NlbGVjdGlvbl9fbGFiZWwxIj5GZWVkYmFjayBGb3JtPC9kaXY-CiAgICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2tfX3NlbGVjdGlvbl9fbGFiZWwyIj5GaWxsIG91dCBvdXIgZ2VuZXJhbCBmZWVkYmFjayBmb3JtLjwvZGl2PgogICAgICA8L2Rpdj4KICAgIDwvZGl2PgogIDwvZGl2Pgo8L2Rpdj4KPCUKICB2YXIgcG93ZXJlZEJ5ID0gJ1Bvd2VyZWQgYnknOwogIHZhciB5b3VyQW5zd2VyID0gJ1lvdXIgQW5zd2VyJzsKICB2YXIgbGVmdExhYmVsID0gJzxzcGFuIGNsYXNzPSJhdXJ5Yy1mZWVkYmFja19fdGV4dGFyZWEtLWNvdW50Ij4xLDAwMDwvc3Bhbj4gQ2hhcmFjdGVycyBMZWZ0JzsKICBpZiAoZXh0cmFJbmZvLnlvdXJBbnN3ZXIpIHsKICAgIHlvdXJBbnN3ZXIgPSBleHRyYUluZm8ueW91ckFuc3dlcjsKICAgIHBvd2VyZWRCeSA9IGV4dHJhSW5mby5wb3dlcmVkQnk7CiAgICBsZWZ0TGFiZWwgPSBleHRyYUluZm8ubGVmdC5yZXBsYWNlKC9cJFx7TlVNXH0vLCAnPHNwYW4gY2xhc3M9ImF1cnljLWZlZWRiYWNrX190ZXh0YXJlYS0tY291bnQiPjEsMDAwPC9zcGFuPicpOwogIH0KICU-CjxkaXYgY2xhc3M9ImF1cmN5LWZlZWRiYWNrX19jb250ZW50Ij4KICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mZWVkYmFjayI-CiAgICAgIDxkaXYgY2xhc3M9ImF1cnljLWZlZWRiYWNrX19ibG9jayBhdXJ5Yy1mZWVkYmFjay0ta2V5bGluZSBhdXJ5Yy1oZWFkaW5nem9uZSI-CiAgICAgICAgICA8JSBpZiAobG9nb1BpYykgeyAlPgogICAgICAgICAgICAgIDxpbWcgc3JjPSI8JT1sb2dvUGljJT4iIGNsYXNzPSJhdXJ5Yy1mZWVkYmFja19fbG9nbyIvPgogICAgICAgICAgPCUgfSAlPgogICAgICAgICAgPCUgaWYgKGZlZWRiYWNrVGl0bGUpIHsgJT4KICAgICAgICAgICAgICA8aDE-PCU9IGZlZWRiYWNrVGl0bGUgJT48L2gxPgogICAgICAgICAgPCUgfSAlPgogICAgICAgICAgPCUgaWYgKHByb2xvZ3VlVGV4dCkgeyAlPgogICAgICAgICAgICAgIDwlIGlmIChwcm9sb2d1ZVRleHQuaW5kZXhPZignaDEnKSA9PT0gLTEpIHsgJT4KICAgICAgICAgICAgICAgICAgPHA-PCU9IHByb2xvZ3VlVGV4dCAlPjwvcD4KICAgICAgICAgICAgICA8JSB9IGVsc2UgeyAlPgogICAgICAgICAgICAgICAgICA8JT0gcHJvbG9ndWVUZXh0ICU-CiAgICAgICAgICAgICAgPCUgfSAlPgogICAgICAgICAgPCUgfSAlPgogICAgICA8L2Rpdj4KICAgICAgPCUgZm9yICh2YXIgbXFpID0gMDsgbXFpIDwgbWFpblEubGVuZ3RoOyBtcWkrKykgewogICAgICAgICAgdmFyIGN1clEgPSBtYWluUVttcWldOwogICAgICAgICAgaWYgKGN1clEucXVlc3Rpb25UeXBlICE9PSAnRFJPUF9ET1dOJyB8fCBjdXJRLmFuc3dlcnMubGVuZ3RoID4gMCkgeyAlPgogICAgICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mZWVkYmFja19fYmxvY2sgYXVyeWMtcGVyc2lzdGVudF9fYmxvY2sgPCUgaWYgKGN1clEucXVlc3Rpb25UeXBlID09PSAnU0NBTEVEJykgeyAlPmF1cnljLXN0YXJyYXRpbmdfX2Jsb2NrPCUgfSAlPiIgICAgICAgICAgIHF1ZXN0aW9uaWQ9IjwlPSBjdXJRLmlkICU-Ij4KICAgICAgICAgIDwlIGlmIChjdXJRLnF1ZXN0aW9uVHlwZSA9PT0gJ1NDQUxFRCcpIHsgJT4KICAgICAgICAgIDxkaXYgY2xhc3M9ImF1cnljLWZlZWRiYWNrX19xdWVzdGlvbiIgcXVlc3Rpb25pZD0iPCU9IGN1clEuaWQgJT4iPgogICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImF1cnljLWZlZWRiYWNrX19sYWJlbCI-PCU9IGN1clEucXVlc3Rpb25UZXh0ICU-PC9sYWJlbD4KICAgICAgICAgICAgPGZpZWxkc2V0IGNsYXNzPSJhdXJ5Yy1zdGFyLXJhdGluZyIgcXVlc3Rpb25pZD0iPCU9Y3VyUS5pZCU-IiBzdHlsZT0id2hpdGUtc3BhY2U6IG5vd3JhcDsiPgogICAgICAgICAgICAgIDwlIGZvciAodmFyIGF0aSA9IDA7IGF0aSA8IGN1clEuYW5zd2Vycy5sZW5ndGg7IGF0aSsrKSB7CiAgICAgICAgICAgICAgICAgIHZhciBhbnMgPSBjdXJRLmFuc3dlcnNbYXRpXTsgJT4KICAgICAgICAgICAgICA8aW5wdXQgbmFtZT0ic3JfPCU9Y3VyUS5pZCU-IiBpZD0ic3JfPCU9IGN1clEuaWQgJT5fPCU9YW5zLmlkJT4iIHZhbHVlPSI8JT1hbnMuaWQlPiIKICAgICAgICAgICAgICAgICAgICAgcXVlc3Rpb25pZD0iPCU9Y3VyUS5pZCU-IiB0eXBlPSJyYWRpbyIKICAgICAgICAgICAgICAgICAgICAgY2xhc3M9ImF1cnljLXN0YXItcmF0aW5nX19zdGFyIgogICAgICAgICAgICAgICAgICAgICB2YWx1ZT0iPCU9YW5zLnZhbHVlJT4iLz4KICAgICAgICAgICAgICA8bGFiZWwgZm9yPSJzcl88JT1jdXJRLmlkJT5fPCU9YW5zLmlkJT4iPjxzcGFuIGNsYXNzPSJhdXJ5Yy1zdGFyLXJhdGluZ19fbnVtIj48JT1hbnMudmFsdWUlPjwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgPC9maWVsZHNldD4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPCUgfSAlPgogICAgICAgICAgPCUgaWYgKGN1clEucXVlc3Rpb25UeXBlID09PSAnTlBTJykgeyAlPgogICAgICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtbnBzX19jb250YWluZXIgYXVyeWMtZmVlZGJhY2tfX3F1ZXN0aW9uIiBxdWVzdGlvbmlkPSI8JT0gY3VyUS5pZCAlPiI-CiAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iYXVyeWMtZmVlZGJhY2tfX2xhYmVsIj48JT0gY3VyUS5xdWVzdGlvblRleHQgJT48L2xhYmVsPgogICAgICAgICAgICA8ZmllbGRzZXQgY2xhc3M9Im5wcy1yYXRpbmciIHF1ZXN0aW9uaWQ9IjwlPSBjdXJRLmlkICU-Ij4KICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJucHMtcmF0aW5nX19iYWRnZXMiPgogICAgICAgICAgICAgICAgPCUgZm9yICh2YXIgYXRpID0gMDsgYXRpIDwgY3VyUS5hbnN3ZXJzLmxlbmd0aDsgYXRpKyspIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYW5zID0gY3VyUS5hbnN3ZXJzW2F0aV07ICU-CiAgICAgICAgICAgICAgICA8aW5wdXQgbmFtZT0ibnBzXzwlPSBjdXJRLmlkICU-IiBpZD0ibnBzXzwlPSBjdXJRLmlkICU-XzwlPSBhbnMuaWQgJT4iCiAgICAgICAgICAgICAgICAgICAgICAgcXVlc3Rpb25pZD0iPCU9IGN1clEuaWQgJT4iIHR5cGU9InJhZGlvIgogICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPSI8JT0gYW5zLmlkICU-Ii8-CiAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9Im5wcy1yYXRpbmdfX2JhZGdlIiBmb3I9Im5wc188JT0gY3VyUS5pZCAlPl88JT0gYW5zLmlkICU-Ij4KICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibnBzLXJhdGluZ19faGVpZ2h0X2ZpeCI-PC9kaXY-CiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im5wcy1yYXRpbmdfX251bSI-PCU9YXRpJT48L2Rpdj4KICAgICAgICAgICAgICAgIDwvbGFiZWw-CiAgICAgICAgICAgICAgICA8JSB9ICU-CiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0ic3RyZXRjaCIvPgogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgIDxkaXY-CiAgICAgICAgICAgICAgICA8JQogICAgICAgICAgICAgICAgICB2YXIgbnBzWmVybyA9IGN1clEuYW5zd2Vyc1swXS5sYmw7CiAgICAgICAgICAgICAgICAgIHZhciBucHNUZW4gPSBjdXJRLmFuc3dlcnNbY3VyUS5hbnN3ZXJzLmxlbmd0aC0xXS5sYmw7CiAgICAgICAgICAgICAgICAgIGlmIChleHRyYUluZm8ubnBzWmVybykgewogICAgICAgICAgICAgICAgICAgIG5wc1plcm8gPSBleHRyYUluZm8ubnBzWmVybzsKICAgICAgICAgICAgICAgICAgICBucHNUZW4gPSBleHRyYUluZm8ubnBzVGVuOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgJT4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im5wc19yYXRpbmdfbGVmdF9sYWJlbCI-PCU9IG5wc1plcm8gJT48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im5wc19yYXRpbmdfcmlnaHRfbGFiZWwiPjwlPSBucHNUZW4gJT48L2Rpdj4KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9maWVsZHNldD4KICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPCUgfSAlPgogICAgICAgICAgPCUgaWYgKGN1clEucXVlc3Rpb25UeXBlID09PSAnRFJPUF9ET1dOJyApIHsgJT4KICAgICAgICAgICAgPCUgaWYgKGN1clEuYW5zd2Vycy5sZW5ndGggPiAxKSB7ICU-CiAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2tfX3F1ZXN0aW9uIiBxdWVzdGlvbmlkPSI8JT0gY3VyUS5pZCAlPiI-CiAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImF1cnljLWZlZWRiYWNrX19sYWJlbCI-PCU9IGN1clEucXVlc3Rpb25UZXh0ICU-PC9sYWJlbD4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImF1cnljLWZlZWRiYWNrX19jb250cm9sIGF1cnljLWZlZWRiYWNrX19zZWxlY3QiIHF1ZXN0aW9uaWQ9IjwlPSBjdXJRLmlkICU-Ij4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mZWVkYmFja19fc2VsZWN0LWJ1dHRvbiI-CiAgICAgICAgICAgICAgICAgICAgICAgIDwlIGlmIChjdXJRLmFuc3dlcnMubGVuZ3RoID4gMSkgeyAlPgogICAgICAgICAgICAgICAgICAgICAgICA8JT0gZXh0cmFJbmZvLmNob29zZSAlPgogICAgICAgICAgICAgICAgICAgICAgICA8JSB9IGVsc2UgeyAlPgogICAgICAgICAgICAgICAgICAgICAgICA8JT0gY3VyUS5hbnN3ZXJzWzBdLmxhYmVsICU-CiAgICAgICAgICAgICAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJzXzwlPSBjdXJRLmlkICU-IiBjbGFzcz0iYXVyeWMtZmVlZGJhY2tfX3NlbGVjdG9yIGF1cnljLXRvcGljX19zZWxlY3RvciI-CiAgICAgICAgICAgICAgICAgICAgICAgIDwlIGlmIChjdXJRLmFuc3dlcnMubGVuZ3RoID4gMSkgeyAlPgogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uPjwlPSBleHRyYUluZm8uY2hvb3NlICU-PC9vcHRpb24-CiAgICAgICAgICAgICAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgICAgICAgICAgICAgPCUgZm9yICh2YXIgYXRpcSA9IDA7IGF0aXEgPCBjdXJRLmFuc3dlcnMubGVuZ3RoOyBhdGlxKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbnMgPSBjdXJRLmFuc3dlcnNbYXRpcV07ICU-CiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjwlPSBhbnMuaWQgJT4iPjwlPSBhbnMubGFiZWwgJT48L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPCUgfSAlPgogICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgPC9kaXY-CiAgICAgICAgICAgICAgPC9kaXY-CiAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgPCEtLSBUT1BJQ1MgQkVHSU4gSEVSRSAtLT4KICAgICAgICAgICAgPCUgZm9yICh2YXIgdHBpID0gMDsgdHBpIDwgdG9waWNzLmxlbmd0aDsgdHBpKyspIHsKICAgICAgICAgICAgICAgIHZhciB0b3BrID0gdG9waWNzW3RwaV07ICU-CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImF1cnljLWZlZWRiYWNrX190b3BpYyIgaWQ9InRvcGtfPCU9IHRvcGsudG9waWNBbnN3ZXJJZCAlPiI-CiAgICAgICAgICAgICAgICA8JSBmb3IgKHZhciBxaSA9IDA7IHFpIDwgdG9way5xdWVzdGlvbnMubGVuZ3RoOyBxaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHEgPSB0b3BrLnF1ZXN0aW9uc1txaV07ICU-CiAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2tfX2Jsb2NrIDwlIGlmIChxLnF1ZXN0aW9uVHlwZSA9PT0gJ1NDQUxFRCcpIHslPmF1cnljLXN0YXJyYXRpbmdfX2Jsb2NrPCUgfSU-IiBpZD0iYXVyeWNxXzwlPSBxLmlkICU-IgogICAgICAgICAgICAgICAgICAgIHF1ZXN0aW9uaWQ9IjwlPSBxLmlkICU-IiBkYXRhLXF1ZXN0aW9uLXR5cGU9IjwlPSBxLnF1ZXN0aW9uVHlwZSAlPiI-CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJhdXJ5Yy1mZWVkYmFja19fbGFiZWwiIHN0eWxlPSJ0ZXh0LWFsaWduOiBsZWZ0O3BhZGRpbmctYm90dG9tOjVweDsiIGZvcj0iYXVyeWNfb2JqPCU9IHEuaWQgJT4iIGRhdGEtcXVlc3Rpb250eXBlPSJfPCU9IHEucXVlc3Rpb25UeXBlICU-Ij48JT0gcS5xdWVzdGlvblRleHQgJT48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDwlIGlmIChxLnF1ZXN0aW9uVHlwZSA9PT0gJ0NIRUNLQk9YJykgeyAlPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImF1cnljLWZlZWRiYWNrX19jYiBhdXJ5Yy1mZWVkYmFja19fY2JveCI-CiAgICAgICAgICAgICAgICAgICAgICAgIDwlIGZvciAodmFyIGFuc2kgPSAwOyBhbnNpIDwgcS5hbnN3ZXJzLmxlbmd0aDsgYW5zaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbnMgPSBxLmFuc3dlcnNbYW5zaV07ICU-CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9Il88JT0gYW5zLmlkICU-IiBjbGFzcz0iYXVyeWMtZmVlZGJhY2tfX2NvbnRyb2wgYXVyeWMtZmVlZGJhY2tfX2NicmFkaW8iIHN0eWxlPSJ0ZXh0LWFsaWduOiBsZWZ0OyI-PGlucHV0IHR5cGU9ImNoZWNrYm94IiB2YWx1ZT0iPCU9IGFucy52YWx1ZSAlPiIgcXVlc3Rpb25pZD0iPCU9IGFucy5pZCAlPiIgaWQ9Il88JT0gYW5zLmlkICU-IiAvPjwlPSBhbnMubGFiZWwgJT48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8JSB9ICU-CiAgICAgICAgICAgICAgICAgICAgPC9kaXY-CiAgICAgICAgICAgICAgICAgICAgPCUgfSAlPgogICAgICAgICAgICAgICAgICAgIDwlIGlmIChxLnF1ZXN0aW9uVHlwZSA9PSAnUkFESU9fQlVUVE9OJykgeyAlPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImF1cnljLWZlZWRiYWNrX19jYiBhdXJ5Yy1mZWVkYmFja19fcmFkaW8iPgogICAgICAgICAgICAgICAgICAgICAgICA8JSBmb3IgKHZhciBhbnNpID0gMDsgYW5zaSA8IHEuYW5zd2Vycy5sZW5ndGg7IGFuc2krKykgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYW5zID0gcS5hbnN3ZXJzW2Fuc2ldOyAlPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPSJfPCU9IGFucy5pZCAlPiIgY2xhc3M9ImF1cnljLWZlZWRiYWNrX19jb250cm9sIGF1cnljLWZlZWRiYWNrX19jYnJhZGlvIGF1cnljLWZlZWRiYWNrX19jYi1yYWRpbyI-PGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJhdXJ5Y3JkXzwlPSBxLmlkICU-IiB2YWx1ZT0iPCU9IGFucy5pZCAlPiIgbGFiZWw9IjwlPSBlbmNvZGVVUklDb21wb25lbnQoYW5zLmxhYmVsKSAlPiIgaWQ9Il88JT0gYW5zLmlkICU-IiBxdWVzdGlvbmlkPSI8JT0gcS5pZCAlPiIgLz48JT0gYW5zLmxhYmVsICU-PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPCUgfSAlPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgICAgICAgICA8JSBpZiAocS5xdWVzdGlvblR5cGUgPT09ICdPUEVORU5EJykgeyAlPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImF1cnljLWZlZWRiYWNrX190ZXh0YXJlYSI-CiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSBpZD0iYXVyeWNfb2JqPCU9IHEuaWQgJT4iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz0iYXVyeWMtZmVlZGJhY2tfX2NvbnRyb2wgYXVyeWMtZmVlZGJhY2tfX2NvbnRyb2wtLXRleHRhcmVhIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj0iPCU9IHlvdXJBbnN3ZXIgJT4iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXVyeWNtYXhsZW5ndGg9IjEwMDAiPjwvdGV4dGFyZWE-CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJhdXJ5Yy1mZWVkYmFja19jb3VudFdyYXBwZXIiPiA8JT0gbGVmdExhYmVsICU-PC9zcGFuPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgICAgICAgICA8JSBpZiAocS5xdWVzdGlvblR5cGUgPT09ICdDT05UQUNUX0lORk8nKSB7ICU-CiAgICAgICAgICAgICAgICAgICAgPCEtLSBUZXh0IGlucHV0IC0tPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImF1cnljLWZlZWRiYWNrX190ZXh0IGF1cnljLWZlZWRiYWNrX19lbWFpbCI-CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBpZD0ic3JfPCU9IHEuaWQgJT4iIGNsYXNzPSJhdXJ5Yy1mZWVkYmFja19fY29udHJvbCIgdHlwZT0idGV4dCIgPCUgaWYgKDEpIHsgJT5yZXF1aXJlZDwlIH0gJT4vPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhdXJ5Yy12YWxpZGF0aW9uLWJsb2NrIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8JSB9ICU-CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgICAgPC9kaXY-CiAgICAgICAgICAgIDwlIH0gJT4KICAgICAgICAgIDwlIH0gJT4KICAgICAgPC9kaXY-CiAgICAgIDwlIH0gJT4KICAgICAgPCUgfSAlPgoKICAgICAgPGRpdiBjbGFzcz0iYXVyeWNfbG9nb19wYXJlbnQiPgogICAgICAgIDxkaXYgY2xhc3M9ImF1cnljLXZhbGlkYXRpb24tYmxvY2sgYXVyeWMtZmVlZGJhY2tfX3ByaW1hcnkiPgogICAgICAgICAgPCU9IGV4dHJhSW5mby5yYXRpbmcgJT4KICAgICAgICA8L2Rpdj4KICAgICAgICA8JSB2YXIgYnRuVGV4dCA9ICIiOyAlPgogICAgICAgICAgICA8JSBpZiAoZm9ybUNvbmZpZy5idG5Gb250Q29sb3IpIHsgJT4KICAgICAgICAgICAgICAgIDwlIGJ0blRleHQgPSAiPHNwYW4gc3R5bGU9XCJjb2xvcjoiICsgZm9ybUNvbmZpZy5idG5Gb250Q29sb3IgKyAiXCI-IiArIGV4dHJhSW5mby5zdWJtaXQgKyAiPC9zcGFuPiI7ICU-CiAgICAgICAgICAgIDwlIH0gZWxzZSB7ICU-CiAgICAgICAgICAgICAgICA8JSBidG5UZXh0ID0gZXh0cmFJbmZvLnN1Ym1pdDsgJT4KICAgICAgICA8JSB9ICU-CiAgICAgICAgPHNwYW4gY2xhc3M9ImF1cnljLWJ1dHRvbi1leHBhbmQiPgogICAgICAgICAgICA8JSBpZiAoZm9ybUNvbmZpZy5idG5CYWNrZ3JvdW5kQ29sb3IpIHsgJT4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImF1cnljLWZlZWRiYWNrX19idXR0b24gYXVyeWMtZmVlZGJhY2tfX2J1dHRvbi0tZXhwYW5kIGF1cnljLXN1Ym1pdC1mZWVkYmFja19fYnV0dG9uIgogICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0iYmFja2dyb3VuZDogPCU9Zm9ybUNvbmZpZy5idG5CYWNrZ3JvdW5kQ29sb3IlPjsgYm9yZGVyOiAxcHggc29saWQgPCU9Zm9ybUNvbmZpZy5idG5CYWNrZ3JvdW5kQ29sb3IlPiIKICAgICAgICAgICAgICAgICAgICAgICAgaWQ9InN1Ym1pdC1mZWVkYmFjayI-CiAgICAgICAgICAgICAgICAgICAgPCU9IGJ0blRleHQgJT4KICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICA8JSB9IGVsc2UgeyAlPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYXVyeWMtZmVlZGJhY2tfX2J1dHRvbiBhdXJ5Yy1mZWVkYmFja19fYnV0dG9uLS1leHBhbmQgYXVyeWMtc3VibWl0LWZlZWRiYWNrX19idXR0b24iIGlkPSJzdWJtaXQtZmVlZGJhY2siPgogICAgICAgICAgICAgICAgICAgIDwlPSBidG5UZXh0ICU-CiAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgPCUgfSAlPgogICAgICAgIDwvc3Bhbj4KICAgICAgICA8ZGl2IGlkPSJhdXJ5Yy1mZWVkYmFja19fY2FudmFzIiBjbGFzcz0iYXVyeWMtZmVlZGJhY2tfX2NhbnZhcyI-CiAgICAgICAgICA8ZGl2IGNsYXNzPSJhdXJ5Y19tb2RhbF9mb290ZXIiPjxzcGFuPjwlPSBwb3dlcmVkQnkgJT48L3NwYW4-IDxpbWcgc3JjPSJodHRwczovL3MzLXVzLXdlc3QtMS5hbWF6b25hd3MuY29tL2F1cnljLXB1YmxpYy9kYXJrLWxvZ28uc3ZnIiBhbHQ9IkF1cnljIiBoZWlnaHQ9IjIwcHgiIHdpZHRoPSI2MHB4Ij48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY-CiAgICAgIDxkaXYgY2xhc3M9ImF1cnljLWNsZWFyIj48L2Rpdj4KICA8L2Rpdj4KPC9kaXY-Cg==PGRpd",window[constants.symbols.FEEDBACKEPILOGUE]="WYgKG1ldGEubG9nbzJncmFwaGljKSB7ICU-CjxkaXYgY2xhc3M9ImF1cnljLWZlZWRiYWNrLWJhbm5lci1pbWctY29udGFpbmVyIj4KICAgIDxpbWcgc3JjPSI8JT0gbWV0YS5sb2dvMmdyYXBoaWMgJT4iIGNsYXNzPSJhdXJ5Yy1mZWVkYmFjay1iYW5uZXItaW1nIi8-CjwvZGl2Pgo8JSB9ICU-CjxkaXYgY2xhc3M9ImF1cnljLWZlZWRiYWNrIGF1cnljLWVwaWxvZ3VlLWNvbnRhaW5lciI-CiAgICA8ZGl2IGNsYXNzPSJhdXJ5Yy1mZWVkYmFja19fYmxvY2sgYXVyeWMtZmVlZGJhY2stLWtleWxpbmUgYXVyeWMtaGVhZGluZ3pvbmUiPgogICAgICAgIDwlIGlmIChtZXRhLmxvZ28xZ3JhcGhpYykgeyAlPgogICAgICAgIDxpbWcgc3JjPSI8JT0gbWV0YS5sb2dvMWdyYXBoaWMgJT4iIGNsYXNzPSJhdXJ5Yy1mZWVkYmFja19fbG9nbyIvPgogICAgICAgIDwlIH0gJT4KICAgIDwvZGl2PgogICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2tfX2Jsb2NrIGF1cnljLWZlZWRiYWNrLS1rZXlsaW5lIj4KICAgICAgICA8JSBpZiAobWV0YS5lcGlsb2d1ZXRleHQgJiYgbWV0YS5lcGlsb2d1ZXRleHQubGVuZ3RoID4gMSkgeyU-CiAgICAgICAgICAgIDwlIGlmIChtZXRhLmVwaWxvZ3VldGV4dC5pbmRleE9mKCdoMScpID09PSAtMSkgeyU-CiAgICAgICAgICAgICAgICA8aDE-PCU9IG1ldGEuZXBpbG9ndWV0ZXh0ICU-PC9oMT4KICAgICAgICAgICAgPCUgfSBlbHNlIHsgJT4KICAgICAgICAgICAgICAgIDwlPSBtZXRhLmVwaWxvZ3VldGV4dCAlPgogICAgICAgICAgICA8JSB9ICU-CiAgICAgICAgPCUgfSBlbHNlIHslPgogICAgICAgICAgICA8aDEgY2xhc3M9ImF1cnljLWZlZWRiYWNrX19oZWFkaW5nIGF1cnljLWZlZWRiYWNrX19oZWFkaW5nLS1oMSI-WW91ciBGZWVkYmFjayBIYXMgQmVlbiBTdWJtaXR0ZWQ8L2gxPgogICAgICAgIDwlIH0gJT4KICAgIDwvZGl2PgogICAgPCUgdmFyIGJ0blRleHQgPSAiIjsgJT4KICAgIDwlIGlmIChmb3JtQ29uZmlnLmJ0bkZvbnRDb2xvcikgeyAlPgogICAgICAgIDwlIGJ0blRleHQgPSAiPHNwYW4gc3R5bGU9XCJjb2xvcjoiICsgZm9ybUNvbmZpZy5idG5Gb250Q29sb3IgKyAiXCI-IiArIGV4dHJhSW5mby5vayArICI8L3NwYW4-IjsgJT4KICAgIDwlIH0gZWxzZSB7ICU-CiAgICAgICAgPCUgYnRuVGV4dCA9IGV4dHJhSW5mby5vazsgJT4KICAgIDwlIH0gJT4KICAgIDwlIGlmIChmb3JtQ29uZmlnLmJ0bkJhY2tncm91bmRDb2xvcikgeyAlPgogICAgICAgIDxkaXYgY2xhc3M9ImF1cnljLWZlZWRiYWNrX19idXR0b24tcm93Ij4KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYXVyeWMtZmVlZGJhY2tfX2J1dHRvbiBhdXJ5Yy1mZWVkYmFja19fYnV0dG9uLS1leHBhbmQgYXVyeWMtY2xvc2UtYnV0dG9uIGNsb3NlQnV0dG9uQXVyeWMiCiAgICAgICAgICAgICAgICAgICAgc3R5bGU9ImJhY2tncm91bmQ6IDwlPWZvcm1Db25maWcuYnRuQmFja2dyb3VuZENvbG9yJT47IGJvcmRlcjogMXB4IHNvbGlkIDwlPWZvcm1Db25maWcuYnRuQmFja2dyb3VuZENvbG9yJT4iPgogICAgICAgICAgICAgICAgPCU9IGJ0blRleHQgJT4KICAgICAgICAgICAgPC9idXR0b24-CiAgICAgICAgPGRpdj4KICAgIDwlIH0gZWxzZSB7ICU-CiAgICAgICAgPGRpdiBjbGFzcz0iYXVyeWMtZmVlZGJhY2tfX2J1dHRvbi1yb3ciPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJhdXJ5Yy1mZWVkYmFja19fYnV0dG9uIGF1cnljLWZlZWRiYWNrX19idXR0b24tLWV4cGFuZCBhdXJ5Yy1jbG9zZS1idXR0b24gY2xvc2VCdXR0b25BdXJ5YyIKICAgICAgICAgICAgICAgICAgICBzdHlsZT0iYmFja2dyb3VuZDojMjNDNmY1OyBib3JkZXI6IDFweCBzb2xpZCAjMjNDNmY1Ij4KICAgICAgICAgICAgICAgIDwlPSBidG5UZXh0ICU-CiAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICA8ZGl2PgogICAgPCUgfSAlPgoKICAgIDxkaXYgY2xhc3M9ImF1cnljLWNsZWFyIj48L2Rpdj4KPC9kaXY-Cg==PCUga"}function setupFeedback(e,t){setupProjects(e,t),navigationEvent.subscribe(function(){setupProjects(e,t)})}function setupProjects(r,e){e.instances.forEach(function(e){var t;r.isConfigInstanceActive(e,window.location.href)?e.trigger?e.trigger.handleNavigation(!0):(e.trigger=new Trigger(e,r),e.trigger.feedbackTriggered.subscribe((t=e,function(){return globalPopupController.initialize(t)}))):e.trigger&&e.trigger.handleNavigation(!1)})}function readyFn(e){var t=window.location.hash,r=!!getHashParam(t,"previewmode"),n=!!getHashParam(t,"previewbadgemode"),i=new Criteria;if(r||n){if(r)return void(new Preview).showFeedback();if(n)return void(new Preview).showBadge()}else feedbackAPI.makePublic(feedbackAPI),feedbackAPI.feedbackEnabled.subscribe(function(){return setupFeedback(i,e)}),setupFeedback(i,e),enableLaunch(e)}function enableLaunch(a){window.launchAurycFeedback=function(e,t,r){if(feedbackAPI.getFeedbackEnabled()){var n=!1,i=0;if(a.instances&&a.instances.length)if(e)for(i=0;i<a.instances.length;i++)a.instances[i].projectId===e&&(n=a.instances[i]);else for(i=0;i<a.instances.length;i++)if(!a.instances[i].disabled){n=a.instances[i];break}return n&&n.disabled?"This feedback has been disabled":n?void(globalPopupController.hasPopup()?t&&(n.launchedFromTimer=r,globalPopupController.initialize(n)):(n.launchedFromTimer=r,globalPopupController.initialize(n))):"Error: feedbackId provided is not valid: "+e}}}function init$3(){if(config.isProductEnabled("feedback")){if(config.isVisualEditorMode())logger.warn("fb: product disabled");else initTemplate(),readyFn(config.getProductConfig("feedback"))}else{logger.log("fb: product disabled");var e={isFBProductEnabled:function(){return!1}};feedbackAPI.makePublic(window,e)}}var feedback={init:init$3},IdentifyAPI=function(){function n(e,t,r){classCallCheck(this,n),this.product=e||"auryc",this.sessStg=t,this.persStg=r,this.errorMsg={badProp:"The property key or values are invalid",dupName:"The name has already been used. Please choose a different name",badIdentity:"The identity value is invalid"}}return createClass(n,[{key:"makePublic",value:function(e){_.isDefined(e)&&(window.auryc||(window.aurycBehaviorAPI={}),window.aurycBehaviorAPI=e)}},{key:"loadEventGroups",value:function(e){var t=this.sessStg.get(this.getDefinedEventsStorKey());if(t)e(t);else{var r=this.getUbaApi()+"/eventgroup/?projectId="+config.getSiteid();this._postRequest({uri:r,type:"EVENTGROUP",callback:e})}}},{key:"getUbaApi",value:function(){var e=config.getConfig("uba_api_uri","base");return e=location.protocol+"//"+e}},{key:"getTokenUri",value:function(){var e=config.getConfig("token_uri","base");return e=location.protocol+"//"+e}},{key:"getDefinedEventsStorKey",value:function(){return"DE_"+config.getSiteid()}},{key:"tokenCallBack",value:function(e,t,r){if(t){var n={"Content-Type":"application/json","X-Authorized-Identity":config.getSiteid(),"X-Authorized-Token":t};this.sendRequest(r,n,"GET",e)}}},{key:"_postRequest",value:function(t,r){var e=config.getConfig("siteToken","base");if(e)this.tokenCallBack(r,e,t);else{var n={uri:this.getTokenUri()+"/"+config.getSiteid()+"/token",type:"TOKEN",callback:function(e){return this.tokenCallBack(r,e,t)}};this.sendRequest(n,null,"GET",r)}}},{key:"validateArrayType",value:function(e){if(!e||!_.isArray(e)||0===e.length)return!1;var t=_typeof(e[0]).toLowerCase();if("string"!==t&&"number"!==t&&"boolean"!==t)return!1;for(var r=0;r<e.length;r++)if(null===e[r]||_typeof(e[r])!==t||1024<t.length)return!1;return!0}},{key:"validateKey",value:function(e){return!!e&&"undefined"!==e&&e.length<=1024}},{key:"validateProps",value:function(e){for(var t in e){if(!this.validateKey(t))return!1;if(_.isArray(e[t]))return this.validateArrayType(e[t]);if(null===e[t]||void 0===e[t]||1024<e[t].length||"string"!=typeof e[t]&&"number"!=typeof e[t]&&"boolean"!=typeof e[t])return!1}return!0}},{key:"transformProps",value:function(e){for(var t in e)if(_.isArray(e[t])){20<e[t].length&&(e[t]=e[t].slice(0,20));for(var r=0;r<e[t].length;r++)"string"===_typeof(e[t][r]).toLowerCase()?e[t][r]=e[t][r].toLowerCase():e[t][r]=e[t][r];e[t]=JSON.stringify(e[t])}return e}},{key:"sendRequest",value:function(r,e,t,n){try{var i=window.XMLHttpRequest?new window.XMLHttpRequest:window.ActiveXObject?new window.ActiveXObject("Microsoft.XMLHTTP"):null;i.open(t,r.uri,!0);var a=this;for(var o in i.onreadystatechange=function(){if(4===this.readyState&&200===this.status)if("TOKEN"===r.type){if(i.responseText&&1<i.responseText.length){var e={siteToken:JSON.parse(i.responseText).siteToken};a.sessStg.setSession(constants.symbols.APITOKEN+"_"+config.getSiteid(),JSON.stringify(e),constants.storage.SCOPE.SESSION.BROWSER),r.callback&&"function"==typeof r.callback&&r.callback.call(a,i.responseText)}}else if("EVENTGROUP"===r.type&&i.responseText&&1<i.responseText.length){var t=JSON.parse(i.responseText);t=t.data.map(function(e,t){return{id:e.id,eventName:e.name,eventType:e.eventType,snapshotProperties:e.snapshotProperties,jsCriteria:e.jsCriteria}}),a.sessStg.setTab(a.getDefinedEventsStorKey(),t),logger.log(a.getDefinedEventsStorKey(),t),r.callback&&"function"==typeof r.callback&&r.callback.call(a,t)}"USERIDENTIFY"===r.type&&(4===this.readyState&&200===this.status?i.responseText&&1<i.responseText.length&&r.callback&&"function"==typeof r.callback&&r.callback.call(a,i.responseText):4===this.readyState&&226===this.status&&r.callback&&"function"==typeof r.callback&&r.callback.call(a,226))},e)i.setRequestHeader(o,e[o]);n?i.send(JSON.stringify(n)):i.send()}catch(e){logger.log(e)}}},{key:"isBehaviorTrackingEnabled",value:function(){return!0}},{key:"identify",value:function(e){e&&0<e.length&&e.length<256&&0!==e&&1!==e&&-1!==e&&"nan"!==e&&"n/a"!==e&&"undefined"!==e&&"null"!==e&&"nil"!==e?(this.persStg.setUserProp(constants.events.IDENTITYVALUE,e),AurycPubSub.publish(constants.events.USERIDENTIFY,{identity:e})):console.error(this.errorMsg.badIdentity)}},{key:"addSessionProperties",value:function(e){if("object"===(void 0===e?"undefined":_typeof(e)))if(this.validateProps(e)){e=this.transformProps(e);var t=this.sessStg.get(constants.storage.SESSIONID)+constants.events.SESSIONPROP,r=this.sessStg.get(t);if(r&&JSON.stringify(e)===r)return void logger.log("session properties already set and identical to the new one. skip");var n=JSON.stringify(e);this.sessStg.getSize()+n.length<1024&&(logger.log("session properties not identical to the new one. call API"),this.sessStg.setSession(t,n,constants.storage.SCOPE.SESSION.TAB)),AurycPubSub.publish(constants.events.USERIDENTIFY,{sessionProperties:e})}else console.error(this.errorMsg.badProp);else console.error(this.errorMsg.badProp)}},{key:"addInternalSessionProperties",value:function(e){if("object"===(void 0===e?"undefined":_typeof(e)))if(this.validateProps(e)){e=this.transformProps(e);var t=this.sessStg.get(constants.storage.SESSIONID)+constants.events.INTERNALSESSIONPROP,r=this.sessStg.get(t);if(r&&JSON.stringify(e)===r)return void logger.log("session properties already set and identical to the new one. skip");var n=JSON.stringify(e);this.sessStg.getSize()+n.length<1024&&(logger.log("session properties not identical to the new one. call API"),this.sessStg.setSession(t,n,constants.storage.SCOPE.SESSION.TAB)),AurycPubSub.publish(constants.events.USERIDENTIFY,{internalSessionProperties:e})}else console.error(this.errorMsg.badProp);else console.error(this.errorMsg.badProp)}},{key:"addUserProperties",value:function(e){var t=this.persStg.get(constants.events.USERID);if("object"===(void 0===e?"undefined":_typeof(e))&&t)if(this.validateProps(e)){e=this.transformProps(e);var r=null,n={};try{r=(n=JSON.parse(this.persStg.getUserProp(constants.events.USERPROP)))[t]}catch(e){}if(n[t]=e,r&&JSON.stringify(e)===JSON.stringify(r))return void logger.log("user properties already set and identical to the new one. skip");logger.log("user properties not identical to the new one. call API");var i=this.persStg.getStorageSize(),a=JSON.stringify(n),o=JSON.stringify(e);if(i+a.length<5120)this.persStg.setUserProp(constants.events.USERPROP,a);else if(o.length<1024){for(var s=Object.keys(n),c=0;c<s.length;c++)s[c]!==t&&delete n[s[c]];a=JSON.stringify(n),this.persStg.setUserProp(constants.events.USERPROP,a)}AurycPubSub.publish(constants.events.USERIDENTIFY,{userProperties:e})}else console.error(this.errorMsg.badProp);else console.error(this.errorMsg.badProp)}},{key:"track",value:function(n,i){var e=!0,t=!_.isEmpty(i);!n||1024<n.length?(e=!1,console.error(n)):t&&(e=this.validateProps(i));var r=function(e){for(var t=!0,r=0;r<e.length;r++)if(e[r].eventName===n&&"CUSTOM"!==e[r].eventType){t=!1;break}t?AurycPubSub.publish(constants.events.TRACKCUSTOMEVENT,{eventType:constants.events.CUSTOM_EVENT,eventName:n,eventProperties:i||{},currentTime:_.now()}):console.error(this.errorMsg.dupName)};if(e){i=this.transformProps(i);var a=config.getSiteid(),o=this.sessStg.get(this.getDefinedEventsStorKey());if(o)r(o);else{var s=this.getUbaApi()+"/eventgroup/?projectId="+a;this._postRequest({uri:s,type:"EVENTGROUP",callback:r})}}else console.error(this.errorMsg.badProp)}},{key:"getSessionMetadata",value:function(){return globalSessionTracker.getSessionMetadata()}},{key:"endSession",value:function(){return globalSessionTracker.endSession(!0)}},{key:"clearUserCookie",value:function(e){var t=!0;e&&!this.persStg.get(constants.events.IDENTITYVALUE)&&(logger.log("called clear user cookie but identity is null. skip"),t=!1),t&&(logger.log("clear user cookie"),globalSessionTracker.removeUser(),globalSessionTracker.renewSession())}}]),n}();function setup(){trackAdobeTT()}function getAdobeTTVar(){var e=config.getConfig("ABTest","behavior");if(e)return e.adobeTT}function getAdobeCNames(){var e=[],t=[],r=window.ttMETA;if(r&&_.isArray(r))for(var n=0;n<r.length;n++){var i=r[n];i.campaign&&""!==i.campaign&&(e.push(i.campaign),i.experience&&""!==i.experience&&t.push(i.campaign+"="+i.experience))}return{cNames:e,ceNames:t}}function instrument(e){var t=getAdobeCNames(),r={};e.campaign_var&&0<t.cNames.length&&(r[e.campaign_var]=t.cNames),e.campaign_exp_var&&0<t.ceNames.length&&(r[e.campaign_exp_var]=t.ceNames),_.isEmptyObject(r)||window.aurycBehaviorAPI.addUserProperties(r)}function trackAdobeTT(){var e=getAdobeTTVar();e&&!0===e.enabled&&(window.aurycBehaviorAPI&&window.aurycBehaviorAPI.addUserProperties?instrument(e):window.aurycReadyCb.push(function(){instrument(e)}))}var abtests={setup:setup,getAdobeTTVar:getAdobeTTVar,getAdobeCNames:getAdobeCNames,instrument:instrument,trackAdobeTT:trackAdobeTT};function setup$1(){var e=config.getConfig("sessionProperties","behavior");if(e&&_.isArray(e)){for(var t={},r=0;r<e.length;r++){var n=e[r];if(n.source&&"cookie"===n.source&&n.key&&n.prop){var i=Cookie.Get(n.key);null!==i&&(n.type&&("number"===n.type.toLowerCase()?i=+i:"boolean"===n.type.toLowerCase()&&(i=!!i)),t[n.prop]=i)}}addSessionProps(t)}}function addSessionProps(e){_.isEmptyObject(e)||(window.aurycBehaviorAPI&&window.aurycBehaviorAPI.addSessionProperties?window.aurycBehaviorAPI.addSessionProperties(e):window.aurycReadyCb.push(function(){window.aurycBehaviorAPI.addSessionProperties(e)}))}var sessionPropsAutoCapture={setup:setup$1,addSessionProps:addSessionProps};function setup$2(){var e=config.getConfig("integrations","behavior");_.isDefined(e)&&!0===e.rulai&&initRulai()}var attempts$1=5;function _trackRulaiSession(e){e?(_safeAddSessionProp({rulaiSessionId:[e]}),_safeAddUserProp({rulaiSessionIdForUser:[e]})):0<attempts$1--&&setTimeout(function(){_trackRulaiSession(e)},1e3)}function initRulai(){window.addEventListener("message",function(e){if(e.origin&&-1<e.origin.indexOf("console.rul.ai")&&e.data)try{var t=JSON.parse(e.data);"emitRulaiSession"===t.type?(t.sessionId?_safeTrackEvent("Rulai Chat Started",{sessionid:t.sessionid}):_safeTrackEvent("Rulai Chat Started"),_trackRulaiSession(t.sessionId)):"liveAgentConnected"===t.type&&_safeTrackEvent("Rulai Agent Connected")}catch(e){}},!1)}function _safeTrackEvent(e,t){window.auryc&&window.auryc.track?t?window.auryc.track(e,t):window.auryc.track(e):window.aurycReadyCb.push(function(){t?window.auryc.track(e,t):window.auryc.track(e)})}function _safeAddSessionProp(e){window.auryc&&window.auryc.addSessionProperties?window.auryc.addSessionProperties(e):window.aurycReadyCb.push(function(){window.auryc.addSessionProperties(e)})}function _safeAddUserProp(e){window.auryc&&window.auryc.addUserProperties?window.auryc.addUserProperties(e):window.aurycReadyCb.push(function(){window.auryc.addUserProperties(e)})}var extIntegration={setup:setup$2};function testSameDomain(e,t){var r=document.createElement("a");r.href=location.href;var n=r.hostname,i=r.protocol;r.href=e;var a=r.hostname||n,o=0===r.protocol.indexOf("http")?r.protocol:i;r.href=t;var s=r.hostname||n,c=0===r.protocol.indexOf("http")?r.protocol:i;return a.toLowerCase()==s.toLowerCase()&&o.toLowerCase()==c.toLowerCase()}function addParameterToURL(e,t){return e+=(e.split("?")[1]?"&":"?")+t}function toQueryString(e,t){var r=(t=t||"")+(-1<t.indexOf("?")?"&":"?");if(e)for(var n in e)r+=encodeURIComponent(n)+"="+encodeURIComponent(e[n])+"&";return r}function hash(e){var t=e.split("_");return 3*t[0]+1357+""+(9*t[1]+58)}function hashCode$1(e){var t,r=0;if(0===e.length)return r;for(t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r&=r;return r}function parameter(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&+]"+e+"=([^&#]*)").exec(window.location.href.toString());return!!_.isDefined(t)&&t[1]}function url(){return window.location.href}function isPrivateIP$1(e){return!(!e||!(-1<e.indexOf("localhost")||/(^127\.)|(^192\.168\.)|(^10\.)|(^172\.1[6-9]\.)|(^172\.2[0-9]\.)|(^172\.3[0-1]\.)|(^::1$)|(^[fF][cCdD])/.test(e)))&&(logger.log("found private ip:"+e),!0)}function getRootDomain$1(e){var t=getTopDomain$1();return t?(logger.log("domain 1: "+t),t):isPrivateIP$1(e)?"localhost":e.toLowerCase().split(".").slice(-2).join(".")}function getTopDomain$1(){var e,t,r="weird_get_top_level_domain=cookie",n=document.location.hostname.split(".");for(e=n.length-1;0<=e;e--)if(t=n.slice(e).join("."),document.cookie=r+";domain=."+t+";",-1<document.cookie.indexOf(r))return document.cookie=r.split("=")[0]+"=;domain=."+t+";expires=Thu, 01 Jan 1970 00:00:01 GMT;",t}function isUrlInList$1(e,t){for(var r,n=!1,i=e.toLowerCase(),a=0;a<t.length;a++){r=t[a].replace(/^\s+|\s+$/g,"").replace(/[\*]{2,}/g,"*").toLowerCase();for(var o=[];-1<r.indexOf("*");)0<r.indexOf("*")&&o.push(r.substr(0,r.indexOf("*"))),o.push("*"),r=r.substr(r.indexOf("*")+1);0<r.length&&o.push(r),n=!0;for(var s=0;s<o.length;s++){if("*"===(r=o[s])){if(o.length>s+1){if(s++,-1===i.indexOf(o[s])){n=!1;break}i=i.substr(i.indexOf(o[s])+o[s].length);continue}break}if(i.length<r.length){n=!1;break}if(i.substr(0,r.length)!==r&&i!==r+"/"){n=!1;break}i=i.substr(r.length)}if(0<i.length&&"*"!==o[o.length-1]&&(n=!1),n)return!0}return n}function isSubDomain(){if(config.getConfig("crossDomain","behavior"))for(var e=config.getConfig("rootDomain","behavior"),t=window.location.host,r=e.split("|"),n=0;n<r.length;n++){var i=r[n];if(i=i.replace(/\*./g,".*"),new RegExp(i,"i").test(t))return!0}return!1}function isAjaxProxyEnabled$1(e){if(new RegExp(".*auryc.com","i").test(e)){var t=config.getConfig("ajax_whitelist","behavior");if(t)for(var r=t.split(","),n=0;n<r.length;n++){var i=r[n];if(new RegExp(i,"i").test(e))return!0}return!1}return!0}function getLocation(e){var t=e.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);return t&&{href:e,protocol:t[1],domain:t[2],hostname:t[3],port:t[4],path:t[5],query:t[6],hash:t[7]}}var urls={testSameDomain:testSameDomain,addParameterToURL:addParameterToURL,toQueryString:toQueryString,hash:hash,hashCode:hashCode$1,parameter:parameter,url:url,isPrivateIP:isPrivateIP$1,getRootDomain:getRootDomain$1,getTopDomain:getTopDomain$1,isUrlInList:isUrlInList$1,isSubDomain:isSubDomain,isAjaxProxyEnabled:isAjaxProxyEnabled$1,getLocation:getLocation},SnapshotProperties=function(){function e(){classCallCheck(this,e),this.snapshotProperties={}}return createClass(e,[{key:"setEventGroups",value:function(e){var t=this;e&&(this.snapshotProperties.egs={},e.forEach(function(e){e.snapshotProperties&&0<e.snapshotProperties.length&&(t.snapshotProperties.egs[e.id]=e)}))}},{key:"isEnabled",value:function(){var e=config.getConfig("spEnabled","behavior");if(!e)return!1;for(var t=(window.location.href||"about:blank").toLowerCase(),r=0;r<e.length;r++){if(new RegExp(e[r],"i").test(t))return!0}return!1}},{key:"getMatchedEventGroups",value:function(e){var t=[];for(var r in logger.log("getMatchedEventGroups:",e),this.snapshotProperties.egs){var n=this.snapshotProperties.egs[r],i=n.jsCriteria;if(i&&""!==i){/^\s*return/.test(i)||(i="return "+i);var a=!1;try{a=new Function("event",i)(e)}catch(e){logger.warn("error in getMatchedEventGroups:",r),a=!1}logger.log("eg:"+r+": "+a),a&&n&&t.push(n)}}return t}},{key:"collect",value:function(e){var r=this,t=e.snapshotProperties,n={};return t.forEach(function(e){var t=r.collectOne(e);n=_.extend(t,n)}),n}},{key:"collectOne",value:function(e){if(e){var t=e.name,r=e.content,n=e.valueType,i=e.type;if(t&&r&&n&&i){var a={};if("javascript"===i.toLowerCase()){var o=this.getJSProp(r,n);null!=o?a[t]=o:logger.warn("Ignoring null or undefined property value for content: "+r)}else logger.warn("Unsupported snapshot property type: "+i);return a}logger.warn("missing snapshop properties metadata:",e)}}},{key:"getJSProp",value:function(t,e){/^\s*return/.test(t)||(t="return "+t),e=e.toLowerCase();var r=null;try{switch(r=new Function(t)()+"",logger.log("value: ",r),e){case"number":r=+r;break;case"currency":r=+r.replace(/[^0-9\.-]+/g,"");break;case"boolean":r=!!r}}catch(e){logger.warn("exception in getJSProp: "+t,e),r=null}return r}}]),e}(),AurycSP=new SnapshotProperties;function getUrlObject(e){var t=document.createElement("a");return t.href=e,t}var MAX_VALUE_LENGTH=1024,attributeMap={message:"message",fileLocation:"fileLocation",fileRelativeLocation:"fileRelativeLocation",lineNo:"lineno",columnNo:"colno"},lastTrackedError={};function handleJSError(r,e){var n={};if(!r)return n;var i=void 0;return e.attribute.forEach(function(e){var t=attributeMap[e.value];t&&(i=getJSErrorAttribute(t,r)),i&&(n[e.name]=i)}),n=checkAndSetData(n)}function checkAndSetData(e){for(var t=Object.keys(e),r=0;r<t.length;r++){var n=t[r];if(e[n]!==lastTrackedError[n])return lastTrackedError=e}return null}function getJSErrorAttribute(e,t){return"message"===e?trimLength((t.error?t.error.message:t.message)||""):"fileLocation"===e?getFileLocation(t):"fileRelativeLocation"===e?getFileRelativeLocation(t):"lineno"===e||"colno"===e?""+t[e]:void 0}function getFileLocation(e){var t=(e.filename||"<Unknown>")+":"+e.lineno+":"+e.colno;if(t.length>MAX_VALUE_LENGTH){var r=t.length-MAX_VALUE_LENGTH;t=t.subStr(r)}return t}function getFileRelativeLocation(e){var t=(getUrlObject(e.filename).pathname||"<Unknown>")+":"+e.lineno+":"+e.colno;if(t.length>MAX_VALUE_LENGTH){var r=t.length-MAX_VALUE_LENGTH;t=t.subStr(r)}return t}function trimLength(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:MAX_VALUE_LENGTH;return(e||"").substr(t,r)}var propertyHandlerMap={aurycJSErrorHanlder:handleJSError};function getPropertyHandler(e){var t=void 0;return e&&(t="function"==typeof e?e:propertyHandlerMap[e]),t=t||defaultPropertyHandler}function defaultPropertyHandler(e,t){var r=void 0,n={};if(t.attribute)if(t.attribute instanceof Array)_.each(t.attribute,function(e){var t=selectValue(e.value,e.name);1===t.length?n[e.name]=t[0]:n[e.name]=t});else{var i=document.querySelectorAll(t.cssSelector);i.length&&(r=i[0][t.attribute]||i[0].getAttribute(t.attribute))}else r=!0;return r&&(n[t.name||"_default_"]=r),n}function getRegEx(e){return e instanceof Array||(e=[e]),new RegExp(e[0])}function selectValue(i){var a=[],e=document.querySelectorAll(i.cssSelector);return e.length&&e.forEach(function(e,t){if(!1===i.visible||e.offsetParent){var r=e[i.attribute].trim();if(i.pattern){var n=getRegEx(i.pattern);"currency"===i.type&&(r=r.replace(",","")),r=(r.match(n)||[])[0]}"currency"===i.type||"number"===i.type?(r?r*=1:r=0,a.push(r)):r&&a.push(r)}}),a}function sendCustomData(a,o){var e="string"==typeof a.dataType?[a.dataType]:a.dataType,s=function(e){window.aurycBehaviorAPI.track(e.name,e.attributes||{})};_.each(e,function(e){var t=void 0,r=void 0;if("userProperty"===e)t=window.aurycBehaviorAPI.addUserProperties,0<Object.keys(o).length&&(r=o);else if("sessionProperty"===e)t=window.aurycBehaviorAPI.addSessionProperties,0<Object.keys(o).length&&(r=o);else if("identity"===e)t=window.aurycBehaviorAPI.identify,r=o[a.name||"_default_"];else if("customEvent"===e){t=s;var n={},i={};_.each(Object.keys(o),function(e){o[e]instanceof Array?n[e]=o[e]:i[e]=o[e]}),r=[],0<Object.keys(i).length&&r.push({name:a.name,attributes:i}),_.each(Object.keys(n),function(t){var e=n[t];_.each(e,function(e){r.push({name:a.name,attributes:defineProperty$2({},t,e)})})}),r.length||(r=null)}t&&r&&(r instanceof Array?_.each(r,function(e){_setDataValue(t,e)}):_setDataValue(t,r))})}function _setDataValue(e,t){window.auryc&&e?e.call(window.aurycBehaviorAPI,t):window.aurycReadyCb.push(function(){window.auryc&&e&&e.call(window.aurycBehaviorAPI,t)})}function processCustomDataRule(r,e){var t=e.properties;_.each(t,function(e){var t=getPropertyHandler(e.handler)(r,e);null!==t&&sendCustomData(e,t)})}function getEventHandler(t,r){var n=arguments,e=void 0;return 0<=r.timeout?e=function(e){setTimeout(function(){return processCustomDataRule(n,t)},r.timeout)}:(t.eventHandler||(t.eventHandler=function(e){processCustomDataRule(e,t)}),e=t.eventHandler),e}function setupCutomDataCollection(){var e=getConfig$1();e&&collectCustomData(e)}function collectCustomData(e,t,r){_.each(e,function(e){!contextMatch(e.context)||t&&!e.dynamic||_processCustomDataRules(e)})}function _processCustomDataRules(i){var e=i.triggers;e?_.each(e,function(t){if(t.event){var e=[];if(t.object&&window[t.object])e.push(window[t.object]);else if(t.cssSelector){var r=document.querySelectorAll(t.cssSelector);if(!r.length)return void(i.dynamic=!0);e=[].slice.call(r)}var n=getEventHandler(i,t);_.each(e,function(e){e.addEventListener(t.event,n)})}}):processCustomDataRule(null,i)}function collectUserProperties(){var e=getConfig$1();e&&_.each(e,function(e){contextMatch(e.context)&&addListners(e)})}function getConfig$1(){return config.getConfig("userProperties","behavior")}function contextMatch(e){if(!e)return!0;var t=e.url,r=e.cssSelector,n=objectWithoutProperties(e,["url","cssSelector"]);if(t&&window.location.href.indexOf(t)<0)return!1;if(r){var i=void 0;try{if(!(i=document.querySelectorAll(r)).length)return!1}catch(e){return!1}var a=i[0];if(n)for(var o=Object.keys(n),s=0;s<o.length;s++){var c=o[s];if(!a[c]||n[c]&&a[c].indexOf(n[c])<0)return!1}}return!0}function addListners(e){var t=e.triggers,n=e.properties;t&&n&&_.each(t,function(t){var e=document.querySelectorAll(t.cssSelector),r=[].slice.call(e);_.each(r,function(e){e.addEventListener(t.event,function(e){sendUserProperties(n)})})})}function sendUserProperties(e){var n={};_.each(e,function(e){var t=document.querySelectorAll(e.cssSelector),r=t[0][e.attribute]||t[0].getAttribute(e.attribute);r&&(n[e.name]=r)}),window.auryc&&window.auryc.addUserProperties&&0<Object.keys(n).length?window.auryc.addUserProperties(n):window.aurycReadyCb.push(function(){window.auryc&&window.auryc.addUserProperties&&0<Object.keys(n).length&&window.auryc.addUserProperties(n)})}var userProperty={setupCutomDataCollection:setupCutomDataCollection,collectCustomData:collectCustomData,collectUserProperties:collectUserProperties},UrlChangeTracker=function(){function t(e){classCallCheck(this,t),this.handler=e}return createClass(t,[{key:"init",value:function(){history.pushState&&window.addEventListener&&(this.path=this.getPath(),this.updateTrackerData=this.updateTrackerData.bind(this),this.originalPushState=history.pushState,history.pushState=function(e,t){e&&this.isObject(e)&&t&&(e.title=t),this.originalPushState.apply(history,arguments),this.updateTrackerData()}.bind(this),this.originalReplaceState=history.replaceState,history.replaceState=function(e,t){e&&this.isObject(e)&&t&&(e.title=t),this.originalReplaceState.apply(history,arguments),this.updateTrackerData()}.bind(this),window.addEventListener("popstate",this.updateTrackerData))}},{key:"updateTrackerData",value:function(n){n=!1!==n,setTimeout(function(){var e=this.path,t=this.getPath();if(e!=t&&this.shouldTrackUrlChange.call(this,t,e)){this.path=t;var r=this.isObject(history.state)&&history.state&&history.state.title||document.title;n&&(globalSessionTracker.incPV(),this.handler({path:this.path,title:r,url:this.path})())}}.bind(this),0)}},{key:"shouldTrackUrlChange",value:function(e,t){return e&&t}},{key:"remove",value:function(){window.removeEventListener("popstate",this.updateTrackerData),history.replaceState=this.originalReplaceState,history.pushState=this.originalPushState,this.path=null,this.updateTrackerData=null,this.originalReplaceState=null,this.originalPushState=null}},{key:"getPath",value:function(){return location.href}},{key:"isObject",value:function(e){return"object"==(void 0===e?"undefined":_typeof(e))}}]),t}(),aspromise=asPromise;function asPromise(e,t){for(var r=new Array(arguments.length-1),a=0,n=2,o=!0;n<arguments.length;)r[a++]=arguments[n++];return new Promise(function(n,i){r[a]=function(e){if(o)if(o=!1,e)i(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];n.apply(null,t)}};try{e.apply(t||null,r)}catch(e){o&&(o=!1,i(e))}})}var base64_1=createCommonjsModule(function(e,t){var r=t;r.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;1<--t%4&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var l=new Array(64),c=new Array(123),n=0;n<64;)c[l[n]=n<26?n+65:n<52?n+71:n<62?n-4:n-59|43]=n++;r.encode=function(e,t,r){for(var n,i=null,a=[],o=0,s=0;t<r;){var c=e[t++];switch(s){case 0:a[o++]=l[c>>2],n=(3&c)<<4,s=1;break;case 1:a[o++]=l[n|c>>4],n=(15&c)<<2,s=2;break;case 2:a[o++]=l[n|c>>6],a[o++]=l[63&c],s=0}8191<o&&((i||(i=[])).push(String.fromCharCode.apply(String,a)),o=0)}return s&&(a[o++]=l[n],a[o++]=61,1===s&&(a[o++]=61)),i?(o&&i.push(String.fromCharCode.apply(String,a.slice(0,o))),i.join("")):String.fromCharCode.apply(String,a.slice(0,o))};var u="invalid encoding";r.decode=function(e,t,r){for(var n,i=r,a=0,o=0;o<e.length;){var s=e.charCodeAt(o++);if(61===s&&1<a)break;if(void 0===(s=c[s]))throw Error(u);switch(a){case 0:n=s,a=1;break;case 1:t[r++]=n<<2|(48&s)>>4,n=s,a=2;break;case 2:t[r++]=(15&n)<<4|(60&s)>>2,n=s,a=3;break;case 3:t[r++]=(3&n)<<6|s,a=0}}if(1===a)throw Error(u);return r-i},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}}),eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},EventEmitter.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},EventEmitter.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this};var float_1=factory(factory);function factory(s){return"undefined"!=typeof Float32Array?function(){var n=new Float32Array([-0]),i=new Uint8Array(n.buffer),e=128===i[3];function t(e,t,r){n[0]=e,t[r]=i[0],t[r+1]=i[1],t[r+2]=i[2],t[r+3]=i[3]}function r(e,t,r){n[0]=e,t[r]=i[3],t[r+1]=i[2],t[r+2]=i[1],t[r+3]=i[0]}function a(e,t){return i[0]=e[t],i[1]=e[t+1],i[2]=e[t+2],i[3]=e[t+3],n[0]}function o(e,t){return i[3]=e[t],i[2]=e[t+1],i[1]=e[t+2],i[0]=e[t+3],n[0]}s.writeFloatLE=e?t:r,s.writeFloatBE=e?r:t,s.readFloatLE=e?a:o,s.readFloatBE=e?o:a}():function(){function e(e,t,r,n){var i=t<0?1:0;if(i&&(t=-t),0===t)e(0<1/t?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(34028234663852886e22<t)e((i<<31|2139095040)>>>0,r,n);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var a=Math.floor(Math.log(t)/Math.LN2);e((i<<31|a+127<<23|8388607&Math.round(t*Math.pow(2,-a)*8388608))>>>0,r,n)}}function t(e,t,r){var n=e(t,r),i=2*(n>>31)+1,a=n>>>23&255,o=8388607&n;return 255===a?o?NaN:i*(1/0):0===a?1401298464324817e-60*i*o:i*Math.pow(2,a-150)*(o+8388608)}s.writeFloatLE=e.bind(null,writeUintLE),s.writeFloatBE=e.bind(null,writeUintBE),s.readFloatLE=t.bind(null,readUintLE),s.readFloatBE=t.bind(null,readUintBE)}(),"undefined"!=typeof Float64Array?function(){var n=new Float64Array([-0]),i=new Uint8Array(n.buffer),e=128===i[7];function t(e,t,r){n[0]=e,t[r]=i[0],t[r+1]=i[1],t[r+2]=i[2],t[r+3]=i[3],t[r+4]=i[4],t[r+5]=i[5],t[r+6]=i[6],t[r+7]=i[7]}function r(e,t,r){n[0]=e,t[r]=i[7],t[r+1]=i[6],t[r+2]=i[5],t[r+3]=i[4],t[r+4]=i[3],t[r+5]=i[2],t[r+6]=i[1],t[r+7]=i[0]}function a(e,t){return i[0]=e[t],i[1]=e[t+1],i[2]=e[t+2],i[3]=e[t+3],i[4]=e[t+4],i[5]=e[t+5],i[6]=e[t+6],i[7]=e[t+7],n[0]}function o(e,t){return i[7]=e[t],i[6]=e[t+1],i[5]=e[t+2],i[4]=e[t+3],i[3]=e[t+4],i[2]=e[t+5],i[1]=e[t+6],i[0]=e[t+7],n[0]}s.writeDoubleLE=e?t:r,s.writeDoubleBE=e?r:t,s.readDoubleLE=e?a:o,s.readDoubleBE=e?o:a}():function(){function e(e,t,r,n,i,a){var o=n<0?1:0;if(o&&(n=-n),0===n)e(0,i,a+t),e(0<1/n?0:2147483648,i,a+r);else if(isNaN(n))e(0,i,a+t),e(2146959360,i,a+r);else if(17976931348623157e292<n)e(0,i,a+t),e((o<<31|2146435072)>>>0,i,a+r);else{var s;if(n<22250738585072014e-324)e((s=n/5e-324)>>>0,i,a+t),e((o<<31|s/4294967296)>>>0,i,a+r);else{var c=Math.floor(Math.log(n)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(s=n*Math.pow(2,-c))>>>0,i,a+t),e((o<<31|c+1023<<20|1048576*s&1048575)>>>0,i,a+r)}}}function t(e,t,r,n,i){var a=e(n,i+t),o=e(n,i+r),s=2*(o>>31)+1,c=o>>>20&2047,l=4294967296*(1048575&o)+a;return 2047===c?l?NaN:s*(1/0):0===c?5e-324*s*l:s*Math.pow(2,c-1075)*(l+4503599627370496)}s.writeDoubleLE=e.bind(null,writeUintLE,0,4),s.writeDoubleBE=e.bind(null,writeUintBE,4,0),s.readDoubleLE=t.bind(null,readUintLE,0,4),s.readDoubleBE=t.bind(null,readUintBE,4,0)}(),s}function writeUintLE(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function writeUintBE(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function readUintLE(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function readUintBE(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}var utf8_1=createCommonjsModule(function(e,t){var r=t;r.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},r.read=function(e,t,r){if(r-t<1)return"";for(var n,i=null,a=[],o=0;t<r;)(n=e[t++])<128?a[o++]=n:191<n&&n<224?a[o++]=(31&n)<<6|63&e[t++]:239<n&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,a[o++]=55296+(n>>10),a[o++]=56320+(1023&n)):a[o++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],8191<o&&((i||(i=[])).push(String.fromCharCode.apply(String,a)),o=0);return i?(o&&i.push(String.fromCharCode.apply(String,a.slice(0,o))),i.join("")):String.fromCharCode.apply(String,a.slice(0,o))},r.write=function(e,t,r){for(var n,i,a=r,o=0;o<e.length;++o)(n=e.charCodeAt(o))<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:(55296==(64512&n)&&56320==(64512&(i=e.charCodeAt(o+1)))?(n=65536+((1023&n)<<10)+(1023&i),++o,t[r++]=n>>18|240,t[r++]=n>>12&63|128):t[r++]=n>>12|224,t[r++]=n>>6&63|128),t[r++]=63&n|128);return r-a}}),pool_1=pool;function pool(r,n,e){var i=e||8192,a=i>>>1,o=null,s=i;return function(e){if(e<1||a<e)return r(e);i<s+e&&(o=r(i),s=0);var t=n.call(o,s,s+=e);return 7&s&&(s=1+(7|s)),t}}var longbits=LongBits;function LongBits(e,t){this.lo=e>>>0,this.hi=t>>>0}var zero=LongBits.zero=new LongBits(0,0);zero.toNumber=function(){return 0},zero.zzEncode=zero.zzDecode=function(){return this},zero.length=function(){return 1};var zeroHash=LongBits.zeroHash="\0\0\0\0\0\0\0\0";LongBits.fromNumber=function(e){if(0===e)return zero;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/4294967296>>>0;return t&&(n=~n>>>0,r=~r>>>0,4294967295<++r&&(r=0,4294967295<++n&&(n=0))),new LongBits(r,n)},LongBits.from=function(e){if("number"==typeof e)return LongBits.fromNumber(e);if(minimal.isString(e)){if(!minimal.Long)return LongBits.fromNumber(parseInt(e,10));e=minimal.Long.fromString(e)}return e.low||e.high?new LongBits(e.low>>>0,e.high>>>0):zero},LongBits.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},LongBits.prototype.toLong=function(e){return minimal.Long?new minimal.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var charCodeAt=String.prototype.charCodeAt;LongBits.fromHash=function(e){return e===zeroHash?zero:new LongBits((charCodeAt.call(e,0)|charCodeAt.call(e,1)<<8|charCodeAt.call(e,2)<<16|charCodeAt.call(e,3)<<24)>>>0,(charCodeAt.call(e,4)|charCodeAt.call(e,5)<<8|charCodeAt.call(e,6)<<16|charCodeAt.call(e,7)<<24)>>>0)},LongBits.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},LongBits.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},LongBits.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},LongBits.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10};var minimal=createCommonjsModule(function(e,t){var n=t;function i(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;++i)void 0!==e[n[i]]&&r||(e[n[i]]=t[n[i]]);return e}function r(e){function r(e,t){if(!(this instanceof r))return new r(e,t);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,r):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),t&&i(this,t)}return(r.prototype=Object.create(Error.prototype)).constructor=r,Object.defineProperty(r.prototype,"name",{get:function(){return e}}),r.prototype.toString=function(){return this.name+": "+this.message},r}n.asPromise=aspromise,n.base64=base64_1,n.EventEmitter=eventemitter,n.float=float_1,n.inquire=inquire_1,n.utf8=utf8_1,n.pool=pool_1,n.LongBits=longbits,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isNode=Boolean(commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),n.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"==typeof e||e instanceof String},n.isObject=function(e){return e&&"object"==typeof e},n.isset=n.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=typeof r||0<(Array.isArray(r)?r.length:Object.keys(r).length))},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"==typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=commonjsGlobal.dcodeIO&&commonjsGlobal.dcodeIO.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var r=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},n.merge=i,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=r,n.ProtocolError=r("ProtocolError"),n.oneOfGetter=function(e){for(var r={},t=0;t<e.length;++t)r[e[t]]=1;return function(){for(var e=Object.keys(this),t=e.length-1;-1<t;--t)if(1===r[e[t]]&&void 0!==this[e[t]]&&null!==this[e[t]])return e[t]}},n.oneOfSetter=function(r){return function(e){for(var t=0;t<r.length;++t)r[t]!==e&&delete this[r[t]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var r=n.Buffer;r?(n._Buffer_from=r.from!==Uint8Array.from&&r.from||function(e,t){return new r(e,t)},n._Buffer_allocUnsafe=r.allocUnsafe||function(e){return new r(e)}):n._Buffer_from=n._Buffer_allocUnsafe=null}}),writer=Writer,BufferWriter,LongBits$1=minimal.LongBits,base64=minimal.base64,utf8=minimal.utf8;function Op(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function noop$2(){}function State(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function Writer(){this.len=0,this.head=new Op(noop$2,0,0),this.tail=this.head,this.states=null}function writeByte(e,t,r){t[r]=255&e}function writeVarint32(e,t,r){for(;127<e;)t[r++]=127&e|128,e>>>=7;t[r]=e}function VarintOp(e,t){this.len=e,this.next=void 0,this.val=t}function writeVarint64(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;127<e.lo;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function writeFixed32(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}Writer.create=minimal.Buffer?function(){return(Writer.create=function(){return new BufferWriter})()}:function(){return new Writer},Writer.alloc=function(e){return new minimal.Array(e)},minimal.Array!==Array&&(Writer.alloc=minimal.pool(Writer.alloc,minimal.Array.prototype.subarray)),Writer.prototype._push=function(e,t,r){return this.tail=this.tail.next=new Op(e,t,r),this.len+=t,this},VarintOp.prototype=Object.create(Op.prototype),VarintOp.prototype.fn=writeVarint32,Writer.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new VarintOp((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},Writer.prototype.int32=function(e){return e<0?this._push(writeVarint64,10,LongBits$1.fromNumber(e)):this.uint32(e)},Writer.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},Writer.prototype.uint64=function(e){var t=LongBits$1.from(e);return this._push(writeVarint64,t.length(),t)},Writer.prototype.int64=Writer.prototype.uint64,Writer.prototype.sint64=function(e){var t=LongBits$1.from(e).zzEncode();return this._push(writeVarint64,t.length(),t)},Writer.prototype.bool=function(e){return this._push(writeByte,1,e?1:0)},Writer.prototype.fixed32=function(e){return this._push(writeFixed32,4,e>>>0)},Writer.prototype.sfixed32=Writer.prototype.fixed32,Writer.prototype.fixed64=function(e){var t=LongBits$1.from(e);return this._push(writeFixed32,4,t.lo)._push(writeFixed32,4,t.hi)},Writer.prototype.sfixed64=Writer.prototype.fixed64,Writer.prototype.float=function(e){return this._push(minimal.float.writeFloatLE,4,e)},Writer.prototype.double=function(e){return this._push(minimal.float.writeDoubleLE,8,e)};var writeBytes=minimal.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};Writer.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(writeByte,1,0);if(minimal.isString(e)){var r=Writer.alloc(t=base64.length(e));base64.decode(e,r,0),e=r}return this.uint32(t)._push(writeBytes,t,e)},Writer.prototype.string=function(e){var t=utf8.length(e);return t?this.uint32(t)._push(utf8.write,t,e):this._push(writeByte,1,0)},Writer.prototype.fork=function(){return this.states=new State(this),this.head=this.tail=new Op(noop$2,0,0),this.len=0,this},Writer.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$2,0,0),this.len=0),this},Writer.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},Writer.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},Writer._configure=function(e){BufferWriter=e};var writer_buffer=BufferWriter$1;(BufferWriter$1.prototype=Object.create(writer.prototype)).constructor=BufferWriter$1;var Buffer$1=minimal.Buffer;function BufferWriter$1(){writer.call(this)}BufferWriter$1.alloc=function(e){return(BufferWriter$1.alloc=minimal._Buffer_allocUnsafe)(e)};var writeBytesBuffer=Buffer$1&&Buffer$1.prototype instanceof Uint8Array&&"set"===Buffer$1.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]};function writeStringBuffer(e,t,r){e.length<40?minimal.utf8.write(e,t,r):t.utf8Write(e,r)}BufferWriter$1.prototype.bytes=function(e){minimal.isString(e)&&(e=minimal._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(writeBytesBuffer,t,e),this},BufferWriter$1.prototype.string=function(e){var t=Buffer$1.byteLength(e);return this.uint32(t),t&&this._push(writeStringBuffer,t,e),this};var reader=Reader,BufferReader,LongBits$2=minimal.LongBits,utf8$1=minimal.utf8;function indexOutOfRange(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function Reader(e){this.buf=e,this.pos=0,this.len=e.length}var create_array="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new Reader(e);throw Error("illegal buffer")},nZ;function readLongVarint(){var e=new LongBits$2(0,0),t=0;if(!(4<this.len-this.pos)){for(;t<3;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,4<this.len-this.pos){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function readFixed32_end(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits$2(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader.create=minimal.Buffer?function(e){return(Reader.create=function(e){return minimal.Buffer.isBuffer(e)?new BufferReader(e):create_array(e)})(e)}:create_array,Reader.prototype._slice=minimal.Array.prototype.subarray||minimal.Array.prototype.slice,Reader.prototype.uint32=(nZ=4294967295,function(){if(nZ=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return nZ;if(nZ=(nZ|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return nZ;if(nZ=(nZ|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return nZ;if(nZ=(nZ|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return nZ;if(nZ=(nZ|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return nZ;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return nZ}),Reader.prototype.int32=function(){return 0|this.uint32()},Reader.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},Reader.prototype.bool=function(){return 0!==this.uint32()},Reader.prototype.fixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)},Reader.prototype.sfixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return 0|readFixed32_end(this.buf,this.pos+=4)},Reader.prototype.float=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=minimal.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},Reader.prototype.double=function(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=minimal.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},Reader.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw indexOutOfRange(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},Reader.prototype.string=function(){var e=this.bytes();return utf8$1.read(e,0,e.length)},Reader.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw indexOutOfRange(this)}while(128&this.buf[this.pos++]);return this},Reader.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;;){if(4==(e=7&this.uint32()))break;this.skipType(e)}break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},Reader._configure=function(e){BufferReader=e;var t=minimal.Long?"toLong":"toNumber";minimal.merge(Reader.prototype,{int64:function(){return readLongVarint.call(this)[t](!1)},uint64:function(){return readLongVarint.call(this)[t](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[t](!1)},fixed64:function(){return readFixed64.call(this)[t](!0)},sfixed64:function(){return readFixed64.call(this)[t](!1)}})};var reader_buffer=BufferReader$1;function BufferReader$1(e){reader.call(this,e)}(BufferReader$1.prototype=Object.create(reader.prototype)).constructor=BufferReader$1,minimal.Buffer&&(BufferReader$1.prototype._slice=minimal.Buffer.prototype.slice),BufferReader$1.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len))};var service=Service;function Service(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");minimal.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(Service.prototype=Object.create(minimal.EventEmitter.prototype)).constructor=Service,Service.prototype.rpcCall=function e(r,t,n,i,a){if(!i)throw TypeError("request must be specified");var o=this;if(!a)return minimal.asPromise(e,o,r,t,n,i);if(o.rpcImpl)try{return o.rpcImpl(r,t[o.requestDelimited?"encodeDelimited":"encode"](i).finish(),function(e,t){if(e)return o.emit("error",e,r),a(e);if(null!==t){if(!(t instanceof n))try{t=n[o.responseDelimited?"decodeDelimited":"decode"](t)}catch(e){return o.emit("error",e,r),a(e)}return o.emit("data",t,r),a(null,t)}o.end(!0)})}catch(e){return o.emit("error",e,r),void setTimeout(function(){a(e)},0)}else setTimeout(function(){a(Error("already ended"))},0)},Service.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};for(var rpc_1=createCommonjsModule(function(e,t){t.Service=service}),roots={},indexMinimal=createCommonjsModule(function(e,t){var r=t;function n(){r.Reader._configure(r.BufferReader),r.util._configure()}r.build="minimal",r.Writer=writer,r.BufferWriter=writer_buffer,r.Reader=reader,r.BufferReader=reader_buffer,r.util=minimal,r.rpc=rpc_1,r.roots=roots,r.configure=n,r.Writer._configure(r.BufferWriter),n()}),minimal$2=indexMinimal,minimal_1=minimal$2.util,minimal_2=minimal$2.Writer,minimal_3=minimal$2.Reader,$Reader=minimal_3,$Writer=minimal_2,$util=minimal_1,$root={},com=$root.com=(r$={},r$.auryc=((s$={}).ubi=((t$={}).core=((u$={}).model=((v$={}).Message=function(){function t(e){if(this.packet=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return t.prototype.cid="",t.prototype.uid="",t.prototype.sid="",t.prototype.domain="",t.prototype.context=null,t.prototype.packet=$util.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.cid&&e.hasOwnProperty("cid")&&t.uint32(10).string(e.cid),null!=e.uid&&e.hasOwnProperty("uid")&&t.uint32(18).string(e.uid),null!=e.sid&&e.hasOwnProperty("sid")&&t.uint32(26).string(e.sid),null!=e.domain&&e.hasOwnProperty("domain")&&t.uint32(34).string(e.domain),null!=e.context&&e.hasOwnProperty("context")&&$root.com.auryc.ubi.core.model.Message.MessageContext.encode(e.context,t.uint32(42).fork()).ldelim(),null!=e.packet&&e.packet.length)for(var r=0;r<e.packet.length;++r)$root.com.auryc.ubi.core.model.Message.MessagePacket.encode(e.packet[r],t.uint32(50).fork()).ldelim();return t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.com.auryc.ubi.core.model.Message;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.cid=e.string();break;case 2:n.uid=e.string();break;case 3:n.sid=e.string();break;case 4:n.domain=e.string();break;case 5:n.context=$root.com.auryc.ubi.core.model.Message.MessageContext.decode(e,e.uint32());break;case 6:n.packet&&n.packet.length||(n.packet=[]),n.packet.push($root.com.auryc.ubi.core.model.Message.MessagePacket.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return n},t.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!==(void 0===e?"undefined":_typeof(e))||null===e)return"object expected";if(null!=e.cid&&e.hasOwnProperty("cid")&&!$util.isString(e.cid))return"cid: string expected";if(null!=e.uid&&e.hasOwnProperty("uid")&&!$util.isString(e.uid))return"uid: string expected";if(null!=e.sid&&e.hasOwnProperty("sid")&&!$util.isString(e.sid))return"sid: string expected";if(null!=e.domain&&e.hasOwnProperty("domain")&&!$util.isString(e.domain))return"domain: string expected";if(null!=e.context&&e.hasOwnProperty("context")){var t=$root.com.auryc.ubi.core.model.Message.MessageContext.verify(e.context);if(t)return"context."+t}if(null!=e.packet&&e.hasOwnProperty("packet")){if(!Array.isArray(e.packet))return"packet: array expected";for(var r=0;r<e.packet.length;++r){var n=$root.com.auryc.ubi.core.model.Message.MessagePacket.verify(e.packet[r]);if(n)return"packet."+n}}return null},t.fromObject=function(e){if(e instanceof $root.com.auryc.ubi.core.model.Message)return e;var t=new $root.com.auryc.ubi.core.model.Message;if(null!=e.cid&&(t.cid=String(e.cid)),null!=e.uid&&(t.uid=String(e.uid)),null!=e.sid&&(t.sid=String(e.sid)),null!=e.domain&&(t.domain=String(e.domain)),null!=e.context){if("object"!==_typeof(e.context))throw TypeError(".com.auryc.ubi.core.model.Message.context: object expected");t.context=$root.com.auryc.ubi.core.model.Message.MessageContext.fromObject(e.context)}if(e.packet){if(!Array.isArray(e.packet))throw TypeError(".com.auryc.ubi.core.model.Message.packet: array expected");t.packet=[];for(var r=0;r<e.packet.length;++r){if("object"!==_typeof(e.packet[r]))throw TypeError(".com.auryc.ubi.core.model.Message.packet: object expected");t.packet[r]=$root.com.auryc.ubi.core.model.Message.MessagePacket.fromObject(e.packet[r])}}return t},t.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.packet=[]),t.defaults&&(r.cid="",r.uid="",r.sid="",r.domain="",r.context=null),null!=e.cid&&e.hasOwnProperty("cid")&&(r.cid=e.cid),null!=e.uid&&e.hasOwnProperty("uid")&&(r.uid=e.uid),null!=e.sid&&e.hasOwnProperty("sid")&&(r.sid=e.sid),null!=e.domain&&e.hasOwnProperty("domain")&&(r.domain=e.domain),null!=e.context&&e.hasOwnProperty("context")&&(r.context=$root.com.auryc.ubi.core.model.Message.MessageContext.toObject(e.context,t)),e.packet&&e.packet.length){r.packet=[];for(var n=0;n<e.packet.length;++n)r.packet[n]=$root.com.auryc.ubi.core.model.Message.MessagePacket.toObject(e.packet[n],t)}return r},t.prototype.toJSON=function(){return this.constructor.toObject(this,minimal_1.toJSONOptions)},t.MessageContext=function(){function t(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return t.prototype.ln="",t.prototype.lv="",t.prototype.ip="",t.prototype.ref="",t.prototype.ua="",t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=$Writer.create()),null!=e.ln&&e.hasOwnProperty("ln")&&t.uint32(10).string(e.ln),null!=e.lv&&e.hasOwnProperty("lv")&&t.uint32(18).string(e.lv),null!=e.ip&&e.hasOwnProperty("ip")&&t.uint32(26).string(e.ip),null!=e.ref&&e.hasOwnProperty("ref")&&t.uint32(34).string(e.ref),null!=e.ua&&e.hasOwnProperty("ua")&&t.uint32(42).string(e.ua),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.com.auryc.ubi.core.model.Message.MessageContext;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.ln=e.string();break;case 2:n.lv=e.string();break;case 3:n.ip=e.string();break;case 4:n.ref=e.string();break;case 5:n.ua=e.string();break;default:e.skipType(7&i)}}return n},t.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},t.verify=function(e){return"object"!==(void 0===e?"undefined":_typeof(e))||null===e?"object expected":null!=e.ln&&e.hasOwnProperty("ln")&&!$util.isString(e.ln)?"ln: string expected":null!=e.lv&&e.hasOwnProperty("lv")&&!$util.isString(e.lv)?"lv: string expected":null!=e.ip&&e.hasOwnProperty("ip")&&!$util.isString(e.ip)?"ip: string expected":null!=e.ref&&e.hasOwnProperty("ref")&&!$util.isString(e.ref)?"ref: string expected":null!=e.ua&&e.hasOwnProperty("ua")&&!$util.isString(e.ua)?"ua: string expected":null},t.fromObject=function(e){if(e instanceof $root.com.auryc.ubi.core.model.Message.MessageContext)return e;var t=new $root.com.auryc.ubi.core.model.Message.MessageContext;return null!=e.ln&&(t.ln=String(e.ln)),null!=e.lv&&(t.lv=String(e.lv)),null!=e.ip&&(t.ip=String(e.ip)),null!=e.ref&&(t.ref=String(e.ref)),null!=e.ua&&(t.ua=String(e.ua)),t},t.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.ln="",r.lv="",r.ip="",r.ref="",r.ua=""),null!=e.ln&&e.hasOwnProperty("ln")&&(r.ln=e.ln),null!=e.lv&&e.hasOwnProperty("lv")&&(r.lv=e.lv),null!=e.ip&&e.hasOwnProperty("ip")&&(r.ip=e.ip),null!=e.ref&&e.hasOwnProperty("ref")&&(r.ref=e.ref),null!=e.ua&&e.hasOwnProperty("ua")&&(r.ua=e.ua),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,minimal_1.toJSONOptions)},t}(),t.MessagePacket=function(){function t(e){if(this.payload={},e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return t.prototype.vid="",t.prototype.ts=$util.Long?$util.Long.fromBits(0,0,!1):0,t.prototype.status=0,t.prototype.size=0,t.prototype.data=$util.newBuffer([]),t.prototype.payload=$util.emptyObject,t.create=function(e){return new t(e)},t.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.vid&&e.hasOwnProperty("vid")&&t.uint32(10).string(e.vid),null!=e.ts&&e.hasOwnProperty("ts")&&t.uint32(16).int64(e.ts),null!=e.status&&e.hasOwnProperty("status")&&t.uint32(24).int32(e.status),null!=e.size&&e.hasOwnProperty("size")&&t.uint32(32).int32(e.size),null!=e.data&&e.hasOwnProperty("data")&&t.uint32(42).bytes(e.data),null!=e.payload&&e.hasOwnProperty("payload"))for(var r=Object.keys(e.payload),n=0;n<r.length;++n)t.uint32(50).fork().uint32(10).string(r[n]).uint32(18).bytes(e.payload[r[n]]).ldelim();return t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.com.auryc.ubi.core.model.Message.MessagePacket,i=void 0;e.pos<r;){var a=e.uint32();switch(a>>>3){case 1:n.vid=e.string();break;case 2:n.ts=e.int64();break;case 3:n.status=e.int32();break;case 4:n.size=e.int32();break;case 5:n.data=e.bytes();break;case 6:e.skip().pos++,n.payload===$util.emptyObject&&(n.payload={}),i=e.string(),e.pos++,n.payload[i]=e.bytes();break;default:e.skipType(7&a)}}return n},t.decodeDelimited=function(e){return e instanceof $Reader||(e=new $Reader(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!==(void 0===e?"undefined":_typeof(e))||null===e)return"object expected";if(null!=e.vid&&e.hasOwnProperty("vid")&&!$util.isString(e.vid))return"vid: string expected";if(null!=e.ts&&e.hasOwnProperty("ts")&&!($util.isInteger(e.ts)||e.ts&&$util.isInteger(e.ts.low)&&$util.isInteger(e.ts.high)))return"ts: integer|Long expected";if(null!=e.status&&e.hasOwnProperty("status")&&!$util.isInteger(e.status))return"status: integer expected";if(null!=e.size&&e.hasOwnProperty("size")&&!$util.isInteger(e.size))return"size: integer expected";if(null!=e.data&&e.hasOwnProperty("data")&&!(e.data&&"number"==typeof e.data.length||$util.isString(e.data)))return"data: buffer expected";if(null!=e.payload&&e.hasOwnProperty("payload")){if(!$util.isObject(e.payload))return"payload: object expected";for(var t=Object.keys(e.payload),r=0;r<t.length;++r)if(!(e.payload[t[r]]&&"number"==typeof e.payload[t[r]].length||$util.isString(e.payload[t[r]])))return"payload: buffer{k:string} expected"}return null},t.fromObject=function(e){if(e instanceof $root.com.auryc.ubi.core.model.Message.MessagePacket)return e;var t=new $root.com.auryc.ubi.core.model.Message.MessagePacket;if(null!=e.vid&&(t.vid=String(e.vid)),null!=e.ts&&($util.Long?(t.ts=$util.Long.fromValue(e.ts)).unsigned=!1:"string"==typeof e.ts?t.ts=parseInt(e.ts,10):"number"==typeof e.ts?t.ts=e.ts:"object"===_typeof(e.ts)&&(t.ts=new $util.LongBits(e.ts.low>>>0,e.ts.high>>>0).toNumber())),null!=e.status&&(t.status=0|e.status),null!=e.size&&(t.size=0|e.size),null!=e.data&&("string"==typeof e.data?$util.base64.decode(e.data,t.data=$util.newBuffer($util.base64.length(e.data)),0):e.data.length&&(t.data=e.data)),e.payload){if("object"!==_typeof(e.payload))throw TypeError(".com.auryc.ubi.core.model.Message.MessagePacket.payload: object expected");t.payload={};for(var r=Object.keys(e.payload),n=0;n<r.length;++n)"string"==typeof e.payload[r[n]]?$util.base64.decode(e.payload[r[n]],t.payload[r[n]]=$util.newBuffer($util.base64.length(e.payload[r[n]])),0):e.payload[r[n]].length&&(t.payload[r[n]]=e.payload[r[n]])}return t},t.toObject=function(e,t){t||(t={});var r={};if((t.objects||t.defaults)&&(r.payload={}),t.defaults){if(r.vid="",$util.Long){var n=new $util.Long(0,0,!1);r.ts=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.ts=t.longs===String?"0":0;r.status=0,r.size=0,r.data=t.bytes===String?"":[]}null!=e.vid&&e.hasOwnProperty("vid")&&(r.vid=e.vid),null!=e.ts&&e.hasOwnProperty("ts")&&("number"==typeof e.ts?r.ts=t.longs===String?String(e.ts):e.ts:r.ts=t.longs===String?$util.Long.prototype.toString.call(e.ts):t.longs===Number?new $util.LongBits(e.ts.low>>>0,e.ts.high>>>0).toNumber():e.ts),null!=e.status&&e.hasOwnProperty("status")&&(r.status=e.status),null!=e.size&&e.hasOwnProperty("size")&&(r.size=e.size),null!=e.data&&e.hasOwnProperty("data")&&(r.data=t.bytes===String?$util.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data);var i=void 0;if(e.payload&&(i=Object.keys(e.payload)).length){r.payload={};for(var a=0;a<i.length;++a)r.payload[i[a]]=t.bytes===String?$util.base64.encode(e.payload[i[a]],0,e.payload[i[a]].length):t.bytes===Array?Array.prototype.slice.call(e.payload[i[a]]):e.payload[i[a]]}return r},t.prototype.toJSON=function(){return this.constructor.toObject(this,minimal_1.toJSONOptions)},t}(),t}(),v$),u$),t$),s$),r$),v$,u$,t$,s$,r$,byteLength_1=byteLength,toByteArray_1=toByteArray,fromByteArray_1=fromByteArray,lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;function getLens(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function byteLength(e){var t=getLens(e),r=t[0],n=t[1];return 3*(r+n)/4-n}function _byteLength(e,t,r){return 3*(t+r)/4-r}function toByteArray(e){for(var t,r=getLens(e),n=r[0],i=r[1],a=new Arr(_byteLength(e,n,i)),o=0,s=0<i?n-4:n,c=0;c<s;c+=4)t=revLookup[e.charCodeAt(c)]<<18|revLookup[e.charCodeAt(c+1)]<<12|revLookup[e.charCodeAt(c+2)]<<6|revLookup[e.charCodeAt(c+3)],a[o++]=t>>16&255,a[o++]=t>>8&255,a[o++]=255&t;return 2===i&&(t=revLookup[e.charCodeAt(c)]<<2|revLookup[e.charCodeAt(c+1)]>>4,a[o++]=255&t),1===i&&(t=revLookup[e.charCodeAt(c)]<<10|revLookup[e.charCodeAt(c+1)]<<4|revLookup[e.charCodeAt(c+2)]>>2,a[o++]=t>>8&255,a[o++]=255&t),a}function tripletToBase64(e){return lookup[e>>18&63]+lookup[e>>12&63]+lookup[e>>6&63]+lookup[63&e]}function encodeChunk(e,t,r){for(var n,i=[],a=t;a<r;a+=3)n=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),i.push(tripletToBase64(n));return i.join("")}function fromByteArray(e){for(var t,r=e.length,n=r%3,i=[],a=0,o=r-n;a<o;a+=16383)i.push(encodeChunk(e,a,o<a+16383?o:a+16383));return 1===n?(t=e[r-1],i.push(lookup[t>>2]+lookup[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],i.push(lookup[t>>10]+lookup[t>>4&63]+lookup[t<<2&63]+"=")),i.join("")}revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63;var base64Js={byteLength:byteLength_1,toByteArray:toByteArray_1,fromByteArray:fromByteArray_1},read=function(e,t,r,n,i){var a,o,s=8*i-n-1,c=(1<<s)-1,l=c>>1,u=-7,h=r?i-1:0,f=r?-1:1,d=e[t+h];for(h+=f,a=d&(1<<-u)-1,d>>=-u,u+=s;0<u;a=256*a+e[t+h],h+=f,u-=8);for(o=a&(1<<-u)-1,a>>=-u,u+=n;0<u;o=256*o+e[t+h],h+=f,u-=8);if(0===a)a=1-l;else{if(a===c)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,n),a-=l}return(d?-1:1)*o*Math.pow(2,a-n)},write=function(e,t,r,n,i,a){var o,s,c,l=8*a-i-1,u=(1<<l)-1,h=u>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:a-1,g=n?1:-1,p=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),2<=(t+=1<=o+h?f/c:f*Math.pow(2,1-h))*c&&(o++,c/=2),u<=o+h?(s=0,o=u):1<=o+h?(s=(t*c-1)*Math.pow(2,i),o+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),o=0));8<=i;e[r+d]=255&s,d+=g,s/=256,i-=8);for(o=o<<i|s,l+=i;0<l;e[r+d]=255&o,d+=g,o/=256,l-=8);e[r+d-g]|=128*p},ieee754={read:read,write:write},buffer=createCommonjsModule(function(e,r){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
r.Buffer=h,r.SlowBuffer=function(e){+e!=e&&(e=0);return h.alloc(+e)},r.INSPECT_MAX_BYTES=50;var n=2147483647;function o(e){if(n<e)throw new RangeError("Invalid typed array length");var t=new Uint8Array(e);return t.__proto__=h.prototype,t}function h(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return a(e)}return i(e,t,r)}function i(e,t,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return N(e)||e&&N(e.buffer)?function(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r);return n.__proto__=h.prototype,n}(e,t,r):"string"==typeof e?function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!h.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|u(e,t),n=o(r),i=n.write(e,t);i!==r&&(n=n.slice(0,i));return n}(e,t):function(e){if(h.isBuffer(e)){var t=0|l(e.length),r=o(t);return 0===r.length||e.copy(r,0,0,t),r}if(e){if(ArrayBuffer.isView(e)||"length"in e)return"number"!=typeof e.length||B(e.length)?o(0):c(e);if("Buffer"===e.type&&Array.isArray(e.data))return c(e.data)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object.")}(e)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('"size" argument must not be negative')}function a(e){return s(e),o(e<0?0:0|l(e))}function c(e){for(var t=e.length<0?0:0|l(e.length),r=o(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function l(e){if(n<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|e}function u(e,t){if(h.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||N(e))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return R(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return T(e).length;default:if(n)return R(e).length;t=(""+t).toLowerCase(),n=!0}}function f(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function d(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),B(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=h.from(t,n)),h.isBuffer(t))return 0===t.length?-1:g(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):g(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function g(e,t,r,n,i){var a,o=1,s=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s/=o=2,c/=2,r/=2}function l(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var u=-1;for(a=r;a<s;a++)if(l(e,a)===l(t,-1===u?0:a-u)){if(-1===u&&(u=a),a-u+1===c)return u*o}else-1!==u&&(a-=a-u),u=-1}else for(s<r+c&&(r=s-c),a=r;0<=a;a--){for(var h=!0,f=0;f<c;f++)if(l(e,a+f)!==l(t,f)){h=!1;break}if(h)return a}return-1}function p(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?i<(n=Number(n))&&(n=i):n=i;var a=t.length;a/2<n&&(n=a/2);for(var o=0;o<n;++o){var s=parseInt(t.substr(2*o,2),16);if(B(s))return o;e[r+o]=s}return o}function b(e,t,r,n){return P(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function y(e,t,r){return 0===t&&r===e.length?base64Js.fromByteArray(e):base64Js.fromByteArray(e.slice(t,r))}function m(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var a,o,s,c,l=e[i],u=null,h=239<l?4:223<l?3:191<l?2:1;if(i+h<=r)switch(h){case 1:l<128&&(u=l);break;case 2:128==(192&(a=e[i+1]))&&127<(c=(31&l)<<6|63&a)&&(u=c);break;case 3:a=e[i+1],o=e[i+2],128==(192&a)&&128==(192&o)&&2047<(c=(15&l)<<12|(63&a)<<6|63&o)&&(c<55296||57343<c)&&(u=c);break;case 4:a=e[i+1],o=e[i+2],s=e[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&65535<(c=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)&&c<1114112&&(u=c)}null===u?(u=65533,h=1):65535<u&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|1023&u),n.push(u),i+=h}return function(e){var t=e.length;if(t<=v)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=v));return r}(n)}r.kMaxLength=n,(h.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{get:function(){if(this instanceof h)return this.buffer}}),Object.defineProperty(h.prototype,"offset",{get:function(){if(this instanceof h)return this.byteOffset}}),"undefined"!=typeof Symbol&&Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),h.poolSize=8192,h.from=function(e,t,r){return i(e,t,r)},h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,h.alloc=function(e,t,r){return i=t,a=r,s(n=e),n<=0?o(n):void 0!==i?"string"==typeof a?o(n).fill(i,a):o(n).fill(i):o(n);var n,i,a},h.allocUnsafe=function(e){return a(e)},h.allocUnsafeSlow=function(e){return a(e)},h.isBuffer=function(e){return null!=e&&!0===e._isBuffer},h.compare=function(e,t){if(!h.isBuffer(e)||!h.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);i<a;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},h.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return h.alloc(0);var r;if(void 0===t)for(r=t=0;r<e.length;++r)t+=e[r].length;var n=h.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var a=e[r];if(ArrayBuffer.isView(a)&&(a=h.from(a)),!h.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},h.byteLength=u,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)f(this,t,t+1);return this},h.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)f(this,t,t+3),f(this,t+1,t+2);return this},h.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)f(this,t,t+7),f(this,t+1,t+6),f(this,t+2,t+5),f(this,t+3,t+4);return this},h.prototype.toLocaleString=h.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?m(this,0,e):function(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,r);case"utf8":case"utf-8":return m(this,t,r);case"ascii":return I(this,t,r);case"latin1":case"binary":return w(this,t,r);case"base64":return y(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}.apply(this,arguments)},h.prototype.equals=function(e){if(!h.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===h.compare(this,e)},h.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},h.prototype.compare=function(e,t,r,n,i){if(!h.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(i<=n&&r<=t)return 0;if(i<=n)return-1;if(r<=t)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(t>>>=0),s=Math.min(a,o),c=this.slice(n,i),l=e.slice(t,r),u=0;u<s;++u)if(c[u]!==l[u]){a=c[u],o=l[u];break}return a<o?-1:o<a?1:0},h.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},h.prototype.indexOf=function(e,t,r){return d(this,e,t,r,!0)},h.prototype.lastIndexOf=function(e,t,r){return d(this,e,t,r,!1)},h.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||i<r)&&(r=i),0<e.length&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a,o,s,c,l,u,h,f,d,g=!1;;)switch(n){case"hex":return p(this,e,t,r);case"utf8":case"utf-8":return f=t,d=r,P(R(e,(h=this).length-f),h,f,d);case"ascii":return b(this,e,t,r);case"latin1":case"binary":return b(this,e,t,r);case"base64":return c=this,l=t,u=r,P(T(e),c,l,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return o=t,s=r,P(function(e,t){for(var r,n,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),n=r>>8,i=r%256,a.push(i),a.push(n);return a}(e,(a=this).length-o),a,o,s);default:if(g)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),g=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var v=4096;function I(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function w(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function C(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||n<r)&&(r=n);for(var i="",a=t;a<r;++a)i+=F(e[a]);return i}function A(e,t,r){for(var n=e.slice(t,r),i="",a=0;a<n.length;a+=2)i+=String.fromCharCode(n[a]+256*n[a+1]);return i}function S(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(r<e+t)throw new RangeError("Trying to access beyond buffer length")}function x(e,t,r,n,i,a){if(!h.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<t||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function _(e,t,r,n,i,a){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function E(e,t,r,n,i){return t=+t,r>>>=0,i||_(e,0,r,4),ieee754.write(e,t,r,n,23,4),r+4}function k(e,t,r,n,i){return t=+t,r>>>=0,i||_(e,0,r,8),ieee754.write(e,t,r,n,52,8),r+8}h.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return n.__proto__=h.prototype,n},h.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||S(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n},h.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||S(e,t,this.length);for(var n=this[e+--t],i=1;0<t&&(i*=256);)n+=this[e+--t]*i;return n},h.prototype.readUInt8=function(e,t){return e>>>=0,t||S(e,1,this.length),this[e]},h.prototype.readUInt16LE=function(e,t){return e>>>=0,t||S(e,2,this.length),this[e]|this[e+1]<<8},h.prototype.readUInt16BE=function(e,t){return e>>>=0,t||S(e,2,this.length),this[e]<<8|this[e+1]},h.prototype.readUInt32LE=function(e,t){return e>>>=0,t||S(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},h.prototype.readUInt32BE=function(e,t){return e>>>=0,t||S(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},h.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||S(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return(i*=128)<=n&&(n-=Math.pow(2,8*t)),n},h.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||S(e,t,this.length);for(var n=t,i=1,a=this[e+--n];0<n&&(i*=256);)a+=this[e+--n]*i;return(i*=128)<=a&&(a-=Math.pow(2,8*t)),a},h.prototype.readInt8=function(e,t){return e>>>=0,t||S(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},h.prototype.readInt16LE=function(e,t){e>>>=0,t||S(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},h.prototype.readInt16BE=function(e,t){e>>>=0,t||S(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},h.prototype.readInt32LE=function(e,t){return e>>>=0,t||S(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},h.prototype.readInt32BE=function(e,t){return e>>>=0,t||S(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},h.prototype.readFloatLE=function(e,t){return e>>>=0,t||S(e,4,this.length),ieee754.read(this,e,!0,23,4)},h.prototype.readFloatBE=function(e,t){return e>>>=0,t||S(e,4,this.length),ieee754.read(this,e,!1,23,4)},h.prototype.readDoubleLE=function(e,t){return e>>>=0,t||S(e,8,this.length),ieee754.read(this,e,!0,52,8)},h.prototype.readDoubleBE=function(e,t){return e>>>=0,t||S(e,8,this.length),ieee754.read(this,e,!1,52,8)},h.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||x(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,a=0;for(this[t]=255&e;++a<r&&(i*=256);)this[t+a]=e/i&255;return t+r},h.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||x(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,a=1;for(this[t+i]=255&e;0<=--i&&(a*=256);)this[t+i]=e/a&255;return t+r},h.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,1,255,0),this[t]=255&e,t+1},h.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},h.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},h.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},h.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},h.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);x(this,e,t,r,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<r&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+r},h.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);x(this,e,t,r,i-1,-i)}var a=r-1,o=1,s=0;for(this[t+a]=255&e;0<=--a&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+r},h.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},h.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},h.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},h.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},h.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},h.prototype.writeFloatLE=function(e,t,r){return E(this,e,t,!0,r)},h.prototype.writeFloatBE=function(e,t,r){return E(this,e,t,!1,r)},h.prototype.writeDoubleLE=function(e,t,r){return k(this,e,t,!0,r)},h.prototype.writeDoubleBE=function(e,t,r){return k(this,e,t,!1,r)},h.prototype.copy=function(e,t,r,n){if(!h.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),0<n&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i=n-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,n);else if(this===e&&r<t&&t<n)for(var a=i-1;0<=a;--a)e[a+t]=this[a+r];else Uint8Array.prototype.set.call(e,this.subarray(r,n),t);return i},h.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!h.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var i=e.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(e=i)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var a;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(a=t;a<r;++a)this[a]=e;else{var o=h.isBuffer(e)?e:new h(e,n),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<r-t;++a)this[a+t]=o[a%s]}return this};var t=/[^+/0-9A-Za-z-_]/g;function F(e){return e<16?"0"+e.toString(16):e.toString(16)}function R(e,t){var r;t=t||1/0;for(var n=e.length,i=null,a=[],o=0;o<n;++o){if(55295<(r=e.charCodeAt(o))&&r<57344){if(!i){if(56319<r){-1<(t-=3)&&a.push(239,191,189);continue}if(o+1===n){-1<(t-=3)&&a.push(239,191,189);continue}i=r;continue}if(r<56320){-1<(t-=3)&&a.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&-1<(t-=3)&&a.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function T(e){return base64Js.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(t,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function P(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function N(e){return e instanceof ArrayBuffer||null!=e&&null!=e.constructor&&"ArrayBuffer"===e.constructor.name&&"number"==typeof e.byteLength}function B(e){return e!=e}}),buffer_1=buffer.Buffer,buffer_2=buffer.SlowBuffer,buffer_3=buffer.INSPECT_MAX_BYTES,buffer_4=buffer.kMaxLength,navigator$1={userAgent:!1},window$1={};if(void 0===YAHOO)var YAHOO={};YAHOO.lang={extend:function(e,t,r){if(!t||!e)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var n=function(){};if(n.prototype=t.prototype,e.prototype=new n,(e.prototype.constructor=e).superclass=t.prototype,t.prototype.constructor==Object.prototype.constructor&&(t.prototype.constructor=t),r){var i;for(i in r)e.prototype[i]=r[i];var a=function(){},o=["toString","valueOf"];try{/MSIE/.test(navigator$1.userAgent)&&(a=function(e,t){for(i=0;i<o.length;i+=1){var r=o[i],n=t[r];"function"==typeof n&&n!=Object.prototype[r]&&(e[r]=n)}})}catch(e){}a(e.prototype,r)}}};var CryptoJS=CryptoJS||(Xaa=Math,Zaa={},$aa=Zaa.lib={},_aa=$aa.Base=function(){function r(){}return{extend:function(e){r.prototype=this;var t=new r;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),aba=$aa.WordArray=_aa.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||cba).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes,i=e.sigBytes;if(this.clamp(),n%4)for(var a=0;a<i;a++){var o=r[a>>>2]>>>24-a%4*8&255;t[n+a>>>2]|=o<<24-(n+a)%4*8}else for(a=0;a<i;a+=4)t[n+a>>>2]=r[a>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=Xaa.ceil(t/4)},clone:function(){var e=_aa.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],r=0;r<e;r+=4)t.push(4294967296*Xaa.random()|0);return new aba.init(t,e)}}),bba=Zaa.enc={},cba=bba.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var a=t[i>>>2]>>>24-i%4*8&255;n.push((a>>>4).toString(16)),n.push((15&a).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new aba.init(r,t/2)}},dba=bba.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var a=t[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(a))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new aba.init(r,t)}},eba=bba.Utf8={stringify:function(e){try{return decodeURIComponent(escape(dba.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return dba.parse(unescape(encodeURIComponent(e)))}},fba=$aa.BufferedBlockAlgorithm=_aa.extend({reset:function(){this._data=new aba.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=eba.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,r=t.words,n=t.sigBytes,i=this.blockSize,a=n/(4*i),o=(a=e?Xaa.ceil(a):Xaa.max((0|a)-this._minBufferSize,0))*i,s=Xaa.min(4*o,n);if(o){for(var c=0;c<o;c+=i)this._doProcessBlock(r,c);var l=r.splice(0,o);t.sigBytes-=s}return new aba.init(l,s)},clone:function(){var e=_aa.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),$aa.Hasher=fba.extend({cfg:_aa.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){fba.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(r){return function(e,t){return new r.init(t).finalize(e)}},_createHmacHelper:function(r){return function(e,t){return new hba.HMAC.init(r,t).finalize(e)}}}),hba=Zaa.algo={},Zaa),Xaa,Zaa,$aa,_aa,aba,bba,cba,dba,eba,fba,hba,xca,yca,zca,Aca,nga,oga,Sha,Uha,Vha,Wha,Tha,Sia,Tia,Via,Uia,kka,mka,nka,oka,lka,$ka,_ka,ola,nla,pla,qla,rla,sla;yca=(xca=CryptoJS).lib,zca=yca.Base,Aca=yca.WordArray,(xca=xca.x64={}).Word=zca.extend({init:function(e,t){this.high=e,this.low=t}}),xca.WordArray=zca.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,r=[],n=0;n<t;n++){var i=e[n];r.push(i.high),r.push(i.low)}return Aca.create(r,this.sigBytes)},clone:function(){for(var e=zca.clone.call(this),t=e.words=this.words.slice(0),r=t.length,n=0;n<r;n++)t[n]=t[n].clone();return e}}),CryptoJS.lib.Cipher||function(e){var t=(d=CryptoJS).lib,r=t.Base,o=t.WordArray,n=t.BufferedBlockAlgorithm,i=d.enc.Base64,a=d.algo.EvpKDF,s=t.Cipher=n.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){n.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(n){return{encrypt:function(e,t,r){return("string"==typeof t?g:f).encrypt(n,e,t,r)},decrypt:function(e,t,r){return("string"==typeof t?g:f).decrypt(n,e,t,r)}}}});t.StreamCipher=s.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var c=d.mode={},l=function(e,t,r){var n=this._iv;n?this._iv=void 0:n=this._prevBlock;for(var i=0;i<r;i++)e[t+i]^=n[i]},u=(t.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();u.Encryptor=u.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize;l.call(this,e,t,n),r.encryptBlock(e,t),this._prevBlock=e.slice(t,t+n)}}),u.Decryptor=u.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize,i=e.slice(t,t+n);r.decryptBlock(e,t),l.call(this,e,t,n),this._prevBlock=i}}),c=c.CBC=u,u=(d.pad={}).Pkcs7={pad:function(e,t){for(var r,n=(r=(r=4*t)-e.sigBytes%r)<<24|r<<16|r<<8|r,i=[],a=0;a<r;a+=4)i.push(n);r=o.create(i,r),e.concat(r)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},t.BlockCipher=s.extend({cfg:s.cfg.extend({mode:c,padding:u}),reset:function(){s.reset.call(this);var e=(t=this.cfg).iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var r=t.createEncryptor;else r=t.createDecryptor,this._minBufferSize=1;this._mode=r.call(t,this,e&&e.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var h=t.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),f=(c=(d.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?o.create([1398893684,1701076831]).concat(e).concat(t):t).toString(i)},parse:function(e){var t=(e=i.parse(e)).words;if(1398893684==t[0]&&1701076831==t[1]){var r=o.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return h.create({ciphertext:e,salt:r})}},t.SerializableCipher=r.extend({cfg:r.extend({format:c}),encrypt:function(e,t,r,n){n=this.cfg.extend(n);var i=e.createEncryptor(r,n);return t=i.finalize(t),i=i.cfg,h.create({ciphertext:t,key:r,iv:i.iv,algorithm:e,mode:i.mode,padding:i.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,r,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(r,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}})),d=(d.kdf={}).OpenSSL={execute:function(e,t,r,n){return n||(n=o.random(8)),e=a.create({keySize:t+r}).compute(e,n),r=o.create(e.words.slice(t),4*r),e.sigBytes=4*t,h.create({key:e,iv:r,salt:n})}},g=t.PasswordBasedCipher=f.extend({cfg:f.cfg.extend({kdf:d}),encrypt:function(e,t,r,n){return r=(n=this.cfg.extend(n)).kdf.execute(r,e.keySize,e.ivSize),n.iv=r.iv,(e=f.encrypt.call(this,e,t,r.key,n)).mixIn(r),e},decrypt:function(e,t,r,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),r=n.kdf.execute(r,e.keySize,e.ivSize,t.salt),n.iv=r.iv,f.decrypt.call(this,e,t,r.key,n)}})}(),function(){for(var e=CryptoJS,t=e.lib.BlockCipher,r=e.algo,o=[],n=[],i=[],a=[],s=[],c=[],l=[],u=[],h=[],f=[],d=[],g=0;g<256;g++)d[g]=g<128?g<<1:g<<1^283;var p=0,b=0;for(g=0;g<256;g++){var y=(y=b^b<<1^b<<2^b<<3^b<<4)>>>8^255&y^99;o[p]=y;var m=d[n[y]=p],v=d[m],I=d[v],w=257*d[y]^16843008*y;i[p]=w<<24|w>>>8,a[p]=w<<16|w>>>16,s[p]=w<<8|w>>>24,c[p]=w,w=16843009*I^65537*v^257*m^16843008*p,l[y]=w<<24|w>>>8,u[y]=w<<16|w>>>16,h[y]=w<<8|w>>>24,f[y]=w,p?(p=m^d[d[d[I^m]]],b^=d[d[b]]):p=b=1}var C=[0,1,2,4,8,16,32,64,128,27,54];r=r.AES=t.extend({_doReset:function(){for(var e=(r=this._key).words,t=r.sigBytes/4,r=4*((this._nRounds=t+6)+1),n=this._keySchedule=[],i=0;i<r;i++)if(i<t)n[i]=e[i];else{var a=n[i-1];i%t?6<t&&4==i%t&&(a=o[a>>>24]<<24|o[a>>>16&255]<<16|o[a>>>8&255]<<8|o[255&a]):(a=o[(a=a<<8|a>>>24)>>>24]<<24|o[a>>>16&255]<<16|o[a>>>8&255]<<8|o[255&a],a^=C[i/t|0]<<24),n[i]=n[i-t]^a}for(e=this._invKeySchedule=[],t=0;t<r;t++)i=r-t,a=t%4?n[i]:n[i-4],e[t]=t<4||i<=4?a:l[o[a>>>24]]^u[o[a>>>16&255]]^h[o[a>>>8&255]]^f[o[255&a]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,i,a,s,c,o)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,l,u,h,f,n),r=e[t+1],e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,n,i,a,o,s){for(var c=this._nRounds,l=e[t]^r[0],u=e[t+1]^r[1],h=e[t+2]^r[2],f=e[t+3]^r[3],d=4,g=1;g<c;g++){var p=n[l>>>24]^i[u>>>16&255]^a[h>>>8&255]^o[255&f]^r[d++],b=n[u>>>24]^i[h>>>16&255]^a[f>>>8&255]^o[255&l]^r[d++],y=n[h>>>24]^i[f>>>16&255]^a[l>>>8&255]^o[255&u]^r[d++];f=n[f>>>24]^i[l>>>16&255]^a[u>>>8&255]^o[255&h]^r[d++],l=p,u=b,h=y}p=(s[l>>>24]<<24|s[u>>>16&255]<<16|s[h>>>8&255]<<8|s[255&f])^r[d++],b=(s[u>>>24]<<24|s[h>>>16&255]<<16|s[f>>>8&255]<<8|s[255&l])^r[d++],y=(s[h>>>24]<<24|s[f>>>16&255]<<16|s[l>>>8&255]<<8|s[255&u])^r[d++],f=(s[f>>>24]<<24|s[l>>>16&255]<<16|s[u>>>8&255]<<8|s[255&h])^r[d++],e[t]=p,e[t+1]=b,e[t+2]=y,e[t+3]=f},keySize:8});e.AES=t._createHelper(r)}(),function(){function l(e,t){var r=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=r,this._lBlock^=r<<e}function u(e,t){var r=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=r,this._rBlock^=r<<e}var e=CryptoJS,t=(r=e.lib).WordArray,r=r.BlockCipher,n=e.algo,o=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],h=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],f=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],i=n.DES=r.extend({_doReset:function(){for(var e=this._key.words,t=[],r=0;r<56;r++){var n=o[r]-1;t[r]=e[n>>>5]>>>31-n%32&1}for(e=this._subKeys=[],n=0;n<16;n++){var i=e[n]=[],a=c[n];for(r=0;r<24;r++)i[r/6|0]|=t[(s[r]-1+a)%28]<<31-r%6,i[4+(r/6|0)]|=t[28+(s[r+24]-1+a)%28]<<31-r%6;for(i[0]=i[0]<<1|i[0]>>>31,r=1;r<7;r++)i[r]>>>=4*(r-1)+3;i[7]=i[7]<<5|i[7]>>>27}for(t=this._invSubKeys=[],r=0;r<16;r++)t[r]=e[15-r]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,r){this._lBlock=e[t],this._rBlock=e[t+1],l.call(this,4,252645135),l.call(this,16,65535),u.call(this,2,858993459),u.call(this,8,16711935),l.call(this,1,1431655765);for(var n=0;n<16;n++){for(var i=r[n],a=this._lBlock,o=this._rBlock,s=0,c=0;c<8;c++)s|=h[c][((o^i[c])&f[c])>>>0];this._lBlock=o,this._rBlock=a^s}r=this._lBlock,this._lBlock=this._rBlock,this._rBlock=r,l.call(this,1,1431655765),u.call(this,8,16711935),u.call(this,2,858993459),l.call(this,16,65535),l.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});e.DES=r._createHelper(i),n=n.TripleDES=r.extend({_doReset:function(){var e=this._key.words;this._des1=i.createEncryptor(t.create(e.slice(0,2))),this._des2=i.createEncryptor(t.create(e.slice(2,4))),this._des3=i.createEncryptor(t.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2}),e.TripleDES=r._createHelper(n)}(),nga=CryptoJS,oga=nga.lib.WordArray,nga.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,n=this._map;e.clamp(),e=[];for(var i=0;i<r;i+=3)for(var a=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,o=0;o<4&&i+.75*o<r;o++)e.push(n.charAt(a>>>6*(3-o)&63));if(t=n.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var t=e.length,r=this._map;(n=r.charAt(64))&&-1!=(n=e.indexOf(n))&&(t=n);for(var n=[],i=0,a=0;a<t;a++)if(a%4){var o=r.indexOf(e.charAt(a-1))<<a%4*2,s=r.indexOf(e.charAt(a))>>>6-a%4*2;n[i>>>2]|=(o|s)<<24-i%4*8,i++}return oga.create(n,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(a){function A(e,t,r,n,i,a,o){return((e=e+(t&r|~t&n)+i+o)<<a|e>>>32-a)+t}function S(e,t,r,n,i,a,o){return((e=e+(t&n|r&~n)+i+o)<<a|e>>>32-a)+t}function x(e,t,r,n,i,a,o){return((e=e+(t^r^n)+i+o)<<a|e>>>32-a)+t}function _(e,t,r,n,i,a,o){return((e=e+(r^(t|~n))+i+o)<<a|e>>>32-a)+t}for(var e=CryptoJS,t=(n=e.lib).WordArray,r=n.Hasher,n=e.algo,E=[],i=0;i<64;i++)E[i]=4294967296*a.abs(a.sin(i+1))|0;n=n.MD5=r.extend({_doReset:function(){this._hash=new t.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var n=e[o=t+r];e[o]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}r=this._hash.words;var i,a,o=e[t+0],s=(n=e[t+1],e[t+2]),c=e[t+3],l=e[t+4],u=e[t+5],h=e[t+6],f=e[t+7],d=e[t+8],g=e[t+9],p=e[t+10],b=e[t+11],y=e[t+12],m=e[t+13],v=e[t+14],I=e[t+15],w=r[0],C=_(C=_(C=_(C=_(C=x(C=x(C=x(C=x(C=S(C=S(C=S(C=S(C=A(C=A(C=A(C=A(C=r[1],a=A(a=r[2],i=A(i=r[3],w=A(w,C,a,i,o,7,E[0]),C,a,n,12,E[1]),w,C,s,17,E[2]),i,w,c,22,E[3]),a=A(a,i=A(i,w=A(w,C,a,i,l,7,E[4]),C,a,u,12,E[5]),w,C,h,17,E[6]),i,w,f,22,E[7]),a=A(a,i=A(i,w=A(w,C,a,i,d,7,E[8]),C,a,g,12,E[9]),w,C,p,17,E[10]),i,w,b,22,E[11]),a=A(a,i=A(i,w=A(w,C,a,i,y,7,E[12]),C,a,m,12,E[13]),w,C,v,17,E[14]),i,w,I,22,E[15]),a=S(a,i=S(i,w=S(w,C,a,i,n,5,E[16]),C,a,h,9,E[17]),w,C,b,14,E[18]),i,w,o,20,E[19]),a=S(a,i=S(i,w=S(w,C,a,i,u,5,E[20]),C,a,p,9,E[21]),w,C,I,14,E[22]),i,w,l,20,E[23]),a=S(a,i=S(i,w=S(w,C,a,i,g,5,E[24]),C,a,v,9,E[25]),w,C,c,14,E[26]),i,w,d,20,E[27]),a=S(a,i=S(i,w=S(w,C,a,i,m,5,E[28]),C,a,s,9,E[29]),w,C,f,14,E[30]),i,w,y,20,E[31]),a=x(a,i=x(i,w=x(w,C,a,i,u,4,E[32]),C,a,d,11,E[33]),w,C,b,16,E[34]),i,w,v,23,E[35]),a=x(a,i=x(i,w=x(w,C,a,i,n,4,E[36]),C,a,l,11,E[37]),w,C,f,16,E[38]),i,w,p,23,E[39]),a=x(a,i=x(i,w=x(w,C,a,i,m,4,E[40]),C,a,o,11,E[41]),w,C,c,16,E[42]),i,w,h,23,E[43]),a=x(a,i=x(i,w=x(w,C,a,i,g,4,E[44]),C,a,y,11,E[45]),w,C,I,16,E[46]),i,w,s,23,E[47]),a=_(a,i=_(i,w=_(w,C,a,i,o,6,E[48]),C,a,f,10,E[49]),w,C,v,15,E[50]),i,w,u,21,E[51]),a=_(a,i=_(i,w=_(w,C,a,i,y,6,E[52]),C,a,c,10,E[53]),w,C,p,15,E[54]),i,w,n,21,E[55]),a=_(a,i=_(i,w=_(w,C,a,i,d,6,E[56]),C,a,I,10,E[57]),w,C,h,15,E[58]),i,w,m,21,E[59]),a=_(a,i=_(i,w=_(w,C,a,i,l,6,E[60]),C,a,b,10,E[61]),w,C,s,15,E[62]),i,w,g,21,E[63]);r[0]=r[0]+w|0,r[1]=r[1]+C|0,r[2]=r[2]+a|0,r[3]=r[3]+i|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;t[n>>>5]|=128<<24-n%32;var i=a.floor(r/4294967296);for(t[15+(n+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),t[14+(n+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.sigBytes=4*(t.length+1),this._process(),t=(e=this._hash).words,r=0;r<4;r++)n=t[r],t[r]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8);return e},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}}),e.MD5=r._createHelper(n),e.HmacMD5=r._createHmacHelper(n)}(Math),Sha=CryptoJS,Uha=(Tha=Sha.lib).WordArray,Vha=Tha.Hasher,Wha=[],Tha=Sha.algo.SHA1=Vha.extend({_doReset:function(){this._hash=new Uha.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],a=r[2],o=r[3],s=r[4],c=0;c<80;c++){if(c<16)Wha[c]=0|e[t+c];else{var l=Wha[c-3]^Wha[c-8]^Wha[c-14]^Wha[c-16];Wha[c]=l<<1|l>>>31}l=(n<<5|n>>>27)+s+Wha[c],l=c<20?l+(1518500249+(i&a|~i&o)):c<40?l+(1859775393+(i^a^o)):c<60?l+((i&a|i&o|a&o)-1894007588):l+((i^a^o)-899497514),s=o,o=a,a=i<<30|i>>>2,i=n,n=l}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+a|0,r[3]=r[3]+o|0,r[4]=r[4]+s|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=Math.floor(r/4294967296),t[15+(n+64>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=Vha.clone.call(this);return e._hash=this._hash.clone(),e}}),Sha.SHA1=Vha._createHelper(Tha),Sha.HmacSHA1=Vha._createHmacHelper(Tha),function(i){for(var e=CryptoJS,t=(n=e.lib).WordArray,r=n.Hasher,n=e.algo,a=[],g=[],o=function(e){return 4294967296*(e-(0|e))|0},s=2,c=0;c<64;){var l;e:{l=s;for(var u=i.sqrt(l),h=2;h<=u;h++)if(!(l%h)){l=!1;break e}l=!0}l&&(c<8&&(a[c]=o(i.pow(s,.5))),g[c]=o(i.pow(s,1/3)),c++),s++}var p=[];n=n.SHA256=r.extend({_doReset:function(){this._hash=new t.init(a.slice(0))},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],a=r[2],o=r[3],s=r[4],c=r[5],l=r[6],u=r[7],h=0;h<64;h++){if(h<16)p[h]=0|e[t+h];else{var f=p[h-15],d=p[h-2];p[h]=((f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3)+p[h-7]+((d<<15|d>>>17)^(d<<13|d>>>19)^d>>>10)+p[h-16]}f=u+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&c^~s&l)+g[h]+p[h],d=((n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22))+(n&i^n&a^i&a),u=l,l=c,c=s,s=o+f|0,o=a,a=i,i=n,n=f+d|0}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+a|0,r[3]=r[3]+o|0,r[4]=r[4]+s|0,r[5]=r[5]+c|0,r[6]=r[6]+l|0,r[7]=r[7]+u|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=i.floor(r/4294967296),t[15+(n+64>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA256=r._createHelper(n),e.HmacSHA256=r._createHmacHelper(n)}(Math),Sia=CryptoJS,Tia=Sia.lib.WordArray,Via=(Uia=Sia.algo).SHA256,Uia=Uia.SHA224=Via.extend({_doReset:function(){this._hash=new Tia.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=Via._doFinalize.call(this);return e.sigBytes-=4,e}}),Sia.SHA224=Via._createHelper(Uia),Sia.HmacSHA224=Via._createHmacHelper(Uia),function(){function e(){return n.create.apply(n,arguments)}for(var t=CryptoJS,r=t.lib.Hasher,n=(a=t.x64).Word,i=a.WordArray,a=t.algo,te=[e(1116352408,3609767458),e(1899447441,602891725),e(3049323471,3964484399),e(3921009573,2173295548),e(961987163,4081628472),e(1508970993,3053834265),e(2453635748,2937671579),e(2870763221,3664609560),e(3624381080,2734883394),e(310598401,1164996542),e(607225278,1323610764),e(1426881987,3590304994),e(1925078388,4068182383),e(2162078206,991336113),e(2614888103,633803317),e(3248222580,3479774868),e(3835390401,2666613458),e(4022224774,944711139),e(264347078,2341262773),e(604807628,2007800933),e(770255983,1495990901),e(1249150122,1856431235),e(1555081692,3175218132),e(1996064986,2198950837),e(2554220882,3999719339),e(2821834349,766784016),e(2952996808,2566594879),e(3210313671,3203337956),e(3336571891,1034457026),e(3584528711,2466948901),e(113926993,3758326383),e(338241895,168717936),e(666307205,1188179964),e(773529912,1546045734),e(1294757372,1522805485),e(1396182291,2643833823),e(1695183700,2343527390),e(1986661051,1014477480),e(2177026350,1206759142),e(2456956037,344077627),e(2730485921,1290863460),e(2820302411,3158454273),e(3259730800,3505952657),e(3345764771,106217008),e(3516065817,3606008344),e(3600352804,1432725776),e(4094571909,1467031594),e(275423344,851169720),e(430227734,3100823752),e(506948616,1363258195),e(659060556,3750685593),e(883997877,3785050280),e(958139571,3318307427),e(1322822218,3812723403),e(1537002063,2003034995),e(1747873779,3602036899),e(1955562222,1575990012),e(2024104815,1125592928),e(2227730452,2716904306),e(2361852424,442776044),e(2428436474,593698344),e(2756734187,3733110249),e(3204031479,2999351573),e(3329325298,3815920427),e(3391569614,3928383900),e(3515267271,566280711),e(3940187606,3454069534),e(4118630271,4000239992),e(116418474,1914138554),e(174292421,2731055270),e(289380356,3203993006),e(460393269,320620315),e(685471733,587496836),e(852142971,1086792851),e(1017036298,365543100),e(1126000580,2618297676),e(1288033470,3409855158),e(1501505948,4234509866),e(1607167915,987167468),e(1816402316,1246189591)],re=[],o=0;o<80;o++)re[o]=e();a=a.SHA512=r.extend({_doReset:function(){this._hash=new i.init([new n.init(1779033703,4089235720),new n.init(3144134277,2227873595),new n.init(1013904242,4271175723),new n.init(2773480762,1595750129),new n.init(1359893119,2917565137),new n.init(2600822924,725511199),new n.init(528734635,4215389547),new n.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var r=(l=this._hash.words)[0],n=l[1],i=l[2],a=l[3],o=l[4],s=l[5],c=l[6],l=l[7],u=r.high,h=r.low,f=n.high,d=n.low,g=i.high,p=i.low,b=a.high,y=a.low,m=o.high,v=o.low,I=s.high,w=s.low,C=c.high,A=c.low,S=l.high,x=l.low,_=u,E=h,k=f,F=d,R=g,T=p,P=b,N=y,B=m,U=v,O=I,D=w,M=C,j=A,W=S,J=x,V=0;V<80;V++){var L=re[V];if(V<16)var H=L.high=0|e[t+2*V],Z=L.low=0|e[t+2*V+1];else{H=((Z=(H=re[V-15]).high)>>>1|(K=H.low)<<31)^(Z>>>8|K<<24)^Z>>>7;var K=(K>>>1|Z<<31)^(K>>>8|Z<<24)^(K>>>7|Z<<25),G=((Z=(G=re[V-2]).high)>>>19|(Y=G.low)<<13)^(Z<<3|Y>>>29)^Z>>>6,Y=(Y>>>19|Z<<13)^(Y<<3|Z>>>29)^(Y>>>6|Z<<26),z=(Z=re[V-7]).high,X=($=re[V-16]).high,$=$.low;H=(H=(H=H+z+((Z=K+Z.low)>>>0<K>>>0?1:0))+G+((Z=Z+Y)>>>0<Y>>>0?1:0))+X+((Z=Z+$)>>>0<$>>>0?1:0);L.high=H,L.low=Z}z=B&O^~B&M,$=U&D^~U&j,L=_&k^_&R^k&R;var q=E&F^E&T^F&T,Q=(K=(_>>>28|E<<4)^(_<<30|E>>>2)^(_<<25|E>>>7),G=(E>>>28|_<<4)^(E<<30|_>>>2)^(E<<25|_>>>7),(Y=te[V]).high),ee=Y.low;X=W+((B>>>14|U<<18)^(B>>>18|U<<14)^(B<<23|U>>>9))+((Y=J+((U>>>14|B<<18)^(U>>>18|B<<14)^(U<<23|B>>>9)))>>>0<J>>>0?1:0),W=M,J=j,M=O,j=D,O=B,D=U,B=P+(X=(X=(X=X+z+((Y=Y+$)>>>0<$>>>0?1:0))+Q+((Y=Y+ee)>>>0<ee>>>0?1:0))+H+((Y=Y+Z)>>>0<Z>>>0?1:0))+((U=N+Y|0)>>>0<N>>>0?1:0)|0,P=R,N=T,R=k,T=F,k=_,F=E,_=X+(L=K+L+((Z=G+q)>>>0<G>>>0?1:0))+((E=Y+Z|0)>>>0<Y>>>0?1:0)|0}h=r.low=h+E,r.high=u+_+(h>>>0<E>>>0?1:0),d=n.low=d+F,n.high=f+k+(d>>>0<F>>>0?1:0),p=i.low=p+T,i.high=g+R+(p>>>0<T>>>0?1:0),y=a.low=y+N,a.high=b+P+(y>>>0<N>>>0?1:0),v=o.low=v+U,o.high=m+B+(v>>>0<U>>>0?1:0),w=s.low=w+D,s.high=I+O+(w>>>0<D>>>0?1:0),A=c.low=A+j,c.high=C+M+(A>>>0<j>>>0?1:0),x=l.low=x+J,l.high=S+W+(x>>>0<J>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[30+(n+128>>>10<<5)]=Math.floor(r/4294967296),t[31+(n+128>>>10<<5)]=r,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32}),t.SHA512=r._createHelper(a),t.HmacSHA512=r._createHmacHelper(a)}(),kka=CryptoJS,mka=(lka=kka.x64).Word,nka=lka.WordArray,oka=(lka=kka.algo).SHA512,lka=lka.SHA384=oka.extend({_doReset:function(){this._hash=new nka.init([new mka.init(3418070365,3238371032),new mka.init(1654270250,914150663),new mka.init(2438529370,812702999),new mka.init(355462360,4144912697),new mka.init(1731405415,4290775857),new mka.init(2394180231,1750603025),new mka.init(3675008525,1694076839),new mka.init(1203062813,3204075428)])},_doFinalize:function(){var e=oka._doFinalize.call(this);return e.sigBytes-=16,e}}),kka.SHA384=oka._createHelper(lka),kka.HmacSHA384=oka._createHmacHelper(lka),function(){var e=CryptoJS,t=(n=e.lib).WordArray,r=n.Hasher,n=e.algo,w=t.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),C=t.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),A=t.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),S=t.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),x=t.create([0,1518500249,1859775393,2400959708,2840853838]),_=t.create([1352829926,1548603684,1836072691,2053994217,0]);n=n.RIPEMD160=r.extend({_doReset:function(){this._hash=t.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var n=e[g=t+r];e[g]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}var i,a,o,s,c,l,u,h,f,d,g=this._hash.words,p=(n=x.words,_.words),b=w.words,y=C.words,m=A.words,v=S.words;l=i=g[0],u=a=g[1],h=o=g[2],f=s=g[3],d=c=g[4];var I;for(r=0;r<80;r+=1)I=i+e[t+b[r]]|0,I=r<16?I+((a^o^s)+n[0]):r<32?I+((a&o|~a&s)+n[1]):r<48?I+(((a|~o)^s)+n[2]):r<64?I+((a&s|o&~s)+n[3]):I+((a^(o|~s))+n[4]),I=(I=(I|=0)<<m[r]|I>>>32-m[r])+c|0,i=c,c=s,s=o<<10|o>>>22,o=a,a=I,I=l+e[t+y[r]]|0,I=r<16?I+((u^(h|~f))+p[0]):r<32?I+((u&f|h&~f)+p[1]):r<48?I+(((u|~h)^f)+p[2]):r<64?I+((u&h|~u&f)+p[3]):I+((u^h^f)+p[4]),I=(I=(I|=0)<<v[r]|I>>>32-v[r])+d|0,l=d,d=f,f=h<<10|h>>>22,h=u,u=I;I=g[1]+o+f|0,g[1]=g[2]+s+d|0,g[2]=g[3]+c+l|0,g[3]=g[4]+i+u|0,g[4]=g[0]+a+h|0,g[0]=I},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;for(t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.sigBytes=4*(t.length+1),this._process(),t=(e=this._hash).words,r=0;r<5;r++)n=t[r],t[r]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8);return e},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});e.RIPEMD160=r._createHelper(n),e.HmacRIPEMD160=r._createHmacHelper(n)}(Math),$ka=CryptoJS,_ka=$ka.enc.Utf8,$ka.algo.HMAC=$ka.lib.Base.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=_ka.parse(t));var r=e.blockSize,n=4*r;t.sigBytes>n&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),a=this._iKey=t.clone(),o=i.words,s=a.words,c=0;c<r;c++)o[c]^=1549556828,s[c]^=909522486;i.sigBytes=a.sigBytes=n,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}}),nla=CryptoJS,pla=(ola=nla.lib).Base,qla=ola.WordArray,rla=(ola=nla.algo).HMAC,sla=ola.PBKDF2=pla.extend({cfg:pla.extend({keySize:4,hasher:ola.SHA1,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){var r=this.cfg,n=rla.create(r.hasher,e),i=qla.create(),a=qla.create([1]),o=i.words,s=a.words,c=r.keySize;for(r=r.iterations;o.length<c;){var l=n.update(t).finalize(a);n.reset();for(var u=l.words,h=u.length,f=l,d=1;d<r;d++){f=n.finalize(f),n.reset();for(var g=f.words,p=0;p<h;p++)u[p]^=g[p]}i.concat(l),s[0]++}return i.sigBytes=4*c,i}}),nla.PBKDF2=function(e,t,r){return sla.create(r).compute(e,t)};var b64map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64pad$1="=",dbits;function hex2b64(e){var t,r,n="";for(t=0;t+3<=e.length;t+=3)r=parseInt(e.substring(t,t+3),16),n+=b64map.charAt(r>>6)+b64map.charAt(63&r);if(t+1==e.length?(r=parseInt(e.substring(t,t+1),16),n+=b64map.charAt(r<<2)):t+2==e.length&&(r=parseInt(e.substring(t,t+2),16),n+=b64map.charAt(r>>2)+b64map.charAt((3&r)<<4)),b64pad$1)for(;0<(3&n.length);)n+=b64pad$1;return n}function b64tohex(e){var t,r,n,i="",a=0;for(t=0;t<e.length&&e.charAt(t)!=b64pad$1;++t)(n=b64map.indexOf(e.charAt(t)))<0||(0==a?(i+=int2char(n>>2),r=3&n,a=1):1==a?(i+=int2char(r<<2|n>>4),r=15&n,a=2):2==a?(i+=int2char(r),i+=int2char(n>>2),r=3&n,a=3):(i+=int2char(r<<2|n>>4),i+=int2char(15&n),a=0));return 1==a&&(i+=int2char(r<<2)),i}function b64toBA(e){var t,r=b64tohex(e),n=new Array;for(t=0;2*t<r.length;++t)n[t]=parseInt(r.substring(2*t,2*t+2),16);return n}var canary=0xdeadbeefcafe,j_lm=15715070==(16777215&canary);function BigInteger(e,t,r){null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function nbi(){return new BigInteger(null)}function am1(e,t,r,n,i,a){for(;0<=--a;){var o=t*this[e++]+r[n]+i;i=Math.floor(o/67108864),r[n++]=67108863&o}return i}function am2(e,t,r,n,i,a){for(var o=32767&t,s=t>>15;0<=--a;){var c=32767&this[e],l=this[e++]>>15,u=s*c+l*o;i=((c=o*c+((32767&u)<<15)+r[n]+(1073741823&i))>>>30)+(u>>>15)+s*l+(i>>>30),r[n++]=1073741823&c}return i}function am3(e,t,r,n,i,a){for(var o=16383&t,s=t>>14;0<=--a;){var c=16383&this[e],l=this[e++]>>14,u=s*c+l*o;i=((c=o*c+((16383&u)<<14)+r[n]+i)>>28)+(u>>14)+s*l,r[n++]=268435455&c}return i}j_lm&&"Microsoft Internet Explorer"==navigator$1.appName?(BigInteger.prototype.am=am2,dbits=30):j_lm&&"Netscape"!=navigator$1.appName?(BigInteger.prototype.am=am1,dbits=26):(BigInteger.prototype.am=am3,dbits=28),BigInteger.prototype.DB=dbits,BigInteger.prototype.DM=(1<<dbits)-1,BigInteger.prototype.DV=1<<dbits;var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP),BigInteger.prototype.F1=BI_FP-dbits,BigInteger.prototype.F2=2*dbits-BI_FP;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz",BI_RC=new Array,rr,vv;for(rr="0".charCodeAt(0),vv=0;vv<=9;++vv)BI_RC[rr++]=vv;for(rr="a".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;for(rr="A".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;function int2char(e){return BI_RM.charAt(e)}function intAt(e,t){var r=BI_RC[e.charCodeAt(t)];return null==r?-1:r}function bnpCopyTo(e){for(var t=this.t-1;0<=t;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function bnpFromInt(e){this.t=1,this.s=e<0?-1:0,0<e?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0}function nbv(e){var t=nbi();return t.fromInt(e),t}function bnpFromString(e,t){var r;if(16==t)r=4;else if(8==t)r=3;else if(256==t)r=8;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return void this.fromRadix(e,t);r=2}this.t=0,this.s=0;for(var n=e.length,i=!1,a=0;0<=--n;){var o=8==r?255&e[n]:intAt(e,n);o<0?"-"==e.charAt(n)&&(i=!0):(i=!1,0==a?this[this.t++]=o:a+r>this.DB?(this[this.t-1]|=(o&(1<<this.DB-a)-1)<<a,this[this.t++]=o>>this.DB-a):this[this.t-1]|=o<<a,(a+=r)>=this.DB&&(a-=this.DB))}8==r&&0!=(128&e[0])&&(this.s=-1,0<a&&(this[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),i&&BigInteger.ZERO.subTo(this,this)}function bnpClamp(){for(var e=this.s&this.DM;0<this.t&&this[this.t-1]==e;)--this.t}function bnToString(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,n=(1<<t)-1,i=!1,a="",o=this.t,s=this.DB-o*this.DB%t;if(0<o--)for(s<this.DB&&0<(r=this[o]>>s)&&(i=!0,a=int2char(r));0<=o;)s<t?(r=(this[o]&(1<<s)-1)<<t-s,r|=this[--o]>>(s+=this.DB-t)):(r=this[o]>>(s-=t)&n,s<=0&&(s+=this.DB,--o)),0<r&&(i=!0),i&&(a+=int2char(r));return i?a:"0"}function bnNegate(){var e=nbi();return BigInteger.ZERO.subTo(this,e),e}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;0<=--r;)if(0!=(t=this[r]-e[r]))return t;return 0}function nbits(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function bnBitLength(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(e,t){var r;for(r=this.t-1;0<=r;--r)t[r+e]=this[r];for(r=e-1;0<=r;--r)t[r]=0;t.t=this.t+e,t.s=this.s}function bnpDRShiftTo(e,t){for(var r=e;r<this.t;++r)t[r-e]=this[r];t.t=Math.max(this.t-e,0),t.s=this.s}function bnpLShiftTo(e,t){var r,n=e%this.DB,i=this.DB-n,a=(1<<i)-1,o=Math.floor(e/this.DB),s=this.s<<n&this.DM;for(r=this.t-1;0<=r;--r)t[r+o+1]=this[r]>>i|s,s=(this[r]&a)<<n;for(r=o-1;0<=r;--r)t[r]=0;t[o]=s,t.t=this.t+o+1,t.s=this.s,t.clamp()}function bnpRShiftTo(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var n=e%this.DB,i=this.DB-n,a=(1<<n)-1;t[0]=this[r]>>n;for(var o=r+1;o<this.t;++o)t[o-r-1]|=(this[o]&a)<<i,t[o-r]=this[o]>>n;0<n&&(t[this.t-r-1]|=(this.s&a)<<i),t.t=this.t-r,t.clamp()}}function bnpSubTo(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this[r]-e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e[r],t[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t[r++]=this.DV+n:0<n&&(t[r++]=n),t.t=r,t.clamp()}function bnpMultiplyTo(e,t){var r=this.abs(),n=e.abs(),i=r.t;for(t.t=i+n.t;0<=--i;)t[i]=0;for(i=0;i<n.t;++i)t[i+r.t]=r.am(0,n[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&BigInteger.ZERO.subTo(t,t)}function bnpSquareTo(e){for(var t=this.abs(),r=e.t=2*t.t;0<=--r;)e[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t[r],e,2*r,0,1);(e[r+t.t]+=t.am(r+1,2*t[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e[r+t.t]-=t.DV,e[r+t.t+1]=1)}0<e.t&&(e[e.t-1]+=t.am(r,t[r],e,2*r,0,1)),e.s=0,e.clamp()}function bnpDivRemTo(e,t,r){var n=e.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t)return null!=t&&t.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=nbi());var a=nbi(),o=this.s,s=e.s,c=this.DB-nbits(n[n.t-1]);0<c?(n.lShiftTo(c,a),i.lShiftTo(c,r)):(n.copyTo(a),i.copyTo(r));var l=a.t,u=a[l-1];if(0!=u){var h=u*(1<<this.F1)+(1<l?a[l-2]>>this.F2:0),f=this.FV/h,d=(1<<this.F1)/h,g=1<<this.F2,p=r.t,b=p-l,y=null==t?nbi():t;for(a.dlShiftTo(b,y),0<=r.compareTo(y)&&(r[r.t++]=1,r.subTo(y,r)),BigInteger.ONE.dlShiftTo(l,y),y.subTo(a,a);a.t<l;)a[a.t++]=0;for(;0<=--b;){var m=r[--p]==u?this.DM:Math.floor(r[p]*f+(r[p-1]+g)*d);if((r[p]+=a.am(0,m,r,b,0,l))<m)for(a.dlShiftTo(b,y),r.subTo(y,r);r[p]<--m;)r.subTo(y,r)}null!=t&&(r.drShiftTo(l,t),o!=s&&BigInteger.ZERO.subTo(t,t)),r.t=l,r.clamp(),0<c&&r.rShiftTo(c,r),o<0&&BigInteger.ZERO.subTo(r,r)}}}function bnMod(e){var t=nbi();return this.abs().divRemTo(e,null,t),this.s<0&&0<t.compareTo(BigInteger.ZERO)&&e.subTo(t,t),t}function Classic(e){this.m=e}function cConvert(e){return e.s<0||0<=e.compareTo(this.m)?e.mod(this.m):e}function cRevert(e){return e}function cReduce(e){e.divRemTo(this.m,null,e)}function cMulTo(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function cSqrTo(e,t){e.squareTo(t),this.reduce(t)}function bnpInvDigit(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return 0<(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)?this.DV-t:-t}function Montgomery(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function montConvert(e){var t=nbi();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&0<t.compareTo(BigInteger.ZERO)&&this.m.subTo(t,t),t}function montRevert(e){var t=nbi();return e.copyTo(t),this.reduce(t),t}function montReduce(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e[t],n=r*this.mpl+((r*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[r=t+this.m.t]+=this.m.am(0,n,e,t,0,this.m.t);e[r]>=e.DV;)e[r]-=e.DV,e[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),0<=e.compareTo(this.m)&&e.subTo(this.m,e)}function montSqrTo(e,t){e.squareTo(t),this.reduce(t)}function montMulTo(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function bnpIsEven(){return 0==(0<this.t?1&this[0]:this.s)}function bnpExp(e,t){if(4294967295<e||e<1)return BigInteger.ONE;var r=nbi(),n=nbi(),i=t.convert(this),a=nbits(e)-1;for(i.copyTo(r);0<=--a;)if(t.sqrTo(r,n),0<(e&1<<a))t.mulTo(n,i,r);else{var o=r;r=n,n=o}return t.revert(r)}function bnModPowInt(e,t){var r;return r=e<256||t.isEven()?new Classic(t):new Montgomery(t),this.exp(e,r)}function bnClone(){var e=nbi();return this.copyTo(e),e}function bnIntValue(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function bnByteValue(){return 0==this.t?this.s:this[0]<<24>>24}function bnShortValue(){return 0==this.t?this.s:this[0]<<16>>16}function bnpChunkSize(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function bnSigNum(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function bnpToRadix(e){if(null==e&&(e=10),0==this.signum()||e<2||36<e)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=nbv(r),i=nbi(),a=nbi(),o="";for(this.divRemTo(n,i,a);0<i.signum();)o=(r+a.intValue()).toString(e).substr(1)+o,i.divRemTo(n,i,a);return a.intValue().toString(e)+o}function bnpFromRadix(e,t){this.fromInt(0),null==t&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),i=!1,a=0,o=0,s=0;s<e.length;++s){var c=intAt(e,s);c<0?"-"==e.charAt(s)&&0==this.signum()&&(i=!0):(o=t*o+c,++a>=r&&(this.dMultiply(n),this.dAddOffset(o,0),o=a=0))}0<a&&(this.dMultiply(Math.pow(t,a)),this.dAddOffset(o,0)),i&&BigInteger.ZERO.subTo(this,this)}function bnpFromNumber(e,t,r){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(BigInteger.ONE.shiftLeft(e-1),op_or,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(BigInteger.ONE.shiftLeft(e-1),this);else{var n=new Array,i=7&e;n.length=1+(e>>3),t.nextBytes(n),0<i?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function bnToByteArray(){var e=this.t,t=new Array;t[0]=this.s;var r,n=this.DB-e*this.DB%8,i=0;if(0<e--)for(n<this.DB&&(r=this[e]>>n)!=(this.s&this.DM)>>n&&(t[i++]=r|this.s<<this.DB-n);0<=e;)n<8?(r=(this[e]&(1<<n)-1)<<8-n,r|=this[--e]>>(n+=this.DB-8)):(r=this[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(0<i||r!=this.s)&&(t[i++]=r);return t}function bnEquals(e){return 0==this.compareTo(e)}function bnMin(e){return this.compareTo(e)<0?this:e}function bnMax(e){return 0<this.compareTo(e)?this:e}function bnpBitwiseTo(e,t,r){var n,i,a=Math.min(e.t,this.t);for(n=0;n<a;++n)r[n]=t(this[n],e[n]);if(e.t<this.t){for(i=e.s&this.DM,n=a;n<this.t;++n)r[n]=t(this[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=a;n<e.t;++n)r[n]=t(i,e[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()}function op_and(e,t){return e&t}function bnAnd(e){var t=nbi();return this.bitwiseTo(e,op_and,t),t}function op_or(e,t){return e|t}function bnOr(e){var t=nbi();return this.bitwiseTo(e,op_or,t),t}function op_xor(e,t){return e^t}function bnXor(e){var t=nbi();return this.bitwiseTo(e,op_xor,t),t}function op_andnot(e,t){return e&~t}function bnAndNot(e){var t=nbi();return this.bitwiseTo(e,op_andnot,t),t}function bnNot(){for(var e=nbi(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e}function bnShiftLeft(e){var t=nbi();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function bnShiftRight(e){var t=nbi();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function lbit(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function bnGetLowestSetBit(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+lbit(this[e]);return this.s<0?this.t*this.DB:-1}function cbit(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function bnBitCount(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=cbit(this[r]^t);return e}function bnTestBit(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)}function bnpChangeBit(e,t){var r=BigInteger.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r}function bnSetBit(e){return this.changeBit(e,op_or)}function bnClearBit(e){return this.changeBit(e,op_andnot)}function bnFlipBit(e){return this.changeBit(e,op_xor)}function bnpAddTo(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this[r]+e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e[r],t[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,0<n?t[r++]=n:n<-1&&(t[r++]=this.DV+n),t.t=r,t.clamp()}function bnAdd(e){var t=nbi();return this.addTo(e,t),t}function bnSubtract(e){var t=nbi();return this.subTo(e,t),t}function bnMultiply(e){var t=nbi();return this.multiplyTo(e,t),t}function bnSquare(){var e=nbi();return this.squareTo(e),e}function bnDivide(e){var t=nbi();return this.divRemTo(e,t,null),t}function bnRemainder(e){var t=nbi();return this.divRemTo(e,null,t),t}function bnDivideAndRemainder(e){var t=nbi(),r=nbi();return this.divRemTo(e,t,r),new Array(t,r)}function bnpDMultiply(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function bnpDAddOffset(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}}function NullExp(){}function nNop(e){return e}function nMulTo(e,t,r){e.multiplyTo(t,r)}function nSqrTo(e,t){e.squareTo(t)}function bnPow(e){return this.exp(e,new NullExp)}function bnpMultiplyLowerTo(e,t,r){var n,i=Math.min(this.t+e.t,t);for(r.s=0,r.t=i;0<i;)r[--i]=0;for(n=r.t-this.t;i<n;++i)r[i+this.t]=this.am(0,e[i],r,i,0,this.t);for(n=Math.min(e.t,t);i<n;++i)this.am(0,e[i],r,i,0,t-i);r.clamp()}function bnpMultiplyUpperTo(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;0<=--n;)r[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r[this.t+n-t]=this.am(t-n,e[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)}function Barrett(e){this.r2=nbi(),this.q3=nbi(),BigInteger.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function barrettConvert(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=nbi();return e.copyTo(t),this.reduce(t),t}function barrettRevert(e){return e}function barrettReduce(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);0<=e.compareTo(this.m);)e.subTo(this.m,e)}function barrettSqrTo(e,t){e.squareTo(t),this.reduce(t)}function barrettMulTo(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function bnModPow(e,t){var r,n,i=e.bitLength(),a=nbv(1);if(i<=0)return a;r=i<18?1:i<48?3:i<144?4:i<768?5:6,n=i<8?new Classic(t):t.isEven()?new Barrett(t):new Montgomery(t);var o=new Array,s=3,c=r-1,l=(1<<r)-1;if(o[1]=n.convert(this),1<r){var u=nbi();for(n.sqrTo(o[1],u);s<=l;)o[s]=nbi(),n.mulTo(u,o[s-2],o[s]),s+=2}var h,f,d=e.t-1,g=!0,p=nbi();for(i=nbits(e[d])-1;0<=d;){for(c<=i?h=e[d]>>i-c&l:(h=(e[d]&(1<<i+1)-1)<<c-i,0<d&&(h|=e[d-1]>>this.DB+i-c)),s=r;0==(1&h);)h>>=1,--s;if((i-=s)<0&&(i+=this.DB,--d),g)o[h].copyTo(a),g=!1;else{for(;1<s;)n.sqrTo(a,p),n.sqrTo(p,a),s-=2;0<s?n.sqrTo(a,p):(f=a,a=p,p=f),n.mulTo(p,o[h],a)}for(;0<=d&&0==(e[d]&1<<i);)n.sqrTo(a,p),f=a,a=p,p=f,--i<0&&(i=this.DB-1,--d)}return n.revert(a)}function bnGCD(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),a=r.getLowestSetBit();if(a<0)return t;for(i<a&&(a=i),0<a&&(t.rShiftTo(a,t),r.rShiftTo(a,r));0<t.signum();)0<(i=t.getLowestSetBit())&&t.rShiftTo(i,t),0<(i=r.getLowestSetBit())&&r.rShiftTo(i,r),0<=t.compareTo(r)?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return 0<a&&r.lShiftTo(a,r),r}function bnpModInt(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(0<this.t)if(0==t)r=this[0]%e;else for(var n=this.t-1;0<=n;--n)r=(t*r+this[n])%e;return r}function bnModInverse(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return BigInteger.ZERO;for(var r=e.clone(),n=this.clone(),i=nbv(1),a=nbv(0),o=nbv(0),s=nbv(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),t?(i.isEven()&&a.isEven()||(i.addTo(this,i),a.subTo(e,a)),i.rShiftTo(1,i)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);for(;n.isEven();)n.rShiftTo(1,n),t?(o.isEven()&&s.isEven()||(o.addTo(this,o),s.subTo(e,s)),o.rShiftTo(1,o)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);0<=r.compareTo(n)?(r.subTo(n,r),t&&i.subTo(o,i),a.subTo(s,a)):(n.subTo(r,n),t&&o.subTo(i,o),s.subTo(a,s))}return 0!=n.compareTo(BigInteger.ONE)?BigInteger.ZERO:0<=s.compareTo(e)?s.subtract(e):s.signum()<0?(s.addTo(e,s),s.signum()<0?s.add(e):s):s}Classic.prototype.convert=cConvert,Classic.prototype.revert=cRevert,Classic.prototype.reduce=cReduce,Classic.prototype.mulTo=cMulTo,Classic.prototype.sqrTo=cSqrTo,Montgomery.prototype.convert=montConvert,Montgomery.prototype.revert=montRevert,Montgomery.prototype.reduce=montReduce,Montgomery.prototype.mulTo=montMulTo,Montgomery.prototype.sqrTo=montSqrTo,BigInteger.prototype.copyTo=bnpCopyTo,BigInteger.prototype.fromInt=bnpFromInt,BigInteger.prototype.fromString=bnpFromString,BigInteger.prototype.clamp=bnpClamp,BigInteger.prototype.dlShiftTo=bnpDLShiftTo,BigInteger.prototype.drShiftTo=bnpDRShiftTo,BigInteger.prototype.lShiftTo=bnpLShiftTo,BigInteger.prototype.rShiftTo=bnpRShiftTo,BigInteger.prototype.subTo=bnpSubTo,BigInteger.prototype.multiplyTo=bnpMultiplyTo,BigInteger.prototype.squareTo=bnpSquareTo,BigInteger.prototype.divRemTo=bnpDivRemTo,BigInteger.prototype.invDigit=bnpInvDigit,BigInteger.prototype.isEven=bnpIsEven,BigInteger.prototype.exp=bnpExp,BigInteger.prototype.toString=bnToString,BigInteger.prototype.negate=bnNegate,BigInteger.prototype.abs=bnAbs,BigInteger.prototype.compareTo=bnCompareTo,BigInteger.prototype.bitLength=bnBitLength,BigInteger.prototype.mod=bnMod,BigInteger.prototype.modPowInt=bnModPowInt,BigInteger.ZERO=nbv(0),BigInteger.ONE=nbv(1),NullExp.prototype.convert=nNop,NullExp.prototype.revert=nNop,NullExp.prototype.mulTo=nMulTo,NullExp.prototype.sqrTo=nSqrTo,Barrett.prototype.convert=barrettConvert,Barrett.prototype.revert=barrettRevert,Barrett.prototype.reduce=barrettReduce,Barrett.prototype.mulTo=barrettMulTo,Barrett.prototype.sqrTo=barrettSqrTo;var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],lplim=(1<<26)/lowprimes[lowprimes.length-1];function bnIsProbablePrime(e){var t,r=this.abs();if(1==r.t&&r[0]<=lowprimes[lowprimes.length-1]){for(t=0;t<lowprimes.length;++t)if(r[0]==lowprimes[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<lowprimes.length;){for(var n=lowprimes[t],i=t+1;i<lowprimes.length&&n<lplim;)n*=lowprimes[i++];for(n=r.modInt(n);t<i;)if(n%lowprimes[t++]==0)return!1}return r.millerRabin(e)}function bnpMillerRabin(e){var t=this.subtract(BigInteger.ONE),r=t.getLowestSetBit();if(r<=0)return!1;var n=t.shiftRight(r);(e=e+1>>1)>lowprimes.length&&(e=lowprimes.length);for(var i=nbi(),a=0;a<e;++a){i.fromInt(lowprimes[Math.floor(Math.random()*lowprimes.length)]);var o=i.modPow(n,this);if(0!=o.compareTo(BigInteger.ONE)&&0!=o.compareTo(t)){for(var s=1;s++<r&&0!=o.compareTo(t);)if(0==(o=o.modPowInt(2,this)).compareTo(BigInteger.ONE))return!1;if(0!=o.compareTo(t))return!1}}return!0}function Arcfour(){this.i=0,this.j=0,this.S=new Array}function ARC4init(e){var t,r,n;for(t=0;t<256;++t)this.S[t]=t;for(t=r=0;t<256;++t)r=r+this.S[t]+e[t%e.length]&255,n=this.S[t],this.S[t]=this.S[r],this.S[r]=n;this.i=0,this.j=0}function ARC4next(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]}function prng_newstate(){return new Arcfour}BigInteger.prototype.chunkSize=bnpChunkSize,BigInteger.prototype.toRadix=bnpToRadix,BigInteger.prototype.fromRadix=bnpFromRadix,BigInteger.prototype.fromNumber=bnpFromNumber,BigInteger.prototype.bitwiseTo=bnpBitwiseTo,BigInteger.prototype.changeBit=bnpChangeBit,BigInteger.prototype.addTo=bnpAddTo,BigInteger.prototype.dMultiply=bnpDMultiply,BigInteger.prototype.dAddOffset=bnpDAddOffset,BigInteger.prototype.multiplyLowerTo=bnpMultiplyLowerTo,BigInteger.prototype.multiplyUpperTo=bnpMultiplyUpperTo,BigInteger.prototype.modInt=bnpModInt,BigInteger.prototype.millerRabin=bnpMillerRabin,BigInteger.prototype.clone=bnClone,BigInteger.prototype.intValue=bnIntValue,BigInteger.prototype.byteValue=bnByteValue,BigInteger.prototype.shortValue=bnShortValue,BigInteger.prototype.signum=bnSigNum,BigInteger.prototype.toByteArray=bnToByteArray,BigInteger.prototype.equals=bnEquals,BigInteger.prototype.min=bnMin,BigInteger.prototype.max=bnMax,BigInteger.prototype.and=bnAnd,BigInteger.prototype.or=bnOr,BigInteger.prototype.xor=bnXor,BigInteger.prototype.andNot=bnAndNot,BigInteger.prototype.not=bnNot,BigInteger.prototype.shiftLeft=bnShiftLeft,BigInteger.prototype.shiftRight=bnShiftRight,BigInteger.prototype.getLowestSetBit=bnGetLowestSetBit,BigInteger.prototype.bitCount=bnBitCount,BigInteger.prototype.testBit=bnTestBit,BigInteger.prototype.setBit=bnSetBit,BigInteger.prototype.clearBit=bnClearBit,BigInteger.prototype.flipBit=bnFlipBit,BigInteger.prototype.add=bnAdd,BigInteger.prototype.subtract=bnSubtract,BigInteger.prototype.multiply=bnMultiply,BigInteger.prototype.divide=bnDivide,BigInteger.prototype.remainder=bnRemainder,BigInteger.prototype.divideAndRemainder=bnDivideAndRemainder,BigInteger.prototype.modPow=bnModPow,BigInteger.prototype.modInverse=bnModInverse,BigInteger.prototype.pow=bnPow,BigInteger.prototype.gcd=bnGCD,BigInteger.prototype.isProbablePrime=bnIsProbablePrime,BigInteger.prototype.square=bnSquare,Arcfour.prototype.init=ARC4init,Arcfour.prototype.next=ARC4next;var rng_psize=256,rng_state,rng_pool,rng_pptr;function rng_seed_int(e){rng_pool[rng_pptr++]^=255&e,rng_pool[rng_pptr++]^=e>>8&255,rng_pool[rng_pptr++]^=e>>16&255,rng_pool[rng_pptr++]^=e>>24&255,rng_psize<=rng_pptr&&(rng_pptr-=rng_psize)}function rng_seed_time(){rng_seed_int((new Date).getTime())}if(null==rng_pool){var t;if(rng_pool=new Array,rng_pptr=0,void 0!==window$1&&(void 0!==window$1.crypto||void 0!==window$1.msCrypto)){var crypto=window$1.crypto||window$1.msCrypto;if(crypto.getRandomValues){var ua=new Uint8Array(32);for(crypto.getRandomValues(ua),t=0;t<32;++t)rng_pool[rng_pptr++]=ua[t]}else if("Netscape"==navigator$1.appName&&navigator$1.appVersion<"5"){var z=window$1.crypto.random(32);for(t=0;t<z.length;++t)rng_pool[rng_pptr++]=255&z.charCodeAt(t)}}for(;rng_pptr<rng_psize;)t=Math.floor(65536*Math.random()),rng_pool[rng_pptr++]=t>>>8,rng_pool[rng_pptr++]=255&t;rng_pptr=0,rng_seed_time()}function rng_get_byte(){if(null==rng_state){for(rng_seed_time(),(rng_state=prng_newstate()).init(rng_pool),rng_pptr=0;rng_pptr<rng_pool.length;++rng_pptr)rng_pool[rng_pptr]=0;rng_pptr=0}return rng_state.next()}function rng_get_bytes(e){var t;for(t=0;t<e.length;++t)e[t]=rng_get_byte()}function SecureRandom(){}function parseBigInt(e,t){return new BigInteger(e,t)}function pkcs1pad2(e,t){if(t<e.length+11)throw"Message too long for RSA";for(var r=new Array,n=e.length-1;0<=n&&0<t;){var i=e.charCodeAt(n--);i<128?r[--t]=i:127<i&&i<2048?(r[--t]=63&i|128,r[--t]=i>>6|192):(r[--t]=63&i|128,r[--t]=i>>6&63|128,r[--t]=i>>12|224)}r[--t]=0;for(var a=new SecureRandom,o=new Array;2<t;){for(o[0]=0;0==o[0];)a.nextBytes(o);r[--t]=o[0]}return r[--t]=2,r[--t]=0,new BigInteger(r)}function oaep_mgf1_arr(e,t,r){for(var n="",i=0;n.length<t;)n+=r(String.fromCharCode.apply(String,e.concat([(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i]))),i+=1;return n}function oaep_pad(e,t,r,n){var i=KJUR.crypto.MessageDigest,a=KJUR.crypto.Util,o=null;if(r||(r="sha1"),"string"==typeof r&&(o=i.getCanonicalAlgName(r),n=i.getHashLength(o),r=function(e){return hextorstr(a.hashHex(rstrtohex(e),o))}),e.length+2*n+2>t)throw"Message too long for RSA";var s,c="";for(s=0;s<t-e.length-2*n-2;s+=1)c+="\0";var l=r("")+c+""+e,u=new Array(n);(new SecureRandom).nextBytes(u);var h=oaep_mgf1_arr(u,l.length,r),f=[];for(s=0;s<l.length;s+=1)f[s]=l.charCodeAt(s)^h.charCodeAt(s);var d=oaep_mgf1_arr(f,u.length,r),g=[0];for(s=0;s<u.length;s+=1)g[s+1]=u[s]^d.charCodeAt(s);return new BigInteger(g.concat(f))}function RSAKey(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function RSASetPublic(e,t){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof e)this.n=e,this.e=t;else{if(!(null!=e&&null!=t&&0<e.length&&0<t.length))throw"Invalid RSA public key";this.n=parseBigInt(e,16),this.e=parseInt(t,16)}}function RSADoPublic(e){return e.modPowInt(this.e,this.n)}function RSAEncrypt(e){var t=pkcs1pad2(e,this.n.bitLength()+7>>3);if(null==t)return null;var r=this.doPublic(t);if(null==r)return null;var n=r.toString(16);return 0==(1&n.length)?n:"0"+n}function RSAEncryptOAEP(e,t,r){var n=oaep_pad(e,this.n.bitLength()+7>>3,t,r);if(null==n)return null;var i=this.doPublic(n);if(null==i)return null;var a=i.toString(16);return 0==(1&a.length)?a:"0"+a}function pkcs1unpad2(e,t){for(var r=e.toByteArray(),n=0;n<r.length&&0==r[n];)++n;if(r.length-n!=t-1||2!=r[n])return null;for(++n;0!=r[n];)if(++n>=r.length)return null;for(var i="";++n<r.length;){var a=255&r[n];a<128?i+=String.fromCharCode(a):191<a&&a<224?(i+=String.fromCharCode((31&a)<<6|63&r[n+1]),++n):(i+=String.fromCharCode((15&a)<<12|(63&r[n+1])<<6|63&r[n+2]),n+=2)}return i}function oaep_mgf1_str(e,t,r){for(var n="",i=0;n.length<t;)n+=r(e+String.fromCharCode.apply(String,[(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i])),i+=1;return n}function oaep_unpad(e,t,r,n){var i=KJUR.crypto.MessageDigest,a=KJUR.crypto.Util,o=null;for(r||(r="sha1"),"string"==typeof r&&(o=i.getCanonicalAlgName(r),n=i.getHashLength(o),r=function(e){return hextorstr(a.hashHex(rstrtohex(e),o))}),e=e.toByteArray(),s=0;s<e.length;s+=1)e[s]&=255;for(;e.length<t;)e.unshift(0);if((e=String.fromCharCode.apply(String,e)).length<2*n+2)throw"Cipher too short";var s,c=e.substr(1,n),l=e.substr(n+1),u=oaep_mgf1_str(l,n,r),h=[];for(s=0;s<c.length;s+=1)h[s]=c.charCodeAt(s)^u.charCodeAt(s);var f=oaep_mgf1_str(String.fromCharCode.apply(String,h),e.length-n,r),d=[];for(s=0;s<l.length;s+=1)d[s]=l.charCodeAt(s)^f.charCodeAt(s);if((d=String.fromCharCode.apply(String,d)).substr(0,n)!==r(""))throw"Hash mismatch";var g=(d=d.substr(n)).indexOf("");if((-1!=g?d.substr(0,g).lastIndexOf("\0"):-1)+1!=g)throw"Malformed data";return d.substr(g+1)}function RSASetPrivate(e,t,r){if(this.isPrivate=!0,"string"!=typeof e)this.n=e,this.e=t,this.d=r;else{if(!(null!=e&&null!=t&&0<e.length&&0<t.length))throw"Invalid RSA private key";this.n=parseBigInt(e,16),this.e=parseInt(t,16),this.d=parseBigInt(r,16)}}function RSASetPrivateEx(e,t,r,n,i,a,o,s){if(this.isPrivate=!0,this.isPublic=!1,null==e)throw"RSASetPrivateEx N == null";if(null==t)throw"RSASetPrivateEx E == null";if(0==e.length)throw"RSASetPrivateEx N.length == 0";if(0==t.length)throw"RSASetPrivateEx E.length == 0";if(!(null!=e&&null!=t&&0<e.length&&0<t.length))throw"Invalid RSA private key in RSASetPrivateEx";this.n=parseBigInt(e,16),this.e=parseInt(t,16),this.d=parseBigInt(r,16),this.p=parseBigInt(n,16),this.q=parseBigInt(i,16),this.dmp1=parseBigInt(a,16),this.dmq1=parseBigInt(o,16),this.coeff=parseBigInt(s,16)}function RSAGenerate(e,t){var r=new SecureRandom,n=e>>1;this.e=parseInt(t,16);for(var i=new BigInteger(t,16);;){for(;this.p=new BigInteger(e-n,1,r),0!=this.p.subtract(BigInteger.ONE).gcd(i).compareTo(BigInteger.ONE)||!this.p.isProbablePrime(10););for(;this.q=new BigInteger(n,1,r),0!=this.q.subtract(BigInteger.ONE).gcd(i).compareTo(BigInteger.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var a=this.p;this.p=this.q,this.q=a}var o=this.p.subtract(BigInteger.ONE),s=this.q.subtract(BigInteger.ONE),c=o.multiply(s);if(0==c.gcd(i).compareTo(BigInteger.ONE)){this.n=this.p.multiply(this.q),this.d=i.modInverse(c),this.dmp1=this.d.mod(o),this.dmq1=this.d.mod(s),this.coeff=this.q.modInverse(this.p);break}}this.isPrivate=!0}function RSADoPrivate(e){if(null==this.p||null==this.q)return e.modPow(this.d,this.n);for(var t=e.mod(this.p).modPow(this.dmp1,this.p),r=e.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(r)<0;)t=t.add(this.p);return t.subtract(r).multiply(this.coeff).mod(this.p).multiply(this.q).add(r)}function RSADecrypt(e){var t=parseBigInt(e,16),r=this.doPrivate(t);return null==r?null:pkcs1unpad2(r,this.n.bitLength()+7>>3)}function RSADecryptOAEP(e,t,r){var n=parseBigInt(e,16),i=this.doPrivate(n);return null==i?null:oaep_unpad(i,this.n.bitLength()+7>>3,t,r)}function ECFieldElementFp(e,t){this.x=t,this.q=e}function feFpEquals(e){return e==this||this.q.equals(e.q)&&this.x.equals(e.x)}function feFpToBigInteger(){return this.x}function feFpNegate(){return new ECFieldElementFp(this.q,this.x.negate().mod(this.q))}function feFpAdd(e){return new ECFieldElementFp(this.q,this.x.add(e.toBigInteger()).mod(this.q))}function feFpSubtract(e){return new ECFieldElementFp(this.q,this.x.subtract(e.toBigInteger()).mod(this.q))}function feFpMultiply(e){return new ECFieldElementFp(this.q,this.x.multiply(e.toBigInteger()).mod(this.q))}function feFpSquare(){return new ECFieldElementFp(this.q,this.x.square().mod(this.q))}function feFpDivide(e){return new ECFieldElementFp(this.q,this.x.multiply(e.toBigInteger().modInverse(this.q)).mod(this.q))}function ECPointFp(e,t,r,n){this.curve=e,this.x=t,this.y=r,this.z=null==n?BigInteger.ONE:n,this.zinv=null}function pointFpGetX(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function pointFpGetY(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function pointFpEquals(e){return e==this||(this.isInfinity()?e.isInfinity():e.isInfinity()?this.isInfinity():!!e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q).equals(BigInteger.ZERO)&&e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q).equals(BigInteger.ZERO))}function pointFpIsInfinity(){return null==this.x&&null==this.y||this.z.equals(BigInteger.ZERO)&&!this.y.toBigInteger().equals(BigInteger.ZERO)}function pointFpNegate(){return new ECPointFp(this.curve,this.x,this.y.negate(),this.z)}function pointFpAdd(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q),r=e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q);if(BigInteger.ZERO.equals(r))return BigInteger.ZERO.equals(t)?this.twice():this.curve.getInfinity();var n=new BigInteger("3"),i=this.x.toBigInteger(),a=this.y.toBigInteger(),o=(e.x.toBigInteger(),e.y.toBigInteger(),r.square()),s=o.multiply(r),c=i.multiply(o),l=t.square().multiply(this.z),u=l.subtract(c.shiftLeft(1)).multiply(e.z).subtract(s).multiply(r).mod(this.curve.q),h=c.multiply(n).multiply(t).subtract(a.multiply(s)).subtract(l.multiply(t)).multiply(e.z).add(t.multiply(s)).mod(this.curve.q),f=s.multiply(this.z).multiply(e.z).mod(this.curve.q);return new ECPointFp(this.curve,this.curve.fromBigInteger(u),this.curve.fromBigInteger(h),f)}function pointFpTwice(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var e=new BigInteger("3"),t=this.x.toBigInteger(),r=this.y.toBigInteger(),n=r.multiply(this.z),i=n.multiply(r).mod(this.curve.q),a=this.curve.a.toBigInteger(),o=t.square().multiply(e);BigInteger.ZERO.equals(a)||(o=o.add(this.z.square().multiply(a)));var s=(o=o.mod(this.curve.q)).square().subtract(t.shiftLeft(3).multiply(i)).shiftLeft(1).multiply(n).mod(this.curve.q),c=o.multiply(e).multiply(t).subtract(i.shiftLeft(1)).shiftLeft(2).multiply(i).subtract(o.square().multiply(o)).mod(this.curve.q),l=n.square().multiply(n).shiftLeft(3).mod(this.curve.q);return new ECPointFp(this.curve,this.curve.fromBigInteger(s),this.curve.fromBigInteger(c),l)}function pointFpMultiply(e){if(this.isInfinity())return this;if(0==e.signum())return this.curve.getInfinity();var t,r=e,n=r.multiply(new BigInteger("3")),i=this.negate(),a=this;for(t=n.bitLength()-2;0<t;--t){a=a.twice();var o=n.testBit(t);o!=r.testBit(t)&&(a=a.add(o?this:i))}return a}function pointFpMultiplyTwo(e,t,r){var n;n=e.bitLength()>r.bitLength()?e.bitLength()-1:r.bitLength()-1;for(var i=this.curve.getInfinity(),a=this.add(t);0<=n;)i=i.twice(),e.testBit(n)?i=r.testBit(n)?i.add(a):i.add(this):r.testBit(n)&&(i=i.add(t)),--n;return i}function ECCurveFp(e,t,r){this.q=e,this.a=this.fromBigInteger(t),this.b=this.fromBigInteger(r),this.infinity=new ECPointFp(this,null,null)}function curveFpGetQ(){return this.q}function curveFpGetA(){return this.a}function curveFpGetB(){return this.b}function curveFpEquals(e){return e==this||this.q.equals(e.q)&&this.a.equals(e.a)&&this.b.equals(e.b)}function curveFpGetInfinity(){return this.infinity}function curveFpFromBigInteger(e){return new ECFieldElementFp(this.q,e)}function curveFpDecodePointHex(e){switch(parseInt(e.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var t=(e.length-2)/2,r=e.substr(2,t),n=e.substr(t+2,t);return new ECPointFp(this,this.fromBigInteger(new BigInteger(r,16)),this.fromBigInteger(new BigInteger(n,16)));default:return null}}SecureRandom.prototype.nextBytes=rng_get_bytes,RSAKey.prototype.doPublic=RSADoPublic,RSAKey.prototype.setPublic=RSASetPublic,RSAKey.prototype.encrypt=RSAEncrypt,RSAKey.prototype.encryptOAEP=RSAEncryptOAEP,RSAKey.prototype.type="RSA",RSAKey.prototype.doPrivate=RSADoPrivate,RSAKey.prototype.setPrivate=RSASetPrivate,RSAKey.prototype.setPrivateEx=RSASetPrivateEx,RSAKey.prototype.generate=RSAGenerate,RSAKey.prototype.decrypt=RSADecrypt,RSAKey.prototype.decryptOAEP=RSADecryptOAEP,ECFieldElementFp.prototype.equals=feFpEquals,ECFieldElementFp.prototype.toBigInteger=feFpToBigInteger,ECFieldElementFp.prototype.negate=feFpNegate,ECFieldElementFp.prototype.add=feFpAdd,ECFieldElementFp.prototype.subtract=feFpSubtract,ECFieldElementFp.prototype.multiply=feFpMultiply,ECFieldElementFp.prototype.square=feFpSquare,ECFieldElementFp.prototype.divide=feFpDivide,ECPointFp.prototype.getX=pointFpGetX,ECPointFp.prototype.getY=pointFpGetY,ECPointFp.prototype.equals=pointFpEquals,ECPointFp.prototype.isInfinity=pointFpIsInfinity,ECPointFp.prototype.negate=pointFpNegate,ECPointFp.prototype.add=pointFpAdd,ECPointFp.prototype.twice=pointFpTwice,ECPointFp.prototype.multiply=pointFpMultiply,ECPointFp.prototype.multiplyTwo=pointFpMultiplyTwo,ECCurveFp.prototype.getQ=curveFpGetQ,ECCurveFp.prototype.getA=curveFpGetA,ECCurveFp.prototype.getB=curveFpGetB,ECCurveFp.prototype.equals=curveFpEquals,ECCurveFp.prototype.getInfinity=curveFpGetInfinity,ECCurveFp.prototype.fromBigInteger=curveFpFromBigInteger,ECCurveFp.prototype.decodePointHex=curveFpDecodePointHex,ECFieldElementFp.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},ECPointFp.prototype.getEncoded=function(e){var t=function(e,t){var r=e.toByteArrayUnsigned();if(t<r.length)r=r.slice(r.length-t);else for(;t>r.length;)r.unshift(0);return r},r=this.getX().toBigInteger(),n=this.getY().toBigInteger(),i=t(r,32);return e?n.isEven()?i.unshift(2):i.unshift(3):(i.unshift(4),i=i.concat(t(n,32))),i},ECPointFp.decodeFrom=function(e,t){t[0];var r=t.length-1,n=t.slice(1,1+r/2),i=t.slice(1+r/2,1+r);n.unshift(0),i.unshift(0);var a=new BigInteger(n),o=new BigInteger(i);return new ECPointFp(e,e.fromBigInteger(a),e.fromBigInteger(o))},ECPointFp.decodeFromHex=function(e,t){t.substr(0,2);var r=t.length-2,n=t.substr(2,r/2),i=t.substr(2+r/2,r/2),a=new BigInteger(n,16),o=new BigInteger(i,16);return new ECPointFp(e,e.fromBigInteger(a),e.fromBigInteger(o))},ECPointFp.prototype.add2D=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;if(this.x.equals(e.x))return this.y.equals(e.y)?this.twice():this.curve.getInfinity();var t=e.x.subtract(this.x),r=e.y.subtract(this.y).divide(t),n=r.square().subtract(this.x).subtract(e.x),i=r.multiply(this.x.subtract(n)).subtract(this.y);return new ECPointFp(this.curve,n,i)},ECPointFp.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var e=this.curve.fromBigInteger(BigInteger.valueOf(2)),t=this.curve.fromBigInteger(BigInteger.valueOf(3)),r=this.x.square().multiply(t).add(this.curve.a).divide(this.y.multiply(e)),n=r.square().subtract(this.x.multiply(e)),i=r.multiply(this.x.subtract(n)).subtract(this.y);return new ECPointFp(this.curve,n,i)},ECPointFp.prototype.multiply2D=function(e){if(this.isInfinity())return this;if(0==e.signum())return this.curve.getInfinity();var t,r=e,n=r.multiply(new BigInteger("3")),i=this.negate(),a=this;for(t=n.bitLength()-2;0<t;--t){a=a.twice();var o=n.testBit(t);o!=r.testBit(t)&&(a=a.add2D(o?this:i))}return a},ECPointFp.prototype.isOnCurve=function(){var e=this.getX().toBigInteger(),t=this.getY().toBigInteger(),r=this.curve.getA().toBigInteger(),n=this.curve.getB().toBigInteger(),i=this.curve.getQ(),a=t.multiply(t).mod(i),o=e.multiply(e).multiply(e).add(r.multiply(e)).add(n).mod(i);return a.equals(o)},ECPointFp.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},ECPointFp.prototype.validate=function(){var e=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var t=this.getX().toBigInteger(),r=this.getY().toBigInteger();if(t.compareTo(BigInteger.ONE)<0||0<t.compareTo(e.subtract(BigInteger.ONE)))throw new Error("x coordinate out of bounds");if(r.compareTo(BigInteger.ONE)<0||0<r.compareTo(e.subtract(BigInteger.ONE)))throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(e).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var jsonParse=function(){var f=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),d=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),n={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function g(e,t,r){return t?n[t]:String.fromCharCode(parseInt(r,16))}var p=new String(""),b=Object.hasOwnProperty;return function(e,s){var t,r,n=e.match(f),i=n[0],a=!1;"{"===i?t={}:"["===i?t=[]:(t=[],a=!0);for(var o=[t],c=1-a,l=n.length;c<l;++c){var u;switch((i=n[c]).charCodeAt(0)){default:(u=o[0])[r||u.length]=+i,r=void 0;break;case 34:if(-1!==(i=i.substring(1,i.length-1)).indexOf("\\")&&(i=i.replace(d,g)),u=o[0],!r){if(!(u instanceof Array)){r=i||p;break}r=u.length}u[r]=i,r=void 0;break;case 91:u=o[0],o.unshift(u[r||u.length]=[]),r=void 0;break;case 93:o.shift();break;case 102:(u=o[0])[r||u.length]=!1,r=void 0;break;case 110:(u=o[0])[r||u.length]=null,r=void 0;break;case 116:(u=o[0])[r||u.length]=!0,r=void 0;break;case 123:u=o[0],o.unshift(u[r||u.length]={}),r=void 0;break;case 125:o.shift()}}if(a){if(1!==o.length)throw new Error;t=t[0]}else if(o.length)throw new Error;if(s){var h=function(e,t){var r=e[t];if(r&&"object"==typeof r){var n=null;for(var i in r)if(b.call(r,i)&&r!==e){var a=h(r,i);void 0!==a?r[i]=a:(n||(n=[]),n.push(i))}if(n)for(var o=n.length;0<=--o;)delete r[n[o]]}return s.call(e,t,r)};t=h({"":t},"")}return t}}();void 0!==KJUR&&KJUR||(KJUR={}),void 0!==KJUR.asn1&&KJUR.asn1||(KJUR.asn1={}),KJUR.asn1.ASN1Util=new function(){this.integerToByteHex=function(e){var t=e.toString(16);return t.length%2==1&&(t="0"+t),t},this.bigIntToMinTwosComplementsHex=function(e){var t=e.toString(16);if("-"!=t.substr(0,1))t.length%2==1?t="0"+t:t.match(/^[0-7]/)||(t="00"+t);else{var r=t.substr(1).length;r%2==1?r+=1:t.match(/^[0-7]/)||(r+=2);for(var n="",i=0;i<r;i++)n+="f";t=new BigInteger(n,16).xor(e).add(BigInteger.ONE).toString(16).replace(/^-/,"")}return t},this.getPEMStringFromHex=function(e,t){return hextopem(e,t)},this.newObject=function(e){var t=KJUR.asn1,r=t.DERBoolean,n=t.DERInteger,i=t.DERBitString,a=t.DEROctetString,o=t.DERNull,s=t.DERObjectIdentifier,c=t.DEREnumerated,l=t.DERUTF8String,u=t.DERNumericString,h=t.DERPrintableString,f=t.DERTeletexString,d=t.DERIA5String,g=t.DERUTCTime,p=t.DERGeneralizedTime,b=t.DERSequence,y=t.DERSet,m=t.DERTaggedObject,v=t.ASN1Util.newObject,I=Object.keys(e);if(1!=I.length)throw"key of param shall be only one.";var w=I[0];if(-1==":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+w+":"))throw"undefined key: "+w;if("bool"==w)return new r(e[w]);if("int"==w)return new n(e[w]);if("bitstr"==w)return new i(e[w]);if("octstr"==w)return new a(e[w]);if("null"==w)return new o(e[w]);if("oid"==w)return new s(e[w]);if("enum"==w)return new c(e[w]);if("utf8str"==w)return new l(e[w]);if("numstr"==w)return new u(e[w]);if("prnstr"==w)return new h(e[w]);if("telstr"==w)return new f(e[w]);if("ia5str"==w)return new d(e[w]);if("utctime"==w)return new g(e[w]);if("gentime"==w)return new p(e[w]);if("seq"==w){for(var C=e[w],A=[],S=0;S<C.length;S++){var x=v(C[S]);A.push(x)}return new b({array:A})}if("set"==w){for(C=e[w],A=[],S=0;S<C.length;S++){x=v(C[S]);A.push(x)}return new y({array:A})}if("tag"==w){var _=e[w];if("[object Array]"===Object.prototype.toString.call(_)&&3==_.length){var E=v(_[2]);return new m({tag:_[0],explicit:_[1],obj:E})}var k={};if(void 0!==_.explicit&&(k.explicit=_.explicit),void 0!==_.tag&&(k.tag=_.tag),void 0===_.obj)throw"obj shall be specified for 'tag'.";return k.obj=v(_.obj),new m(k)}},this.jsonToASN1HEX=function(e){return this.newObject(e).getEncodedHex()}},KJUR.asn1.ASN1Util.oidHexToInt=function(e){for(var t="",r=parseInt(e.substr(0,2),16),n=(t=Math.floor(r/40)+"."+r%40,""),i=2;i<e.length;i+=2){var a=("00000000"+parseInt(e.substr(i,2),16).toString(2)).slice(-8);if(n+=a.substr(1,7),"0"==a.substr(0,1))t=t+"."+new BigInteger(n,2).toString(10),n=""}return t},KJUR.asn1.ASN1Util.oidIntToHex=function(e){var s=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},t=function(e){var t="",r=new BigInteger(e,10).toString(2),n=7-r.length%7;7==n&&(n=0);for(var i="",a=0;a<n;a++)i+="0";r=i+r;for(a=0;a<r.length-1;a+=7){var o=r.substr(a,7);a!=r.length-7&&(o="1"+o),t+=s(parseInt(o,2))}return t};if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var r="",n=e.split("."),i=40*parseInt(n[0])+parseInt(n[1]);r+=s(i),n.splice(0,2);for(var a=0;a<n.length;a++)r+=t(n[a]);return r},KJUR.asn1.ASN1Object=function(){this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n="+"".length+",v="+this.hV;var e=this.hV.length/2,t=e.toString(16);if(t.length%2==1&&(t="0"+t),e<128)return t;var r=t.length/2;if(15<r)throw"ASN.1 length too long to represent by 8x: n = "+e.toString(16);return(128+r).toString(16)+t},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},KJUR.asn1.DERAbstractString=function(e){KJUR.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=utf8tohex(this.s).toLowerCase()},this.setStringHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e?this.setString(e):void 0!==e.str?this.setString(e.str):void 0!==e.hex&&this.setStringHex(e.hex))},YAHOO.lang.extend(KJUR.asn1.DERAbstractString,KJUR.asn1.ASN1Object),KJUR.asn1.DERAbstractTime=function(e){KJUR.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(e){return utc=e.getTime()+6e4*e.getTimezoneOffset(),new Date(utc)},this.formatDate=function(e,t,r){var n=this.zeroPadding,i=this.localDateToUTC(e),a=String(i.getFullYear());"utc"==t&&(a=a.substr(2,2));var o=a+n(String(i.getMonth()+1),2)+n(String(i.getDate()),2)+n(String(i.getHours()),2)+n(String(i.getMinutes()),2)+n(String(i.getSeconds()),2);if(!0===r){var s=i.getMilliseconds();if(0!=s){var c=n(String(s),3);o=o+"."+(c=c.replace(/[0]+$/,""))}}return o+"Z"},this.zeroPadding=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e},this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=stohex(e)},this.setByDateValue=function(e,t,r,n,i,a){var o=new Date(Date.UTC(e,t-1,r,n,i,a,0));this.setByDate(o)},this.getFreshValueHex=function(){return this.hV}},YAHOO.lang.extend(KJUR.asn1.DERAbstractTime,KJUR.asn1.ASN1Object),KJUR.asn1.DERAbstractStructured=function(e){KJUR.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array=e},this.appendASN1Object=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array.push(e)},this.asn1Array=new Array,void 0!==e&&void 0!==e.array&&(this.asn1Array=e.array)},YAHOO.lang.extend(KJUR.asn1.DERAbstractStructured,KJUR.asn1.ASN1Object),KJUR.asn1.DERBoolean=function(){KJUR.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},YAHOO.lang.extend(KJUR.asn1.DERBoolean,KJUR.asn1.ASN1Object),KJUR.asn1.DERInteger=function(e){KJUR.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var t=new BigInteger(String(e),10);this.setByBigInteger(t)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.bigint?this.setByBigInteger(e.bigint):void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},YAHOO.lang.extend(KJUR.asn1.DERInteger,KJUR.asn1.ASN1Object),KJUR.asn1.DERBitString=function(e){if(void 0!==e&&void 0!==e.obj){var t=KJUR.asn1.ASN1Util.newObject(e.obj);e.hex="00"+t.getEncodedHex()}KJUR.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(e){this.hTLV=null,this.isModified=!0,this.hV=e},this.setUnusedBitsAndHexValue=function(e,t){if(e<0||7<e)throw"unused bits shall be from 0 to 7: u = "+e;var r="0"+e;this.hTLV=null,this.isModified=!0,this.hV=r+t},this.setByBinaryString=function(e){var t=8-(e=e.replace(/0+$/,"")).length%8;8==t&&(t=0);for(var r=0;r<=t;r++)e+="0";var n="";for(r=0;r<e.length-1;r+=8){var i=e.substr(r,8),a=parseInt(i,2).toString(16);1==a.length&&(a="0"+a),n+=a}this.hTLV=null,this.isModified=!0,this.hV="0"+t+n},this.setByBooleanArray=function(e){for(var t="",r=0;r<e.length;r++)1==e[r]?t+="1":t+="0";this.setByBinaryString(t)},this.newFalseArray=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=!1;return t},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e&&e.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(e):void 0!==e.hex?this.setHexValueIncludingUnusedBits(e.hex):void 0!==e.bin?this.setByBinaryString(e.bin):void 0!==e.array&&this.setByBooleanArray(e.array))},YAHOO.lang.extend(KJUR.asn1.DERBitString,KJUR.asn1.ASN1Object),KJUR.asn1.DEROctetString=function(e){if(void 0!==e&&void 0!==e.obj){var t=KJUR.asn1.ASN1Util.newObject(e.obj);e.hex=t.getEncodedHex()}KJUR.asn1.DEROctetString.superclass.constructor.call(this,e),this.hT="04"},YAHOO.lang.extend(KJUR.asn1.DEROctetString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERNull=function(){KJUR.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},YAHOO.lang.extend(KJUR.asn1.DERNull,KJUR.asn1.ASN1Object),KJUR.asn1.DERObjectIdentifier=function(e){var s=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},a=function(e){var t="",r=new BigInteger(e,10).toString(2),n=7-r.length%7;7==n&&(n=0);for(var i="",a=0;a<n;a++)i+="0";r=i+r;for(a=0;a<r.length-1;a+=7){var o=r.substr(a,7);a!=r.length-7&&(o="1"+o),t+=s(parseInt(o,2))}return t};KJUR.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.setValueOidString=function(e){if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var t="",r=e.split("."),n=40*parseInt(r[0])+parseInt(r[1]);t+=s(n),r.splice(0,2);for(var i=0;i<r.length;i++)t+=a(r[i]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueName=function(e){var t=KJUR.asn1.x509.OID.name2oid(e);if(""===t)throw"DERObjectIdentifier oidName undefined: "+e;this.setValueOidString(t)},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e?e.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(e):this.setValueName(e):void 0!==e.oid?this.setValueOidString(e.oid):void 0!==e.hex?this.setValueHex(e.hex):void 0!==e.name&&this.setValueName(e.name))},YAHOO.lang.extend(KJUR.asn1.DERObjectIdentifier,KJUR.asn1.ASN1Object),KJUR.asn1.DEREnumerated=function(e){KJUR.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var t=new BigInteger(String(e),10);this.setByBigInteger(t)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},YAHOO.lang.extend(KJUR.asn1.DEREnumerated,KJUR.asn1.ASN1Object),KJUR.asn1.DERUTF8String=function(e){KJUR.asn1.DERUTF8String.superclass.constructor.call(this,e),this.hT="0c"},YAHOO.lang.extend(KJUR.asn1.DERUTF8String,KJUR.asn1.DERAbstractString),KJUR.asn1.DERNumericString=function(e){KJUR.asn1.DERNumericString.superclass.constructor.call(this,e),this.hT="12"},YAHOO.lang.extend(KJUR.asn1.DERNumericString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERPrintableString=function(e){KJUR.asn1.DERPrintableString.superclass.constructor.call(this,e),this.hT="13"},YAHOO.lang.extend(KJUR.asn1.DERPrintableString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERTeletexString=function(e){KJUR.asn1.DERTeletexString.superclass.constructor.call(this,e),this.hT="14"},YAHOO.lang.extend(KJUR.asn1.DERTeletexString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERIA5String=function(e){KJUR.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="16"},YAHOO.lang.extend(KJUR.asn1.DERIA5String,KJUR.asn1.DERAbstractString),KJUR.asn1.DERUTCTime=function(e){KJUR.asn1.DERUTCTime.superclass.constructor.call(this,e),this.hT="17",this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{12}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date))},YAHOO.lang.extend(KJUR.asn1.DERUTCTime,KJUR.asn1.DERAbstractTime),KJUR.asn1.DERGeneralizedTime=function(e){KJUR.asn1.DERGeneralizedTime.superclass.constructor.call(this,e),this.hT="18",this.withMillis=!1,this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{14}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date),!0===e.millis&&(this.withMillis=!0))},YAHOO.lang.extend(KJUR.asn1.DERGeneralizedTime,KJUR.asn1.DERAbstractTime),KJUR.asn1.DERSequence=function(e){KJUR.asn1.DERSequence.superclass.constructor.call(this,e),this.hT="30",this.getFreshValueHex=function(){for(var e="",t=0;t<this.asn1Array.length;t++){e+=this.asn1Array[t].getEncodedHex()}return this.hV=e,this.hV}},YAHOO.lang.extend(KJUR.asn1.DERSequence,KJUR.asn1.DERAbstractStructured),KJUR.asn1.DERSet=function(e){KJUR.asn1.DERSet.superclass.constructor.call(this,e),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var e=new Array,t=0;t<this.asn1Array.length;t++){var r=this.asn1Array[t];e.push(r.getEncodedHex())}return 1==this.sortFlag&&e.sort(),this.hV=e.join(""),this.hV},void 0!==e&&void 0!==e.sortflag&&0==e.sortflag&&(this.sortFlag=!1)},YAHOO.lang.extend(KJUR.asn1.DERSet,KJUR.asn1.DERAbstractStructured),KJUR.asn1.DERTaggedObject=function(e){KJUR.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(e,t,r){this.hT=t,this.isExplicit=e,this.asn1Object=r,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=r.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,t),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.tag&&(this.hT=e.tag),void 0!==e.explicit&&(this.isExplicit=e.explicit),void 0!==e.obj&&(this.asn1Object=e.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},YAHOO.lang.extend(KJUR.asn1.DERTaggedObject,KJUR.asn1.ASN1Object);var ASN1HEX=new function(){},KJUR,utf8tob64u,b64utoutf8;function stoBA(e){for(var t=new Array,r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}function BAtos(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}function BAtohex(e){for(var t="",r=0;r<e.length;r++){var n=e[r].toString(16);1==n.length&&(n="0"+n),t+=n}return t}function stohex(e){return BAtohex(stoBA(e))}function stob64(e){return hex2b64(stohex(e))}function stob64u(e){return b64tob64u(hex2b64(stohex(e)))}function b64utos(e){return BAtos(b64toBA(b64utob64(e)))}function b64tob64u(e){return e=(e=(e=e.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function b64utob64(e){return e.length%4==2?e+="==":e.length%4==3&&(e+="="),e=(e=e.replace(/-/g,"+")).replace(/_/g,"/")}function hextob64u(e){return e.length%2==1&&(e="0"+e),b64tob64u(hex2b64(e))}function b64utohex(e){return b64tohex(b64utob64(e))}function utf8tob64(e){return hex2b64(uricmptohex(encodeURIComponentAll(e)))}function b64toutf8(e){return decodeURIComponent(hextouricmp(b64tohex(e)))}function utf8tohex(e){return uricmptohex(encodeURIComponentAll(e))}function hextoutf8(e){return decodeURIComponent(hextouricmp(e))}function hextorstr(e){for(var t="",r=0;r<e.length-1;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t}function rstrtohex(e){for(var t="",r=0;r<e.length;r++)t+=("0"+e.charCodeAt(r).toString(16)).slice(-2);return t}function hextob64(e){return hex2b64(e)}function hextob64nl(e){var t=hextob64(e).replace(/(.{64})/g,"$1\r\n");return t=t.replace(/\r\n$/,"")}function b64nltohex(e){return b64tohex(e.replace(/[^0-9A-Za-z\/+=]*/g,""))}function hextopem(e,t){return"-----BEGIN "+t+"-----\r\n"+hextob64nl(e)+"\r\n-----END "+t+"-----\r\n"}function pemtohex(e,t){if(-1==e.indexOf("-----BEGIN "))throw"can't find PEM header: "+t;return b64nltohex(e=void 0!==t?(e=e.replace("-----BEGIN "+t+"-----","")).replace("-----END "+t+"-----",""):(e=e.replace(/-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----/,""))}function hextoArrayBuffer(e){if(e.length%2!=0)throw"input is not even length";if(null==e.match(/^[0-9A-Fa-f]+$/))throw"input is not hexadecimal";for(var t=new ArrayBuffer(e.length/2),r=new DataView(t),n=0;n<e.length/2;n++)r.setUint8(n,parseInt(e.substr(2*n,2),16));return t}function ArrayBuffertohex(e){for(var t="",r=new DataView(e),n=0;n<e.byteLength;n++)t+=("00"+r.getUint8(n).toString(16)).slice(-2);return t}function zulutomsec(e){var t,r,n,i,a,o,s,c,l,u,h;if(h=e.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return c=h[1],t=parseInt(c),2===c.length&&(50<=t&&t<100?t=1900+t:0<=t&&t<50&&(t=2e3+t)),r=parseInt(h[2])-1,n=parseInt(h[3]),i=parseInt(h[4]),a=parseInt(h[5]),o=parseInt(h[6]),s=0,""!==(l=h[7])&&(u=(l.substr(1)+"00").substr(0,3),s=parseInt(u)),Date.UTC(t,r,n,i,a,o,s);throw"unsupported zulu format: "+e}function zulutosec(e){return~~(zulutomsec(e)/1e3)}function zulutodate(e){return new Date(zulutomsec(e))}function datetozulu(e,t,r){var n,i=e.getUTCFullYear();if(t){if(i<1950||2049<i)throw"not proper year for UTCTime: "+i;n=(""+i).slice(-2)}else n=("000"+i).slice(-4);if(n+=("0"+(e.getUTCMonth()+1)).slice(-2),n+=("0"+e.getUTCDate()).slice(-2),n+=("0"+e.getUTCHours()).slice(-2),n+=("0"+e.getUTCMinutes()).slice(-2),n+=("0"+e.getUTCSeconds()).slice(-2),r){var a=e.getUTCMilliseconds();0!==a&&(n+="."+(a=(a=("00"+a).slice(-3)).replace(/0+$/g,"")))}return n+="Z"}function uricmptohex(e){return e.replace(/%/g,"")}function hextouricmp(e){return e.replace(/(..)/g,"%$1")}function ipv6tohex(e){var t="malformed IPv6 address";if(!e.match(/^[0-9A-Fa-f:]+$/))throw t;var r=(e=e.toLowerCase()).split(":").length-1;if(r<2)throw t;var n=":".repeat(7-r+2),i=(e=e.replace("::",n)).split(":");if(8!=i.length)throw t;for(var a=0;a<8;a++)i[a]=("0000"+i[a]).slice(-4);return i.join("")}function hextoipv6(e){if(!e.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var t=(e=e.toLowerCase()).match(/.{1,4}/g),r=0;r<8;r++)t[r]=t[r].replace(/^0+/,""),""==t[r]&&(t[r]="0");var n=(e=":"+t.join(":")+":").match(/:(0:){2,}/g);if(null===n)return e.slice(1,-1);var i="";for(r=0;r<n.length;r++)n[r].length>i.length&&(i=n[r]);return(e=e.replace(i,"::")).slice(1,-1)}function hextoip(e){var t="malformed hex value";if(!e.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw t;if(8!=e.length)return 32==e.length?hextoipv6(e):e;try{return parseInt(e.substr(0,2),16)+"."+parseInt(e.substr(2,2),16)+"."+parseInt(e.substr(4,2),16)+"."+parseInt(e.substr(6,2),16)}catch(e){throw t}}function iptohex(e){var t="malformed IP address";if(!(e=e.toLowerCase(e)).match(/^[0-9.]+$/)){if(e.match(/^[0-9a-f:]+$/)&&-1!==e.indexOf(":"))return ipv6tohex(e);throw t}var r=e.split(".");if(4!==r.length)throw t;var n="";try{for(var i=0;i<4;i++){n+=("0"+parseInt(r[i]).toString(16)).slice(-2)}return n}catch(e){throw t}}function encodeURIComponentAll(e){for(var t=encodeURIComponent(e),r="",n=0;n<t.length;n++)"%"==t[n]?(r+=t.substr(n,3),n+=2):r=r+"%"+stohex(t[n]);return r}function newline_toUnix(e){return e=e.replace(/\r\n/gm,"\n")}function newline_toDos(e){return e=(e=e.replace(/\r\n/gm,"\n")).replace(/\n/gm,"\r\n")}function hextoposhex(e){return e.length%2==1?"0"+e:"7"<e.substr(0,1)?"00"+e:e}function intarystrtohex(e){e=(e=(e=e.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return e.split(/,/).map(function(e,t,r){var n=parseInt(e);if(n<0||255<n)throw"integer not in range 0-255";return("00"+n.toString(16)).slice(-2)}).join("")}catch(e){throw"malformed integer array string: "+e}}ASN1HEX.getLblen=function(e,t){if("8"!=e.substr(t+2,1))return 1;var r=parseInt(e.substr(t+3,1));return 0==r?-1:0<r&&r<10?r+1:-2},ASN1HEX.getL=function(e,t){var r=ASN1HEX.getLblen(e,t);return r<1?"":e.substr(t+2,2*r)},ASN1HEX.getVblen=function(e,t){var r;return""==(r=ASN1HEX.getL(e,t))?-1:("8"===r.substr(0,1)?new BigInteger(r.substr(2),16):new BigInteger(r,16)).intValue()},ASN1HEX.getVidx=function(e,t){var r=ASN1HEX.getLblen(e,t);return r<0?r:t+2*(r+1)},ASN1HEX.getV=function(e,t){var r=ASN1HEX.getVidx(e,t),n=ASN1HEX.getVblen(e,t);return e.substr(r,2*n)},ASN1HEX.getTLV=function(e,t){return e.substr(t,2)+ASN1HEX.getL(e,t)+ASN1HEX.getV(e,t)},ASN1HEX.getNextSiblingIdx=function(e,t){return ASN1HEX.getVidx(e,t)+2*ASN1HEX.getVblen(e,t)},ASN1HEX.getChildIdx=function(e,t){var r=ASN1HEX,n=new Array,i=r.getVidx(e,t);"03"==e.substr(t,2)?n.push(i+2):n.push(i);for(var a=r.getVblen(e,t),o=i,s=0;;){var c=r.getNextSiblingIdx(e,o);if(null==c||2*a<=c-i)break;if(200<=s)break;n.push(c),o=c,s++}return n},ASN1HEX.getNthChildIdx=function(e,t,r){return ASN1HEX.getChildIdx(e,t)[r]},ASN1HEX.getIdxbyList=function(e,t,r,n){var i,a,o=ASN1HEX;if(0==r.length){if(void 0!==n&&e.substr(t,2)!==n)throw"checking tag doesn't match: "+e.substr(t,2)+"!="+n;return t}return i=r.shift(),a=o.getChildIdx(e,t),o.getIdxbyList(e,a[i],r,n)},ASN1HEX.getTLVbyList=function(e,t,r,n){var i=ASN1HEX,a=i.getIdxbyList(e,t,r);if(void 0===a)throw"can't find nthList object";if(void 0!==n&&e.substr(a,2)!=n)throw"checking tag doesn't match: "+e.substr(a,2)+"!="+n;return i.getTLV(e,a)},ASN1HEX.getVbyList=function(e,t,r,n,i){var a,o,s=ASN1HEX;if(void 0===(a=s.getIdxbyList(e,t,r,n)))throw"can't find nthList object";return o=s.getV(e,a),!0===i&&(o=o.substr(2)),o},ASN1HEX.hextooidstr=function(e){var t=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e},r=[],n=e.substr(0,2),i=parseInt(n,16);r[0]=new String(Math.floor(i/40)),r[1]=new String(i%40);for(var a=e.substr(2),o=[],s=0;s<a.length/2;s++)o.push(parseInt(a.substr(2*s,2),16));var c=[],l="";for(s=0;s<o.length;s++)128&o[s]?l+=t((127&o[s]).toString(2),7):(l+=t((127&o[s]).toString(2),7),c.push(new String(parseInt(l,2))),l="");var u=r.join(".");return 0<c.length&&(u=u+"."+c.join(".")),u},ASN1HEX.dump=function(e,t,r,n){var i=ASN1HEX,a=i.getV,o=i.dump,s=i.getChildIdx,c=e;e instanceof KJUR.asn1.ASN1Object&&(c=e.getEncodedHex());var l=function(e,t){return e.length<=2*t?e:e.substr(0,t)+"..(total "+e.length/2+"bytes).."+e.substr(e.length-t,t)};void 0===t&&(t={ommit_long_octet:32}),void 0===r&&(r=0),void 0===n&&(n="");var u=t.ommit_long_octet;if("01"==c.substr(r,2))return"00"==(h=a(c,r))?n+"BOOLEAN FALSE\n":n+"BOOLEAN TRUE\n";if("02"==c.substr(r,2))return n+"INTEGER "+l(h=a(c,r),u)+"\n";if("03"==c.substr(r,2))return n+"BITSTRING "+l(h=a(c,r),u)+"\n";if("04"==c.substr(r,2)){var h=a(c,r);if(i.isASN1HEX(h)){var f=n+"OCTETSTRING, encapsulates\n";return f+=o(h,t,0,n+"  ")}return n+"OCTETSTRING "+l(h,u)+"\n"}if("05"==c.substr(r,2))return n+"NULL\n";if("06"==c.substr(r,2)){var d=a(c,r),g=KJUR.asn1.ASN1Util.oidHexToInt(d),p=KJUR.asn1.x509.OID.oid2name(g),b=g.replace(/\./g," ");return""!=p?n+"ObjectIdentifier "+p+" ("+b+")\n":n+"ObjectIdentifier ("+b+")\n"}if("0c"==c.substr(r,2))return n+"UTF8String '"+hextoutf8(a(c,r))+"'\n";if("13"==c.substr(r,2))return n+"PrintableString '"+hextoutf8(a(c,r))+"'\n";if("14"==c.substr(r,2))return n+"TeletexString '"+hextoutf8(a(c,r))+"'\n";if("16"==c.substr(r,2))return n+"IA5String '"+hextoutf8(a(c,r))+"'\n";if("17"==c.substr(r,2))return n+"UTCTime "+hextoutf8(a(c,r))+"\n";if("18"==c.substr(r,2))return n+"GeneralizedTime "+hextoutf8(a(c,r))+"\n";if("30"==c.substr(r,2)){if("3000"==c.substr(r,4))return n+"SEQUENCE {}\n";f=n+"SEQUENCE\n";var y=t;if((2==(I=s(c,r)).length||3==I.length)&&"06"==c.substr(I[0],2)&&"04"==c.substr(I[I.length-1],2)){p=i.oidname(a(c,I[0]));var m=JSON.parse(JSON.stringify(t));m.x509ExtName=p,y=m}for(var v=0;v<I.length;v++)f+=o(c,y,I[v],n+"  ");return f}if("31"==c.substr(r,2)){f=n+"SET\n";var I=s(c,r);for(v=0;v<I.length;v++)f+=o(c,t,I[v],n+"  ");return f}var w=parseInt(c.substr(r,2),16);if(0!=(128&w)){var C=31&w;if(0!=(32&w)){var f=n+"["+C+"]\n";for(I=s(c,r),v=0;v<I.length;v++)f+=o(c,t,I[v],n+"  ");return f}return"68747470"==(h=a(c,r)).substr(0,8)&&(h=hextoutf8(h)),"subjectAltName"===t.x509ExtName&&2==C&&(h=hextoutf8(h)),f=n+"["+C+"] "+h+"\n"}return n+"UNKNOWN("+c.substr(r,2)+") "+a(c,r)+"\n"},ASN1HEX.isASN1HEX=function(e){var t=ASN1HEX;if(e.length%2==1)return!1;var r=t.getVblen(e,0),n=e.substr(0,2),i=t.getL(e,0);return e.length-n.length-i.length==2*r},ASN1HEX.oidname=function(e){var t=KJUR.asn1;KJUR.lang.String.isHex(e)&&(e=t.ASN1Util.oidHexToInt(e));var r=t.x509.OID.oid2name(e);return""===r&&(r=e),r},void 0!==KJUR&&KJUR||(KJUR={}),void 0!==KJUR.asn1&&KJUR.asn1||(KJUR.asn1={}),void 0!==KJUR.asn1.x509&&KJUR.asn1.x509||(KJUR.asn1.x509={}),KJUR.asn1.x509.Certificate=function(e){KJUR.asn1.x509.Certificate.superclass.constructor.call(this);var t=KJUR,r=(t.crypto,t.asn1),n=r.DERSequence,i=r.DERBitString;this.sign=function(){this.asn1SignatureAlg=this.asn1TBSCert.asn1SignatureAlg;var e=new KJUR.crypto.Signature({alg:this.asn1SignatureAlg.nameAlg});e.init(this.prvKey),e.updateHex(this.asn1TBSCert.getEncodedHex()),this.hexSig=e.sign(),this.asn1Sig=new i({hex:"00"+this.hexSig});var t=new n({array:[this.asn1TBSCert,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=t.getEncodedHex(),this.isModified=!1},this.setSignatureHex=function(e){this.asn1SignatureAlg=this.asn1TBSCert.asn1SignatureAlg,this.hexSig=e,this.asn1Sig=new i({hex:"00"+this.hexSig});var t=new n({array:[this.asn1TBSCert,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=t.getEncodedHex(),this.isModified=!1},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},this.getPEMString=function(){return"-----BEGIN CERTIFICATE-----\r\n"+hextob64nl(this.getEncodedHex())+"\r\n-----END CERTIFICATE-----\r\n"},void 0!==e&&(void 0!==e.tbscertobj&&(this.asn1TBSCert=e.tbscertobj),void 0!==e.prvkeyobj&&(this.prvKey=e.prvkeyobj))},YAHOO.lang.extend(KJUR.asn1.x509.Certificate,KJUR.asn1.ASN1Object),KJUR.asn1.x509.TBSCertificate=function(e){KJUR.asn1.x509.TBSCertificate.superclass.constructor.call(this);var t=KJUR.asn1,i=t.DERSequence,r=t.DERInteger,a=t.DERTaggedObject,n=t.x509,o=n.Time,s=n.X500Name,c=n.SubjectPublicKeyInfo;this._initialize=function(){this.asn1Array=new Array,this.asn1Version=new a({obj:new r({int:2})}),this.asn1SerialNumber=null,this.asn1SignatureAlg=null,this.asn1Issuer=null,this.asn1NotBefore=null,this.asn1NotAfter=null,this.asn1Subject=null,this.asn1SubjPKey=null,this.extensionsArray=new Array},this.setSerialNumberByParam=function(e){this.asn1SerialNumber=new r(e)},this.setSignatureAlgByParam=function(e){this.asn1SignatureAlg=new n.AlgorithmIdentifier(e)},this.setIssuerByParam=function(e){this.asn1Issuer=new s(e)},this.setNotBeforeByParam=function(e){this.asn1NotBefore=new o(e)},this.setNotAfterByParam=function(e){this.asn1NotAfter=new o(e)},this.setSubjectByParam=function(e){this.asn1Subject=new s(e)},this.setSubjectPublicKey=function(e){this.asn1SubjPKey=new c(e)},this.setSubjectPublicKeyByGetKey=function(e){var t=KEYUTIL.getKey(e);this.asn1SubjPKey=new c(t)},this.appendExtension=function(e){this.extensionsArray.push(e)},this.appendExtensionByName=function(e,t){KJUR.asn1.x509.Extension.appendByNameToArray(e,t,this.extensionsArray)},this.getEncodedHex=function(){if(null==this.asn1NotBefore||null==this.asn1NotAfter)throw"notBefore and/or notAfter not set";var e=new i({array:[this.asn1NotBefore,this.asn1NotAfter]});if(this.asn1Array=new Array,this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1SerialNumber),this.asn1Array.push(this.asn1SignatureAlg),this.asn1Array.push(this.asn1Issuer),this.asn1Array.push(e),this.asn1Array.push(this.asn1Subject),this.asn1Array.push(this.asn1SubjPKey),0<this.extensionsArray.length){var t=new i({array:this.extensionsArray}),r=new a({explicit:!0,tag:"a3",obj:t});this.asn1Array.push(r)}var n=new i({array:this.asn1Array});return this.hTLV=n.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize()},YAHOO.lang.extend(KJUR.asn1.x509.TBSCertificate,KJUR.asn1.ASN1Object),KJUR.asn1.x509.Extension=function(e){KJUR.asn1.x509.Extension.superclass.constructor.call(this);var t=KJUR.asn1,n=t.DERObjectIdentifier,i=t.DEROctetString,a=(t.DERBitString,t.DERBoolean),o=t.DERSequence;this.getEncodedHex=function(){var e=new n({oid:this.oid}),t=new i({hex:this.getExtnValueHex()}),r=new Array;return r.push(e),this.critical&&r.push(new a),r.push(t),new o({array:r}).getEncodedHex()},this.critical=!1,void 0!==e&&void 0!==e.critical&&(this.critical=e.critical)},YAHOO.lang.extend(KJUR.asn1.x509.Extension,KJUR.asn1.ASN1Object),KJUR.asn1.x509.Extension.appendByNameToArray=function(e,t,r){var n=e.toLowerCase(),i=KJUR.asn1.x509;if("basicconstraints"==n){var a=new i.BasicConstraints(t);r.push(a)}else if("keyusage"==n){a=new i.KeyUsage(t);r.push(a)}else if("crldistributionpoints"==n){a=new i.CRLDistributionPoints(t);r.push(a)}else if("extkeyusage"==n){a=new i.ExtKeyUsage(t);r.push(a)}else if("authoritykeyidentifier"==n){a=new i.AuthorityKeyIdentifier(t);r.push(a)}else if("authorityinfoaccess"==n){a=new i.AuthorityInfoAccess(t);r.push(a)}else if("subjectaltname"==n){a=new i.SubjectAltName(t);r.push(a)}else{if("issueraltname"!=n)throw"unsupported extension name: "+e;a=new i.IssuerAltName(t);r.push(a)}},KJUR.asn1.x509.KeyUsage=function(e){KJUR.asn1.x509.KeyUsage.superclass.constructor.call(this,e);var t=X509.KEYUSAGE_NAME;if(this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.15",void 0!==e&&(void 0!==e.bin&&(this.asn1ExtnValue=new KJUR.asn1.DERBitString(e)),void 0!==e.names&&void 0!==e.names.length)){for(var r=e.names,n="000000000",i=0;i<r.length;i++)for(var a=0;a<t.length;a++)r[i]===t[a]&&(n=n.substring(0,a)+"1"+n.substring(a+1,n.length));this.asn1ExtnValue=new KJUR.asn1.DERBitString({bin:n})}},YAHOO.lang.extend(KJUR.asn1.x509.KeyUsage,KJUR.asn1.x509.Extension),KJUR.asn1.x509.BasicConstraints=function(e){KJUR.asn1.x509.BasicConstraints.superclass.constructor.call(this,e),this.getExtnValueHex=function(){var e=new Array;this.cA&&e.push(new KJUR.asn1.DERBoolean),-1<this.pathLen&&e.push(new KJUR.asn1.DERInteger({int:this.pathLen}));var t=new KJUR.asn1.DERSequence({array:e});return this.asn1ExtnValue=t,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,void 0!==e&&(void 0!==e.cA&&(this.cA=e.cA),void 0!==e.pathLen&&(this.pathLen=e.pathLen))},YAHOO.lang.extend(KJUR.asn1.x509.BasicConstraints,KJUR.asn1.x509.Extension),KJUR.asn1.x509.CRLDistributionPoints=function(e){KJUR.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,e);var t=KJUR.asn1,i=t.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.setByDPArray=function(e){this.asn1ExtnValue=new t.DERSequence({array:e})},this.setByOneURI=function(e){var t=new i.GeneralNames([{uri:e}]),r=new i.DistributionPointName(t),n=new i.DistributionPoint({dpobj:r});this.setByDPArray([n])},this.oid="2.5.29.31",void 0!==e&&(void 0!==e.array?this.setByDPArray(e.array):void 0!==e.uri&&this.setByOneURI(e.uri))},YAHOO.lang.extend(KJUR.asn1.x509.CRLDistributionPoints,KJUR.asn1.x509.Extension),KJUR.asn1.x509.ExtKeyUsage=function(e){KJUR.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,e);var n=KJUR.asn1;this.setPurposeArray=function(e){this.asn1ExtnValue=new n.DERSequence;for(var t=0;t<e.length;t++){var r=new n.DERObjectIdentifier(e[t]);this.asn1ExtnValue.appendASN1Object(r)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.37",void 0!==e&&void 0!==e.array&&this.setPurposeArray(e.array)},YAHOO.lang.extend(KJUR.asn1.x509.ExtKeyUsage,KJUR.asn1.x509.Extension),KJUR.asn1.x509.AuthorityKeyIdentifier=function(e){KJUR.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,e);var r=KJUR.asn1,n=r.DERTaggedObject;this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var e=new Array;this.asn1KID&&e.push(new n({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&e.push(new n({explicit:!1,tag:"a1",obj:this.asn1CertIssuer})),this.asn1CertSN&&e.push(new n({explicit:!1,tag:"82",obj:this.asn1CertSN}));var t=new r.DERSequence({array:e});return this.asn1ExtnValue=t,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(e){this.asn1KID=new KJUR.asn1.DEROctetString(e)},this.setCertIssuerByParam=function(e){this.asn1CertIssuer=new KJUR.asn1.x509.X500Name(e)},this.setCertSNByParam=function(e){this.asn1CertSN=new KJUR.asn1.DERInteger(e)},this.oid="2.5.29.35",void 0!==e&&(void 0!==e.kid&&this.setKIDByParam(e.kid),void 0!==e.issuer&&this.setCertIssuerByParam(e.issuer),void 0!==e.sn&&this.setCertSNByParam(e.sn))},YAHOO.lang.extend(KJUR.asn1.x509.AuthorityKeyIdentifier,KJUR.asn1.x509.Extension),KJUR.asn1.x509.AuthorityInfoAccess=function(e){KJUR.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,e),this.setAccessDescriptionArray=function(e){for(var t=new Array,r=KJUR.asn1,n=r.DERSequence,i=0;i<e.length;i++){var a=new n({array:[new r.DERObjectIdentifier(e[i].accessMethod),new r.x509.GeneralName(e[i].accessLocation)]});t.push(a)}this.asn1ExtnValue=new n({array:t})},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.1.1",void 0!==e&&void 0!==e.array&&this.setAccessDescriptionArray(e.array)},YAHOO.lang.extend(KJUR.asn1.x509.AuthorityInfoAccess,KJUR.asn1.x509.Extension),KJUR.asn1.x509.SubjectAltName=function(e){KJUR.asn1.x509.SubjectAltName.superclass.constructor.call(this,e),this.setNameArray=function(e){this.asn1ExtnValue=new KJUR.asn1.x509.GeneralNames(e)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.17",void 0!==e&&void 0!==e.array&&this.setNameArray(e.array)},YAHOO.lang.extend(KJUR.asn1.x509.SubjectAltName,KJUR.asn1.x509.Extension),KJUR.asn1.x509.IssuerAltName=function(e){KJUR.asn1.x509.IssuerAltName.superclass.constructor.call(this,e),this.setNameArray=function(e){this.asn1ExtnValue=new KJUR.asn1.x509.GeneralNames(e)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.18",void 0!==e&&void 0!==e.array&&this.setNameArray(e.array)},YAHOO.lang.extend(KJUR.asn1.x509.IssuerAltName,KJUR.asn1.x509.Extension),KJUR.asn1.x509.CRL=function(e){KJUR.asn1.x509.CRL.superclass.constructor.call(this),this.sign=function(){this.asn1SignatureAlg=this.asn1TBSCertList.asn1SignatureAlg,sig=new KJUR.crypto.Signature({alg:"SHA1withRSA",prov:"cryptojs/jsrsa"}),sig.init(this.prvKey),sig.updateHex(this.asn1TBSCertList.getEncodedHex()),this.hexSig=sig.sign(),this.asn1Sig=new KJUR.asn1.DERBitString({hex:"00"+this.hexSig});var e=new KJUR.asn1.DERSequence({array:[this.asn1TBSCertList,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=e.getEncodedHex(),this.isModified=!1},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},this.getPEMString=function(){return"-----BEGIN X509 CRL-----\r\n"+hextob64nl(this.getEncodedHex())+"\r\n-----END X509 CRL-----\r\n"},void 0!==e&&(void 0!==e.tbsobj&&(this.asn1TBSCertList=e.tbsobj),void 0!==e.prvkeyobj&&(this.prvKey=e.prvkeyobj))},YAHOO.lang.extend(KJUR.asn1.x509.CRL,KJUR.asn1.ASN1Object),KJUR.asn1.x509.TBSCertList=function(e){KJUR.asn1.x509.TBSCertList.superclass.constructor.call(this);var t=KJUR.asn1,r=t.DERSequence,i=t.x509,n=i.Time;this.setSignatureAlgByParam=function(e){this.asn1SignatureAlg=new i.AlgorithmIdentifier(e)},this.setIssuerByParam=function(e){this.asn1Issuer=new i.X500Name(e)},this.setThisUpdateByParam=function(e){this.asn1ThisUpdate=new n(e)},this.setNextUpdateByParam=function(e){this.asn1NextUpdate=new n(e)},this.addRevokedCert=function(e,t){var r={};null!=e&&null!=e&&(r.sn=e),null!=t&&null!=t&&(r.time=t);var n=new i.CRLEntry(r);this.aRevokedCert.push(n)},this.getEncodedHex=function(){if(this.asn1Array=new Array,null!=this.asn1Version&&this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1SignatureAlg),this.asn1Array.push(this.asn1Issuer),this.asn1Array.push(this.asn1ThisUpdate),null!=this.asn1NextUpdate&&this.asn1Array.push(this.asn1NextUpdate),0<this.aRevokedCert.length){var e=new r({array:this.aRevokedCert});this.asn1Array.push(e)}var t=new r({array:this.asn1Array});return this.hTLV=t.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize=function(){this.asn1Version=null,this.asn1SignatureAlg=null,this.asn1Issuer=null,this.asn1ThisUpdate=null,this.asn1NextUpdate=null,this.aRevokedCert=new Array},this._initialize()},YAHOO.lang.extend(KJUR.asn1.x509.TBSCertList,KJUR.asn1.ASN1Object),KJUR.asn1.x509.CRLEntry=function(e){KJUR.asn1.x509.CRLEntry.superclass.constructor.call(this);var t=KJUR.asn1;this.setCertSerial=function(e){this.sn=new t.DERInteger(e)},this.setRevocationDate=function(e){this.time=new t.x509.Time(e)},this.getEncodedHex=function(){var e=new t.DERSequence({array:[this.sn,this.time]});return this.TLV=e.getEncodedHex(),this.TLV},void 0!==e&&(void 0!==e.time&&this.setRevocationDate(e.time),void 0!==e.sn&&this.setCertSerial(e.sn))},YAHOO.lang.extend(KJUR.asn1.x509.CRLEntry,KJUR.asn1.ASN1Object),KJUR.asn1.x509.X500Name=function(e){KJUR.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=new Array;var t=KJUR.asn1,a=t.x509,r=pemtohex;if(this.setByString=function(e){var t=e.split("/");t.shift();for(var r=[],n=0;n<t.length;n++)if(t[n].match(/^[^=]+=.+$/))r.push(t[n]);else{var i=r.length-1;r[i]=r[i]+"/"+t[n]}for(n=0;n<r.length;n++)this.asn1Array.push(new a.RDN({str:r[n]}))},this.setByLdapString=function(e){var t=a.X500Name.ldapToOneline(e);this.setByString(t)},this.setByObject=function(e){for(var t in e)if(e.hasOwnProperty(t)){var r=new KJUR.asn1.x509.RDN({str:t+"="+e[t]});this.asn1Array?this.asn1Array.push(r):this.asn1Array=[r]}},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;var e=new t.DERSequence({array:this.asn1Array});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==e){var n;if(void 0!==e.str?this.setByString(e.str):void 0!==e.ldapstr?this.setByLdapString(e.ldapstr):"object"==typeof e&&this.setByObject(e),void 0!==e.certissuer)(n=new X509).hex=r(e.certissuer),this.hTLV=n.getIssuerHex();if(void 0!==e.certsubject)(n=new X509).hex=r(e.certsubject),this.hTLV=n.getSubjectHex()}},YAHOO.lang.extend(KJUR.asn1.x509.X500Name,KJUR.asn1.ASN1Object),KJUR.asn1.x509.X500Name.onelineToLDAP=function(e){if("/"!==e.substr(0,1))throw"malformed input";var t=(e=e.substr(1)).split("/");return t.reverse(),(t=t.map(function(e){return e.replace(/,/,"\\,")})).join(",")},KJUR.asn1.x509.X500Name.ldapToOneline=function(e){for(var t=e.split(","),r=!1,n=[],i=0;0<t.length;i++){var a=t.shift();if(!0===r){var o=(n.pop()+","+a).replace(/\\,/g,",");n.push(o),r=!1}else n.push(a);"\\"===a.substr(-1,1)&&(r=!0)}return(n=n.map(function(e){return e.replace("/","\\/")})).reverse(),"/"+n.join("/")},KJUR.asn1.x509.RDN=function(e){KJUR.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=new Array,this.addByString=function(e){this.asn1Array.push(new KJUR.asn1.x509.AttributeTypeAndValue({str:e}))},this.addByMultiValuedString=function(e){for(var t=KJUR.asn1.x509.RDN.parseString(e),r=0;r<t.length;r++)this.addByString(t[r])},this.getEncodedHex=function(){var e=new KJUR.asn1.DERSet({array:this.asn1Array});return this.TLV=e.getEncodedHex(),this.TLV},void 0!==e&&void 0!==e.str&&this.addByMultiValuedString(e.str)},YAHOO.lang.extend(KJUR.asn1.x509.RDN,KJUR.asn1.ASN1Object),KJUR.asn1.x509.RDN.parseString=function(e){for(var t=e.split(/\+/),r=!1,n=[],i=0;0<t.length;i++){var a=t.shift();if(!0===r){var o=(n.pop()+"+"+a).replace(/\\\+/g,"+");n.push(o),r=!1}else n.push(a);"\\"===a.substr(-1,1)&&(r=!0)}var s=!1,c=[];for(i=0;0<n.length;i++){a=n.shift();if(!0===s){var l=c.pop();if(a.match(/"$/)){o=(l+"+"+a).replace(/^([^=]+)="(.*)"$/,"$1=$2");c.push(o),s=!1}else c.push(l+"+"+a)}else c.push(a);a.match(/^[^=]+="/)&&(s=!0)}return c},KJUR.asn1.x509.AttributeTypeAndValue=function(e){KJUR.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this);var r=KJUR.asn1;this.setByString=function(e){var t=e.match(/^([^=]+)=(.+)$/);if(!t)throw"malformed attrTypeAndValueStr: "+e;this.setByAttrTypeAndValueStr(t[1],t[2])},this.setByAttrTypeAndValueStr=function(e,t){this.typeObj=KJUR.asn1.x509.OID.atype2obj(e);var r="utf8";"C"==e&&(r="prn"),this.valueObj=this.getValueObj(r,t)},this.getValueObj=function(e,t){if("utf8"==e)return new r.DERUTF8String({str:t});if("prn"==e)return new r.DERPrintableString({str:t});if("tel"==e)return new r.DERTeletexString({str:t});if("ia5"==e)return new r.DERIA5String({str:t});throw"unsupported directory string type: type="+e+" value="+t},this.getEncodedHex=function(){var e=new r.DERSequence({array:[this.typeObj,this.valueObj]});return this.TLV=e.getEncodedHex(),this.TLV},void 0!==e&&void 0!==e.str&&this.setByString(e.str)},YAHOO.lang.extend(KJUR.asn1.x509.AttributeTypeAndValue,KJUR.asn1.ASN1Object),KJUR.asn1.x509.SubjectPublicKeyInfo=function(e){KJUR.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var t=KJUR,r=t.asn1,i=r.DERInteger,a=r.DERBitString,o=r.DERObjectIdentifier,n=r.DERSequence,s=r.ASN1Util.newObject,c=r.x509.AlgorithmIdentifier,l=t.crypto;l.ECDSA,l.DSA;this.getASN1Object=function(){if(null==this.asn1AlgId||null==this.asn1SubjPKey)throw"algId and/or subjPubKey not set";return new n({array:[this.asn1AlgId,this.asn1SubjPKey]})},this.getEncodedHex=function(){var e=this.getASN1Object();return this.hTLV=e.getEncodedHex(),this.hTLV},this.setPubKey=function(e){try{if(e instanceof RSAKey){var t=s({seq:[{int:{bigint:e.n}},{int:{int:e.e}}]}).getEncodedHex();this.asn1AlgId=new c({name:"rsaEncryption"}),this.asn1SubjPKey=new a({hex:"00"+t})}}catch(e){}try{if(e instanceof KJUR.crypto.ECDSA){var r=new o({name:e.curveName});this.asn1AlgId=new c({name:"ecPublicKey",asn1params:r}),this.asn1SubjPKey=new a({hex:"00"+e.pubKeyHex})}}catch(e){}try{if(e instanceof KJUR.crypto.DSA){r=new s({seq:[{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}}]});this.asn1AlgId=new c({name:"dsa",asn1params:r});var n=new i({bigint:e.y});this.asn1SubjPKey=new a({hex:"00"+n.getEncodedHex()})}}catch(e){}},void 0!==e&&this.setPubKey(e)},YAHOO.lang.extend(KJUR.asn1.x509.SubjectPublicKeyInfo,KJUR.asn1.ASN1Object),KJUR.asn1.x509.Time=function(e){KJUR.asn1.x509.Time.superclass.constructor.call(this);var t=KJUR.asn1,r=t.DERUTCTime,n=t.DERGeneralizedTime;this.setTimeParams=function(e){this.timeParams=e},this.getEncodedHex=function(){var e=null;return e=null!=this.timeParams?"utc"==this.type?new r(this.timeParams):new n(this.timeParams):"utc"==this.type?new r:new n,this.TLV=e.getEncodedHex(),this.TLV},this.type="utc",void 0!==e&&(void 0!==e.type?this.type=e.type:void 0!==e.str&&(e.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),e.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=e)},YAHOO.lang.extend(KJUR.asn1.x509.Time,KJUR.asn1.ASN1Object),KJUR.asn1.x509.AlgorithmIdentifier=function(e){KJUR.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var r=KJUR.asn1;if(this.getEncodedHex=function(){if(null===this.nameAlg&&null===this.asn1Alg)throw"algorithm not specified";null!==this.nameAlg&&null===this.asn1Alg&&(this.asn1Alg=r.x509.OID.name2obj(this.nameAlg));var e=[this.asn1Alg];null!==this.asn1Params&&e.push(this.asn1Params);var t=new r.DERSequence({array:e});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e&&(void 0!==e.name&&(this.nameAlg=e.name),void 0!==e.asn1params&&(this.asn1Params=e.asn1params),void 0!==e.paramempty&&(this.paramEmpty=e.paramempty)),null===this.asn1Params&&!1===this.paramEmpty&&null!==this.nameAlg){var t=this.nameAlg.toLowerCase();"withdsa"!==t.substr(-7,7)&&"withecdsa"!==t.substr(-9,9)&&(this.asn1Params=new r.DERNull)}},YAHOO.lang.extend(KJUR.asn1.x509.AlgorithmIdentifier,KJUR.asn1.ASN1Object),KJUR.asn1.x509.GeneralName=function(e){KJUR.asn1.x509.GeneralName.superclass.constructor.call(this);var l={rfc822:"81",dns:"82",dn:"a4",uri:"86",ip:"87"},t=KJUR.asn1,u=(t.DERSequence,t.DEROctetString),h=t.DERIA5String,f=t.DERTaggedObject,d=t.ASN1Object,g=t.x509.X500Name,p=pemtohex;this.explicit=!1,this.setByParam=function(e){var t=null;if(void 0!==e){if(void 0!==e.rfc822&&(this.type="rfc822",t=new h({str:e[this.type]})),void 0!==e.dns&&(this.type="dns",t=new h({str:e[this.type]})),void 0!==e.uri&&(this.type="uri",t=new h({str:e[this.type]})),void 0!==e.dn&&(this.type="dn",this.explicit=!0,t=new g({str:e.dn})),void 0!==e.ldapdn&&(this.type="dn",this.explicit=!0,t=new g({ldapstr:e.ldapdn})),void 0!==e.certissuer){this.type="dn",this.explicit=!0;var r=null;if((i=e.certissuer).match(/^[0-9A-Fa-f]+$/),-1!=i.indexOf("-----BEGIN ")&&(r=p(i)),null==r)throw"certissuer param not cert";(a=new X509).hex=r;var n=a.getIssuerHex();(t=new d).hTLV=n}if(void 0!==e.certsubj){this.type="dn",this.explicit=!0;var i,a;r=null;if((i=e.certsubj).match(/^[0-9A-Fa-f]+$/),-1!=i.indexOf("-----BEGIN ")&&(r=p(i)),null==r)throw"certsubj param not cert";(a=new X509).hex=r;n=a.getSubjectHex();(t=new d).hTLV=n}if(void 0!==e.ip){this.type="ip",this.explicit=!1;var o,s=e.ip,c="malformed IP address";if(s.match(/^[0-9.]+[.][0-9.]+$/)){if(8!==(o=intarystrtohex("["+s.split(".").join(",")+"]")).length)throw c}else if(s.match(/^[0-9A-Fa-f:]+:[0-9A-Fa-f:]+$/))o=ipv6tohex(s);else{if(!s.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw c;o=s}t=new u({hex:o})}if(null==this.type)throw"unsupported type in params="+e;this.asn1Obj=new f({explicit:this.explicit,tag:l[this.type],obj:t})}},this.getEncodedHex=function(){return this.asn1Obj.getEncodedHex()},void 0!==e&&this.setByParam(e)},YAHOO.lang.extend(KJUR.asn1.x509.GeneralName,KJUR.asn1.ASN1Object),KJUR.asn1.x509.GeneralNames=function(e){KJUR.asn1.x509.GeneralNames.superclass.constructor.call(this);var n=KJUR.asn1;this.setByParamArray=function(e){for(var t=0;t<e.length;t++){var r=new n.x509.GeneralName(e[t]);this.asn1Array.push(r)}},this.getEncodedHex=function(){return new n.DERSequence({array:this.asn1Array}).getEncodedHex()},this.asn1Array=new Array,void 0!==e&&this.setByParamArray(e)},YAHOO.lang.extend(KJUR.asn1.x509.GeneralNames,KJUR.asn1.ASN1Object),KJUR.asn1.x509.DistributionPointName=function(e){KJUR.asn1.x509.DistributionPointName.superclass.constructor.call(this);var t=KJUR.asn1,r=t.DERTaggedObject;if(this.getEncodedHex=function(){if("full"!=this.type)throw"currently type shall be 'full': "+this.type;return this.asn1Obj=new r({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.getEncodedHex(),this.hTLV},void 0!==e){if(!t.x509.GeneralNames.prototype.isPrototypeOf(e))throw"This class supports GeneralNames only as argument";this.type="full",this.tag="a0",this.asn1V=e}},YAHOO.lang.extend(KJUR.asn1.x509.DistributionPointName,KJUR.asn1.ASN1Object),KJUR.asn1.x509.DistributionPoint=function(e){KJUR.asn1.x509.DistributionPoint.superclass.constructor.call(this);var r=KJUR.asn1;this.getEncodedHex=function(){var e=new r.DERSequence;if(null!=this.asn1DP){var t=new r.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});e.appendASN1Object(t)}return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==e&&void 0!==e.dpobj&&(this.asn1DP=e.dpobj)},YAHOO.lang.extend(KJUR.asn1.x509.DistributionPoint,KJUR.asn1.ASN1Object),KJUR.asn1.x509.OID=new function(e){this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",ecPublicKey:"1.2.840.10045.2.1",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",extensionRequest:"1.2.840.113549.1.9.14"},this.objCache={},this.name2obj=function(e){if(void 0!==this.objCache[e])return this.objCache[e];if(void 0===this.name2oidList[e])throw"Name of ObjectIdentifier not defined: "+e;var t=this.name2oidList[e],r=new KJUR.asn1.DERObjectIdentifier({oid:t});return this.objCache[e]=r},this.atype2obj=function(e){if(void 0!==this.objCache[e])return this.objCache[e];if(void 0===this.atype2oidList[e])throw"AttributeType name undefined: "+e;var t=this.atype2oidList[e],r=new KJUR.asn1.DERObjectIdentifier({oid:t});return this.objCache[e]=r}},KJUR.asn1.x509.OID.oid2name=function(e){var t=KJUR.asn1.x509.OID.name2oidList;for(var r in t)if(t[r]==e)return r;return""},KJUR.asn1.x509.OID.oid2atype=function(e){var t=KJUR.asn1.x509.OID.atype2oidList;for(var r in t)if(t[r]==e)return r;return e},KJUR.asn1.x509.OID.name2oid=function(e){var t=KJUR.asn1.x509.OID.name2oidList;return void 0===t[e]?"":t[e]},KJUR.asn1.x509.X509Util={},KJUR.asn1.x509.X509Util.newCertPEM=function(e){var t=KJUR.asn1.x509,r=t.TBSCertificate,n=t.Certificate,i=new r;if(void 0===e.serial)throw"serial number undefined.";if(i.setSerialNumberByParam(e.serial),"string"!=typeof e.sigalg.name)throw"unproper signature algorithm name";if(i.setSignatureAlgByParam(e.sigalg),void 0===e.issuer)throw"issuer name undefined.";if(i.setIssuerByParam(e.issuer),void 0===e.notbefore)throw"notbefore undefined.";if(i.setNotBeforeByParam(e.notbefore),void 0===e.notafter)throw"notafter undefined.";if(i.setNotAfterByParam(e.notafter),void 0===e.subject)throw"subject name undefined.";if(i.setSubjectByParam(e.subject),void 0===e.sbjpubkey)throw"subject public key undefined.";if(i.setSubjectPublicKeyByGetKey(e.sbjpubkey),void 0!==e.ext&&void 0!==e.ext.length)for(var a=0;a<e.ext.length;a++)for(key in e.ext[a])i.appendExtensionByName(key,e.ext[a][key]);if(void 0===e.cakey&&void 0===e.sighex)throw"param cakey and sighex undefined.";var o=null;return e.cakey&&(o=new n({tbscertobj:i,prvkeyobj:!0===e.cakey.isPrivate?e.cakey:KEYUTIL.getKey.apply(null,e.cakey)})).sign(),e.sighex&&(o=new n({tbscertobj:i})).setSignatureHex(e.sighex),o.getPEMString()},void 0!==KJUR&&KJUR||(KJUR={}),void 0!==KJUR.asn1&&KJUR.asn1||(KJUR.asn1={}),void 0!==KJUR.asn1.cms&&KJUR.asn1.cms||(KJUR.asn1.cms={}),KJUR.asn1.cms.Attribute=function(e){var n=KJUR.asn1;n.cms.Attribute.superclass.constructor.call(this),this.getEncodedHex=function(){var e,t,r;e=new n.DERObjectIdentifier({oid:this.attrTypeOid}),t=new n.DERSet({array:this.valueList});try{t.getEncodedHex()}catch(e){throw"fail valueSet.getEncodedHex in Attribute(1)/"+e}r=new n.DERSequence({array:[e,t]});try{this.hTLV=r.getEncodedHex()}catch(e){throw"failed seq.getEncodedHex in Attribute(2)/"+e}return this.hTLV}},YAHOO.lang.extend(KJUR.asn1.cms.Attribute,KJUR.asn1.ASN1Object),KJUR.asn1.cms.ContentType=function(e){var t=KJUR.asn1;t.cms.ContentType.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.3";var r=null;if(void 0!==e){r=new t.DERObjectIdentifier(e);this.valueList=[r]}},YAHOO.lang.extend(KJUR.asn1.cms.ContentType,KJUR.asn1.cms.Attribute),KJUR.asn1.cms.MessageDigest=function(e){var t=KJUR,r=t.asn1,n=r.DEROctetString,i=r.cms;if(i.MessageDigest.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.4",void 0!==e)if(e.eciObj instanceof i.EncapsulatedContentInfo&&"string"==typeof e.hashAlg){var a=e.eciObj.eContentValueHex,o=e.hashAlg;(s=new n({hex:t.crypto.Util.hashHex(a,o)})).getEncodedHex(),this.valueList=[s]}else{var s;(s=new n(e)).getEncodedHex(),this.valueList=[s]}},YAHOO.lang.extend(KJUR.asn1.cms.MessageDigest,KJUR.asn1.cms.Attribute),KJUR.asn1.cms.SigningTime=function(e){var t=KJUR.asn1;if(t.cms.SigningTime.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.5",void 0!==e){var r=new t.x509.Time(e);try{r.getEncodedHex()}catch(e){throw"SigningTime.getEncodedHex() failed/"+e}this.valueList=[r]}},YAHOO.lang.extend(KJUR.asn1.cms.SigningTime,KJUR.asn1.cms.Attribute),KJUR.asn1.cms.SigningCertificate=function(e){var l=KJUR,u=l.asn1,h=u.DERSequence,f=u.cms;l.crypto;f.SigningCertificate.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.12",this.setCerts=function(e){for(var t=[],r=0;r<e.length;r++){var n=pemtohex(e[r]),i=l.crypto.Util.hashHex(n,"sha1"),a=new u.DEROctetString({hex:i});a.getEncodedHex();var o=new f.IssuerAndSerialNumber({cert:e[r]});o.getEncodedHex();var s=new h({array:[a,o]});s.getEncodedHex(),t.push(s)}var c=new h({array:t});c.getEncodedHex(),this.valueList=[c]},void 0!==e&&"object"==typeof e.array&&this.setCerts(e.array)},YAHOO.lang.extend(KJUR.asn1.cms.SigningCertificate,KJUR.asn1.cms.Attribute),KJUR.asn1.cms.SigningCertificateV2=function(e){var t=KJUR,h=t.asn1,f=h.DERSequence,d=h.x509,g=h.cms,p=t.crypto;if(g.SigningCertificateV2.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.47",this.setCerts=function(e,t){for(var r=[],n=0;n<e.length;n++){var i=pemtohex(e[n]),a=[];"sha256"!==t&&a.push(new d.AlgorithmIdentifier({name:t}));var o=p.Util.hashHex(i,t),s=new h.DEROctetString({hex:o});s.getEncodedHex(),a.push(s);var c=new g.IssuerAndSerialNumber({cert:e[n]});c.getEncodedHex(),a.push(c);var l=new f({array:a});l.getEncodedHex(),r.push(l)}var u=new f({array:r});u.getEncodedHex(),this.valueList=[u]},void 0!==e&&"object"==typeof e.array){var r="sha256";"string"==typeof e.hashAlg&&(r=e.hashAlg),this.setCerts(e.array,r)}},YAHOO.lang.extend(KJUR.asn1.cms.SigningCertificateV2,KJUR.asn1.cms.Attribute),KJUR.asn1.cms.IssuerAndSerialNumber=function(e){var t=KJUR.asn1,a=t.DERInteger,r=t.cms,o=t.x509.X500Name,s=X509;r.IssuerAndSerialNumber.superclass.constructor.call(this),this.setByCertPEM=function(e){var t=pemtohex(e),r=new s;r.hex=t;var n=r.getIssuerHex();this.dIssuer=new o,this.dIssuer.hTLV=n;var i=r.getSerialNumberHex();this.dSerial=new a({hex:i})},this.getEncodedHex=function(){var e=new t.DERSequence({array:[this.dIssuer,this.dSerial]});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==e&&("string"==typeof e&&-1!=e.indexOf("-----BEGIN ")&&this.setByCertPEM(e),e.issuer&&e.serial&&(e.issuer instanceof o?this.dIssuer=e.issuer:this.dIssuer=new o(e.issuer),e.serial instanceof a?this.dSerial=e.serial:this.dSerial=new a(e.serial)),"string"==typeof e.cert&&this.setByCertPEM(e.cert))},YAHOO.lang.extend(KJUR.asn1.cms.IssuerAndSerialNumber,KJUR.asn1.ASN1Object),KJUR.asn1.cms.AttributeList=function(e){var t=KJUR.asn1,r=t.cms;r.AttributeList.superclass.constructor.call(this),this.list=new Array,this.sortFlag=!0,this.add=function(e){e instanceof r.Attribute&&this.list.push(e)},this.length=function(){return this.list.length},this.clear=function(){this.list=new Array,this.hTLV=null,this.hV=null},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;var e=new t.DERSet({array:this.list,sortflag:this.sortFlag});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==e&&void 0!==e.sortflag&&0==e.sortflag&&(this.sortFlag=!1)},YAHOO.lang.extend(KJUR.asn1.cms.AttributeList,KJUR.asn1.ASN1Object),KJUR.asn1.cms.SignerInfo=function(e){var t=KJUR,o=t.asn1,i=o.DERTaggedObject,r=o.cms,a=r.AttributeList,n=r.ContentType,s=r.EncapsulatedContentInfo,c=r.MessageDigest,l=r.SignedData,u=o.x509.AlgorithmIdentifier,h=t.crypto,f=KEYUTIL;r.SignerInfo.superclass.constructor.call(this),this.dCMSVersion=new o.DERInteger({int:1}),this.dSignerIdentifier=null,this.dDigestAlgorithm=null,this.dSignedAttrs=new a,this.dSigAlg=null,this.dSig=null,this.dUnsignedAttrs=new a,this.setSignerIdentifier=function(e){"string"==typeof e&&-1!=e.indexOf("CERTIFICATE")&&-1!=e.indexOf("BEGIN")&&-1!=e.indexOf("END")&&(this.dSignerIdentifier=new r.IssuerAndSerialNumber({cert:e}))},this.setForContentAndHash=function(e){void 0!==e&&(e.eciObj instanceof s&&(this.dSignedAttrs.add(new n({oid:"1.2.840.113549.1.7.1"})),this.dSignedAttrs.add(new c({eciObj:e.eciObj,hashAlg:e.hashAlg}))),void 0!==e.sdObj&&e.sdObj instanceof l&&-1==e.sdObj.digestAlgNameList.join(":").indexOf(e.hashAlg)&&e.sdObj.digestAlgNameList.push(e.hashAlg),"string"==typeof e.hashAlg&&(this.dDigestAlgorithm=new u({name:e.hashAlg})))},this.sign=function(e,t){this.dSigAlg=new u({name:t});var r=this.dSignedAttrs.getEncodedHex(),n=f.getKey(e),i=new h.Signature({alg:t});i.init(n),i.updateHex(r);var a=i.sign();this.dSig=new o.DEROctetString({hex:a})},this.addUnsigned=function(e){this.hTLV=null,this.dUnsignedAttrs.hTLV=null,this.dUnsignedAttrs.add(e)},this.getEncodedHex=function(){if(this.dSignedAttrs instanceof a&&0==this.dSignedAttrs.length())throw"SignedAttrs length = 0 (empty)";var e=new i({obj:this.dSignedAttrs,tag:"a0",explicit:!1}),t=null;0<this.dUnsignedAttrs.length()&&(t=new i({obj:this.dUnsignedAttrs,tag:"a1",explicit:!1}));var r=[this.dCMSVersion,this.dSignerIdentifier,this.dDigestAlgorithm,e,this.dSigAlg,this.dSig];null!=t&&r.push(t);var n=new o.DERSequence({array:r});return this.hTLV=n.getEncodedHex(),this.hTLV}},YAHOO.lang.extend(KJUR.asn1.cms.SignerInfo,KJUR.asn1.ASN1Object),KJUR.asn1.cms.EncapsulatedContentInfo=function(e){var t=KJUR.asn1,n=t.DERTaggedObject,i=t.DERSequence,r=t.DERObjectIdentifier,a=t.DEROctetString;t.cms.EncapsulatedContentInfo.superclass.constructor.call(this),this.dEContentType=new r({name:"data"}),this.dEContent=null,this.isDetached=!1,this.eContentValueHex=null,this.setContentType=function(e){e.match(/^[0-2][.][0-9.]+$/)?this.dEContentType=new r({oid:e}):this.dEContentType=new r({name:e})},this.setContentValue=function(e){void 0!==e&&("string"==typeof e.hex?this.eContentValueHex=e.hex:"string"==typeof e.str&&(this.eContentValueHex=utf8tohex(e.str)))},this.setContentValueHex=function(e){this.eContentValueHex=e},this.setContentValueStr=function(e){this.eContentValueHex=utf8tohex(e)},this.getEncodedHex=function(){if("string"!=typeof this.eContentValueHex)throw"eContentValue not yet set";var e=new a({hex:this.eContentValueHex});this.dEContent=new n({obj:e,tag:"a0",explicit:!0});var t=[this.dEContentType];this.isDetached||t.push(this.dEContent);var r=new i({array:t});return this.hTLV=r.getEncodedHex(),this.hTLV}},YAHOO.lang.extend(KJUR.asn1.cms.EncapsulatedContentInfo,KJUR.asn1.ASN1Object),KJUR.asn1.cms.ContentInfo=function(e){var t=KJUR.asn1,r=t.DERTaggedObject,n=t.DERSequence,i=t.x509;KJUR.asn1.cms.ContentInfo.superclass.constructor.call(this),this.dContentType=null,this.dContent=null,this.setContentType=function(e){"string"==typeof e&&(this.dContentType=i.OID.name2obj(e))},this.getEncodedHex=function(){var e=new r({obj:this.dContent,tag:"a0",explicit:!0}),t=new n({array:[this.dContentType,e]});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e&&(e.type&&this.setContentType(e.type),e.obj&&e.obj instanceof t.ASN1Object&&(this.dContent=e.obj))},YAHOO.lang.extend(KJUR.asn1.cms.ContentInfo,KJUR.asn1.ASN1Object),KJUR.asn1.cms.SignedData=function(e){var t=KJUR.asn1,n=t.ASN1Object,r=t.DERInteger,c=t.DERSet,l=t.DERSequence,u=t.DERTaggedObject,i=t.cms,a=i.EncapsulatedContentInfo,o=i.SignerInfo,s=i.ContentInfo,h=t.x509.AlgorithmIdentifier;KJUR.asn1.cms.SignedData.superclass.constructor.call(this),this.dCMSVersion=new r({int:1}),this.dDigestAlgs=null,this.digestAlgNameList=[],this.dEncapContentInfo=new a,this.dCerts=null,this.certificateList=[],this.crlList=[],this.signerInfoList=[new o],this.addCertificatesByPEM=function(e){var t=pemtohex(e),r=new n;r.hTLV=t,this.certificateList.push(r)},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;if(null==this.dDigestAlgs){for(var e=[],t=0;t<this.digestAlgNameList.length;t++){var r=this.digestAlgNameList[t],n=new h({name:r});e.push(n)}this.dDigestAlgs=new c({array:e})}var i=[this.dCMSVersion,this.dDigestAlgs,this.dEncapContentInfo];if(null==this.dCerts&&0<this.certificateList.length){var a=new c({array:this.certificateList});this.dCerts=new u({obj:a,tag:"a0",explicit:!1})}null!=this.dCerts&&i.push(this.dCerts);var o=new c({array:this.signerInfoList});i.push(o);var s=new l({array:i});return this.hTLV=s.getEncodedHex(),this.hTLV},this.getContentInfo=function(){return this.getEncodedHex(),new s({type:"signed-data",obj:this})},this.getContentInfoEncodedHex=function(){return this.getContentInfo().getEncodedHex()},this.getPEM=function(){return hextopem(this.getContentInfoEncodedHex(),"CMS")}},YAHOO.lang.extend(KJUR.asn1.cms.SignedData,KJUR.asn1.ASN1Object),KJUR.asn1.cms.CMSUtil=new function(){},KJUR.asn1.cms.CMSUtil.newSignedData=function(e){var t=KJUR.asn1,r=t.cms,n=r.SignerInfo,i=r.SignedData,a=r.SigningTime,o=r.SigningCertificate,s=r.SigningCertificateV2,c=t.cades.SignaturePolicyIdentifier,l=new i;if(l.dEncapContentInfo.setContentValue(e.content),"object"==typeof e.certs)for(var u=0;u<e.certs.length;u++)l.addCertificatesByPEM(e.certs[u]);l.signerInfoList=[];for(u=0;u<e.signerInfos.length;u++){var h=e.signerInfos[u],f=new n;for(attrName in f.setSignerIdentifier(h.signerCert),f.setForContentAndHash({sdObj:l,eciObj:l.dEncapContentInfo,hashAlg:h.hashAlg}),h.sAttr){var d=h.sAttr[attrName];if("SigningTime"==attrName){var g=new a(d);f.dSignedAttrs.add(g)}if("SigningCertificate"==attrName){g=new o(d);f.dSignedAttrs.add(g)}if("SigningCertificateV2"==attrName){g=new s(d);f.dSignedAttrs.add(g)}if("SignaturePolicyIdentifier"==attrName){g=new c(d);f.dSignedAttrs.add(g)}}f.sign(h.signerPrvKey,h.sigAlg),l.signerInfoList.push(f)}return l},KJUR.asn1.cms.CMSUtil.verifySignedData=function(e){var t=KJUR,r=t.asn1,n=r.cms,i=(n.SignerInfo,n.SignedData,n.SigningTime,n.SigningCertificate,n.SigningCertificateV2,r.cades.SignaturePolicyIdentifier,t.lang.String.isHex),a=ASN1HEX,c=a.getVbyList,o=a.getTLVbyList,s=a.getIdxbyList,d=a.getChildIdx,g=a.getTLV,l=a.oidname,p=t.crypto.Util.hashHex;void 0===e.cms&&i(e.cms);var u=e.cms,h=function(e,t){var r=t.idx;t.signerid_issuer1=o(e,r,[1,0],"30"),t.signerid_serial1=c(e,r,[1,1],"02"),t.hashalg=l(c(e,r,[2,0],"06"));var n=s(e,r,[3],"a0");t.idxSignedAttrs=n,f(e,t,n);var i=d(e,r).length;if(i<6)throw"malformed SignerInfo";t.sigalg=l(c(e,r,[i-2,0],"06")),t.sigval=c(e,r,[i-1],"04")},f=function(e,t,r){var n=d(e,r);t.signedAttrIdxList=n;for(var i=0;i<n.length;i++){var a,o=n[i],s=c(e,o,[0],"06");"2a864886f70d010905"===s?(a=hextoutf8(c(e,o,[1,0])),t.saSigningTime=a):"2a864886f70d010904"===s&&(a=c(e,o,[1,0],"04"),t.saMessageDigest=a)}},b=function(e,t,r,n){r.verifyDetail={};var i=r.verifyDetail,a=t.parse.econtent,o=r.hashalg,s=r.saMessageDigest;i.validMessageDigest=!1,p(a,o)===s&&(i.validMessageDigest=!0),function(e,t,r,n){var i,a=t.parse.certsIdx;if(void 0===t.certs){i=[],t.certkeys=[];for(var o=d(e,a),s=0;s<o.length;s++){var c=g(e,o[s]),l=new X509;l.readCertHex(c),i[s]=l,t.certkeys[s]=l.getPublicKey()}t.certs=i}else i=t.certs;t.cccc=i.length,t.cccci=o.length;for(s=0;s<i.length;s++){var u=l.getIssuerHex(),h=l.getSerialNumberHex();r.signerid_issuer1===u&&r.signerid_serial1===h&&(r.certkey_idx=s)}}(e,t,r),i.validSignatureValue=!1;var c=r.sigalg,l="31"+g(e,r.idxSignedAttrs).substr(2);r.signedattrshex=l;var u=t.certs[r.certkey_idx].getPublicKey(),h=new KJUR.crypto.Signature({alg:c});h.init(u),h.updateHex(l);var f=h.verify(r.sigval);!0===(i.validSignatureValue_isValid=f)&&(i.validSignatureValue=!0),r.isValid=!1,i.validMessageDigest&&i.validSignatureValue&&(r.isValid=!0)},y={isValid:!1,parse:{}};return function(e,t){if("2a864886f70d010702"!==c(e,0,[0],"06"))return;t.cmsType="signedData",t.econtent=c(e,0,[1,0,2,1,0]),function(e,t){for(var r,n=3;n<6;n++)if(void 0!==(r=s(e,0,[1,0,n]))){var i=e.substr(r,2);"a0"===i&&(t.certsIdx=r),"a1"===i&&(t.revinfosIdx=r),"31"===i&&(t.signerinfosIdx=r)}}(e,t),t.signerInfos=[],function(e,t){var r=t.signerinfosIdx;if(void 0!==r){var n=d(e,r);t.signerInfoIdxList=n;for(var i=0;i<n.length;i++){var a={idx:n[i]};h(e,a),t.signerInfos.push(a)}}}(e,t)}(u,y.parse),function(e,t){for(var r=t.parse.signerInfos,n=r.length,i=!0,a=0;a<n;a++){var o=r[a];b(e,t,o,a),o.isValid||(i=!1)}t.isValid=i}(u,y),y},void 0!==KJUR&&KJUR||(KJUR={}),void 0!==KJUR.asn1&&KJUR.asn1||(KJUR.asn1={}),void 0!==KJUR.asn1.tsp&&KJUR.asn1.tsp||(KJUR.asn1.tsp={}),KJUR.asn1.tsp.Accuracy=function(e){var t=KJUR.asn1,s=t.DERInteger,c=t.DERSequence,l=t.DERTaggedObject;t.tsp.Accuracy.superclass.constructor.call(this),this.seconds=null,this.millis=null,this.micros=null,this.getEncodedHex=function(){var e=null,t=null,r=null,n=[];if(null!=this.seconds&&(e=new s({int:this.seconds}),n.push(e)),null!=this.millis){var i=new s({int:this.millis});t=new l({obj:i,tag:"80",explicit:!1}),n.push(t)}if(null!=this.micros){var a=new s({int:this.micros});r=new l({obj:a,tag:"81",explicit:!1}),n.push(r)}var o=new c({array:n});return this.hTLV=o.getEncodedHex(),this.hTLV},void 0!==e&&("number"==typeof e.seconds&&(this.seconds=e.seconds),"number"==typeof e.millis&&(this.millis=e.millis),"number"==typeof e.micros&&(this.micros=e.micros))},YAHOO.lang.extend(KJUR.asn1.tsp.Accuracy,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.MessageImprint=function(e){var t=KJUR.asn1,r=t.DERSequence,n=t.DEROctetString,i=t.x509.AlgorithmIdentifier;t.tsp.MessageImprint.superclass.constructor.call(this),this.dHashAlg=null,this.dHashValue=null,this.getEncodedHex=function(){return"string"==typeof this.hTLV?this.hTLV:new r({array:[this.dHashAlg,this.dHashValue]}).getEncodedHex()},void 0!==e&&("string"==typeof e.hashAlg&&(this.dHashAlg=new i({name:e.hashAlg})),"string"==typeof e.hashValue&&(this.dHashValue=new n({hex:e.hashValue})))},YAHOO.lang.extend(KJUR.asn1.tsp.MessageImprint,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.TimeStampReq=function(e){var t=KJUR.asn1,r=t.DERSequence,n=t.DERInteger,i=t.DERBoolean,a=t.DERObjectIdentifier,o=t.tsp,s=o.MessageImprint;o.TimeStampReq.superclass.constructor.call(this),this.dVersion=new n({int:1}),this.dMessageImprint=null,this.dPolicy=null,this.dNonce=null,this.certReq=!0,this.setMessageImprint=function(e){e instanceof s?this.dMessageImprint=e:"object"==typeof e&&(this.dMessageImprint=new s(e))},this.getEncodedHex=function(){if(null==this.dMessageImprint)throw"messageImprint shall be specified";var e=[this.dVersion,this.dMessageImprint];null!=this.dPolicy&&e.push(this.dPolicy),null!=this.dNonce&&e.push(this.dNonce),this.certReq&&e.push(new i);var t=new r({array:e});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e&&("object"==typeof e.mi&&this.setMessageImprint(e.mi),"object"==typeof e.policy&&(this.dPolicy=new a(e.policy)),"object"==typeof e.nonce&&(this.dNonce=new n(e.nonce)),"boolean"==typeof e.certreq&&(this.certReq=e.certreq))},YAHOO.lang.extend(KJUR.asn1.tsp.TimeStampReq,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.TSTInfo=function(e){var t=KJUR.asn1,r=t.DERSequence,n=t.DERInteger,i=t.DERBoolean,a=t.DERGeneralizedTime,o=t.DERObjectIdentifier,s=t.tsp,c=s.MessageImprint,l=s.Accuracy,u=t.x509.X500Name;if(s.TSTInfo.superclass.constructor.call(this),this.dVersion=new n({int:1}),this.dPolicy=null,this.dMessageImprint=null,this.dSerialNumber=null,this.dGenTime=null,this.dAccuracy=null,this.dOrdering=null,this.dNonce=null,this.dTsa=null,this.getEncodedHex=function(){var e=[this.dVersion];if(null==this.dPolicy)throw"policy shall be specified.";if(e.push(this.dPolicy),null==this.dMessageImprint)throw"messageImprint shall be specified.";if(e.push(this.dMessageImprint),null==this.dSerialNumber)throw"serialNumber shall be specified.";if(e.push(this.dSerialNumber),null==this.dGenTime)throw"genTime shall be specified.";e.push(this.dGenTime),null!=this.dAccuracy&&e.push(this.dAccuracy),null!=this.dOrdering&&e.push(this.dOrdering),null!=this.dNonce&&e.push(this.dNonce),null!=this.dTsa&&e.push(this.dTsa);var t=new r({array:e});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e){if("string"==typeof e.policy){if(!e.policy.match(/^[0-9.]+$/))throw"policy shall be oid like 0.1.4.134";this.dPolicy=new o({oid:e.policy})}void 0!==e.messageImprint&&(this.dMessageImprint=new c(e.messageImprint)),void 0!==e.serialNumber&&(this.dSerialNumber=new n(e.serialNumber)),void 0!==e.genTime&&(this.dGenTime=new a(e.genTime)),void 0!==e.accuracy&&(this.dAccuracy=new l(e.accuracy)),void 0!==e.ordering&&1==e.ordering&&(this.dOrdering=new i),void 0!==e.nonce&&(this.dNonce=new n(e.nonce)),void 0!==e.tsa&&(this.dTsa=new u(e.tsa))}},YAHOO.lang.extend(KJUR.asn1.tsp.TSTInfo,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.TimeStampResp=function(e){var t=KJUR.asn1,r=t.DERSequence,n=t.ASN1Object,i=t.tsp,a=i.PKIStatusInfo;i.TimeStampResp.superclass.constructor.call(this),this.dStatus=null,this.dTST=null,this.getEncodedHex=function(){if(null==this.dStatus)throw"status shall be specified";var e=[this.dStatus];null!=this.dTST&&e.push(this.dTST);var t=new r({array:e});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e&&("object"==typeof e.status&&(this.dStatus=new a(e.status)),void 0!==e.tst&&e.tst instanceof n&&(this.dTST=e.tst.getContentInfo()))},YAHOO.lang.extend(KJUR.asn1.tsp.TimeStampResp,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.PKIStatusInfo=function(e){var t=KJUR.asn1,r=t.DERSequence,n=t.tsp,i=n.PKIStatus,a=n.PKIFreeText,o=n.PKIFailureInfo;n.PKIStatusInfo.superclass.constructor.call(this),this.dStatus=null,this.dStatusString=null,this.dFailureInfo=null,this.getEncodedHex=function(){if(null==this.dStatus)throw"status shall be specified";var e=[this.dStatus];null!=this.dStatusString&&e.push(this.dStatusString),null!=this.dFailureInfo&&e.push(this.dFailureInfo);var t=new r({array:e});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e&&("object"==typeof e.status&&(this.dStatus=new i(e.status)),"object"==typeof e.statstr&&(this.dStatusString=new a({array:e.statstr})),"object"==typeof e.failinfo&&(this.dFailureInfo=new o(e.failinfo)))},YAHOO.lang.extend(KJUR.asn1.tsp.PKIStatusInfo,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.PKIStatus=function(e){var t=KJUR.asn1,r=t.DERInteger,n=t.tsp,i=n.PKIStatus;if(n.PKIStatus.superclass.constructor.call(this),this.getEncodedHex=function(){return this.hTLV=this.dStatus.getEncodedHex(),this.hTLV},void 0!==e)if(void 0!==e.name){var a=i.valueList;if(void 0===a[e.name])throw"name undefined: "+e.name;this.dStatus=new r({int:a[e.name]})}else this.dStatus=new r(e)},YAHOO.lang.extend(KJUR.asn1.tsp.PKIStatus,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.PKIStatus.valueList={granted:0,grantedWithMods:1,rejection:2,waiting:3,revocationWarning:4,revocationNotification:5},KJUR.asn1.tsp.PKIFreeText=function(e){var t=KJUR.asn1,n=t.DERSequence,i=t.DERUTF8String;t.tsp.PKIFreeText.superclass.constructor.call(this),this.textList=[],this.getEncodedHex=function(){for(var e=[],t=0;t<this.textList.length;t++)e.push(new i({str:this.textList[t]}));var r=new n({array:e});return this.hTLV=r.getEncodedHex(),this.hTLV},void 0!==e&&"object"==typeof e.array&&(this.textList=e.array)},YAHOO.lang.extend(KJUR.asn1.tsp.PKIFreeText,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.PKIFailureInfo=function(e){var t=KJUR.asn1,r=t.DERBitString,n=t.tsp.PKIFailureInfo;if(n.superclass.constructor.call(this),this.value=null,this.getEncodedHex=function(){if(null==this.value)throw"value shall be specified";var e=new Number(this.value).toString(2),t=new r;return t.setByBinaryString(e),this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e)if("string"==typeof e.name){var i=n.valueList;if(void 0===i[e.name])throw"name undefined: "+e.name;this.value=i[e.name]}else"number"==typeof e.int&&(this.value=e.int)},YAHOO.lang.extend(KJUR.asn1.tsp.PKIFailureInfo,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.PKIFailureInfo.valueList={badAlg:0,badRequest:2,badDataFormat:5,timeNotAvailable:14,unacceptedPolicy:15,unacceptedExtension:16,addInfoNotAvailable:17,systemFailure:25},KJUR.asn1.tsp.AbstractTSAAdapter=function(e){this.getTSTHex=function(e,t){throw"not implemented yet"}},KJUR.asn1.tsp.SimpleTSAAdapter=function(e){var t=KJUR,i=t.asn1.tsp,a=t.crypto.Util.hashHex;i.SimpleTSAAdapter.superclass.constructor.call(this),this.params=null,this.serial=0,this.getTSTHex=function(e,t){var r=a(e,t);this.params.tstInfo.messageImprint={hashAlg:t,hashValue:r},this.params.tstInfo.serialNumber={int:this.serial++};var n=Math.floor(1e9*Math.random());return this.params.tstInfo.nonce={int:n},i.TSPUtil.newTimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==e&&(this.params=e)},YAHOO.lang.extend(KJUR.asn1.tsp.SimpleTSAAdapter,KJUR.asn1.tsp.AbstractTSAAdapter),KJUR.asn1.tsp.FixedTSAAdapter=function(e){var t=KJUR,n=t.asn1.tsp,i=t.crypto.Util.hashHex;n.FixedTSAAdapter.superclass.constructor.call(this),this.params=null,this.getTSTHex=function(e,t){var r=i(e,t);return this.params.tstInfo.messageImprint={hashAlg:t,hashValue:r},n.TSPUtil.newTimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==e&&(this.params=e)},YAHOO.lang.extend(KJUR.asn1.tsp.FixedTSAAdapter,KJUR.asn1.tsp.AbstractTSAAdapter),KJUR.asn1.tsp.TSPUtil=new function(){},KJUR.asn1.tsp.TSPUtil.newTimeStampToken=function(e){var t=KJUR.asn1,r=t.cms,n=(t.tsp,t.tsp.TSTInfo),i=new r.SignedData,a=new n(e.tstInfo).getEncodedHex();if(i.dEncapContentInfo.setContentValue({hex:a}),i.dEncapContentInfo.setContentType("tstinfo"),"object"==typeof e.certs)for(var o=0;o<e.certs.length;o++)i.addCertificatesByPEM(e.certs[o]);var s=i.signerInfoList[0];s.setSignerIdentifier(e.signerCert),s.setForContentAndHash({sdObj:i,eciObj:i.dEncapContentInfo,hashAlg:e.hashAlg});var c=new r.SigningCertificate({array:[e.signerCert]});return s.dSignedAttrs.add(c),s.sign(e.signerPrvKey,e.sigAlg),i},KJUR.asn1.tsp.TSPUtil.parseTimeStampReq=function(e){var t=ASN1HEX,r=t.getChildIdx,n=t.getV,i=t.getTLV,a={certreq:!1},o=r(e,0);if(o.length<2)throw"TimeStampReq must have at least 2 items";var s=i(e,o[1]);a.mi=KJUR.asn1.tsp.TSPUtil.parseMessageImprint(s);for(var c=2;c<o.length;c++){var l=o[c],u=e.substr(l,2);if("06"==u){var h=n(e,l);a.policy=t.hextooidstr(h)}"02"==u&&(a.nonce=n(e,l)),"01"==u&&(a.certreq=!0)}return a},KJUR.asn1.tsp.TSPUtil.parseMessageImprint=function(e){var t=ASN1HEX,r=t.getChildIdx,n=t.getV,i=t.getIdxbyList,a={};if("30"!=e.substr(0,2))throw"head of messageImprint hex shall be '30'";r(e,0);var o=n(e,i(e,0,[0,0])),s=t.hextooidstr(o),c=KJUR.asn1.x509.OID.oid2name(s);if(""==c)throw"hashAlg name undefined: "+s;var l=c,u=i(e,0,[1]);return a.hashAlg=l,a.hashValue=n(e,u),a},void 0!==KJUR&&KJUR||(KJUR={}),void 0!==KJUR.asn1&&KJUR.asn1||(KJUR.asn1={}),void 0!==KJUR.asn1.cades&&KJUR.asn1.cades||(KJUR.asn1.cades={}),KJUR.asn1.cades.SignaturePolicyIdentifier=function(e){var t=KJUR.asn1,r=t.DERObjectIdentifier,n=t.DERSequence,i=t.cades,a=i.OtherHashAlgAndValue;if(i.SignaturePolicyIdentifier.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.15",void 0!==e&&"string"==typeof e.oid&&"object"==typeof e.hash){var o=new n({array:[new r({oid:e.oid}),new a(e.hash)]});this.valueList=[o]}},YAHOO.lang.extend(KJUR.asn1.cades.SignaturePolicyIdentifier,KJUR.asn1.cms.Attribute),KJUR.asn1.cades.OtherHashAlgAndValue=function(e){var t=KJUR.asn1,r=t.DERSequence,n=t.DEROctetString,i=t.x509.AlgorithmIdentifier;t.cades.OtherHashAlgAndValue.superclass.constructor.call(this),this.dAlg=null,this.dHash=null,this.getEncodedHex=function(){var e=new r({array:[this.dAlg,this.dHash]});return this.hTLV=e.getEncodedHex(),this.hTLV},void 0!==e&&"string"==typeof e.alg&&"string"==typeof e.hash&&(this.dAlg=new i({name:e.alg}),this.dHash=new n({hex:e.hash}))},YAHOO.lang.extend(KJUR.asn1.cades.OtherHashAlgAndValue,KJUR.asn1.ASN1Object),KJUR.asn1.cades.SignatureTimeStamp=function(e){var t=KJUR.asn1,r=t.ASN1Object;t.x509;if(t.cades.SignatureTimeStamp.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.14",this.tstHex=null,void 0!==e){if(void 0!==e.res)if("string"==typeof e.res&&e.res.match(/^[0-9A-Fa-f]+$/));else if(!(e.res instanceof r))throw"res param shall be ASN1Object or hex string";if(void 0!==e.tst)if("string"==typeof e.tst&&e.tst.match(/^[0-9A-Fa-f]+$/)){var n=new r;this.tstHex=e.tst,n.hTLV=this.tstHex,n.getEncodedHex(),this.valueList=[n]}else if(!(e.tst instanceof r))throw"tst param shall be ASN1Object or hex string"}},YAHOO.lang.extend(KJUR.asn1.cades.SignatureTimeStamp,KJUR.asn1.cms.Attribute),KJUR.asn1.cades.CompleteCertificateRefs=function(e){var n=KJUR.asn1.cades;n.CompleteCertificateRefs.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.21",this.setByArray=function(e){this.valueList=[];for(var t=0;t<e.length;t++){var r=new n.OtherCertID(e[t]);this.valueList.push(r)}},void 0!==e&&"object"==typeof e&&"number"==typeof e.length&&this.setByArray(e)},YAHOO.lang.extend(KJUR.asn1.cades.CompleteCertificateRefs,KJUR.asn1.cms.Attribute),KJUR.asn1.cades.OtherCertID=function(e){var r=KJUR.asn1,t=r.cms,n=r.cades;n.OtherCertID.superclass.constructor.call(this),this.hasIssuerSerial=!0,this.dOtherCertHash=null,this.dIssuerSerial=null,this.setByCertPEM=function(e){this.dOtherCertHash=new n.OtherHash(e),this.hasIssuerSerial&&(this.dIssuerSerial=new t.IssuerAndSerialNumber(e))},this.getEncodedHex=function(){if(null!=this.hTLV)return this.hTLV;if(null==this.dOtherCertHash)throw"otherCertHash not set";var e=[this.dOtherCertHash];null!=this.dIssuerSerial&&e.push(this.dIssuerSerial);var t=new r.DERSequence({array:e});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e&&("string"==typeof e&&-1!=e.indexOf("-----BEGIN ")&&this.setByCertPEM(e),"object"==typeof e&&(!1===e.hasis&&(this.hasIssuerSerial=!1),"string"==typeof e.cert&&this.setByCertPEM(e.cert)))},YAHOO.lang.extend(KJUR.asn1.cades.OtherCertID,KJUR.asn1.ASN1Object),KJUR.asn1.cades.OtherHash=function(e){var t=KJUR,r=t.asn1,n=(r.cms,r.cades),i=n.OtherHashAlgAndValue,a=t.crypto.Util.hashHex;if(n.OtherHash.superclass.constructor.call(this),this.alg="sha256",this.dOtherHash=null,this.setByCertPEM=function(e){if(-1==e.indexOf("-----BEGIN "))throw"certPEM not to seem PEM format";var t=pemtohex(e),r=a(t,this.alg);this.dOtherHash=new i({alg:this.alg,hash:r})},this.getEncodedHex=function(){if(null==this.dOtherHash)throw"OtherHash not set";return this.dOtherHash.getEncodedHex()},void 0!==e)if("string"==typeof e)if(-1!=e.indexOf("-----BEGIN "))this.setByCertPEM(e);else{if(!e.match(/^[0-9A-Fa-f]+$/))throw"unsupported string value for params";this.dOtherHash=new r.DEROctetString({hex:e})}else"object"==typeof e&&("string"==typeof e.cert?("string"==typeof e.alg&&(this.alg=e.alg),this.setByCertPEM(e.cert)):this.dOtherHash=new i(e))},YAHOO.lang.extend(KJUR.asn1.cades.OtherHash,KJUR.asn1.ASN1Object),KJUR.asn1.cades.CAdESUtil=new function(){},KJUR.asn1.cades.CAdESUtil.addSigTS=function(e,t,r){},KJUR.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned=function(e){var t=ASN1HEX,r=t.getChildIdx,n=t.getTLV,i=t.getTLVbyList,a=t.getIdxbyList,o=KJUR.asn1,s=o.ASN1Object,c=o.cms.SignedData,l=o.cades.CAdESUtil,u={};if("06092a864886f70d010702"!=i(e,0,[0]))throw"hex is not CMS SignedData";var h=r(e,a(e,0,[1,0]));if(h.length<4)throw"num of SignedData elem shall be 4 at least";var f=h.shift();u.version=n(e,f);var d=h.shift();u.algs=n(e,d);var g=h.shift();u.encapcontent=n(e,g),u.certs=null,u.revs=null,u.si=[];var p=h.shift();"a0"==e.substr(p,2)&&(u.certs=n(e,p),p=h.shift()),"a1"==e.substr(p,2)&&(u.revs=n(e,p),p=h.shift());var b=p;if("31"!=e.substr(b,2))throw"Can't find signerInfos";for(var y=r(e,b),m=0;m<y.length;m++){var v=y[m],I=l.parseSignerInfoForAddingUnsigned(e,v,m);u.si[m]=I}var w=null;u.obj=new c,(w=new s).hTLV=u.version,u.obj.dCMSVersion=w,(w=new s).hTLV=u.algs,u.obj.dDigestAlgs=w,(w=new s).hTLV=u.encapcontent,u.obj.dEncapContentInfo=w,(w=new s).hTLV=u.certs,u.obj.dCerts=w,u.obj.signerInfoList=[];for(m=0;m<u.si.length;m++)u.obj.signerInfoList.push(u.si[m].obj);return u},KJUR.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned=function(e,t,r){var n=ASN1HEX,i=n.getChildIdx,a=n.getTLV,o=n.getV,s=KJUR.asn1,c=s.ASN1Object,l=s.cms,u=l.AttributeList,h=l.SignerInfo,f={},d=i(e,t);if(6!=d.length)throw"not supported items for SignerInfo (!=6)";var g=d.shift();f.version=a(e,g);var p=d.shift();f.si=a(e,p);var b=d.shift();f.digalg=a(e,b);var y=d.shift();f.sattrs=a(e,y);var m=d.shift();f.sigalg=a(e,m);var v=d.shift();f.sig=a(e,v),f.sigval=o(e,v);var I=null;return f.obj=new h,(I=new c).hTLV=f.version,f.obj.dCMSVersion=I,(I=new c).hTLV=f.si,f.obj.dSignerIdentifier=I,(I=new c).hTLV=f.digalg,f.obj.dDigestAlgorithm=I,(I=new c).hTLV=f.sattrs,f.obj.dSignedAttrs=I,(I=new c).hTLV=f.sigalg,f.obj.dSigAlg=I,(I=new c).hTLV=f.sig,f.obj.dSig=I,f.obj.dUnsignedAttrs=new u,f},void 0!==KJUR.asn1.csr&&KJUR.asn1.csr||(KJUR.asn1.csr={}),KJUR.asn1.csr.CertificationRequest=function(e){var n=KJUR,t=n.asn1,i=t.DERBitString,a=t.DERSequence,r=t.csr,o=t.x509;r.CertificationRequest.superclass.constructor.call(this),this.sign=function(e,t){null==this.prvKey&&(this.prvKey=t),this.asn1SignatureAlg=new o.AlgorithmIdentifier({name:e}),sig=new n.crypto.Signature({alg:e}),sig.init(this.prvKey),sig.updateHex(this.asn1CSRInfo.getEncodedHex()),this.hexSig=sig.sign(),this.asn1Sig=new i({hex:"00"+this.hexSig});var r=new a({array:[this.asn1CSRInfo,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=r.getEncodedHex(),this.isModified=!1},this.getPEMString=function(){return hextopem(this.getEncodedHex(),"CERTIFICATE REQUEST")},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},void 0!==e&&void 0!==e.csrinfo&&(this.asn1CSRInfo=e.csrinfo)},YAHOO.lang.extend(KJUR.asn1.csr.CertificationRequest,KJUR.asn1.ASN1Object),KJUR.asn1.csr.CertificationRequestInfo=function(e){var t=KJUR.asn1,r=t.DERInteger,a=t.DERSequence,o=t.DERSet,s=t.DERNull,c=t.DERTaggedObject,l=t.DERObjectIdentifier,n=t.csr,i=t.x509,u=i.X500Name,h=i.Extension,f=KEYUTIL;n.CertificationRequestInfo.superclass.constructor.call(this),this._initialize=function(){this.asn1Array=new Array,this.asn1Version=new r({int:0}),this.asn1Subject=null,this.asn1SubjPKey=null,this.extensionsArray=new Array},this.setSubjectByParam=function(e){this.asn1Subject=new u(e)},this.setSubjectPublicKeyByGetKey=function(e){var t=f.getKey(e);this.asn1SubjPKey=new i.SubjectPublicKeyInfo(t)},this.appendExtensionByName=function(e,t){h.appendByNameToArray(e,t,this.extensionsArray)},this.getEncodedHex=function(){if(this.asn1Array=new Array,this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1Subject),this.asn1Array.push(this.asn1SubjPKey),0<this.extensionsArray.length){var e=new a({array:this.extensionsArray}),t=new o({array:[e]}),r=new a({array:[new l({oid:"1.2.840.113549.1.9.14"}),t]}),n=new c({explicit:!0,tag:"a0",obj:r});this.asn1Array.push(n)}else{n=new c({explicit:!1,tag:"a0",obj:new s});this.asn1Array.push(n)}var i=new a({array:this.asn1Array});return this.hTLV=i.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize()},YAHOO.lang.extend(KJUR.asn1.csr.CertificationRequestInfo,KJUR.asn1.ASN1Object),KJUR.asn1.csr.CSRUtil=new function(){},KJUR.asn1.csr.CSRUtil.newCSRPEM=function(e){var t=KEYUTIL,r=KJUR.asn1.csr;if(void 0===e.subject)throw"parameter subject undefined";if(void 0===e.sbjpubkey)throw"parameter sbjpubkey undefined";if(void 0===e.sigalg)throw"parameter sigalg undefined";if(void 0===e.sbjprvkey)throw"parameter sbjpubkey undefined";var n=new r.CertificationRequestInfo;if(n.setSubjectByParam(e.subject),n.setSubjectPublicKeyByGetKey(e.sbjpubkey),void 0!==e.ext&&void 0!==e.ext.length)for(var i=0;i<e.ext.length;i++)for(key in e.ext[i])n.appendExtensionByName(key,e.ext[i][key]);var a=new r.CertificationRequest({csrinfo:n}),o=t.getKey(e.sbjprvkey);return a.sign(e.sigalg,o),a.getPEMString()},KJUR.asn1.csr.CSRUtil.getInfo=function(e){var t=ASN1HEX.getTLVbyList,r={subject:{},pubkey:{}};if(-1==e.indexOf("-----BEGIN CERTIFICATE REQUEST"))throw"argument is not PEM file";var n=pemtohex(e,"CERTIFICATE REQUEST");return r.subject.hex=t(n,0,[0,1]),r.subject.name=X509.hex2dn(r.subject.hex),r.pubkey.hex=t(n,0,[0,2]),r.pubkey.obj=KEYUTIL.getKey(r.pubkey.hex,null,"pkcs8pub"),r},void 0!==KJUR&&KJUR||(KJUR={}),void 0!==KJUR.asn1&&KJUR.asn1||(KJUR.asn1={}),void 0!==KJUR.asn1.ocsp&&KJUR.asn1.ocsp||(KJUR.asn1.ocsp={}),KJUR.asn1.ocsp.DEFAULT_HASH="sha1",KJUR.asn1.ocsp.CertID=function(e){var t=KJUR,r=t.asn1,i=r.DEROctetString,a=r.DERInteger,n=r.DERSequence,o=r.x509.AlgorithmIdentifier,s=r.ocsp,u=s.DEFAULT_HASH,h=t.crypto.Util.hashHex,f=X509,d=ASN1HEX;if(s.CertID.superclass.constructor.call(this),this.dHashAlg=null,this.dIssuerNameHash=null,this.dIssuerKeyHash=null,this.dSerialNumber=null,this.setByValue=function(e,t,r,n){void 0===n&&(n=u),this.dHashAlg=new o({name:n}),this.dIssuerNameHash=new i({hex:e}),this.dIssuerKeyHash=new i({hex:t}),this.dSerialNumber=new a({hex:r})},this.setByCert=function(e,t,r){void 0===r&&(r=u);var n=new f;n.readCertPEM(t);var i=new f;i.readCertPEM(e);var a=i.getPublicKeyHex(),o=d.getTLVbyList(a,0,[1,0],"30"),s=n.getSerialNumberHex(),c=h(i.getSubjectHex(),r),l=h(o,r);this.setByValue(c,l,s,r),this.hoge=n.getSerialNumberHex()},this.getEncodedHex=function(){if(null===this.dHashAlg&&null===this.dIssuerNameHash&&null===this.dIssuerKeyHash&&null===this.dSerialNumber)throw"not yet set values";var e=[this.dHashAlg,this.dIssuerNameHash,this.dIssuerKeyHash,this.dSerialNumber],t=new n({array:e});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e){var c=e;if(void 0!==c.issuerCert&&void 0!==c.subjectCert){var l=u;void 0===c.alg&&(l=void 0),this.setByCert(c.issuerCert,c.subjectCert,l)}else{if(void 0===c.namehash||void 0===c.keyhash||void 0===c.serial)throw"invalid constructor arguments";l=u;void 0===c.alg&&(l=void 0),this.setByValue(c.namehash,c.keyhash,c.serial,l)}}},YAHOO.lang.extend(KJUR.asn1.ocsp.CertID,KJUR.asn1.ASN1Object),KJUR.asn1.ocsp.Request=function(e){var t=KJUR.asn1,r=t.DERSequence,n=t.ocsp;if(n.Request.superclass.constructor.call(this),this.dReqCert=null,this.dExt=null,this.getEncodedHex=function(){var e=[];if(null===this.dReqCert)throw"reqCert not set";e.push(this.dReqCert);var t=new r({array:e});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e){var i=new n.CertID(e);this.dReqCert=i}},YAHOO.lang.extend(KJUR.asn1.ocsp.Request,KJUR.asn1.ASN1Object),KJUR.asn1.ocsp.TBSRequest=function(e){var t=KJUR.asn1,n=t.DERSequence,i=t.ocsp;i.TBSRequest.superclass.constructor.call(this),this.version=0,this.dRequestorName=null,this.dRequestList=[],this.dRequestExt=null,this.setRequestListByParam=function(e){for(var t=[],r=0;r<e.length;r++){var n=new i.Request(e[0]);t.push(n)}this.dRequestList=t},this.getEncodedHex=function(){var e=[];if(0!==this.version)throw"not supported version: "+this.version;if(null!==this.dRequestorName)throw"requestorName not supported";var t=new n({array:this.dRequestList});if(e.push(t),null!==this.dRequestExt)throw"requestExtensions not supported";var r=new n({array:e});return this.hTLV=r.getEncodedHex(),this.hTLV},void 0!==e&&void 0!==e.reqList&&this.setRequestListByParam(e.reqList)},YAHOO.lang.extend(KJUR.asn1.ocsp.TBSRequest,KJUR.asn1.ASN1Object),KJUR.asn1.ocsp.OCSPRequest=function(e){var t=KJUR.asn1,r=t.DERSequence,n=t.ocsp;if(n.OCSPRequest.superclass.constructor.call(this),this.dTbsRequest=null,this.dOptionalSignature=null,this.getEncodedHex=function(){var e=[];if(null===this.dTbsRequest)throw"tbsRequest not set";if(e.push(this.dTbsRequest),null!==this.dOptionalSignature)throw"optionalSignature not supported";var t=new r({array:e});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==e&&void 0!==e.reqList){var i=new n.TBSRequest(e);this.dTbsRequest=i}},YAHOO.lang.extend(KJUR.asn1.ocsp.OCSPRequest,KJUR.asn1.ASN1Object),KJUR.asn1.ocsp.OCSPUtil={},KJUR.asn1.ocsp.OCSPUtil.getRequestHex=function(e,t,r){var n=KJUR.asn1.ocsp;void 0===r&&(r=n.DEFAULT_HASH);var i={alg:r,issuerCert:e,subjectCert:t};return new n.OCSPRequest({reqList:[i]}).getEncodedHex()},KJUR.asn1.ocsp.OCSPUtil.getOCSPResponseInfo=function(e){var t=ASN1HEX,r=t.getVbyList,n=t.getIdxbyList,i=(r=t.getVbyList,t.getV),a={};try{var o=r(e,0,[0],"0a");a.responseStatus=parseInt(o,16)}catch(e){}if(0!==a.responseStatus)return a;try{var s=n(e,0,[1,0,1,0,0,2,0,1]);"80"===e.substr(s,2)?a.certStatus="good":"a1"===e.substr(s,2)?(a.certStatus="revoked",a.revocationTime=hextoutf8(r(e,s,[0]))):"82"===e.substr(s,2)&&(a.certStatus="unknown")}catch(e){}try{var c=n(e,0,[1,0,1,0,0,2,0,2]);a.thisUpdate=hextoutf8(i(e,c))}catch(e){}try{var l=n(e,0,[1,0,1,0,0,2,0,3]);"a0"===e.substr(l,2)&&(a.nextUpdate=hextoutf8(r(e,l,[0])))}catch(e){}return a},void 0!==KJUR&&KJUR||(KJUR={}),void 0!==KJUR.lang&&KJUR.lang||(KJUR.lang={}),KJUR.lang.String=function(){},"function"==typeof Buffer?(utf8tob64u=function(e){return b64tob64u(new Buffer(e,"utf8").toString("base64"))},b64utoutf8=function(e){return new Buffer(b64utob64(e),"base64").toString("utf8")}):(utf8tob64u=function(e){return hextob64u(uricmptohex(encodeURIComponentAll(e)))},b64utoutf8=function(e){return decodeURIComponent(hextouricmp(b64utohex(e)))}),KJUR.lang.String.isInteger=function(e){return!!e.match(/^[0-9]+$/)||!!e.match(/^-[0-9]+$/)},KJUR.lang.String.isHex=function(e){return!(e.length%2!=0||!e.match(/^[0-9a-f]+$/)&&!e.match(/^[0-9A-F]+$/))},KJUR.lang.String.isBase64=function(e){return!(!(e=e.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||e.length%4!=0)},KJUR.lang.String.isBase64URL=function(e){return!e.match(/[+/=]/)&&(e=b64utob64(e),KJUR.lang.String.isBase64(e))},KJUR.lang.String.isIntegerArray=function(e){return!!(e=e.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)};var strdiffidx=function(e,t){var r=e.length;e.length>t.length&&(r=t.length);for(var n=0;n<r;n++)if(e.charCodeAt(n)!=t.charCodeAt(n))return n;return e.length!=t.length?r:-1};void 0!==KJUR&&KJUR||(KJUR={}),void 0!==KJUR.crypto&&KJUR.crypto||(KJUR.crypto={}),KJUR.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:CryptoJS.algo.MD5,sha1:CryptoJS.algo.SHA1,sha224:CryptoJS.algo.SHA224,sha256:CryptoJS.algo.SHA256,sha384:CryptoJS.algo.SHA384,sha512:CryptoJS.algo.SHA512,ripemd160:CryptoJS.algo.RIPEMD160},this.getDigestInfoHex=function(e,t){if(void 0===this.DIGESTINFOHEAD[t])throw"alg not supported in Util.DIGESTINFOHEAD: "+t;return this.DIGESTINFOHEAD[t]+e},this.getPaddedDigestInfoHex=function(e,t,r){var n=this.getDigestInfoHex(e,t),i=r/4;if(n.length+22>i)throw"key is too short for SigAlg: keylen="+r+","+t;for(var a="00"+n,o="",s=i-"0001".length-a.length,c=0;c<s;c+=2)o+="ff";return"0001"+o+a},this.hashString=function(e,t){return new KJUR.crypto.MessageDigest({alg:t}).digestString(e)},this.hashHex=function(e,t){return new KJUR.crypto.MessageDigest({alg:t}).digestHex(e)},this.sha1=function(e){return new KJUR.crypto.MessageDigest({alg:"sha1",prov:"cryptojs"}).digestString(e)},this.sha256=function(e){return new KJUR.crypto.MessageDigest({alg:"sha256",prov:"cryptojs"}).digestString(e)},this.sha256Hex=function(e){return new KJUR.crypto.MessageDigest({alg:"sha256",prov:"cryptojs"}).digestHex(e)},this.sha512=function(e){return new KJUR.crypto.MessageDigest({alg:"sha512",prov:"cryptojs"}).digestString(e)},this.sha512Hex=function(e){return new KJUR.crypto.MessageDigest({alg:"sha512",prov:"cryptojs"}).digestHex(e)}},KJUR.crypto.Util.md5=function(e){return new KJUR.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(e)},KJUR.crypto.Util.ripemd160=function(e){return new KJUR.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(e)},KJUR.crypto.Util.SECURERANDOMGEN=new SecureRandom,KJUR.crypto.Util.getRandomHexOfNbytes=function(e){var t=new Array(e);return KJUR.crypto.Util.SECURERANDOMGEN.nextBytes(t),BAtohex(t)},KJUR.crypto.Util.getRandomBigIntegerOfNbytes=function(e){return new BigInteger(KJUR.crypto.Util.getRandomHexOfNbytes(e),16)},KJUR.crypto.Util.getRandomHexOfNbits=function(e){var t=e%8,r=new Array((e-t)/8+1);return KJUR.crypto.Util.SECURERANDOMGEN.nextBytes(r),r[0]=(255<<t&255^255)&r[0],BAtohex(r)},KJUR.crypto.Util.getRandomBigIntegerOfNbits=function(e){return new BigInteger(KJUR.crypto.Util.getRandomHexOfNbits(e),16)},KJUR.crypto.Util.getRandomBigIntegerZeroToMax=function(e){for(var t=e.bitLength();;){var r=KJUR.crypto.Util.getRandomBigIntegerOfNbits(t);if(-1!=e.compareTo(r))return r}},KJUR.crypto.Util.getRandomBigIntegerMinToMax=function(e,t){var r=e.compareTo(t);if(1==r)throw"biMin is greater than biMax";if(0==r)return e;var n=t.subtract(e);return KJUR.crypto.Util.getRandomBigIntegerZeroToMax(n).add(e)},KJUR.crypto.MessageDigest=function(e){this.setAlgAndProvider=function(t,e){if(null!==(t=KJUR.crypto.MessageDigest.getCanonicalAlgName(t))&&void 0===e&&(e=KJUR.crypto.Util.DEFAULTPROVIDER[t]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(t)&&"cryptojs"==e){try{this.md=KJUR.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[t].create()}catch(e){throw"setAlgAndProvider hash alg set fail alg="+t+"/"+e}this.updateString=function(e){this.md.update(e)},this.updateHex=function(e){var t=CryptoJS.enc.Hex.parse(e);this.md.update(t)},this.digest=function(){return this.md.finalize().toString(CryptoJS.enc.Hex)},this.digestString=function(e){return this.updateString(e),this.digest()},this.digestHex=function(e){return this.updateHex(e),this.digest()}}if(-1!=":sha256:".indexOf(t)&&"sjcl"==e){try{this.md=new sjcl.hash.sha256}catch(e){throw"setAlgAndProvider hash alg set fail alg="+t+"/"+e}this.updateString=function(e){this.md.update(e)},this.updateHex=function(e){var t=sjcl.codec.hex.toBits(e);this.md.update(t)},this.digest=function(){var e=this.md.finalize();return sjcl.codec.hex.fromBits(e)},this.digestString=function(e){return this.updateString(e),this.digest()},this.digestHex=function(e){return this.updateHex(e),this.digest()}}},this.updateString=function(e){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(e){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==e&&void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov&&(this.provName=KJUR.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},KJUR.crypto.MessageDigest.getCanonicalAlgName=function(e){return"string"==typeof e&&(e=(e=e.toLowerCase()).replace(/-/,"")),e},KJUR.crypto.MessageDigest.getHashLength=function(e){var t=KJUR.crypto.MessageDigest,r=t.getCanonicalAlgName(e);if(void 0===t.HASHLENGTH[r])throw"not supported algorithm: "+e;return t.HASHLENGTH[r]},KJUR.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},KJUR.crypto.Mac=function(e){this.setAlgAndProvider=function(e,t){if(null==(e=e.toLowerCase())&&(e="hmacsha1"),"hmac"!=(e=e.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+e;void 0===t&&(t=KJUR.crypto.Util.DEFAULTPROVIDER[e]),this.algProv=e+"/"+t;var r=e.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(r)&&"cryptojs"==t){try{var n=KJUR.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[r];this.mac=CryptoJS.algo.HMAC.create(n,this.pass)}catch(e){throw"setAlgAndProvider hash alg set fail hashAlg="+r+"/"+e}this.updateString=function(e){this.mac.update(e)},this.updateHex=function(e){var t=CryptoJS.enc.Hex.parse(e);this.mac.update(t)},this.doFinal=function(){return this.mac.finalize().toString(CryptoJS.enc.Hex)},this.doFinalString=function(e){return this.updateString(e),this.doFinal()},this.doFinalHex=function(e){return this.updateHex(e),this.doFinal()}}},this.updateString=function(e){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(e){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(e){if("string"==typeof e){var t=e;return e.length%2!=1&&e.match(/^[0-9A-Fa-f]+$/)||(t=rstrtohex(e)),void(this.pass=CryptoJS.enc.Hex.parse(t))}if("object"!=typeof e)throw"KJUR.crypto.Mac unsupported password type: "+e;t=null;if(void 0!==e.hex){if(e.hex.length%2!=0||!e.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+e.hex;t=e.hex}if(void 0!==e.utf8&&(t=utf8tohex(e.utf8)),void 0!==e.rstr&&(t=rstrtohex(e.rstr)),void 0!==e.b64&&(t=b64tohex(e.b64)),void 0!==e.b64u&&(t=b64utohex(e.b64u)),null==t)throw"KJUR.crypto.Mac unsupported password type: "+e;this.pass=CryptoJS.enc.Hex.parse(t)},void 0!==e&&(void 0!==e.pass&&this.setPassword(e.pass),void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov&&(this.provName=KJUR.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},KJUR.crypto.Signature=function(e){var t=null;if(this._setAlgNames=function(){var e=this.algName.match(/^(.+)with(.+)$/);e&&(this.mdAlgName=e[1].toLowerCase(),this.pubkeyAlgName=e[2].toLowerCase())},this._zeroPaddingOfSignature=function(e,t){for(var r="",n=t/4-e.length,i=0;i<n;i++)r+="0";return r+e},this.setAlgAndProvider=function(e,t){if(this._setAlgNames(),"cryptojs/jsrsa"!=t)throw"provider not supported: "+t;if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new KJUR.crypto.MessageDigest({alg:this.mdAlgName})}catch(e){throw"setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+e}this.init=function(e,t){var r=null;try{r=void 0===t?KEYUTIL.getKey(e):KEYUTIL.getKey(e,t)}catch(e){throw"init failed:"+e}if(!0===r.isPrivate)this.prvKey=r,this.state="SIGN";else{if(!0!==r.isPublic)throw"init failed.:"+r;this.pubKey=r,this.state="VERIFY"}},this.updateString=function(e){this.md.updateString(e)},this.updateHex=function(e){this.md.updateHex(e)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0!==this.ecprvhex&&void 0!==this.eccurvename){var e=new KJUR.crypto.ECDSA({curve:this.eccurvename});this.hSign=e.signHex(this.sHashHex,this.ecprvhex)}else if(this.prvKey instanceof RSAKey&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof RSAKey&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof KJUR.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof KJUR.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(e){return this.updateString(e),this.sign()},this.signHex=function(e){return this.updateHex(e),this.sign()},this.verify=function(e){if(this.sHashHex=this.md.digest(),void 0!==this.ecpubhex&&void 0!==this.eccurvename)return new KJUR.crypto.ECDSA({curve:this.eccurvename}).verifyHex(this.sHashHex,e,this.ecpubhex);if(this.pubKey instanceof RSAKey&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,e,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof RSAKey&&"rsa"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);if(void 0!==KJUR.crypto.ECDSA&&this.pubKey instanceof KJUR.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);if(void 0!==KJUR.crypto.DSA&&this.pubKey instanceof KJUR.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(e,t){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(e){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(e){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(e){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(e){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},void 0!==(this.initParams=e)&&(void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov?this.provName=KJUR.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=e.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==e.psssaltlen&&(this.pssSaltLen=e.psssaltlen),void 0!==e.prvkeypem)){if(void 0!==e.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{t=KEYUTIL.getKey(e.prvkeypem);this.init(t)}catch(e){throw"fatal error to load pem private key: "+e}}},KJUR.crypto.Cipher=function(e){},KJUR.crypto.Cipher.encrypt=function(e,t,r){if(t instanceof RSAKey&&t.isPublic){var n=KJUR.crypto.Cipher.getAlgByKeyAndName(t,r);if("RSA"===n)return t.encrypt(e);if("RSAOAEP"===n)return t.encryptOAEP(e,"sha1");var i=n.match(/^RSAOAEP(\d+)$/);if(null!==i)return t.encryptOAEP(e,"sha"+i[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+r}throw"Cipher.encrypt: unsupported key or algorithm"},KJUR.crypto.Cipher.decrypt=function(e,t,r){if(t instanceof RSAKey&&t.isPrivate){var n=KJUR.crypto.Cipher.getAlgByKeyAndName(t,r);if("RSA"===n)return t.decrypt(e);if("RSAOAEP"===n)return t.decryptOAEP(e,"sha1");var i=n.match(/^RSAOAEP(\d+)$/);if(null!==i)return t.decryptOAEP(e,"sha"+i[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+r}throw"Cipher.decrypt: unsupported key or algorithm"},KJUR.crypto.Cipher.getAlgByKeyAndName=function(e,t){if(e instanceof RSAKey){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(t))return t;if(null==t)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+t}throw"getAlgByKeyAndName: not supported algorithm name: "+t},KJUR.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},void 0!==KJUR&&KJUR||(KJUR={}),void 0!==KJUR.crypto&&KJUR.crypto||(KJUR.crypto={}),KJUR.crypto.ECDSA=function(e){var t=new SecureRandom;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(e){return new BigInteger(e.bitLength(),t).mod(e.subtract(BigInteger.ONE)).add(BigInteger.ONE)},this.setNamedCurve=function(e){this.ecparams=KJUR.crypto.ECParameterDB.getByName(e),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=e},this.setPrivateKeyHex=function(e){this.isPrivate=!0,this.prvKeyHex=e},this.setPublicKeyHex=function(e){this.isPublic=!0,this.pubKeyHex=e},this.getPublicKeyXYHex=function(){var e=this.pubKeyHex;if("04"!==e.substr(0,2))throw"this method supports uncompressed format(04) only";var t=this.ecparams.keylen/4;if(e.length!==2+2*t)throw"malformed public key hex length";var r={};return r.x=e.substr(2,t),r.y=e.substr(2+t),r},this.getShortNISTPCurveName=function(){var e=this.curveName;return"secp256r1"===e||"NIST P-256"===e||"P-256"===e||"prime256v1"===e?"P-256":"secp384r1"===e||"NIST P-384"===e||"P-384"===e?"P-384":null},this.generateKeyPairHex=function(){var e=this.ecparams.n,t=this.getBigRandom(e),r=this.ecparams.G.multiply(t),n=r.getX().toBigInteger(),i=r.getY().toBigInteger(),a=this.ecparams.keylen/4,o=("0000000000"+t.toString(16)).slice(-a),s="04"+("0000000000"+n.toString(16)).slice(-a)+("0000000000"+i.toString(16)).slice(-a);return this.setPrivateKeyHex(o),this.setPublicKeyHex(s),{ecprvhex:o,ecpubhex:s}},this.signWithMessageHash=function(e){return this.signHex(e,this.prvKeyHex)},this.signHex=function(e,t){var r=new BigInteger(t,16),n=this.ecparams.n,i=new BigInteger(e,16);do{var a=this.getBigRandom(n),o=this.ecparams.G.multiply(a).getX().toBigInteger().mod(n)}while(o.compareTo(BigInteger.ZERO)<=0);var s=a.modInverse(n).multiply(i.add(r.multiply(o))).mod(n);return KJUR.crypto.ECDSA.biRSSigToASN1Sig(o,s)},this.sign=function(e,t){var r=t,n=this.ecparams.n,i=BigInteger.fromByteArrayUnsigned(e);do{var a=this.getBigRandom(n),o=this.ecparams.G.multiply(a).getX().toBigInteger().mod(n)}while(o.compareTo(BigInteger.ZERO)<=0);var s=a.modInverse(n).multiply(i.add(r.multiply(o))).mod(n);return this.serializeSig(o,s)},this.verifyWithMessageHash=function(e,t){return this.verifyHex(e,t,this.pubKeyHex)},this.verifyHex=function(e,t,r){var n,i,a,o=KJUR.crypto.ECDSA.parseSigHex(t);n=o.r,i=o.s,a=ECPointFp.decodeFromHex(this.ecparams.curve,r);var s=new BigInteger(e,16);return this.verifyRaw(s,n,i,a)},this.verify=function(e,t,r){var n,i,a;if(Bitcoin.Util.isArray(t)){var o=this.parseSig(t);n=o.r,i=o.s}else{if("object"!=typeof t||!t.r||!t.s)throw"Invalid value for signature";n=t.r,i=t.s}if(r instanceof ECPointFp)a=r;else{if(!Bitcoin.Util.isArray(r))throw"Invalid format for pubkey value, must be byte array or ECPointFp";a=ECPointFp.decodeFrom(this.ecparams.curve,r)}var s=BigInteger.fromByteArrayUnsigned(e);return this.verifyRaw(s,n,i,a)},this.verifyRaw=function(e,t,r,n){var i=this.ecparams.n,a=this.ecparams.G;if(t.compareTo(BigInteger.ONE)<0||0<=t.compareTo(i))return!1;if(r.compareTo(BigInteger.ONE)<0||0<=r.compareTo(i))return!1;var o=r.modInverse(i),s=e.multiply(o).mod(i),c=t.multiply(o).mod(i);return a.multiply(s).add(n.multiply(c)).getX().toBigInteger().mod(i).equals(t)},this.serializeSig=function(e,t){var r=e.toByteArraySigned(),n=t.toByteArraySigned(),i=[];return i.push(2),i.push(r.length),(i=i.concat(r)).push(2),i.push(n.length),(i=i.concat(n)).unshift(i.length),i.unshift(48),i},this.parseSig=function(e){var t;if(48!=e[0])throw new Error("Signature not a valid DERSequence");if((t=2)!=e[t])throw new Error("First element in signature must be a DERInteger");var r=e.slice(t+2,t+2+e[t+1]);if(2!=e[t+=2+e[t+1]])throw new Error("Second element in signature must be a DERInteger");var n=e.slice(t+2,t+2+e[t+1]);return t+=2+e[t+1],{r:BigInteger.fromByteArrayUnsigned(r),s:BigInteger.fromByteArrayUnsigned(n)}},this.parseSigCompact=function(e){if(65!==e.length)throw"Signature has the wrong length";var t=e[0]-27;if(t<0||7<t)throw"Invalid signature type";var r=this.ecparams.n;return{r:BigInteger.fromByteArrayUnsigned(e.slice(1,33)).mod(r),s:BigInteger.fromByteArrayUnsigned(e.slice(33,65)).mod(r),i:t}},this.readPKCS5PrvKeyHex=function(e){var t,r,n,i=ASN1HEX,a=KJUR.crypto.ECDSA.getName,o=i.getVbyList;if(!1===i.isASN1HEX(e))throw"not ASN.1 hex string";try{t=o(e,0,[2,0],"06"),r=o(e,0,[1],"04");try{n=o(e,0,[3,0],"03").substr(2)}catch(e){}}catch(e){throw"malformed PKCS#1/5 plain ECC private key"}if(this.curveName=a(t),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(n),this.setPrivateKeyHex(r),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(e){var t,r,n,i=ASN1HEX,a=KJUR.crypto.ECDSA.getName,o=i.getVbyList;if(!1===i.isASN1HEX(e))throw"not ASN.1 hex string";try{o(e,0,[1,0],"06"),t=o(e,0,[1,1],"06"),r=o(e,0,[2,0,1],"04");try{n=o(e,0,[2,0,2,0],"03").substr(2)}catch(e){}}catch(e){throw"malformed PKCS#8 plain ECC private key"}if(this.curveName=a(t),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(n),this.setPrivateKeyHex(r),this.isPublic=!1},this.readPKCS8PubKeyHex=function(e){var t,r,n=ASN1HEX,i=KJUR.crypto.ECDSA.getName,a=n.getVbyList;if(!1===n.isASN1HEX(e))throw"not ASN.1 hex string";try{a(e,0,[0,0],"06"),t=a(e,0,[0,1],"06"),r=a(e,0,[1],"03").substr(2)}catch(e){throw"malformed PKCS#8 ECC public key"}if(this.curveName=i(t),null===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(r)},this.readCertPubKeyHex=function(e,t){5!==t&&(t=6);var r,n,i=ASN1HEX,a=KJUR.crypto.ECDSA.getName,o=i.getVbyList;if(!1===i.isASN1HEX(e))throw"not ASN.1 hex string";try{r=o(e,0,[0,t,0,1],"06"),n=o(e,0,[0,t,1],"03").substr(2)}catch(e){throw"malformed X.509 certificate ECC public key"}if(this.curveName=a(r),null===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(n)},void 0!==e&&void 0!==e.curve&&(this.curveName=e.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==e&&(void 0!==e.prv&&this.setPrivateKeyHex(e.prv),void 0!==e.pub&&this.setPublicKeyHex(e.pub))},KJUR.crypto.ECDSA.parseSigHex=function(e){var t=KJUR.crypto.ECDSA.parseSigHexInHexRS(e);return{r:new BigInteger(t.r,16),s:new BigInteger(t.s,16)}},KJUR.crypto.ECDSA.parseSigHexInHexRS=function(e){var t=ASN1HEX,r=t.getChildIdx,n=t.getV;if("30"!=e.substr(0,2))throw"signature is not a ASN.1 sequence";var i=r(e,0);if(2!=i.length)throw"number of signature ASN.1 sequence elements seem wrong";var a=i[0],o=i[1];if("02"!=e.substr(a,2))throw"1st item of sequene of signature is not ASN.1 integer";if("02"!=e.substr(o,2))throw"2nd item of sequene of signature is not ASN.1 integer";return{r:n(e,a),s:n(e,o)}},KJUR.crypto.ECDSA.asn1SigToConcatSig=function(e){var t=KJUR.crypto.ECDSA.parseSigHexInHexRS(e),r=t.r,n=t.s;if("00"==r.substr(0,2)&&r.length%32==2&&(r=r.substr(2)),"00"==n.substr(0,2)&&n.length%32==2&&(n=n.substr(2)),r.length%32==30&&(r="00"+r),n.length%32==30&&(n="00"+n),r.length%32!=0)throw"unknown ECDSA sig r length error";if(n.length%32!=0)throw"unknown ECDSA sig s length error";return r+n},KJUR.crypto.ECDSA.concatSigToASN1Sig=function(e){if(e.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var t=e.substr(0,e.length/2),r=e.substr(e.length/2);return KJUR.crypto.ECDSA.hexRSSigToASN1Sig(t,r)},KJUR.crypto.ECDSA.hexRSSigToASN1Sig=function(e,t){var r=new BigInteger(e,16),n=new BigInteger(t,16);return KJUR.crypto.ECDSA.biRSSigToASN1Sig(r,n)},KJUR.crypto.ECDSA.biRSSigToASN1Sig=function(e,t){var r=KJUR.asn1,n=new r.DERInteger({bigint:e}),i=new r.DERInteger({bigint:t});return new r.DERSequence({array:[n,i]}).getEncodedHex()},KJUR.crypto.ECDSA.getName=function(e){return"2a8648ce3d030107"===e?"secp256r1":"2b8104000a"===e?"secp256k1":"2b81040022"===e?"secp384r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(e)?"secp256r1":-1!=="|secp256k1|".indexOf(e)?"secp256k1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(e)?"secp384r1":null},void 0!==KJUR&&KJUR||(KJUR={}),void 0!==KJUR.crypto&&KJUR.crypto||(KJUR.crypto={}),KJUR.crypto.ECParameterDB=new function(){var I={},w={};function C(e){return new BigInteger(e,16)}this.getByName=function(e){var t=e;if(void 0!==w[t]&&(t=w[e]),void 0!==I[t])return I[t];throw"unregistered EC curve name: "+t},this.regist=function(e,t,r,n,i,a,o,s,c,l,u,h){I[e]={};var f=C(r),d=C(n),g=C(i),p=C(a),b=C(o),y=new ECCurveFp(f,d,g),m=y.decodePointHex("04"+s+c);I[e].name=e,I[e].keylen=t,I[e].curve=y,I[e].G=m,I[e].n=p,I[e].h=b,I[e].oid=u,I[e].info=h;for(var v=0;v<l.length;v++)w[l[v]]=e}},KJUR.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),KJUR.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),KJUR.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),KJUR.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),KJUR.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),KJUR.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),KJUR.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),KJUR.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),KJUR.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),KJUR.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]),void 0!==KJUR&&KJUR||(KJUR={}),void 0!==KJUR.crypto&&KJUR.crypto||(KJUR.crypto={}),KJUR.crypto.DSA=function(){this.p=null,this.q=null,this.g=null,this.y=null,this.x=null,this.type="DSA",this.isPrivate=!1,this.isPublic=!1,this.setPrivate=function(e,t,r,n,i){this.isPrivate=!0,this.p=e,this.q=t,this.g=r,this.y=n,this.x=i},this.setPrivateHex=function(e,t,r,n,i){var a,o,s,c,l;a=new BigInteger(e,16),o=new BigInteger(t,16),s=new BigInteger(r,16),c="string"==typeof n&&1<n.length?new BigInteger(n,16):null,l=new BigInteger(i,16),this.setPrivate(a,o,s,c,l)},this.setPublic=function(e,t,r,n){this.isPublic=!0,this.p=e,this.q=t,this.g=r,this.y=n,this.x=null},this.setPublicHex=function(e,t,r,n){var i,a,o,s;i=new BigInteger(e,16),a=new BigInteger(t,16),o=new BigInteger(r,16),s=new BigInteger(n,16),this.setPublic(i,a,o,s)},this.signWithMessageHash=function(e){var t=this.p,r=this.q,n=this.g,i=(this.y,this.x),a=KJUR.crypto.Util.getRandomBigIntegerMinToMax(BigInteger.ONE.add(BigInteger.ONE),r.subtract(BigInteger.ONE)),o=new BigInteger(e.substr(0,r.bitLength()/4),16),s=n.modPow(a,t).mod(r),c=a.modInverse(r).multiply(o.add(i.multiply(s))).mod(r);return KJUR.asn1.ASN1Util.jsonToASN1HEX({seq:[{int:{bigint:s}},{int:{bigint:c}}]})},this.verifyWithMessageHash=function(e,t){var r=this.p,n=this.q,i=this.g,a=this.y,o=this.parseASN1Signature(t),s=o[0],c=o[1],l=new BigInteger(e.substr(0,n.bitLength()/4),16);if(0<BigInteger.ZERO.compareTo(s)||0<s.compareTo(n))throw"invalid DSA signature";if(0<=BigInteger.ZERO.compareTo(c)||0<c.compareTo(n))throw"invalid DSA signature";var u=c.modInverse(n),h=l.multiply(u).mod(n),f=s.multiply(u).mod(n);return 0==i.modPow(h,r).multiply(a.modPow(f,r)).mod(r).mod(n).compareTo(s)},this.parseASN1Signature=function(e){try{return[new BigInteger(ASN1HEX.getVbyList(e,0,[0],"02"),16),new BigInteger(ASN1HEX.getVbyList(e,0,[1],"02"),16)]}catch(e){throw"malformed ASN.1 DSA signature"}},this.readPKCS5PrvKeyHex=function(e){var t,r,n,i,a,o=ASN1HEX,s=o.getVbyList;if(!1===o.isASN1HEX(e))throw"not ASN.1 hex string";try{t=s(e,0,[1],"02"),r=s(e,0,[2],"02"),n=s(e,0,[3],"02"),i=s(e,0,[4],"02"),a=s(e,0,[5],"02")}catch(e){throw console.log("EXCEPTION:"+e),"malformed PKCS#1/5 plain DSA private key"}this.setPrivateHex(t,r,n,i,a)},this.readPKCS8PrvKeyHex=function(e){var t,r,n,i,a=ASN1HEX,o=a.getVbyList;if(!1===a.isASN1HEX(e))throw"not ASN.1 hex string";try{t=o(e,0,[1,1,0],"02"),r=o(e,0,[1,1,1],"02"),n=o(e,0,[1,1,2],"02"),i=o(e,0,[2,0],"02")}catch(e){throw console.log("EXCEPTION:"+e),"malformed PKCS#8 plain DSA private key"}this.setPrivateHex(t,r,n,null,i)},this.readPKCS8PubKeyHex=function(e){var t,r,n,i,a=ASN1HEX,o=a.getVbyList;if(!1===a.isASN1HEX(e))throw"not ASN.1 hex string";try{t=o(e,0,[0,1,0],"02"),r=o(e,0,[0,1,1],"02"),n=o(e,0,[0,1,2],"02"),i=o(e,0,[1,0],"02")}catch(e){throw console.log("EXCEPTION:"+e),"malformed PKCS#8 DSA public key"}this.setPublicHex(t,r,n,i)},this.readCertPubKeyHex=function(e,t){var r,n,i,a;5!==t&&(t=6);var o=ASN1HEX,s=o.getVbyList;if(!1===o.isASN1HEX(e))throw"not ASN.1 hex string";try{r=s(e,0,[0,t,0,1,0],"02"),n=s(e,0,[0,t,0,1,1],"02"),i=s(e,0,[0,t,0,1,2],"02"),a=s(e,0,[0,t,1,0],"02")}catch(e){throw console.log("EXCEPTION:"+e),"malformed X.509 certificate DSA public key"}this.setPublicHex(r,n,i,a)}};var KEYUTIL=(y1a=function(e,t,r){return B1a(CryptoJS.AES,e,t,r)},B1a=function(e,t,r,n){var i=CryptoJS.enc.Hex.parse(t),a=CryptoJS.enc.Hex.parse(r),o=CryptoJS.enc.Hex.parse(n),s={};s.key=a,s.iv=o,s.ciphertext=i;var c=e.decrypt(s,a,{iv:o});return CryptoJS.enc.Hex.stringify(c)},C1a=function(e,t,r){return F1a(CryptoJS.AES,e,t,r)},F1a=function(e,t,r,n){var i=CryptoJS.enc.Hex.parse(t),a=CryptoJS.enc.Hex.parse(r),o=CryptoJS.enc.Hex.parse(n),s=e.encrypt(i,a,{iv:o}),c=CryptoJS.enc.Hex.parse(s.toString());return CryptoJS.enc.Base64.stringify(c)},G1a={"AES-256-CBC":{proc:y1a,eproc:C1a,keylen:32,ivlen:16},"AES-192-CBC":{proc:y1a,eproc:C1a,keylen:24,ivlen:16},"AES-128-CBC":{proc:y1a,eproc:C1a,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(e,t,r){return B1a(CryptoJS.TripleDES,e,t,r)},eproc:function(e,t,r){return F1a(CryptoJS.TripleDES,e,t,r)},keylen:24,ivlen:8},"DES-CBC":{proc:function(e,t,r){return B1a(CryptoJS.DES,e,t,r)},eproc:function(e,t,r){return F1a(CryptoJS.DES,e,t,r)},keylen:8,ivlen:8}},I1a=function(e){var t={},r=e.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));r&&(t.cipher=r[1],t.ivsalt=r[2]);var n=e.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));n&&(t.type=n[1]);var i=-1,a=0;-1!=e.indexOf("\r\n\r\n")&&(i=e.indexOf("\r\n\r\n"),a=2),-1!=e.indexOf("\n\n")&&(i=e.indexOf("\n\n"),a=1);var o=e.indexOf("-----END");if(-1!=i&&-1!=o){var s=e.substring(i+2*a,o-a);s=s.replace(/\s+/g,""),t.data=s}return t},J1a=function(e,t,r){for(var n=r.substring(0,16),i=CryptoJS.enc.Hex.parse(n),a=CryptoJS.enc.Utf8.parse(t),o=G1a[e].keylen+G1a[e].ivlen,s="",c=null;;){var l=CryptoJS.algo.MD5.create();if(null!=c&&l.update(c),l.update(a),l.update(i),c=l.finalize(),(s+=CryptoJS.enc.Hex.stringify(c)).length>=2*o)break}var u={};return u.keyhex=s.substr(0,2*G1a[e].keylen),u.ivhex=s.substr(2*G1a[e].keylen,2*G1a[e].ivlen),u},K1a=function(e,t,r,n){var i=CryptoJS.enc.Base64.parse(e),a=CryptoJS.enc.Hex.stringify(i);return(0,G1a[t].proc)(a,r,n)},{version:"1.0.0",parsePKCS5PEM:function(e){return I1a(e)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(e,t,r){return J1a(e,t,r)},decryptKeyB64:function(e,t,r,n){return K1a(e,t,r,n)},getDecryptedKeyHex:function(e,t){var r=I1a(e),n=r.cipher,i=r.ivsalt,a=r.data,o=J1a(n,t,i).keyhex;return K1a(a,n,o,i)},getEncryptedPKCS5PEMFromPrvKeyHex:function(e,t,r,n,i){var a,o,s="";if(void 0!==n&&null!=n||(n="AES-256-CBC"),void 0===G1a[n])throw"KEYUTIL unsupported algorithm: "+n;if(void 0===i||null==i){var c=G1a[n].ivlen;i=(a=c,o=CryptoJS.lib.WordArray.random(a),CryptoJS.enc.Hex.stringify(o)).toUpperCase()}var l,u,h,f=J1a(n,r,i).keyhex;return s="-----BEGIN "+e+" PRIVATE KEY-----\r\n",s+="Proc-Type: 4,ENCRYPTED\r\n",s+="DEK-Info: "+n+","+i+"\r\n",s+="\r\n",s+=(l=t,u=f,h=i,(0,G1a[n].eproc)(l,u,h)).replace(/(.{64})/g,"$1\r\n"),s+="\r\n-----END "+e+" PRIVATE KEY-----\r\n"},parseHexOfEncryptedPKCS8:function(e){var t=ASN1HEX,r=t.getChildIdx,n=t.getV,i={},a=r(e,0);if(2!=a.length)throw"malformed format: SEQUENCE(0).items != 2: "+a.length;i.ciphertext=n(e,a[1]);var o=r(e,a[0]);if(2!=o.length)throw"malformed format: SEQUENCE(0.0).items != 2: "+o.length;if("2a864886f70d01050d"!=n(e,o[0]))throw"this only supports pkcs5PBES2";var s=r(e,o[1]);if(2!=o.length)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+s.length;var c=r(e,s[1]);if(2!=c.length)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+c.length;if("2a864886f70d0307"!=n(e,c[0]))throw"this only supports TripleDES";i.encryptionSchemeAlg="TripleDES",i.encryptionSchemeIV=n(e,c[1]);var l=r(e,s[0]);if(2!=l.length)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+l.length;if("2a864886f70d01050c"!=n(e,l[0]))throw"this only supports pkcs5PBKDF2";var u=r(e,l[1]);if(u.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+u.length;i.pbkdf2Salt=n(e,u[0]);var h=n(e,u[1]);try{i.pbkdf2Iter=parseInt(h,16)}catch(e){throw"malformed format pbkdf2Iter: "+h}return i},getPBKDF2KeyHexFromParam:function(e,t){var r=CryptoJS.enc.Hex.parse(e.pbkdf2Salt),n=e.pbkdf2Iter,i=CryptoJS.PBKDF2(t,r,{keySize:6,iterations:n});return CryptoJS.enc.Hex.stringify(i)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(e,t){var r=pemtohex(e,"ENCRYPTED PRIVATE KEY"),n=this.parseHexOfEncryptedPKCS8(r),i=KEYUTIL.getPBKDF2KeyHexFromParam(n,t),a={};a.ciphertext=CryptoJS.enc.Hex.parse(n.ciphertext);var o=CryptoJS.enc.Hex.parse(i),s=CryptoJS.enc.Hex.parse(n.encryptionSchemeIV),c=CryptoJS.TripleDES.decrypt(a,o,{iv:s});return CryptoJS.enc.Hex.stringify(c)},getKeyFromEncryptedPKCS8PEM:function(e,t){var r=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(e,t);return this.getKeyFromPlainPrivatePKCS8Hex(r)},parsePlainPrivatePKCS8Hex:function(e){var t=ASN1HEX,r=t.getChildIdx,n=t.getV,i={algparam:null};if("30"!=e.substr(0,2))throw"malformed plain PKCS8 private key(code:001)";var a=r(e,0);if(3!=a.length)throw"malformed plain PKCS8 private key(code:002)";if("30"!=e.substr(a[1],2))throw"malformed PKCS8 private key(code:003)";var o=r(e,a[1]);if(2!=o.length)throw"malformed PKCS8 private key(code:004)";if("06"!=e.substr(o[0],2))throw"malformed PKCS8 private key(code:005)";if(i.algoid=n(e,o[0]),"06"==e.substr(o[1],2)&&(i.algparam=n(e,o[1])),"04"!=e.substr(a[2],2))throw"malformed PKCS8 private key(code:006)";return i.keyidx=t.getVidx(e,a[2]),i},getKeyFromPlainPrivatePKCS8PEM:function(e){var t=pemtohex(e,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(t)},getKeyFromPlainPrivatePKCS8Hex:function(e){var t,r=this.parsePlainPrivatePKCS8Hex(e);if("2a864886f70d010101"==r.algoid)t=new RSAKey;else if("2a8648ce380401"==r.algoid)t=new KJUR.crypto.DSA;else{if("2a8648ce3d0201"!=r.algoid)throw"unsupported private key algorithm";t=new KJUR.crypto.ECDSA}return t.readPKCS8PrvKeyHex(e),t},_getKeyFromPublicPKCS8Hex:function(e){var t,r=ASN1HEX.getVbyList(e,0,[0,0],"06");if("2a864886f70d010101"===r)t=new RSAKey;else if("2a8648ce380401"===r)t=new KJUR.crypto.DSA;else{if("2a8648ce3d0201"!==r)throw"unsupported PKCS#8 public key hex";t=new KJUR.crypto.ECDSA}return t.readPKCS8PubKeyHex(e),t},parsePublicRawRSAKeyHex:function(e){var t=ASN1HEX,r=t.getChildIdx,n=t.getV,i={};if("30"!=e.substr(0,2))throw"malformed RSA key(code:001)";var a=r(e,0);if(2!=a.length)throw"malformed RSA key(code:002)";if("02"!=e.substr(a[0],2))throw"malformed RSA key(code:003)";if(i.n=n(e,a[0]),"02"!=e.substr(a[1],2))throw"malformed RSA key(code:004)";return i.e=n(e,a[1]),i},parsePublicPKCS8Hex:function(e){var t=ASN1HEX,r=t.getChildIdx,n=t.getV,i={algparam:null},a=r(e,0);if(2!=a.length)throw"outer DERSequence shall have 2 elements: "+a.length;var o=a[0];if("30"!=e.substr(o,2))throw"malformed PKCS8 public key(code:001)";var s=r(e,o);if(2!=s.length)throw"malformed PKCS8 public key(code:002)";if("06"!=e.substr(s[0],2))throw"malformed PKCS8 public key(code:003)";if(i.algoid=n(e,s[0]),"06"==e.substr(s[1],2)?i.algparam=n(e,s[1]):"30"==e.substr(s[1],2)&&(i.algparam={},i.algparam.p=t.getVbyList(e,s[1],[0],"02"),i.algparam.q=t.getVbyList(e,s[1],[1],"02"),i.algparam.g=t.getVbyList(e,s[1],[2],"02")),"03"!=e.substr(a[1],2))throw"malformed PKCS8 public key(code:004)";return i.key=n(e,a[1]).substr(2),i}}),y1a,B1a,C1a,F1a,G1a,I1a,J1a,K1a;KEYUTIL.getKey=function(e,t,r){var n=(b=ASN1HEX).getChildIdx,i=(b.getV,b.getVbyList),a=KJUR.crypto,o=a.ECDSA,s=a.DSA,c=RSAKey,l=pemtohex,u=KEYUTIL;if(void 0!==c&&e instanceof c)return e;if(void 0!==o&&e instanceof o)return e;if(void 0!==s&&e instanceof s)return e;if(void 0!==e.curve&&void 0!==e.xy&&void 0===e.d)return new o({pub:e.xy,curve:e.curve});if(void 0!==e.curve&&void 0!==e.d)return new o({prv:e.d,curve:e.curve});if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0===e.d)return(E=new c).setPublic(e.n,e.e),E;if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0!==e.p&&void 0!==e.q&&void 0!==e.dp&&void 0!==e.dq&&void 0!==e.co&&void 0===e.qi)return(E=new c).setPrivateEx(e.n,e.e,e.d,e.p,e.q,e.dp,e.dq,e.co),E;if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0===e.p)return(E=new c).setPrivate(e.n,e.e,e.d),E;if(void 0!==e.p&&void 0!==e.q&&void 0!==e.g&&void 0!==e.y&&void 0===e.x)return(E=new s).setPublic(e.p,e.q,e.g,e.y),E;if(void 0!==e.p&&void 0!==e.q&&void 0!==e.g&&void 0!==e.y&&void 0!==e.x)return(E=new s).setPrivate(e.p,e.q,e.g,e.y,e.x),E;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0===e.d)return(E=new c).setPublic(b64utohex(e.n),b64utohex(e.e)),E;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0!==e.p&&void 0!==e.q&&void 0!==e.dp&&void 0!==e.dq&&void 0!==e.qi)return(E=new c).setPrivateEx(b64utohex(e.n),b64utohex(e.e),b64utohex(e.d),b64utohex(e.p),b64utohex(e.q),b64utohex(e.dp),b64utohex(e.dq),b64utohex(e.qi)),E;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d)return(E=new c).setPrivate(b64utohex(e.n),b64utohex(e.e),b64utohex(e.d)),E;if("EC"===e.kty&&void 0!==e.crv&&void 0!==e.x&&void 0!==e.y&&void 0===e.d){var h=(_=new o({curve:e.crv})).ecparams.keylen/4,f="04"+("0000000000"+b64utohex(e.x)).slice(-h)+("0000000000"+b64utohex(e.y)).slice(-h);return _.setPublicKeyHex(f),_}if("EC"===e.kty&&void 0!==e.crv&&void 0!==e.x&&void 0!==e.y&&void 0!==e.d){h=(_=new o({curve:e.crv})).ecparams.keylen/4,f="04"+("0000000000"+b64utohex(e.x)).slice(-h)+("0000000000"+b64utohex(e.y)).slice(-h);var d=("0000000000"+b64utohex(e.d)).slice(-h);return _.setPublicKeyHex(f),_.setPrivateKeyHex(d),_}if("pkcs5prv"===r){var g,p=e,b=ASN1HEX;if(9===(g=n(p,0)).length)(E=new c).readPKCS5PrvKeyHex(p);else if(6===g.length)(E=new s).readPKCS5PrvKeyHex(p);else{if(!(2<g.length&&"04"===p.substr(g[1],2)))throw"unsupported PKCS#1/5 hexadecimal key";(E=new o).readPKCS5PrvKeyHex(p)}return E}if("pkcs8prv"===r)return E=u.getKeyFromPlainPrivatePKCS8Hex(e);if("pkcs8pub"===r)return u._getKeyFromPublicPKCS8Hex(e);if("x509pub"===r)return X509.getPublicKeyFromCertHex(e);if(-1!=e.indexOf("-END CERTIFICATE-",0)||-1!=e.indexOf("-END X509 CERTIFICATE-",0)||-1!=e.indexOf("-END TRUSTED CERTIFICATE-",0))return X509.getPublicKeyFromCertPEM(e);if(-1!=e.indexOf("-END PUBLIC KEY-")){var y=pemtohex(e,"PUBLIC KEY");return u._getKeyFromPublicPKCS8Hex(y)}if(-1!=e.indexOf("-END RSA PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED")){var m=l(e,"RSA PRIVATE KEY");return u.getKey(m,null,"pkcs5prv")}if(-1!=e.indexOf("-END DSA PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED")){var v=i(R=l(e,"DSA PRIVATE KEY"),0,[1],"02"),I=i(R,0,[2],"02"),w=i(R,0,[3],"02"),C=i(R,0,[4],"02"),A=i(R,0,[5],"02");return(E=new s).setPrivate(new BigInteger(v,16),new BigInteger(I,16),new BigInteger(w,16),new BigInteger(C,16),new BigInteger(A,16)),E}if(-1!=e.indexOf("-END PRIVATE KEY-"))return u.getKeyFromPlainPrivatePKCS8PEM(e);if(-1!=e.indexOf("-END RSA PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED")){var S=u.getDecryptedKeyHex(e,t),x=new RSAKey;return x.readPKCS5PrvKeyHex(S),x}if(-1!=e.indexOf("-END EC PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED")){var _,E=i(R=u.getDecryptedKeyHex(e,t),0,[1],"04"),k=i(R,0,[2,0],"06"),F=i(R,0,[3,0],"03").substr(2);if(void 0===KJUR.crypto.OID.oidhex2name[k])throw"undefined OID(hex) in KJUR.crypto.OID: "+k;return(_=new o({curve:KJUR.crypto.OID.oidhex2name[k]})).setPublicKeyHex(F),_.setPrivateKeyHex(E),_.isPublic=!1,_}if(-1!=e.indexOf("-END DSA PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED")){var R;v=i(R=u.getDecryptedKeyHex(e,t),0,[1],"02"),I=i(R,0,[2],"02"),w=i(R,0,[3],"02"),C=i(R,0,[4],"02"),A=i(R,0,[5],"02");return(E=new s).setPrivate(new BigInteger(v,16),new BigInteger(I,16),new BigInteger(w,16),new BigInteger(C,16),new BigInteger(A,16)),E}if(-1!=e.indexOf("-END ENCRYPTED PRIVATE KEY-"))return u.getKeyFromEncryptedPKCS8PEM(e,t);throw"not supported argument"},KEYUTIL.generateKeypair=function(e,t){if("RSA"==e){var r=t;(o=new RSAKey).generate(r,"10001"),o.isPrivate=!0,o.isPublic=!0;var n=new RSAKey,i=o.n.toString(16),a=o.e.toString(16);return n.setPublic(i,a),n.isPrivate=!1,n.isPublic=!0,(s={}).prvKeyObj=o,s.pubKeyObj=n,s}if("EC"==e){var o,s,c=t,l=new KJUR.crypto.ECDSA({curve:c}).generateKeyPairHex();return(o=new KJUR.crypto.ECDSA({curve:c})).setPublicKeyHex(l.ecpubhex),o.setPrivateKeyHex(l.ecprvhex),o.isPrivate=!0,o.isPublic=!1,(n=new KJUR.crypto.ECDSA({curve:c})).setPublicKeyHex(l.ecpubhex),n.isPrivate=!1,n.isPublic=!0,(s={}).prvKeyObj=o,s.pubKeyObj=n,s}throw"unknown algorithm: "+e},KEYUTIL.getPEM=function(e,t,r,n,i,a){var o=KJUR,s=o.asn1,c=s.DERObjectIdentifier,l=s.DERInteger,u=s.ASN1Util.newObject,h=s.x509.SubjectPublicKeyInfo,f=o.crypto,d=f.DSA,g=f.ECDSA,p=RSAKey;function b(e){return u({seq:[{int:0},{int:{bigint:e.n}},{int:e.e},{int:{bigint:e.d}},{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.dmp1}},{int:{bigint:e.dmq1}},{int:{bigint:e.coeff}}]})}function y(e){return u({seq:[{int:1},{octstr:{hex:e.prvKeyHex}},{tag:["a0",!0,{oid:{name:e.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]}]})}function m(e){return u({seq:[{int:0},{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}},{int:{bigint:e.y}},{int:{bigint:e.x}}]})}if((void 0!==p&&e instanceof p||void 0!==d&&e instanceof d||void 0!==g&&e instanceof g)&&1==e.isPublic&&(void 0===t||"PKCS8PUB"==t))return hextopem(C=new h(e).getEncodedHex(),"PUBLIC KEY");if("PKCS1PRV"==t&&void 0!==p&&e instanceof p&&(void 0===r||null==r)&&1==e.isPrivate)return hextopem(C=b(e).getEncodedHex(),"RSA PRIVATE KEY");if("PKCS1PRV"==t&&void 0!==g&&e instanceof g&&(void 0===r||null==r)&&1==e.isPrivate){var v=new c({name:e.curveName}).getEncodedHex(),I=y(e).getEncodedHex(),w="";return w+=hextopem(v,"EC PARAMETERS"),w+=hextopem(I,"EC PRIVATE KEY")}if("PKCS1PRV"==t&&void 0!==d&&e instanceof d&&(void 0===r||null==r)&&1==e.isPrivate)return hextopem(C=m(e).getEncodedHex(),"DSA PRIVATE KEY");if("PKCS5PRV"==t&&void 0!==p&&e instanceof p&&void 0!==r&&null!=r&&1==e.isPrivate){var C=b(e).getEncodedHex();return void 0===n&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",C,r,n,a)}if("PKCS5PRV"==t&&void 0!==g&&e instanceof g&&void 0!==r&&null!=r&&1==e.isPrivate){C=y(e).getEncodedHex();return void 0===n&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",C,r,n,a)}if("PKCS5PRV"==t&&void 0!==d&&e instanceof d&&void 0!==r&&null!=r&&1==e.isPrivate){C=m(e).getEncodedHex();return void 0===n&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",C,r,n,a)}var A=function(e,t){var r=S(e,t);return new u({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:r.pbkdf2Salt}},{int:r.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:r.encryptionSchemeIV}}]}]}]},{octstr:{hex:r.ciphertext}}]}).getEncodedHex()},S=function(e,t){var r=CryptoJS.lib.WordArray.random(8),n=CryptoJS.lib.WordArray.random(8),i=CryptoJS.PBKDF2(t,r,{keySize:6,iterations:100}),a=CryptoJS.enc.Hex.parse(e),o=CryptoJS.TripleDES.encrypt(a,i,{iv:n})+"",s={};return s.ciphertext=o,s.pbkdf2Salt=CryptoJS.enc.Hex.stringify(r),s.pbkdf2Iter=100,s.encryptionSchemeAlg="DES-EDE3-CBC",s.encryptionSchemeIV=CryptoJS.enc.Hex.stringify(n),s};if("PKCS8PRV"==t&&null!=p&&e instanceof p&&1==e.isPrivate){var x=b(e).getEncodedHex();C=u({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:x}}]}).getEncodedHex();return void 0===r||null==r?hextopem(C,"PRIVATE KEY"):hextopem(I=A(C,r),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==t&&void 0!==g&&e instanceof g&&1==e.isPrivate){x=new u({seq:[{int:1},{octstr:{hex:e.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]}]}).getEncodedHex(),C=u({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:e.curveName}}]},{octstr:{hex:x}}]}).getEncodedHex();return void 0===r||null==r?hextopem(C,"PRIVATE KEY"):hextopem(I=A(C,r),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==t&&void 0!==d&&e instanceof d&&1==e.isPrivate){x=new l({bigint:e.x}).getEncodedHex(),C=u({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}}]}]},{octstr:{hex:x}}]}).getEncodedHex();return void 0===r||null==r?hextopem(C,"PRIVATE KEY"):hextopem(I=A(C,r),"ENCRYPTED PRIVATE KEY")}throw"unsupported object nor format"},KEYUTIL.getKeyFromCSRPEM=function(e){var t=pemtohex(e,"CERTIFICATE REQUEST");return KEYUTIL.getKeyFromCSRHex(t)},KEYUTIL.getKeyFromCSRHex=function(e){var t=KEYUTIL.parseCSRHex(e);return KEYUTIL.getKey(t.p8pubkeyhex,null,"pkcs8pub")},KEYUTIL.parseCSRHex=function(e){var t=ASN1HEX,r=t.getChildIdx,n=t.getTLV,i={},a=e;if("30"!=a.substr(0,2))throw"malformed CSR(code:001)";var o=r(a,0);if(o.length<1)throw"malformed CSR(code:002)";if("30"!=a.substr(o[0],2))throw"malformed CSR(code:003)";var s=r(a,o[0]);if(s.length<3)throw"malformed CSR(code:004)";return i.p8pubkeyhex=n(a,s[2]),i},KEYUTIL.getJWKFromKey=function(e){var t={};if(e instanceof RSAKey&&e.isPrivate)return t.kty="RSA",t.n=hextob64u(e.n.toString(16)),t.e=hextob64u(e.e.toString(16)),t.d=hextob64u(e.d.toString(16)),t.p=hextob64u(e.p.toString(16)),t.q=hextob64u(e.q.toString(16)),t.dp=hextob64u(e.dmp1.toString(16)),t.dq=hextob64u(e.dmq1.toString(16)),t.qi=hextob64u(e.coeff.toString(16)),t;if(e instanceof RSAKey&&e.isPublic)return t.kty="RSA",t.n=hextob64u(e.n.toString(16)),t.e=hextob64u(e.e.toString(16)),t;if(e instanceof KJUR.crypto.ECDSA&&e.isPrivate){if("P-256"!==(n=e.getShortNISTPCurveName())&&"P-384"!==n)throw"unsupported curve name for JWT: "+n;var r=e.getPublicKeyXYHex();return t.kty="EC",t.crv=n,t.x=hextob64u(r.x),t.y=hextob64u(r.y),t.d=hextob64u(e.prvKeyHex),t}if(e instanceof KJUR.crypto.ECDSA&&e.isPublic){var n;if("P-256"!==(n=e.getShortNISTPCurveName())&&"P-384"!==n)throw"unsupported curve name for JWT: "+n;r=e.getPublicKeyXYHex();return t.kty="EC",t.crv=n,t.x=hextob64u(r.x),t.y=hextob64u(r.y),t}throw"not supported key object"},RSAKey.getPosArrayOfChildrenFromHex=function(e){return ASN1HEX.getChildIdx(e,0)},RSAKey.getHexValueArrayOfChildrenFromHex=function(e){var t,r=ASN1HEX.getV,n=r(e,(t=RSAKey.getPosArrayOfChildrenFromHex(e))[0]),i=r(e,t[1]),a=r(e,t[2]),o=r(e,t[3]),s=r(e,t[4]),c=r(e,t[5]),l=r(e,t[6]),u=r(e,t[7]),h=r(e,t[8]);return(t=new Array).push(n,i,a,o,s,c,l,u,h),t},RSAKey.prototype.readPrivateKeyFromPEMString=function(e){var t=pemtohex(e),r=RSAKey.getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8])},RSAKey.prototype.readPKCS5PrvKeyHex=function(e){var t=RSAKey.getHexValueArrayOfChildrenFromHex(e);this.setPrivateEx(t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},RSAKey.prototype.readPKCS8PrvKeyHex=function(e){var t,r,n,i,a,o,s,c,l=ASN1HEX,u=l.getVbyList;if(!1===l.isASN1HEX(e))throw"not ASN.1 hex string";try{t=u(e,0,[2,0,1],"02"),r=u(e,0,[2,0,2],"02"),n=u(e,0,[2,0,3],"02"),i=u(e,0,[2,0,4],"02"),a=u(e,0,[2,0,5],"02"),o=u(e,0,[2,0,6],"02"),s=u(e,0,[2,0,7],"02"),c=u(e,0,[2,0,8],"02")}catch(e){throw"malformed PKCS#8 plain RSA private key"}this.setPrivateEx(t,r,n,i,a,o,s,c)},RSAKey.prototype.readPKCS5PubKeyHex=function(e){var t=ASN1HEX,r=t.getV;if(!1===t.isASN1HEX(e))throw"keyHex is not ASN.1 hex string";var n=t.getChildIdx(e,0);if(2!==n.length||"02"!==e.substr(n[0],2)||"02"!==e.substr(n[1],2))throw"wrong hex for PKCS#5 public key";var i=r(e,n[0]),a=r(e,n[1]);this.setPublic(i,a)},RSAKey.prototype.readPKCS8PubKeyHex=function(e){var t=ASN1HEX;if(!1===t.isASN1HEX(e))throw"not ASN.1 hex string";if("06092a864886f70d010101"!==t.getTLVbyList(e,0,[0,0]))throw"not PKCS8 RSA public key";var r=t.getTLVbyList(e,0,[1,0]);this.readPKCS5PubKeyHex(r)},RSAKey.prototype.readCertPubKeyHex=function(e,t){var r,n;(r=new X509).readCertHex(e),n=r.getPublicKeyHex(),this.readPKCS8PubKeyHex(n)};var _RE_HEXDECONLY=new RegExp("");function _zeroPaddingOfSignature(e,t){for(var r="",n=t/4-e.length,i=0;i<n;i++)r+="0";return r+e}function pss_mgf1_str(e,t,r){for(var n="",i=0;n.length<t;)n+=hextorstr(r(rstrtohex(e+String.fromCharCode.apply(String,[(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i])))),i+=1;return n}function _rsasign_getAlgNameAndHashFromHexDisgestInfo(e){for(var t in KJUR.crypto.Util.DIGESTINFOHEAD){var r=KJUR.crypto.Util.DIGESTINFOHEAD[t],n=r.length;if(e.substring(0,n)==r)return[t,e.substring(n)]}return[]}function X509(){var o=ASN1HEX,u=o.getChildIdx,h=o.getV,f=o.getTLV,d=o.getVbyList,a=o.getTLVbyList,s=o.getIdxbyList,c=o.getVidx,g=o.oidname,e=X509,t=pemtohex;this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){return null===this.hex||0!==this.version?this.version:"a003020102"!==a(this.hex,0,[0,0])?(this.version=1,this.foffset=-1,1):this.version=3},this.getSerialNumberHex=function(){return d(this.hex,0,[0,1+this.foffset],"02")},this.getSignatureAlgorithmField=function(){return g(d(this.hex,0,[0,2+this.foffset,0],"06"))},this.getIssuerHex=function(){return a(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return e.hex2dn(this.getIssuerHex())},this.getSubjectHex=function(){return a(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return e.hex2dn(this.getSubjectHex())},this.getNotBefore=function(){var e=d(this.hex,0,[0,4+this.foffset,0]);return e=e.replace(/(..)/g,"%$1"),e=decodeURIComponent(e)},this.getNotAfter=function(){var e=d(this.hex,0,[0,4+this.foffset,1]);return e=e.replace(/(..)/g,"%$1"),e=decodeURIComponent(e)},this.getPublicKeyHex=function(){return o.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return s(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var e=this.getPublicKeyIdx();return s(this.hex,e,[1,0],"30")},this.getPublicKey=function(){return KEYUTIL.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){return g(d(this.hex,0,[1,0],"06"))},this.getSignatureValueHex=function(){return d(this.hex,0,[2],"03",!0)},this.verifySignature=function(e){var t=this.getSignatureAlgorithmName(),r=this.getSignatureValueHex(),n=a(this.hex,0,[0],"30"),i=new KJUR.crypto.Signature({alg:t});return i.init(e),i.updateHex(n),i.verify(r)},this.parseExt=function(){if(3!==this.version)return-1;var e=s(this.hex,0,[0,7,0],"30"),t=u(this.hex,e);this.aExtInfo=new Array;for(var r=0;r<t.length;r++){var n={critical:!1},i=0;3===u(this.hex,t[r]).length&&(n.critical=!0,i=1),n.oid=o.hextooidstr(d(this.hex,t[r],[0],"06"));var a=s(this.hex,t[r],[1+i]);n.vidx=c(this.hex,a),this.aExtInfo.push(n)}},this.getExtInfo=function(e){var t=this.aExtInfo,r=e;if(e.match(/^[0-9.]+$/)||(r=KJUR.asn1.x509.OID.name2oid(e)),""!==r)for(var n=0;n<t.length;n++)if(t[n].oid===r)return t[n]},this.getExtBasicConstraints=function(){var e=this.getExtInfo("basicConstraints");if(void 0===e)return e;var t=h(this.hex,e.vidx);if(""===t)return{};if("0101ff"===t)return{cA:!0};if("0101ff02"===t.substr(0,8)){var r=h(t,6);return{cA:!0,pathLen:parseInt(r,16)}}throw"basicConstraints parse error"},this.getExtKeyUsageBin=function(){var e=this.getExtInfo("keyUsage");if(void 0===e)return"";var t=h(this.hex,e.vidx);if(t.length%2!=0||t.length<=2)throw"malformed key usage value";var r=parseInt(t.substr(0,2)),n=parseInt(t.substr(2),16).toString(2);return n.substr(0,n.length-r)},this.getExtKeyUsageString=function(){for(var e=this.getExtKeyUsageBin(),t=new Array,r=0;r<e.length;r++)"1"==e.substr(r,1)&&t.push(X509.KEYUSAGE_NAME[r]);return t.join(",")},this.getExtSubjectKeyIdentifier=function(){var e=this.getExtInfo("subjectKeyIdentifier");return void 0===e?e:h(this.hex,e.vidx)},this.getExtAuthorityKeyIdentifier=function(){var e=this.getExtInfo("authorityKeyIdentifier");if(void 0===e)return e;for(var t={},r=f(this.hex,e.vidx),n=u(r,0),i=0;i<n.length;i++)"80"===r.substr(n[i],2)&&(t.kid=h(r,n[i]));return t},this.getExtExtKeyUsageName=function(){var e=this.getExtInfo("extKeyUsage");if(void 0===e)return e;var t=new Array,r=f(this.hex,e.vidx);if(""===r)return t;for(var n=u(r,0),i=0;i<n.length;i++)t.push(g(h(r,n[i])));return t},this.getExtSubjectAltName=function(){for(var e=this.getExtSubjectAltName2(),t=new Array,r=0;r<e.length;r++)"DNS"===e[r][0]&&t.push(e[r][1]);return t},this.getExtSubjectAltName2=function(){var e,t,r,n=this.getExtInfo("subjectAltName");if(void 0===n)return n;for(var i=new Array,a=f(this.hex,n.vidx),o=u(a,0),s=0;s<o.length;s++)r=a.substr(o[s],2),e=h(a,o[s]),"81"===r&&(t=hextoutf8(e),i.push(["MAIL",t])),"82"===r&&(t=hextoutf8(e),i.push(["DNS",t])),"84"===r&&(t=X509.hex2dn(e,0),i.push(["DN",t])),"86"===r&&(t=hextoutf8(e),i.push(["URI",t])),"87"===r&&(t=hextoip(e),i.push(["IP",t]));return i},this.getExtCRLDistributionPointsURI=function(){var e=this.getExtInfo("cRLDistributionPoints");if(void 0===e)return e;for(var t=new Array,r=u(this.hex,e.vidx),n=0;n<r.length;n++)try{var i=hextoutf8(d(this.hex,r[n],[0,0,0],"86"));t.push(i)}catch(e){}return t},this.getExtAIAInfo=function(){var e=this.getExtInfo("authorityInfoAccess");if(void 0===e)return e;for(var t={ocsp:[],caissuer:[]},r=u(this.hex,e.vidx),n=0;n<r.length;n++){var i=d(this.hex,r[n],[0],"06"),a=d(this.hex,r[n],[1],"86");"2b06010505073001"===i&&t.ocsp.push(hextoutf8(a)),"2b06010505073002"===i&&t.caissuer.push(hextoutf8(a))}return t},this.getExtCertificatePolicies=function(){var e=this.getExtInfo("certificatePolicies");if(void 0===e)return e;for(var t=f(this.hex,e.vidx),r=[],n=u(t,0),i=0;i<n.length;i++){var a={},o=u(t,n[i]);if(a.id=g(h(t,o[0])),2===o.length)for(var s=u(t,o[1]),c=0;c<s.length;c++){var l=d(t,s[c],[0],"06");"2b06010505070201"===l?a.cps=hextoutf8(d(t,s[c],[1])):"2b06010505070202"===l&&(a.unotice=hextoutf8(d(t,s[c],[1,0])))}r.push(a)}return r},this.readCertPEM=function(e){this.readCertHex(t(e))},this.readCertHex=function(e){this.hex=e,this.getVersion();try{s(this.hex,0,[0,7],"a3"),this.parseExt()}catch(e){}},this.getInfo=function(){var e,t,r;if(e="Basic Fields\n",e+="  serial number: "+this.getSerialNumberHex()+"\n",e+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",e+="  issuer: "+this.getIssuerString()+"\n",e+="  notBefore: "+this.getNotBefore()+"\n",e+="  notAfter: "+this.getNotAfter()+"\n",e+="  subject: "+this.getSubjectString()+"\n",e+="  subject public key info: \n",e+="    key algorithm: "+(t=this.getPublicKey()).type+"\n","RSA"===t.type&&(e+="    n="+hextoposhex(t.n.toString(16)).substr(0,16)+"...\n",e+="    e="+hextoposhex(t.e.toString(16))+"\n"),null!=(r=this.aExtInfo)){e+="X509v3 Extensions:\n";for(var n=0;n<r.length;n++){var i=r[n],a=KJUR.asn1.x509.OID.oid2name(i.oid);""===a&&(a=i.oid);var o="";if(!0===i.critical&&(o="CRITICAL"),e+="  "+a+" "+o+":\n","basicConstraints"===a){var s=this.getExtBasicConstraints();void 0===s.cA?e+="    {}\n":(e+="    cA=true",void 0!==s.pathLen&&(e+=", pathLen="+s.pathLen),e+="\n")}else if("keyUsage"===a)e+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"===a)e+="    "+this.getExtSubjectKeyIdentifier()+"\n";else if("authorityKeyIdentifier"===a){var c=this.getExtAuthorityKeyIdentifier();void 0!==c.kid&&(e+="    kid="+c.kid+"\n")}else{if("extKeyUsage"===a)e+="    "+this.getExtExtKeyUsageName().join(", ")+"\n";else if("subjectAltName"===a)e+="    "+this.getExtSubjectAltName2()+"\n";else if("cRLDistributionPoints"===a)e+="    "+this.getExtCRLDistributionPointsURI()+"\n";else if("authorityInfoAccess"===a){var l=this.getExtAIAInfo();void 0!==l.ocsp&&(e+="    ocsp: "+l.ocsp.join(",")+"\n"),void 0!==l.caissuer&&(e+="    caissuer: "+l.caissuer.join(",")+"\n")}else if("certificatePolicies"===a)for(var u=this.getExtCertificatePolicies(),h=0;h<u.length;h++)void 0!==u[h].id&&(e+="    policy oid: "+u[h].id+"\n"),void 0!==u[h].cps&&(e+="    cps: "+u[h].cps+"\n")}}}return e+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n",e+="signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"}}_RE_HEXDECONLY.compile("[^0-9a-f]","gi"),RSAKey.prototype.sign=function(e,t){var r,n=(r=e,KJUR.crypto.Util.hashString(r,t));return this.signWithMessageHash(n,t)},RSAKey.prototype.signWithMessageHash=function(e,t){var r=parseBigInt(KJUR.crypto.Util.getPaddedDigestInfoHex(e,t,this.n.bitLength()),16);return _zeroPaddingOfSignature(this.doPrivate(r).toString(16),this.n.bitLength())},RSAKey.prototype.signPSS=function(e,t,r){var n,i=(n=rstrtohex(e),KJUR.crypto.Util.hashHex(n,t));return void 0===r&&(r=-1),this.signWithMessageHashPSS(i,t,r)},RSAKey.prototype.signWithMessageHashPSS=function(e,t,r){var n,i=hextorstr(e),a=i.length,o=this.n.bitLength()-1,s=Math.ceil(o/8),c=function(e){return KJUR.crypto.Util.hashHex(e,t)};if(-1===r||void 0===r)r=a;else if(-2===r)r=s-a-2;else if(r<-2)throw"invalid salt length";if(s<a+r+2)throw"data too long";var l="";0<r&&(l=new Array(r),(new SecureRandom).nextBytes(l),l=String.fromCharCode.apply(String,l));var u=hextorstr(c(rstrtohex("\0\0\0\0\0\0\0\0"+i+l))),h=[];for(n=0;n<s-r-a-2;n+=1)h[n]=0;var f=String.fromCharCode.apply(String,h)+""+l,d=pss_mgf1_str(u,f.length,c),g=[];for(n=0;n<f.length;n+=1)g[n]=f.charCodeAt(n)^d.charCodeAt(n);var p=65280>>8*s-o&255;for(g[0]&=~p,n=0;n<a;n++)g.push(u.charCodeAt(n));return g.push(188),_zeroPaddingOfSignature(this.doPrivate(new BigInteger(g)).toString(16),this.n.bitLength())},RSAKey.prototype.verify=function(e,t){var r=parseBigInt(t=(t=t.replace(_RE_HEXDECONLY,"")).replace(/[ \n]+/g,""),16);if(r.bitLength()>this.n.bitLength())return 0;var n=_rsasign_getAlgNameAndHashFromHexDisgestInfo(this.doPublic(r).toString(16).replace(/^1f+00/,""));if(0==n.length)return!1;var i,a=n[0];return n[1]==(i=e,KJUR.crypto.Util.hashString(i,a))},RSAKey.prototype.verifyWithMessageHash=function(e,t){var r=parseBigInt(t=(t=t.replace(_RE_HEXDECONLY,"")).replace(/[ \n]+/g,""),16);if(r.bitLength()>this.n.bitLength())return 0;var n=_rsasign_getAlgNameAndHashFromHexDisgestInfo(this.doPublic(r).toString(16).replace(/^1f+00/,""));return 0!=n.length&&n[1]==e},RSAKey.prototype.verifyPSS=function(e,t,r,n){var i,a=(i=rstrtohex(e),KJUR.crypto.Util.hashHex(i,r));return void 0===n&&(n=-1),this.verifyWithMessageHashPSS(a,t,r,n)},RSAKey.prototype.verifyWithMessageHashPSS=function(e,t,r,n){var i=new BigInteger(t,16);if(i.bitLength()>this.n.bitLength())return!1;var a,o=function(e){return KJUR.crypto.Util.hashHex(e,r)},s=hextorstr(e),c=s.length,l=this.n.bitLength()-1,u=Math.ceil(l/8);if(-1===n||void 0===n)n=c;else if(-2===n)n=u-c-2;else if(n<-2)throw"invalid salt length";if(u<c+n+2)throw"data too long";var h=this.doPublic(i).toByteArray();for(a=0;a<h.length;a+=1)h[a]&=255;for(;h.length<u;)h.unshift(0);if(188!==h[u-1])throw"encoded message does not end in 0xbc";var f=(h=String.fromCharCode.apply(String,h)).substr(0,u-c-1),d=h.substr(f.length,c),g=65280>>8*u-l&255;if(0!=(f.charCodeAt(0)&g))throw"bits beyond keysize not zero";var p=pss_mgf1_str(d,f.length,o),b=[];for(a=0;a<f.length;a+=1)b[a]=f.charCodeAt(a)^p.charCodeAt(a);b[0]&=~g;var y=u-c-n-2;for(a=0;a<y;a+=1)if(0!==b[a])throw"leftmost octets not zero";if(1!==b[y])throw"0x01 marker not found";return d===hextorstr(o(rstrtohex("\0\0\0\0\0\0\0\0"+s+String.fromCharCode.apply(String,b.slice(-n)))))},RSAKey.SALT_LEN_HLEN=-1,RSAKey.SALT_LEN_MAX=-2,RSAKey.SALT_LEN_RECOVER=-2,X509.hex2dn=function(e,t){if(void 0===t&&(t=0),"30"!==e.substr(t,2))throw"malformed DN";for(var r=new Array,n=ASN1HEX.getChildIdx(e,t),i=0;i<n.length;i++)r.push(X509.hex2rdn(e,n[i]));return"/"+(r=r.map(function(e){return e.replace("/","\\/")})).join("/")},X509.hex2rdn=function(e,t){if(void 0===t&&(t=0),"31"!==e.substr(t,2))throw"malformed RDN";for(var r=new Array,n=ASN1HEX.getChildIdx(e,t),i=0;i<n.length;i++)r.push(X509.hex2attrTypeValue(e,n[i]));return(r=r.map(function(e){return e.replace("+","\\+")})).join("+")},X509.hex2attrTypeValue=function(e,t){var r=ASN1HEX,n=r.getV;if(void 0===t&&(t=0),"30"!==e.substr(t,2))throw"malformed attribute type and value";var i=r.getChildIdx(e,t);2!==i.length||e.substr(i[0],2);var a=n(e,i[0]),o=KJUR.asn1.ASN1Util.oidHexToInt(a);return KJUR.asn1.x509.OID.oid2atype(o)+"="+hextorstr(n(e,i[1]))},X509.getPublicKeyFromCertHex=function(e){var t=new X509;return t.readCertHex(e),t.getPublicKey()},X509.getPublicKeyFromCertPEM=function(e){var t=new X509;return t.readCertPEM(e),t.getPublicKey()},X509.getPublicKeyInfoPropOfCertPEM=function(e){var t,r,n=ASN1HEX.getVbyList,i={};return i.algparam=null,(t=new X509).readCertPEM(e),r=t.getPublicKeyHex(),i.keyhex=n(r,0,[1],"03").substr(2),i.algoid=n(r,0,[0,0],"06"),"2a8648ce3d0201"===i.algoid&&(i.algparam=n(r,0,[0,1],"06")),i},X509.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],void 0!==KJUR&&KJUR||(KJUR={}),void 0!==KJUR.jws&&KJUR.jws||(KJUR.jws={}),KJUR.jws.JWS=function(){var h=KJUR.jws.JWS.isSafeJSONString;this.parseJWS=function(e,t){if(void 0===this.parsedJWS||!t&&void 0===this.parsedJWS.sigvalH){var r=e.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==r)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var n=r[1],i=r[2],a=r[3],o=n+"."+i;if(this.parsedJWS={},this.parsedJWS.headB64U=n,this.parsedJWS.payloadB64U=i,this.parsedJWS.sigvalB64U=a,this.parsedJWS.si=o,!t){var s=b64utohex(a),c=parseBigInt(s,16);this.parsedJWS.sigvalH=s,this.parsedJWS.sigvalBI=c}var l=b64utoutf8(n),u=b64utoutf8(i);if(this.parsedJWS.headS=l,this.parsedJWS.payloadS=u,!h(l,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+l}}},KJUR.jws.JWS.sign=function(e,t,r,n,i){var a,o,s,c=KJUR,l=c.jws.JWS,u=l.readSafeJSONString,h=l.isSafeJSONString,f=c.crypto,d=(f.ECDSA,f.Mac),g=f.Signature,p=JSON;if("string"!=typeof t&&"object"!=typeof t)throw"spHeader must be JSON string or object: "+t;if("object"==typeof t&&(o=t,a=p.stringify(o)),"string"==typeof t){if(!h(a=t))throw"JWS Head is not safe JSON string: "+a;o=u(a)}if("object"==typeof(s=r)&&(s=p.stringify(r)),""!=e&&null!=e||void 0===o.alg||(e=o.alg),""!=e&&null!=e&&void 0===o.alg&&(o.alg=e,a=p.stringify(o)),e!==o.alg)throw"alg and sHeader.alg doesn't match: "+e+"!="+o.alg;var b=null;if(void 0===l.jwsalg2sigalg[e])throw"unsupported alg name: "+e;b=l.jwsalg2sigalg[e];var y=utf8tob64u(a)+"."+utf8tob64u(s),m="";if("Hmac"==b.substr(0,4)){if(void 0===n)throw"mac key shall be specified for HS* alg";var v=new d({alg:b,prov:"cryptojs",pass:n});v.updateString(y),m=v.doFinal()}else{var I;if(-1!=b.indexOf("withECDSA"))(I=new g({alg:b})).init(n,i),I.updateString(y),hASN1Sig=I.sign(),m=KJUR.crypto.ECDSA.asn1SigToConcatSig(hASN1Sig);else if("none"!=b)(I=new g({alg:b})).init(n,i),I.updateString(y),m=I.sign()}return y+"."+hextob64u(m)},KJUR.jws.JWS.verify=function(e,t,r){var n,i=KJUR,a=i.jws.JWS,o=a.readSafeJSONString,s=i.crypto,c=s.ECDSA,l=s.Mac,u=s.Signature;void 0!==typeof RSAKey&&(n=RSAKey);var h=e.split(".");if(3!==h.length)return!1;var f=h[0]+"."+h[1],d=b64utohex(h[2]),g=o(b64utoutf8(h[0])),p=null,b=null;if(void 0===g.alg)throw"algorithm not specified in header";if((b=(p=g.alg).substr(0,2),null!=r&&"[object Array]"===Object.prototype.toString.call(r)&&0<r.length)&&-1==(":"+r.join(":")+":").indexOf(":"+p+":"))throw"algorithm '"+p+"' not accepted in the list";if("none"!=p&&null===t)throw"key shall be specified to verify.";if("string"==typeof t&&-1!=t.indexOf("-----BEGIN ")&&(t=KEYUTIL.getKey(t)),!("RS"!=b&&"PS"!=b||t instanceof n))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==b&&!(t instanceof c))throw"key shall be a ECDSA obj for ES* algs";var y=null;if(void 0===a.jwsalg2sigalg[g.alg])throw"unsupported alg name: "+p;if("none"==(y=a.jwsalg2sigalg[p]))throw"not supported";if("Hmac"==y.substr(0,4)){if(void 0===t)throw"hexadecimal key shall be specified for HMAC";var m=new l({alg:y,pass:t});return m.updateString(f),d==m.doFinal()}if(-1!=y.indexOf("withECDSA")){var v,I=null;try{I=c.concatSigToASN1Sig(d)}catch(e){return!1}return(v=new u({alg:y})).init(t),v.updateString(f),v.verify(I)}return(v=new u({alg:y})).init(t),v.updateString(f),v.verify(d)},KJUR.jws.JWS.parse=function(e){var t,r,n,i=e.split("."),a={};if(2!=i.length&&3!=i.length)throw"malformed sJWS: wrong number of '.' splitted elements";return t=i[0],r=i[1],3==i.length&&(n=i[2]),a.headerObj=KJUR.jws.JWS.readSafeJSONString(b64utoutf8(t)),a.payloadObj=KJUR.jws.JWS.readSafeJSONString(b64utoutf8(r)),a.headerPP=JSON.stringify(a.headerObj,null,"  "),null==a.payloadObj?a.payloadPP=b64utoutf8(r):a.payloadPP=JSON.stringify(a.payloadObj,null,"  "),void 0!==n&&(a.sigHex=b64utohex(n)),a},KJUR.jws.JWS.verifyJWT=function(e,t,r){var n=KJUR.jws,i=n.JWS,a=i.readSafeJSONString,o=i.inArray,s=i.includedArray,c=e.split("."),l=c[0],u=c[1],h=(b64utohex(c[2]),a(b64utoutf8(l))),f=a(b64utoutf8(u));if(void 0===h.alg)return!1;if(void 0===r.alg)throw"acceptField.alg shall be specified";if(!o(h.alg,r.alg))return!1;if(void 0!==f.iss&&"object"==typeof r.iss&&!o(f.iss,r.iss))return!1;if(void 0!==f.sub&&"object"==typeof r.sub&&!o(f.sub,r.sub))return!1;if(void 0!==f.aud&&"object"==typeof r.aud)if("string"==typeof f.aud){if(!o(f.aud,r.aud))return!1}else if("object"==typeof f.aud&&!s(f.aud,r.aud))return!1;var d=n.IntDate.getNow();return void 0!==r.verifyAt&&"number"==typeof r.verifyAt&&(d=r.verifyAt),void 0!==r.gracePeriod&&"number"==typeof r.gracePeriod||(r.gracePeriod=0),!(void 0!==f.exp&&"number"==typeof f.exp&&f.exp+r.gracePeriod<d)&&(!(void 0!==f.nbf&&"number"==typeof f.nbf&&d<f.nbf-r.gracePeriod)&&(!(void 0!==f.iat&&"number"==typeof f.iat&&d<f.iat-r.gracePeriod)&&((void 0===f.jti||void 0===r.jti||f.jti===r.jti)&&!!i.verify(e,t,r.alg))))},KJUR.jws.JWS.includedArray=function(e,t){var r=KJUR.jws.JWS.inArray;if(null===e)return!1;if("object"!=typeof e)return!1;if("number"!=typeof e.length)return!1;for(var n=0;n<e.length;n++)if(!r(e[n],t))return!1;return!0},KJUR.jws.JWS.inArray=function(e,t){if(null===t)return!1;if("object"!=typeof t)return!1;if("number"!=typeof t.length)return!1;for(var r=0;r<t.length;r++)if(t[r]==e)return!0;return!1},KJUR.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},KJUR.jws.JWS.isSafeJSONString=function(e,t,r){var n=null;try{return"object"!=typeof(n=jsonParse(e))?0:n.constructor===Array?0:(t&&(t[r]=n),1)}catch(e){return 0}},KJUR.jws.JWS.readSafeJSONString=function(e){var t=null;try{return"object"!=typeof(t=jsonParse(e))?null:t.constructor===Array?null:t}catch(e){return null}},KJUR.jws.JWS.getEncodedSignatureValueFromJWS=function(e){var t=e.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==t)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return t[1]},KJUR.jws.JWS.getJWKthumbprint=function(e){if("RSA"!==e.kty&&"EC"!==e.kty&&"oct"!==e.kty)throw"unsupported algorithm for JWK Thumprint";var t="{";if("RSA"===e.kty){if("string"!=typeof e.n||"string"!=typeof e.e)throw"wrong n and e value for RSA key";t+='"e":"'+e.e+'",',t+='"kty":"'+e.kty+'",',t+='"n":"'+e.n+'"}'}else if("EC"===e.kty){if("string"!=typeof e.crv||"string"!=typeof e.x||"string"!=typeof e.y)throw"wrong crv, x and y value for EC key";t+='"crv":"'+e.crv+'",',t+='"kty":"'+e.kty+'",',t+='"x":"'+e.x+'",',t+='"y":"'+e.y+'"}'}else if("oct"===e.kty){if("string"!=typeof e.k)throw"wrong k value for oct(symmetric) key";t+='"kty":"'+e.kty+'",',t+='"k":"'+e.k+'"}'}var r=rstrtohex(t);return hextob64u(KJUR.crypto.Util.hashHex(r,"sha256"))},KJUR.jws.IntDate={},KJUR.jws.IntDate.get=function(e){var t=KJUR.jws.IntDate,r=t.getNow,n=t.getZulu;if("now"==e)return r();if("now + 1hour"==e)return r()+3600;if("now + 1day"==e)return r()+86400;if("now + 1month"==e)return r()+2592e3;if("now + 1year"==e)return r()+31536e3;if(e.match(/Z$/))return n(e);if(e.match(/^[0-9]+$/))return parseInt(e);throw"unsupported format: "+e},KJUR.jws.IntDate.getZulu=function(e){return zulutosec(e)},KJUR.jws.IntDate.getNow=function(){return~~(new Date/1e3)},KJUR.jws.IntDate.intDate2UTCString=function(e){return new Date(1e3*e).toUTCString()},KJUR.jws.IntDate.intDate2Zulu=function(e){var t=new Date(1e3*e);return("0000"+t.getUTCFullYear()).slice(-4)+("00"+(t.getUTCMonth()+1)).slice(-2)+("00"+t.getUTCDate()).slice(-2)+("00"+t.getUTCHours()).slice(-2)+("00"+t.getUTCMinutes()).slice(-2)+("00"+t.getUTCSeconds()).slice(-2)+"Z"},void 0!==KJUR&&KJUR||(KJUR={}),void 0!==KJUR.jws&&KJUR.jws||(KJUR.jws={}),KJUR.jws.JWSJS=function(){var s=KJUR.jws.JWS,r=s.readSafeJSONString;this.aHeader=[],this.sPayload="",this.aSignature=[],this.init=function(){this.aHeader=[],this.sPayload=void 0,this.aSignature=[]},this.initWithJWS=function(e){this.init();var t=e.split(".");if(3!=t.length)throw"malformed input JWS";this.aHeader.push(t[0]),this.sPayload=t[1],this.aSignature.push(t[2])},this.addSignature=function(e,t,r,n){if(void 0===this.sPayload||null===this.sPayload)throw"there's no JSON-JS signature to add.";var i=this.aHeader.length;if(this.aHeader.length!=this.aSignature.length)throw"aHeader.length != aSignature.length";try{var a=KJUR.jws.JWS.sign(e,t,this.sPayload,r,n).split(".");a[0],a[2];this.aHeader.push(a[0]),this.aSignature.push(a[2])}catch(e){throw this.aHeader.length>i&&this.aHeader.pop(),this.aSignature.length>i&&this.aSignature.pop(),"addSignature failed: "+e}},this.verifyAll=function(e){if(this.aHeader.length!==e.length||this.aSignature.length!==e.length)return!1;for(var t=0;t<e.length;t++){var r=e[t];if(2!==r.length)return!1;if(!1===this.verifyNth(t,r[0],r[1]))return!1}return!0},this.verifyNth=function(e,t,r){if(this.aHeader.length<=e||this.aSignature.length<=e)return!1;var n=this.aHeader[e],i=this.aSignature[e],a=n+"."+this.sPayload+"."+i,o=!1;try{o=s.verify(a,t,r)}catch(e){return!1}return o},this.readJWSJS=function(e){if("string"==typeof e){var t=r(e);if(null==t)throw"argument is not safe JSON object string";this.aHeader=t.headers,this.sPayload=t.payload,this.aSignature=t.signatures}else try{if(!(0<e.headers.length))throw"malformed header";if(this.aHeader=e.headers,"string"!=typeof e.payload)throw"malformed signatures";if(this.sPayload=e.payload,!(0<e.signatures.length))throw"malformed signatures";this.aSignatures=e.signatures}catch(e){throw"malformed JWS-JS JSON object: "+e}},this.getJSON=function(){return{headers:this.aHeader,payload:this.sPayload,signatures:this.aSignature}},this.isEmpty=function(){return 0==this.aHeader.length?1:0}};var SecureRandom_1=SecureRandom,rng_seed_time_1=rng_seed_time,BigInteger_1=BigInteger,RSAKey_1=RSAKey,ECDSA=KJUR.crypto.ECDSA,DSA=KJUR.crypto.DSA,Signature=KJUR.crypto.Signature,MessageDigest=KJUR.crypto.MessageDigest,Mac=KJUR.crypto.Mac,Cipher=KJUR.crypto.Cipher,KEYUTIL_1=KEYUTIL,ASN1HEX_1=ASN1HEX,X509_1=X509,CryptoJS_1=CryptoJS,b64tohex_1=b64tohex,b64toBA_1=b64toBA,stoBA_1=stoBA,BAtos_1=BAtos,BAtohex_1=BAtohex,stohex_1=stohex,stob64_1=stob64,stob64u_1=stob64u,b64utos_1=b64utos,b64tob64u_1=b64tob64u,b64utob64_1=b64utob64,hex2b64_1=hex2b64,hextob64u_1=hextob64u,b64utohex_1=b64utohex,utf8tob64u_1=utf8tob64u,b64utoutf8_1=b64utoutf8,utf8tob64_1=utf8tob64,b64toutf8_1=b64toutf8,utf8tohex_1=utf8tohex,hextoutf8_1=hextoutf8,hextorstr_1=hextorstr,rstrtohex_1=rstrtohex,hextob64_1=hextob64,hextob64nl_1=hextob64nl,b64nltohex_1=b64nltohex,hextopem_1=hextopem,pemtohex_1=pemtohex,hextoArrayBuffer_1=hextoArrayBuffer,ArrayBuffertohex_1=ArrayBuffertohex,zulutomsec_1=zulutomsec,zulutosec_1=zulutosec,zulutodate_1=zulutodate,datetozulu_1=datetozulu,uricmptohex_1=uricmptohex,hextouricmp_1=hextouricmp,ipv6tohex_1=ipv6tohex,hextoipv6_1=hextoipv6,hextoip_1=hextoip,iptohex_1=iptohex,encodeURIComponentAll_1=encodeURIComponentAll,newline_toUnix_1=newline_toUnix,newline_toDos_1=newline_toDos,hextoposhex_1=hextoposhex,intarystrtohex_1=intarystrtohex,strdiffidx_1=strdiffidx,KJUR_1=KJUR,crypto_1=KJUR.crypto,asn1=KJUR.asn1,jws=KJUR.jws,lang=KJUR.lang,jsrsasign={SecureRandom:SecureRandom_1,rng_seed_time:rng_seed_time_1,BigInteger:BigInteger_1,RSAKey:RSAKey_1,ECDSA:ECDSA,DSA:DSA,Signature:Signature,MessageDigest:MessageDigest,Mac:Mac,Cipher:Cipher,KEYUTIL:KEYUTIL_1,ASN1HEX:ASN1HEX_1,X509:X509_1,CryptoJS:CryptoJS_1,b64tohex:b64tohex_1,b64toBA:b64toBA_1,stoBA:stoBA_1,BAtos:BAtos_1,BAtohex:BAtohex_1,stohex:stohex_1,stob64:stob64_1,stob64u:stob64u_1,b64utos:b64utos_1,b64tob64u:b64tob64u_1,b64utob64:b64utob64_1,hex2b64:hex2b64_1,hextob64u:hextob64u_1,b64utohex:b64utohex_1,utf8tob64u:utf8tob64u_1,b64utoutf8:b64utoutf8_1,utf8tob64:utf8tob64_1,b64toutf8:b64toutf8_1,utf8tohex:utf8tohex_1,hextoutf8:hextoutf8_1,hextorstr:hextorstr_1,rstrtohex:rstrtohex_1,hextob64:hextob64_1,hextob64nl:hextob64nl_1,b64nltohex:b64nltohex_1,hextopem:hextopem_1,pemtohex:pemtohex_1,hextoArrayBuffer:hextoArrayBuffer_1,ArrayBuffertohex:ArrayBuffertohex_1,zulutomsec:zulutomsec_1,zulutosec:zulutosec_1,zulutodate:zulutodate_1,datetozulu:datetozulu_1,uricmptohex:uricmptohex_1,hextouricmp:hextouricmp_1,ipv6tohex:ipv6tohex_1,hextoipv6:hextoipv6_1,hextoip:hextoip_1,iptohex:iptohex_1,encodeURIComponentAll:encodeURIComponentAll_1,newline_toUnix:newline_toUnix_1,newline_toDos:newline_toDos_1,hextoposhex:hextoposhex_1,intarystrtohex:intarystrtohex_1,strdiffidx:strdiffidx_1,KJUR:KJUR_1,crypto:crypto_1,asn1:asn1,jws:jws,lang:lang},keyStrUriSafe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$";function compressToEncodedURIComponent(e){return null==e?"":_compress(e,6,function(e){return keyStrUriSafe.charAt(e)})}function _compress(e,t,r){if(null==e)return"";var n,i,a,o={},s={},c="",l="",u="",h=2,f=3,d=2,g=[],p=0,b=0;for(a=0;a<e.length;a+=1)if(c=e.charAt(a),Object.prototype.hasOwnProperty.call(o,c)||(o[c]=f++,s[c]=!0),l=u+c,Object.prototype.hasOwnProperty.call(o,l))u=l;else{if(Object.prototype.hasOwnProperty.call(s,u)){if(u.charCodeAt(0)<256){for(n=0;n<d;n++)p<<=1,b==t-1?(b=0,g.push(r(p)),p=0):b++;for(i=u.charCodeAt(0),n=0;n<8;n++)p=p<<1|1&i,b==t-1?(b=0,g.push(r(p)),p=0):b++,i>>=1}else{for(i=1,n=0;n<d;n++)p=p<<1|i,b==t-1?(b=0,g.push(r(p)),p=0):b++,i=0;for(i=u.charCodeAt(0),n=0;n<16;n++)p=p<<1|1&i,b==t-1?(b=0,g.push(r(p)),p=0):b++,i>>=1}0==--h&&(h=Math.pow(2,d),d++),delete s[u]}else for(i=o[u],n=0;n<d;n++)p=p<<1|1&i,b==t-1?(b=0,g.push(r(p)),p=0):b++,i>>=1;0==--h&&(h=Math.pow(2,d),d++),o[l]=f++,u=String(c)}if(""!==u){if(Object.prototype.hasOwnProperty.call(s,u)){if(u.charCodeAt(0)<256){for(n=0;n<d;n++)p<<=1,b==t-1?(b=0,g.push(r(p)),p=0):b++;for(i=u.charCodeAt(0),n=0;n<8;n++)p=p<<1|1&i,b==t-1?(b=0,g.push(r(p)),p=0):b++,i>>=1}else{for(i=1,n=0;n<d;n++)p=p<<1|i,b==t-1?(b=0,g.push(r(p)),p=0):b++,i=0;for(i=u.charCodeAt(0),n=0;n<16;n++)p=p<<1|1&i,b==t-1?(b=0,g.push(r(p)),p=0):b++,i>>=1}0==--h&&(h=Math.pow(2,d),d++),delete s[u]}else for(i=o[u],n=0;n<d;n++)p=p<<1|1&i,b==t-1?(b=0,g.push(r(p)),p=0):b++,i>>=1;0==--h&&(h=Math.pow(2,d),d++)}for(i=2,n=0;n<d;n++)p=p<<1|1&i,b==t-1?(b=0,g.push(r(p)),p=0):b++,i>>=1;for(;;){if(p<<=1,b==t-1){g.push(r(p));break}b++}return g.join("")}function emojiToHtmlEntity(e){return e.replace(/\ud83c[\udf00-\udfff]|\ud83d[\udc00-\ude4f]|\ud83d[\ude80-\udeff]/g,function(e){return"&#"+e.codePointAt(0)+";"})}function timerFragAndCompress(e,t,r,n,i,a,o,s,c,l,u){logger.log("timerFragAndCompress: processing "+r+" - "+n);for(var h=r;h<n;h++){var f=e.substring(h*a,(h+1)*a),d=compressToEncodedURIComponent(f=emojiToHtmlEntity(f));s.push(d)}if(logger.log("timerFragAndCompress: finished processing "+r+" - "+n),n<i){var g=Math.min(i,n+o);logger.log("set timeout to process: "+n+" - "+g),setTimeout(function(){timerFragAndCompress(e,t,n,g,i,a,o,s,c,l,u)},c)}else logger.log("finished compressinbg all: "+s.length),l(s,t,u,1)}function processData(e,n,t,r,i,a){var o=5,s=25;t=t||1e5,r&&(r.browser&&"Firefox"===r.browser.name||"Smartphone"===r.deviceType||"Feature Phone"===r.deviceType)&&(o=2,s=50);var c=parseInt(e.length/t)+1;logger.log("initiating timer. length: "+e.length+", fragment count:"+c);var l=Math.min(o,c);timerFragAndCompress(e,n,0,l,c,t,o,[],s,function(e){var t="";logger.log("finalizing array after compression: "+e.length);for(var r=0;r<e.length;r++)t+="_LZA_"+e[r];a(t,n,i,1),logger.log("Original: "+n.length+", compressed: "+t.length)},i)}var Zlib={BitStream:function(e,t){if(this.index="number"==typeof t?t:0,this.bitindex=0,this.buffer=e instanceof Uint8Array?e:new Uint8Array(Zlib.BitStream.DefaultBlockSize),2*this.buffer.length<=this.index)throw Error("invalid index");this.buffer.length<=this.index&&this.expandBuffer()},byteArrayToString:function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},stringToByteArray:function(e){for(var t=[],r=0;r<e.length;r++)t[t.length]=e.charCodeAt(r);return t},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t+=String.fromCharCode(n):(127<n&&n<2048?t+=String.fromCharCode(n>>6|192):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128)),t+=String.fromCharCode(63&n|128))}return t},emojiToHtmlEntity:function(e){return e.replace(/\ud83c[\udf00-\udfff]|\ud83d[\udc00-\ude4f]|\ud83d[\ude80-\udeff]/g,function(e){return"&#"+e.codePointAt(0)+";"})},timerFragAndCompress:function(e,t,r,n,i,a,o,s,c,l,u){logger.log("timerFragAndCompress: processing "+t+" - "+r);for(var h=t;h<r;h++){var f=e.substring(h*i,(h+1)*i);f=Zlib.emojiToHtmlEntity(f);var d=Zlib._utf8_encode(f),g=Zlib.stringToByteArray(d),p=new Zlib.RawDeflate(g,{compressionType:a}).compress(),b=btoa(Zlib.byteArrayToString(p));s.push(b)}if(logger.log("timerFragAndCompress: finished processing "+t+" - "+r),r<n){var y=Math.min(n,r+o);logger.log("set timeout to process: "+r+" - "+y),setTimeout(function(){Zlib.timerFragAndCompress(e,r,y,n,i,a,o,s,c,l,u)},c)}else logger.log("finished compressinbg all: "+s.length),u(s,l)},fragmentAndCompress:function(e,i,t,r,n,a){var o=5,s=25;t=t||1e5;r&&r.browser&&"Firefox"===r.browser.name&&(o=2,s=50),logger.log("compression type: 2");var c=parseInt(e.length/t)+1;logger.log("initiating timer. length: "+e.length+", fragment count:"+c);var l=Math.min(o,c);Zlib.timerFragAndCompress(e,0,l,c,t,2,o,[],s,n,function(e,t){var r="";logger.log("finalizing array after compression: "+e.length);for(var n=0;n<e.length;n++)r+="_CMP_"+e[n];a(r,i,t,1)})}},zib;Zlib.BitStream.DefaultBlockSize=32768,Zlib.BitStream.prototype.expandBuffer=function(){var e=this.buffer,t=e.length,r=new Uint8Array(t<<1);return r.set(e),this.buffer=r},Zlib.BitStream.prototype.writeBits=function(e,t,r){var n=this.buffer,i=this.index,a=this.bitindex,o=n[i];if(r&&1<t&&(e=8<t?(Zlib.BitStream.ReverseTable[255&e]<<24|Zlib.BitStream.ReverseTable[e>>>8&255]<<16|Zlib.BitStream.ReverseTable[e>>>16&255]<<8|Zlib.BitStream.ReverseTable[e>>>24&255])>>32-t:Zlib.BitStream.ReverseTable[e]>>8-t),t+a<8)o=o<<t|e,a+=t;else for(r=0;r<t;++r)o=o<<1|e>>t-r-1&1,8==++a&&(a=0,n[i++]=Zlib.BitStream.ReverseTable[o],o=0,i===n.length&&(n=this.expandBuffer()));n[i]=o,this.buffer=n,this.bitindex=a,this.index=i},Zlib.BitStream.prototype.finish=function(){var e=this.buffer,t=this.index;return 0<this.bitindex&&(e[t]<<=8-this.bitindex,e[t]=Zlib.BitStream.ReverseTable[e[t]],t++),e=e.subarray(0,t)},Zlib.BitStream.ReverseTable=function(){var e,t=new Uint8Array(256);for(e=0;e<256;++e){for(var r=t,n=e,i=e,a=i,o=7,i=i>>>1;i;i>>>=1)a<<=1,a|=1&i,--o;r[n]=(a<<o&255)>>>0}return t}(),Zlib.Heap=function(e){this.buffer=new Uint16Array(2*e),this.length=0},Zlib.Heap.prototype.getParent=function(e){return 2*((e-2)/4|0)},Zlib.Heap.prototype.getChild=function(e){return 2*e+2},Zlib.Heap.prototype.push=function(e,t){var r,n,i,a=this.buffer;for(r=this.length,a[this.length++]=t,a[this.length++]=e;0<r&&(n=this.getParent(r),a[r]>a[n]);)i=a[r],a[r]=a[n],a[n]=i,i=a[r+1],a[r+1]=a[n+1],a[n+1]=i,r=n;return this.length},Zlib.Heap.prototype.pop=function(){var e,t,r,n,i,a=this.buffer;for(t=a[0],e=a[1],this.length-=2,a[0]=a[this.length],a[1]=a[this.length+1],i=0;!((n=this.getChild(i))>=this.length)&&(n+2<this.length&&a[n+2]>a[n]&&(n+=2),a[n]>a[i]);)r=a[i],a[i]=a[n],a[n]=r,r=a[i+1],a[i+1]=a[n+1],a[n+1]=r,i=n;return{index:e,value:t,length:this.length}},Zlib.RawDeflate=function(e,t){this.compressionType=Zlib.RawDeflate.CompressionType.DYNAMIC,this.lazy=0,this.input=e instanceof Array?new Uint8Array(e):e,this.op=0,t&&(t.lazy&&(this.lazy=t.lazy),"number"==typeof t.compressionType&&(this.compressionType=t.compressionType),t.outputBuffer&&(this.output=t.outputBuffer instanceof Array?new Uint8Array(t.outputBuffer):t.outputBuffer),"number"==typeof t.outputIndex&&(this.op=t.outputIndex)),this.output||(this.output=new Uint8Array(32768))},Zlib.RawDeflate.CompressionType={NONE:0,FIXED:1,DYNAMIC:2,RESERVED:3},Zlib.RawDeflate.Lz77MinLength=3,Zlib.RawDeflate.Lz77MaxLength=258,Zlib.RawDeflate.WindowSize=32768,Zlib.RawDeflate.MaxCodeLength=16,Zlib.RawDeflate.HUFMAX=286,Zlib.RawDeflate.FixedHuffmanTable=function(){var e,t=[];for(e=0;e<288;e++)switch(!0){case e<=143:t.push([e+48,8]);break;case e<=255:t.push([e-144+400,9]);break;case e<=279:t.push([e-256,7]);break;case e<=287:t.push([e-280+192,8]);break;default:throw"invalid literal: "+e}return t}(),Zlib.RawDeflate.prototype.compress=function(){var e,t,r,n=this.input;switch(this.compressionType){case Zlib.RawDeflate.CompressionType.NONE:for(t=0,r=n.length;t<r;)t+=(e=n.subarray(t,t+65535)).length,this.makeNocompressBlock(e,t===r);break;case Zlib.RawDeflate.CompressionType.FIXED:this.output=this.makeFixedHuffmanBlock(n,!0),this.op=this.output.length;break;case Zlib.RawDeflate.CompressionType.DYNAMIC:this.output=this.makeDynamicHuffmanBlock(n,!0),this.op=this.output.length;break;default:throw"invalid compression type"}return this.output},Zlib.RawDeflate.prototype.makeNocompressBlock=function(e,t){var r,n,i=this.output,a=this.op;for(i=new Uint8Array(this.output.buffer);i.length<=a+e.length+5;)i=new Uint8Array(i.length<<1);return i.set(this.output),r=Zlib.RawDeflate.CompressionType.NONE,i[a++]=(t?1:0)|r<<1,n=65536+~(r=e.length)&65535,i[a++]=255&r,i[a++]=r>>>8&255,i[a++]=255&n,i[a++]=n>>>8&255,i.set(e,a),a+=e.length,i=i.subarray(0,a),this.op=a,this.output=i},Zlib.RawDeflate.prototype.makeFixedHuffmanBlock=function(e,t){var r,n=new Zlib.BitStream(new Uint8Array(this.output.buffer),this.op);return r=Zlib.RawDeflate.CompressionType.FIXED,n.writeBits(t?1:0,1,!0),n.writeBits(r,2,!0),r=this.lz77(e),this.fixedHuffman(r,n),n.finish()},Zlib.RawDeflate.prototype.makeDynamicHuffmanBlock=function(e,t){var r,n,i,a,o,s,c,l,u,h,f,d=new Zlib.BitStream(new Uint8Array(this.output.buffer),this.op),g=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],p=Array(19);for(r=Zlib.RawDeflate.CompressionType.DYNAMIC,d.writeBits(t?1:0,1,!0),d.writeBits(r,2,!0),r=this.lz77(e),o=this.getLengths_(this.freqsLitLen,15),s=this.getCodesFromLengths_(o),c=this.getLengths_(this.freqsDist,7),l=this.getCodesFromLengths_(c),n=286;257<n&&0===o[n-1];n--);for(i=30;1<i&&0===c[i-1];i--);for(u=this.getTreeSymbols_(n,o,i,c),h=this.getLengths_(u.freqs,7),f=0;f<19;f++)p[f]=h[g[f]];for(a=19;4<a&&0===p[a-1];a--);for(g=this.getCodesFromLengths_(h),d.writeBits(n-257,5,!0),d.writeBits(i-1,5,!0),d.writeBits(a-4,4,!0),f=0;f<a;f++)d.writeBits(p[f],3,!0);for(f=0,p=u.codes.length;f<p;f++)if(n=u.codes[f],d.writeBits(g[n],h[n],!0),16<=n){switch(f++,n){case 16:n=2;break;case 17:n=3;break;case 18:n=7;break;default:throw"invalid code: "+n}d.writeBits(u.codes[f],n,!0)}return this.dynamicHuffman(r,[s,o],[l,c],d),d.finish()},Zlib.RawDeflate.prototype.dynamicHuffman=function(e,t,r,n){var i,a,o,s,c;for(o=t[0],t=t[1],s=r[0],c=r[1],r=0,i=e.length;r<i;++r)if(a=e[r],n.writeBits(o[a],t[a],!0),256<a)n.writeBits(e[++r],e[++r],!0),a=e[++r],n.writeBits(s[a],c[a],!0),n.writeBits(e[++r],e[++r],!0);else if(256===a)break;return n},Zlib.RawDeflate.prototype.fixedHuffman=function(e,t){var r,n,i;for(r=0,n=e.length;r<n;r++)if(i=e[r],Zlib.BitStream.prototype.writeBits.apply(t,Zlib.RawDeflate.FixedHuffmanTable[i]),256<i)t.writeBits(e[++r],e[++r],!0),t.writeBits(e[++r],5),t.writeBits(e[++r],e[++r],!0);else if(256===i)break;return t},Zlib.RawDeflate.Lz77Match=function(e,t){this.length=e,this.backwardDistance=t},Zlib.RawDeflate.Lz77Match.LengthCodeTable=(zib=function(){function e(e){switch(!0){case 3===e:return[257,e-3,0];case 4===e:return[258,e-4,0];case 5===e:return[259,e-5,0];case 6===e:return[260,e-6,0];case 7===e:return[261,e-7,0];case 8===e:return[262,e-8,0];case 9===e:return[263,e-9,0];case 10===e:return[264,e-10,0];case e<=12:return[265,e-11,1];case e<=14:return[266,e-13,1];case e<=16:return[267,e-15,1];case e<=18:return[268,e-17,1];case e<=22:return[269,e-19,2];case e<=26:return[270,e-23,2];case e<=30:return[271,e-27,2];case e<=34:return[272,e-31,2];case e<=42:return[273,e-35,3];case e<=50:return[274,e-43,3];case e<=58:return[275,e-51,3];case e<=66:return[276,e-59,3];case e<=82:return[277,e-67,4];case e<=98:return[278,e-83,4];case e<=114:return[279,e-99,4];case e<=130:return[280,e-115,4];case e<=162:return[281,e-131,5];case e<=194:return[282,e-163,5];case e<=226:return[283,e-195,5];case e<=257:return[284,e-227,5];case 258===e:return[285,e-258,0];default:throw"invalid length: "+e}}var t,r,n=[];for(t=3;t<=258;t++)r=e(t),n[t]=r[2]<<24|r[1]<<16|r[0];return n}(),new Uint32Array(zib)),Zlib.RawDeflate.Lz77Match.prototype.getDistanceCode_=function(e){switch(!0){case 1===e:e=[0,e-1,0];break;case 2===e:e=[1,e-2,0];break;case 3===e:e=[2,e-3,0];break;case 4===e:e=[3,e-4,0];break;case e<=6:e=[4,e-5,1];break;case e<=8:e=[5,e-7,1];break;case e<=12:e=[6,e-9,2];break;case e<=16:e=[7,e-13,2];break;case e<=24:e=[8,e-17,3];break;case e<=32:e=[9,e-25,3];break;case e<=48:e=[10,e-33,4];break;case e<=64:e=[11,e-49,4];break;case e<=96:e=[12,e-65,5];break;case e<=128:e=[13,e-97,5];break;case e<=192:e=[14,e-129,6];break;case e<=256:e=[15,e-193,6];break;case e<=384:e=[16,e-257,7];break;case e<=512:e=[17,e-385,7];break;case e<=768:e=[18,e-513,8];break;case e<=1024:e=[19,e-769,8];break;case e<=1536:e=[20,e-1025,9];break;case e<=2048:e=[21,e-1537,9];break;case e<=3072:e=[22,e-2049,10];break;case e<=4096:e=[23,e-3073,10];break;case e<=6144:e=[24,e-4097,11];break;case e<=8192:e=[25,e-6145,11];break;case e<=12288:e=[26,e-8193,12];break;case e<=16384:e=[27,e-12289,12];break;case e<=24576:e=[28,e-16385,13];break;case e<=32768:e=[29,e-24577,13];break;default:throw"invalid distance"}return e},Zlib.RawDeflate.Lz77Match.prototype.toLz77Array=function(){var e,t=this.backwardDistance,r=[],n=0;return e=Zlib.RawDeflate.Lz77Match.LengthCodeTable[this.length],r[n++]=65535&e,r[n++]=e>>16&255,r[n++]=e>>24,e=this.getDistanceCode_(t),r[n++]=e[0],r[n++]=e[1],r[n++]=e[2],r},Zlib.RawDeflate.prototype.lz77=function(e){function t(e,t){var r,n,i=e.toLz77Array();for(r=0,n=i.length;r<n;++r)u[h++]=i[r];d[i[0]]++,g[i[3]]++,f=e.length+t-1,s=null}var r,n,i,a,o,s,c={},l=Zlib.RawDeflate.WindowSize,u=new Uint16Array(2*e.length),h=0,f=0,d=new Uint32Array(286),g=new Uint32Array(30),p=this.lazy;for(i=0;i<=285;)d[i++]=0;for(i=0;i<=29;)g[i++]=0;for(d[256]=1,r=0,n=e.length;r<n;++r){for(i=o=0,a=Zlib.RawDeflate.Lz77MinLength;i<a&&r+i!==n;++i)o=o<<8|e[r+i];if(void 0===c[o]&&(c[o]=[]),i=c[o],!(0<f--)){for(;0<i.length&&r-i[0]>l;)i.shift();if(r+Zlib.RawDeflate.Lz77MinLength>=n){for(s&&t(s,-1),i=0,a=n-r;i<a;++i)o=e[r+i],u[h++]=o,++d[o];break}0<i.length?(a=this.searchLongestMatch_(e,r,i),s?s.length<a.length?(o=e[r-1],u[h++]=o,++d[o],t(a,0)):t(s,-1):a.length<p?s=a:t(a,0)):s?t(s,-1):(o=e[r],u[h++]=o,++d[o])}i.push(r)}return u[h++]=256,d[256]++,this.freqsLitLen=d,this.freqsDist=g,u.subarray(0,h)},Zlib.RawDeflate.prototype.searchLongestMatch_=function(e,t,r){var n,i,a,o,s,c=0,l=e.length;o=0,s=r.length;e:for(;o<s;o++){if(n=r[s-o-1],a=Zlib.RawDeflate.Lz77MinLength,c>Zlib.RawDeflate.Lz77MinLength){for(a=c;a>Zlib.RawDeflate.Lz77MinLength;a--)if(e[n+a-1]!==e[t+a-1])continue e;a=c}for(;a<Zlib.RawDeflate.Lz77MaxLength&&t+a<l&&e[n+a]===e[t+a];)++a;if(c<a&&(i=n,c=a),a===Zlib.RawDeflate.Lz77MaxLength)break}return new Zlib.RawDeflate.Lz77Match(c,t-i)},Zlib.RawDeflate.prototype.getTreeSymbols_=function(e,t,r,n){var i,a,o=new Uint32Array(e+r),s=new Uint32Array(316),c=new Uint8Array(19);for(i=a=0;i<e;i++)o[a++]=t[i];for(i=0;i<r;i++)o[a++]=n[i];for(i=0,t=c.length;i<t;++i)c[i]=0;for(i=r=0,t=o.length;i<t;i+=a){for(a=1;i+a<t&&o[i+a]===o[i];++a);if(e=a,0===o[i])if(e<3)for(;0<e--;)c[s[r++]=0]++;else for(;0<e;)e-3<(n=e<138?e:138)&&n<e&&(n=e-3),n<=10?(s[r++]=17,s[r++]=n-3,c[17]++):(s[r++]=18,s[r++]=n-11,c[18]++),e-=n;else if(s[r++]=o[i],c[o[i]]++,--e<3)for(;0<e--;)s[r++]=o[i],c[o[i]]++;else for(;0<e;)e-3<(n=e<6?e:6)&&n<e&&(n=e-3),s[r++]=16,s[r++]=n-3,c[16]++,e-=n}return{codes:s.subarray(0,r),freqs:c}},Zlib.RawDeflate.prototype.getLengths_=function(e,t){var r,n,i,a=e.length,o=new Zlib.Heap(2*Zlib.RawDeflate.HUFMAX),s=new Uint8Array(a);for(n=0;n<a;n++)s[n]=0;for(n=0;n<a;++n)0<e[n]&&o.push(n,e[n]);if(a=Array(o.length/2),r=new Uint32Array(o.length/2),1===a.length)return s[o.pop().index]=1,s;for(n=0,i=o.length/2;n<i;++n)a[n]=o.pop(),r[n]=a[n].value;for(o=this.reversePackageMerge_(r,r.length,t),n=0,i=a.length;n<i;++n)s[a[n].index]=o[n];return s},Zlib.RawDeflate.prototype.reversePackageMerge_=function(e,r,t){function n(e){var t=u[e][h[e]];t===r?(n(e+1),n(e+1)):--c[t],++h[e]}var i,a,o=new Uint16Array(t),s=new Uint8Array(t),c=new Uint8Array(r),l=Array(t),u=Array(t),h=Array(t),f=(1<<t)-r,d=1<<t-1;for(o[t-1]=r,i=0;i<t;++i)f<d?s[i]=0:(s[i]=1,f-=d),f<<=1,o[t-2-i]=(o[t-1-i]/2|0)+r;for(o[0]=s[0],l[0]=Array(o[0]),u[0]=Array(o[0]),i=1;i<t;++i)o[i]>2*o[i-1]+s[i]&&(o[i]=2*o[i-1]+s[i]),l[i]=Array(o[i]),u[i]=Array(o[i]);for(f=0;f<r;++f)c[f]=t;for(d=0;d<o[t-1];++d)l[t-1][d]=e[d],u[t-1][d]=d;for(f=0;f<t;++f)h[f]=0;for(1===s[t-1]&&(--c[0],++h[t-1]),i=t-2;0<=i;--i){for(t=f=0,a=h[i+1],d=0;d<o[i];d++)(t=l[i+1][a]+l[i+1][a+1])>e[f]?(l[i][d]=t,u[i][d]=r,a+=2):(l[i][d]=e[f],u[i][d]=f,++f);h[i]=0,1===s[i]&&n(i)}return c},Zlib.RawDeflate.prototype.getCodesFromLengths_=function(e){var t,r,n,i=new Uint16Array(e.length),a=[],o=[],s=0;for(t=0,r=e.length;t<r;t++)a[e[t]]=1+(0|a[e[t]]);for(t=1,r=Zlib.RawDeflate.MaxCodeLength;t<=r;t++)o[t]=s,s+=0|a[t],s<<=1;for(t=0,r=e.length;t<r;t++)for(s=o[e[t]],o[e[t]]+=1,a=i[t]=0,n=e[t];a<n;a++)i[t]=i[t]<<1|1&s,s>>>=1;return i},Zlib.CompressionMethod={DEFLATE:8,RESERVED:15};var EventWriter=function(){function n(e,t,r){classCallCheck(this,n),logger.log("event writer constructor"),this.storKey=r,this.stg=e,this.browser=getInstance(),this.initParams(),this.initState(e)}return createClass(n,[{key:"initParams",value:function(){this.transmitInterval=1e3*(config.getConfig("transmitInterval","behavior")||10),this.mobileTransmitInterval=1e3*(config.getConfig("mobileTransmitInterval","behavior")||5),this.maxTransmitInterval=1e3*(config.getConfig("maxTransmitInterval","behavior")||20),this.mobileMaxTransmitInterval=1e3*(config.getConfig("mobileMaxTransmitInterval","behavior")||10)}},{key:"commitData",value:function(e){this.serialize(),this.writable&&this.upload(e),this.dataLayer&&(this.dataLayer.setBlob(this.serialized),this.dataLayer.commit(),logger.log("commited",!0))}},{key:"logVisibilityChange",value:function(){var e=globalSessionTracker.getSessionMetadata();e.sessionId&&this.append(constants.event_types.VIEW_CHANGE,{k:"vc",v:{sid:e.viewId,status:0,url:location.href,title:this.title}})}},{key:"dispose",value:function(){this.serialize(),this.stopStorageMonitor(),this.stopStateMonitor(),globalSessionTracker.stopHeartbeat()}},{key:"setReady",value:function(){this.writable=!0,this.stg.set(constants.events.WRITABLE,!0)}},{key:"setNotReady",value:function(){this.writable=!1,this.stg.set(constants.events.WRITABLE,!1)}},{key:"cancelProcessing",value:function(e){this.setNotReady(),this.stopStateMonitor(),this.stopStorageMonitor(),globalSessionTracker.stopHeartbeat(),this.canceled=!0,this.stg.setSession(constants.events.CANCELED,this.canceled,constants.storage.SCOPE.SESSION.TAB),e&&this.stg.set(constants.events.CANCELED,this.canceled),this.resetLog()}},{key:"initState",value:function(e){this.writable=!_.isDefined(e.get(constants.events.WRITABLE))||e.get(constants.events.WRITABLE),this.canceled=!!_.isDefined(e.get(constants.events.CANCELED))&&e.get(constants.events.CANCELED),this.stg.set(constants.events.CANCELED,this.canceled),this.stg.set(constants.events.WRITABLE,this.writable),this.failCount=0,this.isTransmitting=!1,this.holdTransmits=!1,this.lastTransmissionTime=_.now()-15e3,this.lastPingTime=_.now()-15e3,this.cobrowsing=config.getConfig("cb","record")?1:0,this.title=document.title||_.isObject(history.state)&&history.state&&history.state.title,null!==this.title&&0!==this.title.length||(this.title="Untitled Page"),this.eventid=0,this.StorageReady=new PubSubTopic,this.dataLayer=WindowStorage.getInstance(this.storKey),this.dataLayer&&(this.serialized=this.dataLayer.getBlob()),this.lastIndex=0,this.eventContainer={},this.instance=null,this.lastEvtTime=null,this.lastTrackingSessionTime=0,this.domPathCache={},this.domPathList=[],this.resetLog(),this.startStateMonitor(),this.startStorageMonitor()}},{key:"serializeAndUpload",value:function(e){if(this.dataLayer&&!this.canceled){var t=this.testStorageLimit();this.writable&&(e||t)&&(this.serialize(),this.upload(e))}}},{key:"upload",value:function(e){if(config.isVisualEditorMode())this.serialized="";else if(globalSessionTracker.isSessionOver())logger.log("the session is over. don't call transmit");else if(0!==this.serialized.length){var t=_.now(),r=e?200:2e3;if(this.holdTransmits&&t-this.lastTransmissionTime<r)return this.hasEmergency=!0,void logger.log("no trasmit: timer doesn't expire");logger.log("eventLogger will transmit. last transmit: "+this.lastTransmissionTime+", timing remaining: "+(t-this.lastTransmissionTime)),this.holdTransmits=!0,this.hasEmergency=!1,this.lastTransmissionTime=t;var n=this.serialized;config.getConfig("siteToken","base")?this.sendWithProtobuf(n):logger.warn("Can not found accessToken")}else logger.log("no transmit:  no data")}},{key:"ping",value:function(){if(globalSessionTracker.isSessionOver())logger.log("Session is over. Don't send ping");else if(!this.canceled&&!this.isTransmitting){var e=_.now();e-this.lastTransmissionTime<2e3||e-this.lastPingTime<2e3?logger.log("ubt: skip ping. lastTransmissionTime: "+this.lastTransmissionTime+", lastPingTime: "+this.lastPingTime+", now:"+_.now()):(logger.log("ubt: sending ping. lastTransmissionTime: "+this.lastTransmissionTime+", now:"+_.now()),this.append(constants.event_types.PING,{},0))}}},{key:"resetLog",value:function(){this.queue={start:_.now(),log:[],guid:idGen.generateViewId()},this.sizeEst=0}},{key:"addDeviceInfo",value:function(){var e=getScreenResolution(),t={et:constants.event_types.DEVICE_INFO,dt:"",df:"",dm:"",on:"",ov:"",sw:e.w,sh:e.h,longitude:0,latitude:0},r=StorageFactory.getInstance(constants.symbols.PERMANENT),n=r&&r.getUserProp(constants.events.IDENTITYVALUE);n&&(t.identity=n);var i={id:this.eventid,x:-1,p:globalSessionTracker.getPV(),d:t,t:_.now()};this.eventid=this.eventid+1,this.queue.log.push(i),this.sizeEst+=JSON.stringify(i).length}},{key:"serialize",value:function(){if(0!==this.queue.log.length){this.addDeviceInfo();var e=JSON.stringify(this.queue.log);e&&0<e.length&&(this.serialized&&0<this.serialized.length?this.serialized=this.serialized.substr(0,this.serialized.length-1)+","+e.substr(1):this.serialized=e),this.resetLog()}}},{key:"append",value:function(){var e=arguments[0],t=arguments[1],r=arguments[2],n=0;"number"==typeof r?n=r:r&&(n=this.logXPath(r.getPath()));var i=arguments[3];this.enqueue(e,t,n,i)}},{key:"enqueue",value:function(e,t,r,n){if(!this.canceled){var i=_.now();n=n||0,t.basicProps&&t.basicProps.currentTime&&(i=t.basicProps.currentTime,delete t.basicProps),t.et=e;var a={id:this.eventid,x:r,p:globalSessionTracker.getPV(),d:t,t:i-n};this.eventid=this.eventid+1,this.queue.log.push(a),this.sizeEst+=JSON.stringify(a).length,this.isCriticalEvents(e)&&this.serializeAndUpload(!0)}}},{key:"isCriticalEvents",value:function(e){return e===constants.event_types.TAP||e===constants.event_types.PRESS||e===constants.event_types.PAGEVIEW||e===constants.event_types.HTML_CONTENT||e===constants.event_types.MOUSE_CLICK}},{key:"isUserInitiatedEvents",value:function(e){return e===constants.event_types.PAGEVIEW||e===constants.event_types.HTML_CONTENT||e===constants.event_types.WINDOW_SCROLL||e===constants.event_types.MOUSE_OUT_ENTER||e===constants.event_types.INPUT_FOCUS||e===constants.event_types.KEY_DOWN||e===constants.event_types.VALUE_MODIFIED||e===constants.event_types.MOUSE_CLICK||e===constants.event_types.MOUSE_UP||e===constants.event_types.MOUSE_DOWN||e===constants.event_types.NODE_SCROLL||e===constants.event_types.TOUCH||e===constants.event_types.SWIPE||e===constants.event_types.PINCH||e===constants.event_types.TAP||e===constants.event_types.PRESS||e===constants.event_types.MOUSE_CLICK}},{key:"logXPath",value:function(){if(!this.canceled){var e=arguments[0].join(",");if(!_.isDefined(this.domPathCache[e])){this.domPathList[this.domPathList.length]=e;var t=this.domPathList.length-1;this.domPathCache[e]=t,this.append(constants.event_types.DOMPATH_MAPPING,{x:t+"",v:e})}return this.domPathCache[e]}}},{key:"resetDomPathCache",value:function(){this.domPathCache={},this.domPathList=[]}},{key:"testStorageLimit",value:function(){return this.serialized.length+this.sizeEst>constants.storage.DEFAULT_LIMIT}},{key:"syncState",value:function(){var e=this.writable;this.writable=!_.isDefined(this.stg.get(constants.events.WRITABLE))||this.stg.get(constants.events.WRITABLE);var t=this.canceled;this.canceled=!!_.isDefined(this.stg.get(constants.events.CANCELED))&&this.stg.get(constants.events.CANCELED),this.canceled!==t&&this.canceled?this.cancelProcessing():this.writable!==e&&(this.writable?this.setReady():this.setNotReady())}},{key:"startStateMonitor",value:function(){var e=this;this.stateMonitor||(this.syncState(),this.stateMonitor=setInterval(function(){return e.syncState()},2e3))}},{key:"stopStateMonitor",value:function(){this.stateMonitor&&(clearInterval(this.stateMonitor),delete this.stateMonitor)}},{key:"startStorageMonitor",value:function(){var e=this;this.storageMonitor||(this.storageMonitor=setInterval(function(){return e.serializeAndUpload()},this.browser.isMobile?this.mobileTransmitInterval:this.transmitInterval)),this.maxWaitMonitor||(this.maxWaitMonitor=setInterval(function(){return e.serializeAndUpload(!0)},this.browser.isMobile?this.mobileMaxTransmitInterval:this.maxTransmitInterval))}},{key:"stopStorageMonitor",value:function(){this.storageMonitor&&(clearInterval(this.storageMonitor),delete this.storageMonitor),this.maxWaitMonitor&&(clearInterval(this.maxWaitMonitor),delete this.maxWaitMonitor)}},{key:"useProxy",value:function(){return!0===config.getConfig("proxy","base")}},{key:"getUploadUri",value:function(){var e=config.getConfig("tracking_uri","base");return e=this.useProxy()?config.getConfig("tracking_uri_proxy","base")+"/v1/event":window.location.protocol+"//"+e+"/v1/event"}},{key:"uploadToServer",value:function(e,t,r,n,i){var a=this;try{var o=new window.XMLHttpRequest;for(var s in o.open(i,r,!0),o.onreadystatechange=function(){4===this.readyState&&(202===this.status&&"POST"===i?(a.serialized===t?a.serialized="":-1!==a.serialized.indexOf(t.substr(1,t.length-1))&&(a.serialized="["+a.serialized.substr(t.length)),a.holdTransmits=!1,a.hasEmergency&&setTimeout(function(){a.serializeAndUpload(!0)},100)):202!==this.status&&"POST"===i&&(a.holdTransmits=!1,a.failCount++,a.failCount>constants.storage.RETRY_LIMIT?(a.cancelProcessing(),a.resetLog()):a.hasEmergency&&setTimeout(function(){a.serializeAndUpload(!0)},100)))},n)"Content-length"!==n&&"Connection"!==n&&o.setRequestHeader(s,n[s]);"POST"===i?o.send(e):o.send()}catch(e){}}},{key:"convertToProtobuf",value:function(e,t,r){var n=globalSessionTracker.getSessionMetadata(),i=n.sessionId,a=n.viewId,o=n.userId,s=config.getSiteid();if(s&&o&&i){var c=$root.com.auryc.ubi.core.model.Message,l=new buffer_1(e),u=new c.MessagePacket({vid:a,ts:r,status:t,size:l.length,data:l}),h=new c({cid:s,uid:o,sid:i,domain:document.domain.toString(),context:new c.MessageContext({ln:"Web",lv:"0.2.48",ref:document.referrer}),packet:[u]}),f=c.verify(h);if(f)throw Error(f);return c.encode(h).finish()}return null}},{key:"getUTCTime",value:function(){var e=new Date,t=Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds());return Math.floor(t/1e3)}},{key:"getStatusInt",value:function(e,t){var r=0;return 1===e&&(r|=1),1===t&&(r|=2),r}},{key:"getJWTToken",value:function(){var e={};e.iss=config.getSiteid(),e.iat=this.getUTCTime()-12e4;var t=config.getConfig("siteToken","base"),r=JSON.stringify({alg:"HS256",typ:"JWT"}),n=JSON.stringify(e);return jsrsasign.jws.JWS.sign("HS256",r,n,{rstr:t})}},{key:"splitEvents",value:function(e){var t=[];if(1===e.length)return[e];var r=Math.floor(e.length/2),n=e.slice(0,r),i=e.slice(r);if(JSON.stringify(n).length>constants.storage.MAX_PACKET_SIZE&&1<n.length){var a=this.splitEvents(n);t=t.concat(a)}else t.push(n);if(JSON.stringify(i).length>constants.storage.MAX_PACKET_SIZE&&1<i.length){var o=this.splitEvents(i);t=t.concat(o)}else t.push(i);return t}},{key:"getLastUserEventTime",value:function(e){if(e&&0<e.length)for(var t=e.length-1;0<=t;t--)if(this.isUserInitiatedEvents(e[t].d.et))return e[t].t;return null}},{key:"sendWithProtobuf",value:function(r){var l=this,t=[];try{t=JSON.parse(r)}catch(e){logger.log("json exception"),logger.log(e),logger.log(r),t=[]}if(t&&0!==t.length){var n=globalSessionTracker.getSessionMetadata();if((t=t.filter(function(e){return e&&e.t>=n.sessionTime}).sort(function(e,t){return e.t-t.t}))&&0!==t.length){var e=this.getLastUserEventTime(t);if(this.lastEvtTime)t[t.length-1].t>=this.lastEvtTime?(t=t.filter(function(e){return e.t>=l.lastEvtTime}),this.lastEvtTime=e||this.lastEvtTime):t=[];else this.lastEvtTime=e;var i=JSON.stringify(t),a=[],o=[];if(i.length>constants.storage.MAX_PACKET_SIZE){var s=this.splitEvents(t);s.forEach(function(e){var t=(e=e.sort(function(e,t){return e.t-t.t}))[0].t>l.lastTrackingSessionTime?e[0].t:l.lastTrackingSessionTime+1;l.lastTrackingSessionTime=t,o.push(t)}),s.forEach(function(e,t){e.forEach(function(e){e.t=e.t-o[t]}),a.push(JSON.stringify(e))})}else{var c=t[0].t>this.lastTrackingSessionTime?t[0].t:this.lastTrackingSessionTime+1;this.lastTrackingSessionTime=c,o.push(c),t.forEach(function(e){e.t=e.t-c}),a=[JSON.stringify(t)]}var u=function(e,t,r,n){var i=l.getStatusInt(n,l.cobrowsing),a=l.convertToProtobuf(e,i,r);if(a){logger.log("SIZE: pb data length: "+a.length,!0);var o=l.getJWTToken(),s=l.getUploadUri(),c={"Content-Type":"application/x-protobuf;charset=utf-8",Authorization:o};l.useProxy()&&(c["Payload-Type"]=0),l.uploadToServer(a,t,s,c,"POST",r)}};a.forEach(function(e,t){2e3<e.length?(logger.log("SIZE: compressing the data: "+e.length,!0),Zlib.fragmentAndCompress(e,r,1e5,l.browser,o[t],u)):(logger.log("SIZE: Original data: "+e.length,!0),u(e,r,o[t],0))})}else logger.log("Empty event list. Skip")}else logger.log("Empty event list. Skip")}}],[{key:"getInstance",value:function(e,t,r){return n.instance||(n.instance=new n(e,t,r)),n.instance}}]),n}();function normalize(e){var r=[];return e.forEach(function(e,t){r.push(normalizeNode(e))}),r}var htmlEscape={"&":"&amp;","=":"&#61;","'":"&#39;","\0":"&#00;","\v":"&#11;","\n":"&#12;","\\[":"&#91;","\\]":"&#93;"};function normalizeAttribute(e){return e.value&&(e.value=replaceAll(e.value.trim(),htmlEscape)),e}function normalizeClassName(e){var t=e.value.replace(/\s\s+/g," ").split(" ").sort();return e.value="."+t.join("."),e}function normalizeNode(e){var r={},n={},i={};e.forEach(function(e){var t=e.name.toLowerCase();0<=["tag","id","class"].indexOf(t)?("tag"===t?e.value=e.value.toLowerCase():"class"===t&&(e=normalizeClassName(e)),r[t]=e):0===t.indexOf(":")?i[t]=e:(e=normalizeAttribute(e),n[t]=e)});var t=[];return r.tag&&t.push(r.tag),r.id&&t.push(r.id),r.class&&t.push(r.class),t=(t=t.concat(mapToArrayByKey(n))).concat(mapToArrayByKey(i))}function mapToArrayByKey(t){var r=[];return Object.keys(t).sort().forEach(function(e){r.push(t[e])}),r}function replaceAll(e,t){var r=new RegExp(Object.keys(t).join("|"),"gi");return e.replace(r,function(e){return t[e.toLowerCase()]||t["\\"+e.toLowerCase()]})}var attrCode={tag:"t",id:"i",class:"c",":nth-child":":nc",":nth-of-type":":nt"};function generateElementContext(e){var t=getElementsOnPath(e);return serializeNodes(t=normalize(t))}function serializeNodes(r){var n="";return r.forEach(function(e,t){e.forEach(function(e){var t=attrCode[e.name]||e.name;n+="["+t+"="+e.value+"]"}),t<r.length-1&&(n+="\v")}),n}function getElementsOnPath(e){for(var t=[];e;){var r=getElementProperties(e);if(t.unshift(r),e===document.body||"BODY"===e.nodeName)break;e=e.parentNode}return t}function getClassName(e){switch(_typeof(e.className)){case"string":return e.className;case"object":return e.className.baseVal||e.getAttribute("class")||"";default:return""}}function getElementProperties(e){var t=[{name:"tag",value:e.tagName?e.tagName:""}];e.id&&t.push({name:"id",value:e.id});var r=getClassName(e).trim();r&&t.push({name:"class",value:r});var n=[];if(e.attributes)for(var i=0;i<e.attributes.length;i++)["id","class"].indexOf(e.attributes[i].name)<0&&n.push({name:e.attributes[i].name,value:e.attributes[i].value});0<n.length&&(n=n.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}),t=t.concat(n));for(var a=1,o=1,s=previousElementSibling(e);s;)a++,s.tagName===e.tagName&&o++,s=previousElementSibling(s);return t.push({name:":nth-child",value:a}),t.push({name:":nth-of-type",value:o}),t}var ELEMENT_NODE=1;function previousElementSibling(e){if(e.previousElementSibling)return e.previousElementSibling;for(;(e=e.previousSibling)&&e.nodeType!==ELEMENT_NODE;);return e}var eventTargetParser={_initializedTokens:[],_previousElementSibling:function(e){if(e.previousElementSibling)return e.previousElementSibling;for(;(e=e.previousSibling)&&e.nodeType!==Node.ELEMENT_NODE;);return e},_loadScript:function(e,t){var r=document.createElement("script");r.type="text/javascript",r.src=e,r.onload=t;var n=document.getElementsByTagName("script");0<n.length?n[0].parentNode.insertBefore(r,n[0]):document.body.appendChild(r)},_getClassName:function(e){return e.tagName&&"svg"===e.tagName.toLowerCase()?e.className.baseVal||e.getAttribute("class")||"":e.className||""},_isClickEvent:function(e){return"click"===e||"mousedown"===e||-1<e.indexOf("touch")||-1<e.indexOf("pointer")},_shouldTrackDomEvent:function(e,t){if(!e||e===document||e===document.body.parentNode||e.nodeType!==Node.ELEMENT_NODE)return!1;switch(e.tagName?e.tagName.toLowerCase():""){case"html":return!1;case"form":return"submit"===t.type;case"input":return["button","submit"].indexOf(e.getAttribute("type")),this._isClickEvent(t.type);case"select":case"textarea":default:return this._isClickEvent(t.type)}},_getDefaultProperties:function(e){if(document&&document.body)return{$event_type:e,$host:window.location.host,$pathname:window.location.pathname};logger.log("document not ready yet, trying again in 500 milliseconds...");var t=this;setTimeout(function(){t._getDefaultProperties(e)},500)},_getInputValue:function(e){var t=null;switch(e.type.toLowerCase()){case"checkbox":e.checked&&(t=[e.value]);break;case"radio":e.checked&&(t=e.value);break;default:t=e.value}return t},_getSelectValue:function(e){var t;if(e.multiple){var r=[];_.each(e.querySelectorAll("[selected]"),function(e){r.push(e.value)}),t=r}else t=e.value;return t},_includeProperty:function(e,t){for(var r=e;r.parentNode&&r!==document.body;r=r.parentNode){var n=this._getClassName(r).split(" ");if(_.includes(n,"mp-sensitive")||_.includes(n,"mp-no-track"))return!1}if(_.includes(this._getClassName(e).split(" "),"mp-include"))return!0;if(null===t)return!1;switch((e.type||"").toLowerCase()){case"hidden":case"password":return!1}var i=e.name||e.id||"";if(/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(i.replace(/[^a-zA-Z0-9]/g,"")))return!1;if("string"==typeof t){if(/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/.test((t||"").replace(/[\- ]/g,"")))return!1;if(/(^\d{3}-?\d{2}-?\d{4}$)/.test(t))return!1}return!0},_getFormFieldValue:function(e){var t;switch((e.tagName?e.tagName:"").toLowerCase()){case"input":t=this._getInputValue(e);break;case"select":t=this._getSelectValue(e);break;default:t=e.value||e.textContent}return this._includeProperty(e,t)?t:null},_getFormFieldProperties:function(e){var i={};return _.each(e.elements,function(e){var t=e.getAttribute("name")||e.getAttribute("id");if(null!==t){t="$form_field__"+t;var r=this._getFormFieldValue(e);if(this._includeProperty(e,r)){var n=i[t];i[t]=void 0!==n?[].concat(n,r):r}}},this),i},_extractCustomPropertyValue:function(e){var r=[];return _.each(document.querySelectorAll(e.css_selector),function(e){var t=e.tagName?e.tagName:"";-1<["input","select"].indexOf(t.toLowerCase())?r.push(e.value):e.textContent&&r.push(e.textContent)}),r.join(", ")},_getCustomProperties:function(n){var i={};return _.each(this._customProperties,function(r){_.each(r.event_selectors,function(e){var t=document.querySelectorAll(e);_.each(t,function(e){_.includes(n,e)&&(i[r.name]=this._extractCustomPropertyValue(r))},this)},this)},this),i},_getEventTarget:function(e){return void 0===e.target?e.srcElement:e.target},_extractEventNS:function(e){var t="default";if(-1<e.indexOf(":")){var r=e.split(":");t=r[0],e=r[1]}return{ns:t,en:e}},getTarget:function(e){var i=this;if("string"==typeof e)return this._getDefaultProperties(this._extractEventNS(e).en);var t=this._getEventTarget(e);if(t.nodeType===Node.TEXT_NODE&&(t=t.parentNode),this._shouldTrackDomEvent(t,e)){for(var r=[t],n=t;n.parentNode&&n!==document.body;)r.push(n.parentNode),n=n.parentNode;var a,o,s,c,l=!1;if(_.each(r,function(e,t){if(e.tagName&&"a"===e.tagName.toLowerCase()?o=e.getAttribute("href"):e.tagName&&"form"===e.tagName.toLowerCase()&&(c=e),!s&&t<5&&e.textContent){var r=_.trim(e.textContent.substring(0,510));r&&(s=r.replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255))}if("string"==typeof i._getClassName(e)){var n=i._getClassName(e).split(" ");_.includes(n,"auryc-no-track")&&(l=!0)}}),l)return!1;a=generateElementContext(t),logger.log(JSON.stringify(a));var u=_.extend(this._getDefaultProperties(e.type),{$elements:a,$el_attr__href:o},this._getCustomProperties(r));return!c||"submit"!==e.type&&"click"!==e.type||_.extend(u,this._getFormFieldProperties(c)),u}},_navigate:function(e){window.location.href=e},_customProperties:{},isBrowserSupported:function(){return _.isFunction(document.querySelectorAll)}};function isSecretEl(e){if(!e)return!1;if(3===e.nodeType&&(e=e.parentNode),!e||!e.getAttribute||!_.isFunction(e.getAttribute))return!1;var t=e.getAttribute("class")||e.getAttribute("className"),r=e.type||e.getAttribute("type");return!(r&&-1<"reset,submit,button".indexOf(r))&&(config.getConfig("keepInputs","record")?!(!t||!(-1<t.indexOf("arObscure")||-1<t.indexOf("_ar_hide_")))&&(logger.log("Mask input"),!0):!!(t&&-1<t.indexOf("_ar_hide_")))}function getParentWindow(e){var t=e;if(e){if(e._pw)return e._pw;if(e.ownerDocument&&e.ownerDocument.defaultView)return e.ownerDocument.defaultView;for(;e.parentNode||e.document;){if(e.document)return t._pw=e;e=e.parentNode}}}function getPosition(e,t){for(var r=0,n=0;e;)r+=e.offsetTop+(parseFloat(getStyle(e,t,"borderTopWidth"))||0),n+=e.offsetLeft+(parseFloat(getStyle(e,t,"borderLeftWidth"))||0),e=e.offsetParent;return{x:n,y:r}}function getPositionRelativeToMainView(e,t){for(var r,n=!1;!n&&t;){n=t.parent==t;var i=getPosition(e,t),a=browser$1.getScroll(t);n||(i.x-=a.x,i.y-=a.y),r?(r.x+=i.x,r.y+=i.y):r=i,e=t.frameElement,t=t.parent}return r}function getStyle(e,t,r){var n="",i=t.document.defaultView;return i&&i.getComputedStyle&&i.getComputedStyle(e,"")?n=i.getComputedStyle(e,"").getPropertyValue(r):e.currentStyle&&(r=r.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()}),n=e.currentStyle[r]),n}function getPosition(e,t){for(var r=0,n=0;e;)r+=e.offsetTop+(parseFloat(getStyle(e,t,"borderTopWidth"))||0),n+=e.offsetLeft+(parseFloat(getStyle(e,t,"borderLeftWidth"))||0),e=e.offsetParent;return{x:n,y:r}}function getSize(e){var t=0,r=0,n=e.document,i=n.documentElement;return"number"==typeof e.innerWidth?(t=e.innerWidth,r=e.innerHeight):i&&(i.clientWidth||i.clientHeight)?(t=i.clientWidth,r=i.clientHeight):n.body&&(n.body.clientWidth||n.body.clientHeight)&&(t=n.body.clientWidth,r=n.body.clientHeight),{w:t,h:r}}function getDocSize(e){var t=e||window.document,r=t.body,n=t.documentElement,i=Math.max,a=0;"hidden"!==window.getComputedStyle(r).overflowX&&(a=i(r.scrollWidth,n.scrollWidth));var o=0;return"hidden"!==window.getComputedStyle(r).overflowY&&(o=i(r.scrollHeight,n.scrollHeight)),{width:i(a,i(r.offsetWidth,n.offsetWidth),i(r.clientWidth,n.clientWidth)),height:i(o,i(r.offsetHeight,n.offsetHeight),i(r.clientHeight,n.clientHeight))}}function addClass(e,t){var r,n,i;for(_.isDefined(e.length)||(e=[e]),r=0,n=e.length;r<n;r++){var a=(i=e[r]).className||"";new RegExp("\\b"+t+"\\b").test(a)||isAncestorSVG(i)||(i.className=(""===a?"":a+" ")+t)}}function isAncestorSVG(e){return e&&e.ownerSVGElement}function removeClass(e,t){var r,n,i;for(_.isDefined(e.length)||(e=[e]),r=0,n=e.length;r<n;r++)(i=e[r]).className&&!isAncestorSVG(i)&&(i.className=i.className.replace(new RegExp("(\\s|^)"+t+"(\\s|$)")," ").replace(/^\s+|\s+$/g,""))}function nodeBelongsTo(e,t){if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return!!(16&t.compareDocumentPosition(e));for(;e.parentNode;){if(e==t||e==t.body)return!0;e=e.parentNode}return!1}var dom={isSecretEl:isSecretEl,getParentWindow:getParentWindow,getPositionRelativeToMainView:getPositionRelativeToMainView,getSize:getSize,getDocSize:getDocSize,removeClass:removeClass,addClass:addClass,nodeBelongsTo:nodeBelongsTo,getPosition:getPosition,getStyle:getStyle},EventGenerator=function(){function e(){classCallCheck(this,e),this.lastRawMouseCoords=null,this.instance=null}return createClass(e,[{key:"getTrackingTarget",value:function(e){var t=eventTargetParser.getTarget(e);return _.extend({},browser$1.properties(),t)}},{key:"generateLastVisitTime",value:function(e){if(globalSessionTracker.isSessionOver())logger.log("Session is over. No action");else{var t=e.currentTime;e.$timeSinceFirstVisit=t,e.visitTime=t;var r=globalSessionTracker.getSessionMetadata();if(e.userId=r.userId,e.$timeSinceLastVisit=r.sessionTime,e.userId&&""!==e.userId)return e;logger.log("can not get userId. No action")}}},{key:"getSessionId",value:function(){return globalSessionTracker.getSessionMetadata().sessionId}},{key:"getGlobalSessionId",value:function(){return globalSessionTracker.getSessionMetadata().globalSessionId}},{key:"getStartTs",value:function(e,t){return t&&"pageview"===e.$event_type&&(e.$timeSinceFirstVisit=e.startTS,e.visitTime=e.startTS),e}},{key:"assemblePayloads",value:function(e,t,r){if(t){var n,i,a=t.eventName,o=t.path,s=t.form,c=t.userIdentify,l=t.userProperties,u=t.eventProperties;u&&u.formid&&(n=u.formid);var h=t.eventType;h&&(e.$event_type=h),o||(n&&(e.tags=[t.eventName+":"+n]),"Feedback Submitted"===a?(i=u.respid,e.tags=[t.eventName+":"+n+"-"+i]):"FeedbackSubmitted"===a&&(e.tags=[a+":"+n+"-"+i],e.payloads=_.extend(s,e.payloads)),c&&(e.$event_type="IDENTIFY_USER",e.identity=c),l&&(e.$event_type="ADD_USER_PROPERTY",e.payloads=l),r&&(e.payloads=u))}return e}},{key:"assembleBehaviorEvent",value:function(e,t){if(!(e=this.generateLastVisitTime(e)))return null;var r,n,i=t&&t.eventType===constants.events.CUSTOM_EVENT,a=(e=this.assemblePayloads(e,t,i)).$event_type;"mousedown"===a&&(a="click");var o=window.performance||window.mozPerformance||window.msPerformance||window.webkitPerformance;"pageview"===e.$event_type||"feedback"===e.$event_type||i?(r=document.title,n=decodeURIComponent(e.$current_url),a="URL"):"IDENTIFY_USER"===e.$event_type?(r=e.userId,n=e.identity):"ADD_USER_PROPERTY"===e.$event_type?r=e.userId:i?(r=t.eventName,n=t.eventName):(r=a,n=e.elText);var s={userId:e.userId,name:r,content:n,source:{elements:e.$elements},payload:{}},c=browser$1.locationInfo();if(s.source=_.extend({},s.source,c),"pageview"===e.$event_type){var l=1;o&&o.timing&&o.timing.requestStart&&o.timing.responseEnd&&(l=o.timing.responseEnd-o.timing.requestStart),s.generationTime=Math.max(1,l)}if(e.ps&&(s.ps=e.ps,s.v=e.elText),i&&t.eventProperties&&(s.payload=_.extend(s.payload,e.payloads)),"pageview"===e.$event_type&&(s=_.extend(s,this.getUTMParameter())),_.inArray(e.$event_type,["click","pageview"])&&AurycSP.isEnabled()){var u=e.$event_type.toUpperCase(),h=_.extend({libraryName:"Web",type:u},s),f=AurycSP.getMatchedEventGroups(h);f&&f.forEach(function(e){var t=AurycSP.collect(e);s.payload=_.extend(t,s.payload)})}return s}},{key:"getUTMParameter",value:function(){var e={us:"utm_source",um:"utm_medium",uc:"utm_campaign",ut:"utm_term",un:"utm_content"},t=browser$1.campaignParams(),r={};for(var n in e){var i=e[n];t[i]&&(r[n]=t[i])}return r}},{key:"getEventCommonProperties",value:function(e,t,r){var n={currentTime:_.now()};if(t===constants.events.PAGEVIEWTRACKER){var i=globalSessionTracker.getPVStartTS();n.startTS=parseInt(i),n=_.extend(n,r)}return t===constants.events.CLICKTRACKER&&(n.elText=this.getClickTargetText(e),n.ps=this.getPosition(e,r)),n}},{key:"getClickTargetText",value:function(e){var t=e.explicitOriginalTarget||e.originalTarget||e.target||e.srcElement,r="";if(!t)return r;try{var n=dom.isSecretEl(t);"password"===t.type?r='input[type="password"]':"select"===t.nodeName.toLowerCase()?r=t.name:"img"===t.nodeName.toLowerCase()?r=t.alt:"body"===t.nodeName.toLowerCase()&&(r="body"),r||n||(t.getAttribute&&t.getAttribute("data-text")&&!n&&(r=t.getAttribute("data-text")),r=r||t.value||t.textContent||t.innerText);r?r=r.substring(0,60):(r=t.name||t.nodeName)&&(r=r.toLowerCase(),t.type&&(r+='[type="'+t.type.toLowerCase()+'"]')),n&&(r+=" - Sensitive Information"),r=r.replace(/^\s+|\s+$/g,""),logger.log("elText: "+r)}catch(e){logger.warn("Exception in getTargetText"),logger.warn(e),r=""}return r}},{key:"getPosition",value:function(e,t){if(t&&t.position)return t.position;var r={x:"unknown"!=typeof e.clientX?e.clientX:"unknown"!=typeof e.screenX?e.screenX:e.sX,y:"unknown"!=typeof e.clientY?e.clientY:"unknown"!=typeof e.screenY?e.screenY:e.sY},n=browser$1.getScroll(window);void 0===r.x&&(r=this.lastRawMouseCoords);var i={};if(_.isDefined(r)&&(this.lastRawMouseCoords=r,i={x:n.x+r.x,y:n.y+r.y},window!=window.top)){var a=window.frameElement,o=dom.getPositionRelativeToMainView(a,dom.getParentWindow(a),!1);o&&(i.x+=o.x-n.x,i.y+=o.y-n.y)}return i}},{key:"getEvent",value:function(e,t,r,n){n=this.getEventCommonProperties(e,t,r);var i=this.getTrackingTarget(e),a=_.extend({},n,i),o=this.assembleBehaviorEvent(a,r);return o?(o.basicProps=n,o):null}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}(),EventProcessorFactory=function(){function t(e){classCallCheck(this,t),this.storKey=config.getSiteid()+"_rec",this.browser=getInstance(),this.stg=e,this.eventWriter=EventWriter.getInstance(this.stg,this.browser,this.storKey),this.eventWriter.setReady(),this.eventProcessors={},this.eventGenerator=EventGenerator.getInstance(),this.setupEventProcessors()}return createClass(t,[{key:"getProcessor",value:function(e){return this.eventProcessors[e]}},{key:"setupEventProcessors",value:function(){this.eventProcessors[constants.events.CLICKTRACKER]=this.getClickEventProcessor(),this.eventProcessors[constants.events.PAGEVIEWTRACKER]=this.getPageViewProcessor(),this.eventProcessors[constants.events.FEEDBACKTRACKER]=this.getFeedbackEventProcessor(),this.eventProcessors[constants.events.USERIDENTIFY]=this.getIdentifyUserProcessor(),this.eventProcessors[constants.events.PINGTRIGGER]=this.getPingEventProcessor()}},{key:"getClickEventProcessor",value:function(){return function(e,t,r,n,i){if(e=Object.assign(e,i),AurycPubSub.findTopic(constants.events.CLICKTRIGGER))AurycPubSub.publish(constants.events.CLICKTRIGGER,e);else var a=setInterval(function(){AurycPubSub.publish(constants.events.CLICKTRIGGER,e)&&clearInterval(a)},100)}}},{key:"getPageViewProcessor",value:function(){var s=this;return function(e,t,r,n,i){var a=s.eventGenerator.getEvent(e,t,n,i);if(a)if(AurycPubSub.findTopic(constants.events.PAGEVIEWTRIGGER))AurycPubSub.publish(constants.events.PAGEVIEWTRIGGER,a);else var o=setInterval(function(){AurycPubSub.publish(constants.events.PAGEVIEWTRIGGER,a)&&clearInterval(o)},100)}}},{key:"getIdentifyUserProcessor",value:function(){var o=this.eventWriter;return function(e,t,r,n){var i=constants.event_types.IDENTIFY_USER,a=globalSessionTracker.getSessionMetadata().userId;n.userProperties?(i=constants.event_types.USER_PROFILE,o.append(i,{userId:a,payload:n.userProperties})):n.sessionProperties?(i=constants.event_types.SESSION_PROPERTY,o.append(i,{payload:n.sessionProperties})):n.internalSessionProperties?(i=constants.event_types.INTERNAL_SESSION_PROPERTY,o.append(i,{payload:n.internalSessionProperties})):n.sessionMerge?(i=constants.event_types.MERGE_SESSION,o.append(i,{u:n.sessionMerge})):(logger.warn("Identify: "),logger.warn(n),o.append(i,_.extend({userId:a},n)))}}},{key:"getPingEventProcessor",value:function(){var t=this.eventWriter;return function(e){t.ping()}}},{key:"getFeedbackEventProcessor",value:function(){var c=this.eventWriter;return function(e,t,r,n){var i=n.eventName,a=constants.events.AUTOTRACKINGFLAG;"Feedback Started"===i||"Badge Clicked"===i?r.setSession(a,!1):"Feedback Abandoned"!==i&&"Feedback Submitted"!==i||r.setSession(a,!0);var o=constants.event_types.CUSTOM_EVENT,s={name:n.eventProperties.name,formId:n.eventProperties.formid,p:n.eventProperties.formid,et:n.eventProperties.et};n.eventProperties.respid&&(s.respid=n.eventProperties.respid),c.append(o,{k:i,v:JSON.stringify(s)})}}}]),t}(),EventManager=function(){function t(e){classCallCheck(this,t),this.stg=e,this.eventProcessorMap={},this.eventProcessorFactory=new EventProcessorFactory(e),this.setupPageviewHandler(e,constants.events.PAGEVIEWTRACKER),this.setupFeedbackHandler(e,constants.events.FEEDBACKTRACKER),config.isSPAEnabled()&&this.setupURLChangeHandler(e,constants.events.PAGEVIEWTRACKER),this.setupCustomerHandler(e,constants.events.PINGTRIGGER),this.setupCustomerHandler(e,constants.events.USERIDENTIFY)}return createClass(t,[{key:"getHandler",value:function(r,n,e,i){return function(t){e&&e.forEach(function(e){e(t,r,n,i)})}}},{key:"addEventProcessor",value:function(e,t){this.eventProcessorMap[e]||(this.eventProcessorMap[e]=[]),this.eventProcessorMap[e].push(t)}},{key:"setupEventHandler",value:function(t,r){var n=this;AurycPubSub.subscribe(t,function(e){n.getHandler(t,r,n.eventProcessorMap[t],e).call(n,t,r,n.eventProcessorMap[t],e)})}},{key:"setupPageviewHandler",value:function(e,t){this.addEventProcessor(t,this.eventProcessorFactory.getProcessor(t)),this.setupEventHandler(t,e)}},{key:"setupURLChangeHandler",value:function(t,r){var n=this;new UrlChangeTracker(function(e){return function(){n.getHandler(r,t,n.eventProcessorMap[r],e).call(n,r,t,n.eventProcessorMap[r],e)}}).init()}},{key:"setupFeedbackHandler",value:function(e,t){this.addEventProcessor(t,this.eventProcessorFactory.getProcessor(t)),this.setupEventHandler(t,e)}},{key:"setupCustomerHandler",value:function(e,t){this.addEventProcessor(t,this.eventProcessorFactory.getProcessor(t)),this.setupEventHandler(t,e)}}],[{key:"setup",value:function(e){return this.instance||(this.instance=new t(e)),this.instance}}]),t}();function init$4(){if(config.isVisualEditorMode())logger.warn("at: product disabled");else{var e=StorageFactory.getInstance(constants.symbols.SESSION),t=StorageFactory.getInstance(constants.symbols.PERMANENT);setupIdentifyAPI(e,t)&&(setupEventManager(e,t),abtests.setup(),extIntegration.setup(),sessionPropsAutoCapture.setup())}}function setupIdentifyAPI(e,t){var r=new IdentifyAPI("",e,t);if(!config.isProductEnabled("behavior")||isFeedbackPreview()||config.isVisualEditorMode()){var n={isBehaviorTrackingEnabled:function(){return!1}};return r.makePublic(n),logger.warn("ubt: product disabled"),!1}return logger.log("ubt: product enabled"),logger.log("ubt: domReady"),config.isSnapshotEnabled()&&r.loadEventGroups(function(e){AurycSP.setEventGroups(e)}),r.makePublic(r),!0}function isFeedbackPreview(){return!!urls.parameter("previewmode")||!!urls.parameter("previewbadgemode")}function setupEventManager(e,t){EventManager.setup(e,document),globalSessionTracker.initSessionOrPV();var r=setInterval(function(){AurycPubSub.publish(constants.events.UBTINIT)&&clearInterval(r)},200);userProperty.setupCutomDataCollection()}var behavior={init:init$4};function inject(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};e.aurycRecordAPI||(e.aurycRecordAPI={}),r.isReplayProductEnabled=function(){return t},t&&(r.getReplayUrl=function(e){try{var t=globalSessionTracker.getSessionMetadata().siteId,r=globalSessionTracker.getSessionMetadata().sessionId;if(e&&"function"==typeof e){var n=config.getConfig("replay_url")+t+":"+r;logger.log("playback url:"+n),e(n)}}catch(e){logger.warn("Exception in get replay url: ",e)}},r.getSession=function(){var e=globalSessionTracker.getSessionMetadata();return{sessionid:e.viewId,gsessionid:e.sessionId,sig:e.sessionId+"/"+e.viewId}}),e.aurycRecordAPI=r}var rcApi={inject:inject},CacheObj=function(){function e(){classCallCheck(this,e),this.domPathCache={}}return createClass(e,[{key:"getDomPath",value:function(e,t,r){var n=t||[];if(e.parentNode&&(n=this.getDomPath(e.parentNode,n,null)),e.nodeType===Node.ELEMENT_NODE){var i=null,a=e.previousSibling;if(a){for(i=1;a;)e.nodeName===a.nodeName&&a.nodeType===Node.ELEMENT_NODE&&i++,a=a.previousSibling;1===i&&(i=null)}else if(e.nextSibling)for(a=e.nextSibling;a;)a.nodeType===Node.ELEMENT_NODE&&a.nodeName===e.nodeName?(i=1,a=null):(i=null,a=a.nextSibling);var o=!r,s=e.nodeName.toLowerCase();o&&e.getAttribute&&e.getAttribute("id")?s+="[@id='"+e.getAttribute("id")+"']["+(i||1)+"]":s+=0<i?"["+i+"]":"",n.push(s)}return n}}]),e}(),globalCacheObj=new CacheObj,DataCache=function(){function e(){classCallCheck(this,e),this.browser=getInstance(),this.isMobile=this.browser.isMobile,this.caches=[]}return createClass(e,[{key:"reset",value:function(e){this.isMobile=e.isMobile,this.caches=[]}},{key:"getObject",value:function(e,t){t&&t.join&&(t=t.join(","));var r=void 0,n={},i=this.caches;for(r=this.caches.length-1;0<=r;r--)if(i[r].v===e){n.id=i[r].uid;break}if(!_.isDefined(n.id)){if(n.id=_.UUID(),(n.kl=t)&&e.length>constants.record.cache.minLength)for(r=this.caches.length-1;0<=r;r--)if(i[r].kl===t){var a=_.Diff(i[r].v,e);n.df=a;break}_.isDefined(n.diff)?(!this.isMobile||this.caches.length<constants.record.cache.maxItems)&&this.caches.push({v:e,uid:n.id,kl:n.kl}):(n.v=e,(!this.isMobile||this.caches.length<constants.record.cache.maxItems)&&this.caches.push(n))}return n}}]),e}(),globalDataCache=new DataCache,RcFrame=function(){function e(){classCallCheck(this,e),this.iFrameXpaths={}}return createClass(e,[{key:"unloadFrame",value:function(e){e.dispose()}},{key:"loadFrame",value:function(e,t){this.bindToFrameLoad(e,t)}},{key:"performFrameBindings",value:function(t,e){for(var r=this,n=(e||t.win.document).querySelectorAll("iframe"),i=0;i<n.length;i++){var a=n[i];if(!a._arB&&!a.getAttribute("_arB")||!this.iFrameXpaths[globalCacheObj.getDomPath(a)]){if(this.iFrameXpaths[globalCacheObj.getDomPath(a)]=!0,a.setAttribute("_arB",!0),this.testFrameSrc(a)&&this.testFrameOrigin(a)){var o=this.getFrameWindow(a);if(!o)return;var s=this.getFrameDocument(o,!1),c=!1;if(s){this.unbindInternalIframes(s);try{-1<"complete, loaded".indexOf(s.readyState)&&(c=!0)}catch(e){}c&&(_.isDefined(o.processor)?o.processor.serializeDom():(o.processor=new ReplayProcessor(o,globalCacheObj.getDomPath(a),t),o.processor.serializeDom(),t.childProcessors.push(o.processor),_.addEventListener(o,"unload",function(){o&&o.processor&&r.unloadFrame(o.processor)})))}o=null}_.addEventListener(a,"load",function(e){return r.loadFrame(e,t)})}a=null}t=n=null}},{key:"bindToFrameLoad",value:function(e,t){var r=e.originalTarget||e.target||e.srcElement;if(t&&r&&this.testFrameSrc(r)&&this.testFrameOrigin(r)){var n=this.getFrameWindow(r);this.getFrameDocument(n)&&(_.isDefined(n.processor)||(n.processor=new ReplayProcessor(n,globalCacheObj.getDomPath(r),t),t.childProcessors.push(n.processor))),n=null}e=t=r=null}},{key:"testFrameSrc",value:function(e){for(var t=["javascript:","shim.gif","about:blank"],r=0;r<t.length;r++)if(e.src&&-1<e.src.indexOf(t[r]))return!1;return!0}},{key:"testFrameOrigin",value:function(e,t){var r=e.getAttribute("src");if(!r||0===r.indexOf(" "))return!1;var n=e.src;return urls.testSameDomain(t||window.location.href,n)}},{key:"unbindInternalIframes",value:function(e){for(var t=e.querySelectorAll("iframe[_arB='true']"),r=0;r<t.length;r++)t[r]._arB=!1}},{key:"getFrameWindow",value:function(e){var t;return e&&e.contentWindow?t=e.contentWindow:e&&e.contentDocument&&e.contentDocument.defaultView&&(t=e.contentDocument.defaultView),t&&t!=t.top?t:null}},{key:"getFrameDocument",value:function(e){try{return e.document}catch(e){return!1}}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}(),hammer=createCommonjsModule(function(He){!function(a,s,e,p){var o,c=["","webkit","Moz","MS","ms","o"],t=s.createElement("div"),r="function",l=Math.round,b=Math.abs,y=Date.now;function u(e,t,r){return setTimeout(m(e,r),t)}function n(e,t,r){return!!Array.isArray(e)&&(h(e,r[t],r),!0)}function h(e,t,r){var n;if(e)if(e.forEach)e.forEach(t,r);else if(e.length!==p)for(n=0;n<e.length;)t.call(r,e[n],n,e),n++;else for(n in e)e.hasOwnProperty(n)&&t.call(r,e[n],n,e)}function i(n,e,t){var i="DEPRECATED METHOD: "+e+"\n"+t+" AT \n";return function(){var e=new Error("get-stack-trace"),t=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=a.console&&(a.console.warn||a.console.log);return r&&r.call(a.console,i,t),n.apply(this,arguments)}}o="function"!=typeof Object.assign?function(e){if(e===p||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(n!==p&&null!==n)for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])}return t}:Object.assign;var f=i(function(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;)(!r||r&&e[n[i]]===p)&&(e[n[i]]=t[n[i]]),i++;return e},"extend","Use `assign`."),d=i(function(e,t){return f(e,t,!0)},"merge","Use `assign`.");function g(e,t,r){var n,i=t.prototype;(n=e.prototype=Object.create(i)).constructor=e,n._super=i,r&&o(n,r)}function m(e,t){return function(){return e.apply(t,arguments)}}function v(e,t){return typeof e==r?e.apply(t&&t[0]||p,t):e}function I(e,t){return e===p?t:e}function w(t,e,r){h(x(e),function(e){t.addEventListener(e,r,!1)})}function C(t,e,r){h(x(e),function(e){t.removeEventListener(e,r,!1)})}function A(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function S(e,t){return-1<e.indexOf(t)}function x(e){return e.trim().split(/\s+/g)}function _(e,t,r){if(e.indexOf&&!r)return e.indexOf(t);for(var n=0;n<e.length;){if(r&&e[n][r]==t||!r&&e[n]===t)return n;n++}return-1}function E(e){return Array.prototype.slice.call(e,0)}function k(e,r,t){for(var n=[],i=[],a=0;a<e.length;){var o=r?e[a][r]:e[a];_(i,o)<0&&n.push(e[a]),i[a]=o,a++}return t&&(n=r?n.sort(function(e,t){return e[r]>t[r]}):n.sort()),n}function F(e,t){for(var r,n,i=t[0].toUpperCase()+t.slice(1),a=0;a<c.length;){if((n=(r=c[a])?r+i:t)in e)return n;a++}return p}var R=1;function T(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||a}var P="ontouchstart"in a,N=F(a,"PointerEvent")!==p,B=P&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),U="touch",O=25,D=1,M=4,j=8,W=1,J=2,V=4,L=8,H=16,Z=J|V,K=L|H,G=Z|K,Y=["x","y"],z=["clientX","clientY"];function X(t,e){var r=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){v(t.options.enable,[t])&&r.handler(e)},this.init()}function $(e,t,r){var n=r.pointers.length,i=r.changedPointers.length,a=t&D&&n-i==0,o=t&(M|j)&&n-i==0;r.isFirst=!!a,r.isFinal=!!o,a&&(e.session={}),r.eventType=t,function(e,t){var r=e.session,n=t.pointers,i=n.length;r.firstInput||(r.firstInput=q(t));1<i&&!r.firstMultiple?r.firstMultiple=q(t):1===i&&(r.firstMultiple=!1);var a=r.firstInput,o=r.firstMultiple,s=o?o.center:a.center,c=t.center=Q(n);t.timeStamp=y(),t.deltaTime=t.timeStamp-a.timeStamp,t.angle=ne(s,c),t.distance=re(s,c),function(e,t){var r=t.center,n=e.offsetDelta||{},i=e.prevDelta||{},a=e.prevInput||{};t.eventType!==D&&a.eventType!==M||(i=e.prevDelta={x:a.deltaX||0,y:a.deltaY||0},n=e.offsetDelta={x:r.x,y:r.y});t.deltaX=i.x+(r.x-n.x),t.deltaY=i.y+(r.y-n.y)}(r,t),t.offsetDirection=te(t.deltaX,t.deltaY);var l=ee(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=l.x,t.overallVelocityY=l.y,t.overallVelocity=b(l.x)>b(l.y)?l.x:l.y,t.scale=o?(f=o.pointers,d=n,re(d[0],d[1],z)/re(f[0],f[1],z)):1,t.rotation=o?(u=o.pointers,h=n,ne(h[1],h[0],z)+ne(u[1],u[0],z)):0,t.maxPointers=r.prevInput?t.pointers.length>r.prevInput.maxPointers?t.pointers.length:r.prevInput.maxPointers:t.pointers.length,function(e,t){var r,n,i,a,o=e.lastInterval||t,s=t.timeStamp-o.timeStamp;if(t.eventType!=j&&(O<s||o.velocity===p)){var c=t.deltaX-o.deltaX,l=t.deltaY-o.deltaY,u=ee(s,c,l);n=u.x,i=u.y,r=b(u.x)>b(u.y)?u.x:u.y,a=te(c,l),e.lastInterval=t}else r=o.velocity,n=o.velocityX,i=o.velocityY,a=o.direction;t.velocity=r,t.velocityX=n,t.velocityY=i,t.direction=a}(r,t);var u,h;var f,d;var g=e.element;A(t.srcEvent.target,g)&&(g=t.srcEvent.target);t.target=g}(e,r),e.emit("hammer.input",r),e.recognize(r),e.session.prevInput=r}function q(e){for(var t=[],r=0;r<e.pointers.length;)t[r]={clientX:l(e.pointers[r].clientX),clientY:l(e.pointers[r].clientY)},r++;return{timeStamp:y(),pointers:t,center:Q(t),deltaX:e.deltaX,deltaY:e.deltaY}}function Q(e){var t=e.length;if(1===t)return{x:l(e[0].clientX),y:l(e[0].clientY)};for(var r=0,n=0,i=0;i<t;)r+=e[i].clientX,n+=e[i].clientY,i++;return{x:l(r/t),y:l(n/t)}}function ee(e,t,r){return{x:t/e||0,y:r/e||0}}function te(e,t){return e===t?W:b(e)>=b(t)?e<0?J:V:t<0?L:H}function re(e,t,r){r||(r=Y);var n=t[r[0]]-e[r[0]],i=t[r[1]]-e[r[1]];return Math.sqrt(n*n+i*i)}function ne(e,t,r){r||(r=Y);var n=t[r[0]]-e[r[0]],i=t[r[1]]-e[r[1]];return 180*Math.atan2(i,n)/Math.PI}X.prototype={handler:function(){},init:function(){this.evEl&&w(this.element,this.evEl,this.domHandler),this.evTarget&&w(this.target,this.evTarget,this.domHandler),this.evWin&&w(T(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&C(this.element,this.evEl,this.domHandler),this.evTarget&&C(this.target,this.evTarget,this.domHandler),this.evWin&&C(T(this.element),this.evWin,this.domHandler)}};var ie={mousedown:D,mousemove:2,mouseup:M},ae="mousedown",oe="mousemove mouseup";function se(){this.evEl=ae,this.evWin=oe,this.pressed=!1,X.apply(this,arguments)}g(se,X,{handler:function(e){var t=ie[e.type];t&D&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=M),this.pressed&&(t&M&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}});var ce={pointerdown:D,pointermove:2,pointerup:M,pointercancel:j,pointerout:j},le={2:U,3:"pen",4:"mouse",5:"kinect"},ue="pointerdown",he="pointermove pointerup pointercancel";function fe(){this.evEl=ue,this.evWin=he,X.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}a.MSPointerEvent&&!a.PointerEvent&&(ue="MSPointerDown",he="MSPointerMove MSPointerUp MSPointerCancel"),g(fe,X,{handler:function(e){var t=this.store,r=!1,n=e.type.toLowerCase().replace("ms",""),i=ce[n],a=le[e.pointerType]||e.pointerType,o=a==U,s=_(t,e.pointerId,"pointerId");i&D&&(0===e.button||o)?s<0&&(t.push(e),s=t.length-1):i&(M|j)&&(r=!0),s<0||(t[s]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e],pointerType:a,srcEvent:e}),r&&t.splice(s,1))}});var de={touchstart:D,touchmove:2,touchend:M,touchcancel:j};function ge(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,X.apply(this,arguments)}g(ge,X,{handler:function(e){var t=de[e.type];if(t===D&&(this.started=!0),this.started){var r=function(e,t){var r=E(e.touches),n=E(e.changedTouches);t&(M|j)&&(r=k(r.concat(n),"identifier",!0));return[r,n]}.call(this,e,t);t&(M|j)&&r[0].length-r[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:r[0],changedPointers:r[1],pointerType:U,srcEvent:e})}}});var pe={touchstart:D,touchmove:2,touchend:M,touchcancel:j},be="touchstart touchmove touchend touchcancel";function ye(){this.evTarget=be,this.targetIds={},X.apply(this,arguments)}g(ye,X,{handler:function(e){var t=pe[e.type],r=function(e,t){var r=E(e.touches),n=this.targetIds;if(t&(2|D)&&1===r.length)return n[r[0].identifier]=!0,[r,r];var i,a,o=E(e.changedTouches),s=[],c=this.target;if(a=r.filter(function(e){return A(e.target,c)}),t===D)for(i=0;i<a.length;)n[a[i].identifier]=!0,i++;i=0;for(;i<o.length;)n[o[i].identifier]&&s.push(o[i]),t&(M|j)&&delete n[o[i].identifier],i++;if(!s.length)return;return[k(a.concat(s),"identifier",!0),s]}.call(this,e,t);r&&this.callback(this.manager,t,{pointers:r[0],changedPointers:r[1],pointerType:U,srcEvent:e})}});var me=2500;function ve(){X.apply(this,arguments);var e=m(this.handler,this);this.touch=new ye(this.manager,e),this.mouse=new se(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function Ie(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var r={x:t.clientX,y:t.clientY};this.lastTouches.push(r);var n=this.lastTouches;setTimeout(function(){var e=n.indexOf(r);-1<e&&n.splice(e,1)},me)}}g(ve,X,{handler:function(e,t,r){var n=r.pointerType==U,i="mouse"==r.pointerType;if(!(i&&r.sourceCapabilities&&r.sourceCapabilities.firesTouchEvents)){if(n)(function(e,t){e&D?(this.primaryTouch=t.changedPointers[0].identifier,Ie.call(this,t)):e&(M|j)&&Ie.call(this,t)}).call(this,t,r);else if(i&&function(e){for(var t=e.srcEvent.clientX,r=e.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],a=Math.abs(t-i.x),o=Math.abs(r-i.y);if(a<=25&&o<=25)return!0}return!1}.call(this,r))return;this.callback(e,t,r)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var we=F(t.style,"touchAction"),Ce=we!==p,Ae="manipulation",Se="none",xe="pan-x",_e="pan-y",Ee=function(){if(!Ce)return!1;var t={},r=a.CSS&&a.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(e){t[e]=!r||a.CSS.supports("touch-action",e)}),t}();function ke(e,t){this.manager=e,this.set(t)}ke.prototype={set:function(e){"compute"==e&&(e=this.compute()),Ce&&this.manager.element.style&&Ee[e]&&(this.manager.element.style[we]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return h(this.manager.recognizers,function(e){v(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(e){if(S(e,Se))return Se;var t=S(e,xe),r=S(e,_e);if(t&&r)return Se;if(t||r)return t?xe:_e;if(S(e,Ae))return Ae;return"auto"}(t.join(" "))},preventDefaults:function(e){var t=e.srcEvent,r=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var n=this.actions,i=S(n,Se)&&!Ee.none,a=S(n,_e)&&!Ee[_e],o=S(n,xe)&&!Ee[xe];if(i){var s=1===e.pointers.length,c=e.distance<2,l=e.deltaTime<250;if(s&&c&&l)return}if(!o||!a)return i||a&&r&Z||o&&r&K?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var Fe=1;function Re(e){this.options=o({},this.defaults,e||{}),this.id=R++,this.manager=null,this.options.enable=I(this.options.enable,!0),this.state=Fe,this.simultaneous={},this.requireFail=[]}function Te(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function Pe(e){return e==H?"down":e==L?"up":e==J?"left":e==V?"right":""}function Ne(e,t){var r=t.manager;return r?r.get(e):e}function Be(){Re.apply(this,arguments)}function Ue(){Be.apply(this,arguments),this.pX=null,this.pY=null}function Oe(){Be.apply(this,arguments)}function De(){Re.apply(this,arguments),this._timer=null,this._input=null}function Me(){Be.apply(this,arguments)}function je(){Be.apply(this,arguments)}function We(){Re.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Je(e,t){return(t=t||{}).recognizers=I(t.recognizers,Je.defaults.preset),new Ve(e,t)}Re.prototype={defaults:{},set:function(e){return o(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(n(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=Ne(e,this)).id]||(t[e.id]=e).recognizeWith(this),this},dropRecognizeWith:function(e){return n(e,"dropRecognizeWith",this)||(e=Ne(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(n(e,"requireFailure",this))return this;var t=this.requireFail;return-1===_(t,e=Ne(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(n(e,"dropRequireFailure",this))return this;e=Ne(e,this);var t=_(this.requireFail,e);return-1<t&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(t){var r=this,e=this.state;function n(e){r.manager.emit(e,t)}e<8&&n(r.options.event+Te(e)),n(r.options.event),t.additionalEvent&&n(t.additionalEvent),8<=e&&n(r.options.event+Te(e))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=32},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(32|Fe)))return!1;e++}return!0},recognize:function(e){var t=o({},e);if(!v(this.options.enable,[this,t]))return this.reset(),void(this.state=32);56&this.state&&(this.state=Fe),this.state=this.process(t),30&this.state&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},g(Be,Re,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,r=e.eventType,n=6&t,i=this.attrTest(e);return n&&(r&j||!i)?16|t:n||i?r&M?8|t:2&t?4|t:2:32}}),g(Ue,Be,{defaults:{event:"pan",threshold:10,pointers:1,direction:G},getTouchAction:function(){var e=this.options.direction,t=[];return e&Z&&t.push(_e),e&K&&t.push(xe),t},directionTest:function(e){var t=this.options,r=!0,n=e.distance,i=e.direction,a=e.deltaX,o=e.deltaY;return i&t.direction||(t.direction&Z?(i=0===a?W:a<0?J:V,r=a!=this.pX,n=Math.abs(e.deltaX)):(i=0===o?W:o<0?L:H,r=o!=this.pY,n=Math.abs(e.deltaY))),e.direction=i,r&&n>t.threshold&&i&t.direction},attrTest:function(e){return Be.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=Pe(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),g(Oe,Be,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Se]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),g(De,Re,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(e){var t=this.options,r=e.pointers.length===t.pointers,n=e.distance<t.threshold,i=e.deltaTime>t.time;if(this._input=e,!n||!r||e.eventType&(M|j)&&!i)this.reset();else if(e.eventType&D)this.reset(),this._timer=u(function(){this.state=8,this.tryEmit()},t.time,this);else if(e.eventType&M)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&e.eventType&M?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=y(),this.manager.emit(this.options.event,this._input)))}}),g(Me,Be,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Se]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),g(je,Be,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Z|K,pointers:1},getTouchAction:function(){return Ue.prototype.getTouchAction.call(this)},attrTest:function(e){var t,r=this.options.direction;return r&(Z|K)?t=e.overallVelocity:r&Z?t=e.overallVelocityX:r&K&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&r&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&b(t)>this.options.velocity&&e.eventType&M},emit:function(e){var t=Pe(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),g(We,Re,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Ae]},process:function(e){var t=this.options,r=e.pointers.length===t.pointers,n=e.distance<t.threshold,i=e.deltaTime<t.time;if(this.reset(),e.eventType&D&&0===this.count)return this.failTimeout();if(n&&i&&r){if(e.eventType!=M)return this.failTimeout();var a=!this.pTime||e.timeStamp-this.pTime<t.interval,o=!this.pCenter||re(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,o&&a?this.count+=1:this.count=1,this._input=e,0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=u(function(){this.state=8,this.tryEmit()},t.interval,this),2):8}return 32},failTimeout:function(){return this._timer=u(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Je.VERSION="2.0.7",Je.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Me,{enable:!1}],[Oe,{enable:!1},["rotate"]],[je,{direction:Z}],[Ue,{direction:Z},["swipe"]],[We],[We,{event:"doubletap",taps:2},["tap"]],[De]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Ve(e,t){var r;this.options=o({},Je.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((r=this).options.inputClass||(N?fe:B?ye:P?ve:se))(r,$),this.touchAction=new ke(this,this.options.touchAction),Le(this,!0),h(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function Le(r,n){var i,a=r.element;a.style&&(h(r.options.cssProps,function(e,t){i=F(a.style,t),n?(r.oldCssProps[i]=a.style[i],a.style[i]=e):a.style[i]=r.oldCssProps[i]||""}),n||(r.oldCssProps={}))}Ve.prototype={set:function(e){return o(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var r;this.touchAction.preventDefaults(e);var n=this.recognizers,i=t.curRecognizer;(!i||i&&8&i.state)&&(i=t.curRecognizer=null);for(var a=0;a<n.length;)r=n[a],2===t.stopped||i&&r!=i&&!r.canRecognizeWith(i)?r.reset():r.recognize(e),!i&&14&r.state&&(i=t.curRecognizer=r),a++}},get:function(e){if(e instanceof Re)return e;for(var t=this.recognizers,r=0;r<t.length;r++)if(t[r].options.event==e)return t[r];return null},add:function(e){if(n(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),(e.manager=this).touchAction.update(),e},remove:function(e){if(n(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,r=_(t,e);-1!==r&&(t.splice(r,1),this.touchAction.update())}return this},on:function(e,t){if(e!==p&&t!==p){var r=this.handlers;return h(x(e),function(e){r[e]=r[e]||[],r[e].push(t)}),this}},off:function(e,t){if(e!==p){var r=this.handlers;return h(x(e),function(e){t?r[e]&&r[e].splice(_(r[e],t),1):delete r[e]}),this}},emit:function(e,t){var r,n,i;this.options.domEvents&&(r=e,n=t,(i=s.createEvent("Event")).initEvent(r,!0,!0),(i.gesture=n).target.dispatchEvent(i));var a=this.handlers[e]&&this.handlers[e].slice();if(a&&a.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var o=0;o<a.length;)a[o](t),o++}},destroy:function(){this.element&&Le(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},o(Je,{INPUT_START:D,INPUT_MOVE:2,INPUT_END:M,INPUT_CANCEL:j,STATE_POSSIBLE:Fe,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:W,DIRECTION_LEFT:J,DIRECTION_RIGHT:V,DIRECTION_UP:L,DIRECTION_DOWN:H,DIRECTION_HORIZONTAL:Z,DIRECTION_VERTICAL:K,DIRECTION_ALL:G,Manager:Ve,Input:X,TouchAction:ke,TouchInput:ye,MouseInput:se,PointerEventInput:fe,TouchMouseInput:ve,SingleTouchInput:ge,Recognizer:Re,AttrRecognizer:Be,Tap:We,Pan:Ue,Swipe:je,Pinch:Oe,Rotate:Me,Press:De,on:w,off:C,each:h,merge:d,extend:f,assign:o,inherit:g,bindFn:m,prefixed:F}),(void 0!==a?a:"undefined"!=typeof self?self:{}).Hammer=Je,"function"==typeof p&&p.amd?p(function(){return Je}):He.exports?He.exports=Je:a.Hammer=Je}(window,document)}),RcInputMonitor=function(){function i(e,t){var r=this;classCallCheck(this,i),this.eventWriter=EventWriter.getInstance(),this.input=t,this.rcProcessor=e,this.caretPosAtKeyDown=-1,this.browser=getInstance();var n="";n=t.getAttribute("type")?t.getAttribute("type").toLowerCase():"text","select"===t.nodeName.toLowerCase()&&(n="select"),this._isTextInput()&&(this.lastValue=t.getAttribute("value")||""),((!this._isTextInput()||t.value)&&("checkbox"!=n||t.checked)||t.type&&"select-one"==t.type)&&this.serialize(!0),"textarea"==n&&_.addEventListener(t,"scroll",function(e){return r._scrollElHandler(e,n)}),"checkbox"!=n&&"radio"!=n&&"select"!=n||(_.addEventListener(t,"click",function(e){return r._selectedChangeHandler(e,n)}),_.addEventListener(e.win,"click",function(e){return r._selectedChangeHandler(e,n)})),"checkbox"!=n&&"radio"!=n&&_.addEventListener(t,"change",function(e){return r._textValueChangeHandler(e,n)}),this._isTextInput()&&(this.lastValue=this.input.value,_.addEventListener(t,"keydown",function(e){return r._keydownHandler(e,n)})),_.addEventListener(t,"focus",function(e){return r._focusHandler(e,n)}),_.addEventListener(t,"blur",function(e){return r._blurHandler(e,n)})}return createClass(i,null,[{key:"getNewInstance",value:function(e,t){if(t.rcMonitor)return null;var r=new i(e,t);return t._rcMonitor=r}}]),createClass(i,[{key:"_blurHandler",value:function(e,t){this.input&&(this._isTextInput()&&clearInterval(this._caretMonitor),this.eventWriter.append(constants.event_types.INPUT_FOCUS,{t:t,v:0,x:this.eventWriter.logXPath(globalCacheObj.getDomPath(this.input))},this.rcProcessor))}},{key:"_focusHandler",value:function(e,t){var r=this;this.input&&(this._isTextInput()&&(this._updateCaret(),this._caretMonitor=setInterval(function(){r.input&&r._updateCaret()},500)),this.eventWriter.append(constants.event_types.INPUT_FOCUS,{t:t,v:1,x:this.eventWriter.logXPath(globalCacheObj.getDomPath(this.input))},this.rcProcessor))}},{key:"_scrollElHandler",value:function(e,t){this.input&&this.eventWriter.append(constants.event_types.NODE_SCROLL,{t:t,x:this.eventWriter.logXPath(globalCacheObj.getDomPath(this.input)),ps:{x:this.input.scrollLeft,y:this.input.scrollTop}},this.rcProcessor)}},{key:"_selectedChangeHandler",value:function(e,t){this.input&&this._lastCheckedState!=this.input.checked&&(this._lastCheckedState=this.input.checked,this.eventWriter.append(constants.event_types.VALUE_MODIFIED,{k:this.getNodeName(this.input),t:t,b:this.input.checked,x:this.eventWriter.logXPath(globalCacheObj.getDomPath(this.input))},this.rcProcessor))}},{key:"_textValueChangeHandler",value:function(e,t){this.input&&(this._lastSelectListContents!=this.input.innerHTML&&this.serialize(),this.lastValue=this.input.value,this.eventWriter.append(constants.event_types.VALUE_MODIFIED,{k:this.getNodeName(this.input),t:t,si:this.input.selectedIndex,x:this.eventWriter.logXPath(globalCacheObj.getDomPath(this.input))},this.rcProcessor))}},{key:"_keydownHandler",value:function(n,i){var a=this;this.input&&setTimeout(function(){a._updateCaret();var e=0;if("number"==typeof n.keyCode?e=n.keyCode:"number"==typeof n.which?e=n.which:"number"==typeof n.charCode&&(e=n.charCode),1<Math.abs(a.lastValue.length-a.input.value.length)||1<a.lastCaretInfo.e-a.lastCaretInfo.s||-1<a.caretPosAtKeyDown&&1<Math.abs(a.lastCaretInfo.c-a.caretPosAtKeyDown))logger.log("value: "+a.input.value+", cp:"+a.caretPosAtKeyDown+", c:",a.lastCaretInfo),a.serialize();else{0===e&&32==n.charCode&&(e=n.charCode);var t=a.eventWriter.logXPath(globalCacheObj.getDomPath(a.input));if(e<=46||91<=e&&e<96||112<=e&&e<=145)a.eventWriter.append(constants.event_types.KEY_DOWN,{t:i,x:t,sk:e,ps:{x:a.input.scrollTop,y:a.input.scrollLeft},v:""},a.rcProcessor);else{var r=a._filterTextIfApplicable(a.input.value.substr(a.lastCaretInfo.c-1,1));logger.log("value: "+a.input.value+", v:"+r+", c:",a.lastCaretInfo),a.eventWriter.append(constants.event_types.KEY_DOWN,{t:i,x:t,sk:-1,v:r,ps:{x:a.input.scrollTop,y:a.input.scrollLeft}},a.rcProcessor)}}a.lastValue=a.input.value,a.caretPosAtKeyDown=a.lastCaretInfo.c},1)}},{key:"hasChanged",value:function(){return this._lastCheckedState!=this.input.checked||this.lastValue!=this.input.value}},{key:"_filterTextIfApplicable",value:function(e){return e&&this._isSecret()?e.replace(/[^ \n\r\t]/g,"*"):e}},{key:"_isSecret",value:function(e){return e||(e=this.input),dom.isSecretEl(e)}},{key:"_isTextInput",value:function(){var e="text";return this.input.getAttribute("type")&&(e=this.input.getAttribute("type").toLowerCase()),this.input.tagName&&"textarea"==this.input.tagName.toLowerCase()||_.inArray(e,["text","password","textarea","number","email","url","search","color","tel",""])}},{key:"getNodeName",value:function(e){if(!e)return"";var t="";return e.labels&&0<e.labels.length&&(t=e.labels[0].textContent||e.labels[0].innerText),t||!e.getAttribute("data-text")||this._isSecret(e)||(t=e.getAttribute("data-text")),t||(t=e.name||e.nodeName)&&(t=t.toLowerCase(),e.type&&(t+='[type="'+e.type.toLowerCase()+'"]')),t}},{key:"serialize",value:function(e){var t=this.input.tagName&&this.input.tagName.toLowerCase()||"",r=this.input.getAttribute("type");if(r||"input"==(r=this.input.tagName&&this.input.tagName.toLowerCase()||"")&&(r="text"),"hidden"!=r){if(e){if(!("radio"!=r&&"checkbox"!=r||this.input.checked))return void(this._lastCheckedState=!1);if(("text"==r||"password"==r||"textarea"==t)&&""===this.input.value)return}var n=constants.event_types.INPUT_SERIALIZE,i=this.eventWriter.logXPath(globalCacheObj.getDomPath(this.input));switch(r=-1<"select,textarea".indexOf(t)?t:r){case"textarea":this.eventWriter.append(n,{k:this.getNodeName(this.input),t:r,x:i,v:this._filterTextIfApplicable(this.input.value)||"",sz:{w:parseInt(dom.getStyle(this.input,this.rcProcessor.win,"width")),h:parseInt(dom.getStyle(this.input,this.rcProcessor.win,"height"))}},this.rcProcessor);break;case"radio":case"checkbox":!this.input.checked&&e||(this.eventWriter.append(n,{k:this.getNodeName(this.input),t:r,x:i,b:this.input.checked},this.rcProcessor),this._lastCheckedState=this.input.checked);break;case"select":for(var a=[],o=0;o<this.input.options.length;o++)a[a.length]={v:this._filterTextIfApplicable(this.input.options[o].value),k:this._filterTextIfApplicable(this.input.options[o].text)};!this.input.multiple&&this._isSecret()&&1<a.length&&(a.length=1),this.eventWriter.append(n,{k:this.getNodeName(this.input),t:r,x:i,sz:{w:this.input.offsetWidth,h:this.input.offsetHeight},o:a,si:this.input.options.selectedIndex},this.rcProcessor),this._lastSelectListContents=this.input.innerHTML;break;case"password":this.eventWriter.append(n,{k:this.getNodeName(this.input),t:r,x:i,v:this._filterText(this.input.value)},this.rcProcessor);break;default:this.eventWriter.append(n,{k:this.getNodeName(this.input),t:r,x:i,v:this._filterTextIfApplicable(this.input.value)||""},this.rcProcessor)}}}},{key:"_filterText",value:function(e){return e?e.replace(/[^ \n\r\t]/g,"*"):e}},{key:"_updateCaret",value:function(){var e=this,t=this._getCaretInfo(this.input);this.lastCaretInfo&&this.lastCaretInfo.s==t.s&&this.lastCaretInfo.e==t.e&&this.lastCaretInfo.c==t.c||setTimeout(function(){e.eventWriter.append(constants.event_types.CURSOR_INFO,{a:e.getNodeName(e.input),x:e.eventWriter.logXPath(globalCacheObj.getDomPath(e.input)),ci:t},e.rcProcessor)},1),this.lastCaretInfo=t}},{key:"_getCaretInfo",value:function(){var e=this.input,t=e.value,r=e.ownerDocument,n={s:0,e:0,c:0};if(this.browser.isIE&&r&&r.selection)if(e.tagName&&"textarea"==e.tagName.toLowerCase()){t.charCodeAt(t.length-1)<14&&(t=t.replace(/34/g,"")+String.fromCharCode(28));var i=r.selection.createRange(),a=i.duplicate();a.moveToElementText(e),a.setEndPoint("StartToEnd",i),n.e=t.length-a.text.length,a.setEndPoint("StartToStart",i),n.s=t.length-a.text.length,n.c=n.e,t.substr(t.length-1)==String.fromCharCode(28)&&(t=t.substr(0,t.length-1));var o=t.substr(0,n.s).split("\n").length-1,s=t.substr(0,n.c).split("\n").length-1,c=t.substr(0,n.e).split("\n").length-1;n.c-=s,n.s-=o,n.e-=c}else{var l=r.selection.createRange(),u=l.duplicate();n.s=0-u.moveStart("character",-1e5),n.e=n.s+l.text.length,n.c=n.e}else try{n.s=e.selectionStart,n.e=e.selectionEnd,n.c=n.e}catch(e){}return!n.s&&n.s<0&&(n={s:0,e:0,c:0}),n}},{key:"dispose",value:function(){this.input._arTracker=null,this.rcProcessor=null,this.lastValue=null,this.input=null,this.lastCaretInfo=null,this._lastSelectListContents=null,clearTimeout(this._caretMonitor)}}]),i}(),PIIHandler=function(){function e(){classCallCheck(this,e),this.piiMarkerStart="arMaskedContentStart",this.piiMarkerEnd="arMaskedContentEnd",this.piiMarkerPrefix="arMaskedContent",this.maskClassName="_ar_hide_",this.defaultMaskCSSSelectors='._ar_hide_, input[type="hidden"]',this.maskedAttributes=["value","src","data","alt"],this.parseConfig()}return createClass(e,[{key:"parseConfig",value:function(){this.rules=config.getBaseBlockedEls(),this.rules||(this.rules={}),this.rules[".*"]?this.rules[".*"]+=","+this.defaultMaskCSSSelectors:this.rules[".*"]=this.defaultMaskCSSSelectors,!1===config.getConfig("keepInputs","record")&&(this.rules[".*"]+=", input[type=text], textarea")}},{key:"tag",value:function(){var e=this.getPIISelectors();0<e.length&&this.tagStatic(e)}},{key:"hasClass",value:function(e,t){return e.classList?e.classList.contains(t):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}},{key:"addClass",value:function(e,t){e.classList?e.classList.add(t):this.hasClass(e,t)||(e.className+=" "+t)}},{key:"getPIISelectors",value:function(){var e=[];if(0===Object.keys(this.rules).length)return e;var t=window.location.href||"";for(var r in this.rules){new RegExp(r,"i").test(t)&&e.push(this.rules[r])}return e}},{key:"removeClass",value:function(e,t){if(e.classList)e.classList.remove(t);else if(this.hasClass(e,t)){var r=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(r," ")}}},{key:"isTagged",value:function(e){var t=e.parentNode;if(!t)return!1;for(var r=0;r<t.childNodes.length;r++){var n=t.childNodes[r];if(0<r&&n===t.childNodes[r]){var i=t.childNodes[r-1];if(i.data&&-1<i.data.indexOf(this.piiMarkerPrefix))return!0}}return!1}},{key:"isTaggedDynamic",value:function(e){return!(!e.nextSibling||8!==e.nextSibling.nodeType)&&(e.nextSibling.data&&-1<e.nextSibling.data.indexOf(this.piiMarkerEnd))}},{key:"maskAttribute",value:function(t){t&&this.maskedAttributes.forEach(function(e){t.getAttribute(e)&&t.setAttribute(e,"")})}},{key:"updateBoundingRect",value:function(e){var t=this.getPIISelectors();if(0===t.length)return!1;for(var r=e.querySelectorAll(t.join(",")),n=0;n<r.length;n++){var i=r[n],a=this.getBoundingRect(i);this.addMaskAttribute(i,a)}}},{key:"tagStatic",value:function(e){var a=this,t=window.document.querySelectorAll(e.join(","));[].forEach.call(t,function(e,t){for(var r=e.querySelectorAll("input[type=text], textarea"),n=r.length-1;0<=n;n--){var i=r[n];a.addClass(i,a.maskClassName)}})}},{key:"tagDynamic",value:function(e){var t=this.getPIISelectors();if(0===t.length)return"false";for(var r=document.querySelectorAll(t.join(",")),n=0;n<r.length;n++){var i=r[n];if(PIIUtils.isDescendentOf(e,i)||i==e)return"skip";if(PIIUtils.isDescendentOf(i,e))return"true"}return"false"}},{key:"processPII",value:function(e,t){var r=e,n=null;return t?n=new RegExp(".+","mig"):0<=e.indexOf(this.piiMarkerStart)&&(n=new RegExp("\x3c!--(\\W)*"+this.piiMarkerStart+"[\\w\\W]*?"+this.piiMarkerEnd+"(\\W)*--\x3e","mig")),n&&(r=PIIUtils.replaceWithMask(e,n)),r}},{key:"removeComments",value:function(e){var t=this;if(/<!--/gim.test(e)){var r=new RegExp("(\x3c!--)[\\w\\W]*?(--\x3e)","mig");return PIIUtils.replaceWithMask(e,r,function(e){return e[0].indexOf("arHiddenBlock")<0&&e[0].indexOf(t.piiMarkerPrefix)<0?"":e[0]})}return e}},{key:"addMaskAttribute",value:function(e,t){e.setAttribute(this.maskClassName,t)}},{key:"cloneAttributes",value:function(e,t){for(var r=void 0,n=Array.prototype.slice.call(t.attributes);r=n.pop();)if(!_.inArray(r.nodeName,this.maskedAttributes))try{e.setAttribute(r.nodeName,r.nodeValue)}catch(e){}}},{key:"processMaskElement",value:function(e,t){var r=this.getPIISelectors();if(0!==r.length){for(var n=t.querySelectorAll(r.join(",")),i=0;i<n.length;i++){var a=n[i];if("input"!==a.tagName.toLowerCase()){var o=this.getBoundingRect(a);this.addMaskAttribute(a,o)}this.addClass(a,this.maskClassName)}for(var s=e.querySelectorAll(r.join(",")),c=0;c<s.length;c++){var l=s[c],u=l.tagName,h=document.createElement(u);h.setAttribute(this.maskClassName,n[c].getAttribute(this.maskClassName)),this.cloneAttributes(h,l),this.addClass(h,this.maskClassName),h.style&&h.style.background&&(h.style.background=""),"input"===h.tagName.toLowerCase()&&h.style&&this.addMaskAttribute(h,h.getAttribute("style")),l.parentNode.insertBefore(h,l),l.parentNode.removeChild(l)}}}},{key:"getBoundingRect",value:function(e){var t=e.getBoundingClientRect();return"width:"+Math.floor(t.width)+"px;height:"+Math.floor(t.height)+"px;"}}]),e}(),PIIUtils=function(){function o(){classCallCheck(this,o)}return createClass(o,null,[{key:"replaceWithMask",value:function(e,t,r){var n=t.exec(e),i="",a=0;for(r=r||o.maskStr;_.isDefined(n);){i+=e.substring(a,n.index),i+=r(n),a=n.index+n[0].length,n=t.exec(e)}return i+=e.substring(a,e.length)}},{key:"maskStr",value:function(e){var t=e instanceof Array?e[0]:e||"";if(0<t.length){return t.replace(/(>)|(&[^\s;]*;)|(<[^<>]*?>)|(<)|\w/g,function(e,t,r,n){return r||n||"*"}).replace(/&((?!nbsp| |amp).)*?;/g,"*")}return""}},{key:"isDescendentOf",value:function(e,t){if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return!!(16&t.compareDocumentPosition(e));for(;e.parentNode;){if(e==t||e==t.body)return!0;e=e.parentNode}return!1}}]),o}(),globalPIIHandler=null;function getPIIHandler(){return globalPIIHandler||(globalPIIHandler=new PIIHandler),globalPIIHandler}var DomSerialize=function(){function e(){classCallCheck(this,e)}return createClass(e,[{key:"serialize",value:function(e,t){this.doc=e.document;var r=null;try{r=this.doc.querySelectorAll("html")[0].cloneNode(!0),getPIIHandler().processMaskElement(r,this.doc)}catch(e){logger.log("serialize error: ",e),r=this.doc.querySelectorAll("html")[0]}return this.processDocument(this._getDocTag()+r.outerHTML,this.doc,t,!1)}},{key:"processDocument",value:function(e,t,r,n){e=e instanceof Array?e[0]:e||"",e=getPIIHandler().removeComments(e),e=this.removeScriptBody(e);var i=_.extend({},globalDataCache.getObject(e,r));return delete i.kl,i.df||(i.df=null),i.id?i:null}},{key:"getDocType",value:function(){return this._getDocTag()}},{key:"removeScriptBody",value:function(e){if(!/script/gim.test(e))return logger.log("Script tag is not found."),e;for(var t=/(<script[^>]*?>)[\s\S]*?(<\/[\w]*script>)/gim,r="",n=0,i=t.exec(e);_.isDefined(i);)r+=e.substring(n,i.index),r+=i[1]+i[2],n=i[0].length+i.index,i=t.exec(e);return r+=e.substring(n,e.length)}},{key:"_getDocTag",value:function(){var e="<!DOCTYPE html>";return window.XMLSerializer&&(e=(new XMLSerializer).serializeToString(window.document.doctype),logger.log("doctype:"+e)),e}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}(),RcDomChangeMonitor=function(){function t(e){classCallCheck(this,t),this.processor=e,this.elementsUpdated=new PubSubTopic,this.customDataDefs=[],this.eventWriter=EventWriter.getInstance(),this.setupCustomConfig(),this.setupMutationObserver(this.processor),this.throttler=1500,this.wait=!1,this.mutationCache={},this.cacheIndex=0}return createClass(t,[{key:"throttle",value:function(e,t,r){var n=this;r=r||"";var i={};i.c=t,(i.t=e)&&(e.nodeType!==(window.Node.ELEMENT_NODE||1)&&(e=e.parentNode),e&&this.mutationCache&&(e._arKey=e._arKey||"_"+this.cacheIndex++,this.mutationCache[e._arKey+r.toLowerCase()]=i,this.wait||(this.wait=!0,this._callbackTimer=setTimeout(function(){n.invokeCallBack()},this.throttler))))}},{key:"invokeCallBack",value:function(){for(var e in this.wait=!1,this.mutationCache){var t=this.mutationCache[e];t._arKey=null,"object"===(void 0===t?"undefined":_typeof(t))&&t.t&&t.t.nodeName&&t.t.nodeName!==constants.record.tags.SVG&&t.c.call(this,t.t)}this.mutationCache={}}},{key:"setupMutationObserver",value:function(r){var n=this;this.mutationObserver=new MutationObserver(function(e){e.forEach(function(e){var t=void 0;if("childList"===e.type){t={target:e.target};try{n.subtreeModifiedHandler(t,r)}catch(e){}t=null}else"attributes"===e.type?(t={attrName:e.attributeName,target:e.target,newValue:e.target.getAttribute(e.attributeName)},n.attrModifiedHandler(t,r),t=null):"characterData"===e.type&&e.target.nodeType===Node.TEXT_NODE&&(t={target:e.target},n.subtreeModifiedHandler(t,r),t=null)})}),this.mutationConfig={attributes:!0,childList:!0,subtree:!0,characterData:!0},this.mutationObserver.observe(r.win.document,this.mutationConfig)}},{key:"setupCustomConfig",value:function(){config.getConfig("userProperties","behavior")&&(this.customDataDefs=config)}},{key:"subtreeModifiedHandler",value:function(e,t){var r=this,n=e.originalTarget||e.target||e.srcElement,i=n.tagName?n.tagName.toLowerCase():"";(n instanceof Element&&!n.getAttribute("_ar_hide_")||!(n instanceof Element))&&(_.inArray(i,constants.record.mutatationConfig.ignoreNodeContentsList)?i===constants.record.tags.SELECT&&n._arTracker&&this.throttle(n,function(){r._arTracker.serialize()}):(i!==constants.record.tags.SVG&&this.throttle(n,function(e){r._processDomUpdate(e)}),this.customDataDefs.length&&userProperty.collectCustomData(this.customDataDefs,!0,n)))}},{key:"attrModifiedHandler",value:function(e,i){var a=this,t=e.originalTarget||e.target||e.srcElement,o=e.attrName,s=e.newValue;"on"===e.attrName.substr(0,2)||0<="script,meta,title".indexOf(t.tagName)||this.throttle(t,function(e){var t=void 0;if((e.tagName?e.tagName.toLowerCase():"")!==constants.record.tags.SVG)if(t=a.eventWriter.logXPath(globalCacheObj.getDomPath(e,null,"id"===o)),"class"!==o&&"style"!==o||getPIIHandler().updateBoundingRect(e),"_ar_hide_"===o&&a.eventWriter.append(constants.event_types.MUTATION_ATTR,{k:o,v:s,x:t},i),"style"===o){var r=e.getAttribute("style")||e.style;r&&a.eventWriter.append(constants.event_types.MUTATION_ATTR,{k:o,v:void 0!==r.cssText?r.cssText:r+"",x:t},i)}else if(("value"!==o||!e.tagName||"input"!==e.tagName.toLowerCase()||"hidden"!==e.type)&&"on"!==o.substr(0,2).toLowerCase()){if(t=a.eventWriter.logXPath(globalCacheObj.getDomPath(e,null,"id"===o)),"value"===o&&e.tagName&&"input"===e.tagName.toLowerCase()){var n=e.getAttribute("class")||e.class;_.isDefined(n)&&(-1<n.indexOf("_ar_hide_")||-1<n.indexOf("arObsecure"))&&(s=s.replace(/[\w\d\s]/g,"*"))}"disabled"===o&&(s=""===s),a.eventWriter.append(constants.event_types.MUTATION_ATTR,{k:o,v:s,x:t},i)}},e.attrName)}},{key:"_processDomUpdate",value:function(e){var t=this.processor;if(e.nodeType===Node.TEXT_NODE&&(e=e.parentNode),e){var r=globalCacheObj.getDomPath(e),n=void 0;if(0===r[0].indexOf("html")){var i=getPIIHandler().tagDynamic(e);if("true"===i){var a=e.cloneNode(!0);getPIIHandler().processMaskElement(a,t.win.document),n=a.innerHTML?DomSerialize.getInstance().processDocument(a.innerHTML,t.win.document,r):null}else if("false"===i)n=e.innerHTML?DomSerialize.getInstance().processDocument(e.innerHTML,t.win.document,r):null;else if("skip"===i)return;n&&(this.eventWriter.append(constants.event_types.MUTATION_NODE,{x:this.eventWriter.logXPath(r),v:"",dom:n},t),this._handleDomUpdate(e))}}}},{key:"_handleDomUpdate",value:function(e){var t=e.tagName?e.tagName.toLowerCase():"";e.nodeType!==(Node.ELEMENT_NODE||1)||_.inArray(t,constants.record.mutatationConfig.ignoreNodeContentsList)||this.processor.DomUpdated.fire(e)}},{key:"dispose",value:function(){this.processor=null,this.elementsUpdated.unsubscribeAll(),this.elementsUpdated=null,this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)}}]),t}(),AjaxProxy=function(){function e(t){classCallCheck(this,e),window._orginalXhr=window._orginalXhr||XMLHttpRequest,this.config=t;var f=this;XMLHttpRequest=function(){for(var e in this.xhr=new window._orginalXhr,this.xhr){var t="";try{t=_typeof(this.xhr[e])}catch(e){console.log("e",e)}"function"===t?this[e]=f._proxy(e,this.xhr):Object.defineProperty(this,e,{get:f.getFactory(e,this.xhr),set:f.setFactory(e,this.xhr)})}},window.fetch&&(window._orginalFetch=window.fetch,window.fetch=function(e,c){var l,u,h;return null==c&&(c={headers:{}}),c.url=e,h=null,u=[t.before],l=[t.after],new Promise(function(r,t){var n,i,a,o,s;i=function(){return c.headers&&(c.headers=new Headers(c.headers)),h||(h=new Request(c.url,c)),f.mergeObjects(c,h)},a=function(e){var t;return l.length?2===(t=l.shift()).length?(t(i(),e),a(e)):3===t.length?t(i(),e,a):a(e):r(e)},n=function(e){var t;if(void 0!==e)return t=new Response(e.body||e.text,e),r(t),void a(t);o()},o=function(){var e;if(u.length)return 1===(e=u.shift()).length?n(e(c)):2===e.length?e(i(),n):void 0;s()},s=function(){return window._orginalFetch(i()).then(function(e){return a(e)}).catch(function(e){return a(e),t(e)})},o()})})}return createClass(e,[{key:"getFactory",value:function(e,t){var r=this;return function(){return r.hasOwnProperty(e+"_")?r[e+"_"]:t[e]}}},{key:"setFactory",value:function(t,r){var n=this;return function(e){0==t.indexOf("on")?n.config[t]?r[t]=function(){n.config[t](r),e.apply(r,arguments)}:r[t]=e:n[t+"_"]=e}}},{key:"_proxy",value:function(t,r){var n=this;return function(){var e=[].slice.call(arguments);if(!n.config[t]||!n.config[t].call(n,e,r))return r[t].apply(r,e)}}},{key:"depricatedProp",value:function(e){return"returnValue"===e||"totalSize"===e||"position"===e}},{key:"mergeObjects",value:function(e,t){var r;for(r in e)if(e[r],!this.depricatedProp(r))try{t[r]=e[r]}catch(e){}return t}},{key:"dispose",value:function(){window._orginalXhr&&(XMLHttpRequest=window._orginalXhr,window._orginalXhr=void 0),window._orginalFetch&&(window.fetch=window._orginalFetch,window._orginalFetch=void 0)}}]),e}(),RcEventMonitor=function(){function r(e,t){var n=this,i=arguments;classCallCheck(this,r),this.browser=t,this.isTop=e.getTop()==e,this.processor=e,this.eventGenerator=EventGenerator.getInstance(),this.domChangeMonitor=new RcDomChangeMonitor(e,t),this.mobileCapture=this.initMobileCapture(e.win.document),this.hammer=null,this._mouseCapture(this.mobileCapture),this.eventWriter=EventWriter.getInstance(),this.inputCaptures=[],this.pinchEventArr=[],this.processInputElements(this.processor.win.document.body,!1,!0),this.lastMousePosition={x:0,y:0},_.addEventListener(this.processor.win,"resize",_.throttle(function(e){return n._sizeCapture},700)),_.addEventListener(this.processor.win,"orientationchange",function(e){return setTimeout(function(){return n._sizeCapture(e)},200)}),_.addEventListener(this.processor.win.document,"click",function(){return n._inputSerial(n,n.processor,n.inputCaptures)}),_.isDefined(config.getConfig("scrollEls","record"))&&(this._scrollElsCapture(this.processor.win.document),this.processor.DomUpdated.subscribe(function(e){n._scrollElsCapture(e)}));var a=this.processor.win.onerror;this.processor.win.onerror=function(e,t,r){e&&t&&n.eventWriter.append(constants.event_types.JAVASCRIPT_ERROR,{v:e+", "+t+", "+r},n.processor),a&&a.apply(n.processor.win,i)},this.viewChageHandler(),this.ajaxProxyHandler()}return createClass(r,[{key:"groupStatus",value:function(e){return 200<=e&&e<300?"20x":300<=e&&e<400?"30x":400<=e&&e<500?"40x":500<=e&&e<600?"50x":"others"}},{key:"groupLatencyGroup",value:function(e){if(e<"500")return"<500ms";if(500<=e&&e<1e3)return"500ms - 1s";if(1e3<=e&&e<3e3)return"1s - 3s";if(e<constants.storage.MAX_LATENCY){var t=Math.floor(e/constants.storage.LATENCY_BUCKET_WIDTH),r=constants.storage.LATENCY_BUCKET_WIDTH/1e3;return t*r+"s - "+(t+1)*r+"s"}return">"+Math.floor(constants.storage.MAX_LATENCY/1e3)+"s"}},{key:"processApiCall",value:function(e){var t=e.responseURL||e._responseURL;if(t&&urls.isAjaxProxyEnabled(t)){var r={statusCode:""+e.status,url:t?t.substr(0,constants.storage.AJAX_URL_LIMIT):"",exactLatency:_.now()-e._latency,latency:this.groupLatencyGroup(_.now()-e._latency),statusCodeGroup:this.groupStatus(e.status),method:e._method||constants.ajax_types.xhr},n=urls.getLocation(t);n&&(n.domain&&(r.domain=n.domain.substr(0,constants.storage.AJAX_URL_LIMIT)),n.path&&(r.path=n.path.substr(0,constants.storage.AJAX_URL_LIMIT)),n.query&&(r.query=n.query.substr(0,constants.storage.AJAX_URL_LIMIT)),n.hash&&(r.hash=n.hash.substr(0,constants.storage.AJAX_URL_LIMIT))),e._processed=!0,this.eventWriter.append(constants.event_types.CUSTOM_EVENT,{k:"api_call",v:JSON.stringify(r)})}}},{key:"ajaxProxyHandler",value:function(){var a=this;if(config.isAjaxProxyEnabled())new AjaxProxy({onreadystatechange:function(e){4===e.readyState&&a.processApiCall(e)},open:function(e,t){t._latency=_.now(),t._processed=!1,t._responseURL=e[1]},onload:function(e){(e.responseURL||e._responseURL)&&!e._processed&&a.processApiCall(e)},before:function(e){e._latency=_.now()},after:function(e,t,r){var n=t.headers.get("content-type"),i={status:t.status,responseURL:t.url?t.url.substr(0,constants.storage.AJAX_URL_LIMIT):"",_latency:e._latency,_method:constants.ajax_types.fetch};n||(r(t),a.processApiCall(i)),-1!==n.indexOf("application/json")?t.json().then(function(e){i.responseText=JSON.stringify(e);var t=new Response(JSON.stringify(e));r(t),a.processApiCall(i)}):-1!==n.indexOf("application/octet-stream")||-1!==n.indexOf("application/python-pickle")||-1!==n.indexOf("image/jpeg")?t.blob().then(function(e){i.responseText="blob size: "+e.size,r(new Response(e)),a.processApiCall(i)}):-1!==n.indexOf("text/plain")?t.text().then(function(e){i.responseText=e,r(new Response(e)),a.processApiCall(i)}):(r(t),a.processApiCall(i))}})}},{key:"viewChageHandler",value:function(){var n=this,i=this.processor.win.document,a=visibilityEventPrefix(),o=_.isObject(history.state)&&history.state&&history.state.title||document.title,s=globalSessionTracker.getSessionMetadata().viewId;if(_.addEventListener(i,a+"visibilitychange",function(){var e="hidden"===i[(""===a?"v":a+"V")+"isibilityState"],t=1,r=constants.event_types.VIEW_CHANGE;e&&(t=2),n.eventWriter.append(r,{k:"vc",v:{sid:s,status:t,url:location.href,title:o}},n.processor)}),canUseVisibilityChange())_.addEventListener(i,a+"visibilitychange",function(){"hidden"===i[(""===a?"v":a+"V")+"isibilityState"]&&(logger.log("visibility hidden. commit data",!0),n.eventWriter.commitData(n.browser.isMobile))});else{var e=this.browser.isMobile?"unload":"beforeunload";_.addEventListener(this.processor.win,e,function(){logger.log("befoerunload fires. commit",!0),n.eventWriter.commitData(!0)})}isSafari()&&this.browser.isMobile&&_.addEventListener(this.processor.win,"pagehide",function(){logger.log("pagehid fires.commit data",!0),n.eventWriter.commitData(!1)}),_.addEventListener(this.processor.win,"mouseout",function(e){var t=(e=e||n.eventWriter.win.event).relatedTarget||e.toElement,r=void 0;try{t&&(r=t.nodeName)}catch(e){}(!t||r&&"HTML"===r)&&n.eventWriter.commitData(!0)})}},{key:"initMobileCapture",value:function(e){return this.hammer||(this.hammer=new hammer(e,{touchAction:"auto"}),this.hammer.get("pan").set({direction:hammer.DIRECTION_ALL}),this.hammer.get("pinch").set({enable:!0}),logger.log("YYY hammer initialized",!0)),this.hammer}},{key:"_sizeCapture",value:function(){var e=dom.getSize(this.processor.win),t=0,r=this.processor.doc,n=dom.getDocSize(r),i={w:n.width,h:n.height};if(this.processor.docSize=n,this.browser.isMobile){var a=e;if(e=i,i=a,0!==(t=window.orientation)){if(i.w<i.h){var o=i.w;i.w=i.h,i.h=o}if(e.w<e.h){var s=e.w;e.w=e.h,e.h=s}}else if(i.w>i.h){var c=i.w;i.w=i.h,i.h=c}}return 0<e.w&&0<e.h&&0<i.w&&0<i.h&&this.eventWriter.append(constants.event_types.WIN_SIZE,{sz:e,avs:i,st:t,m:this.browser.isMobile},this.processor,-350),0<n.width&&0<n.height&&this.eventWriter.append(constants.event_types.DOCUMENT_SIZE,{sz:{w:n.width,h:n.height}},this.processor,-340),n}},{key:"_inputSerial",value:function(e,t,r){t&&(setTimeout(function(){for(var e=0;e<r.length;e++){var t=r[e];t.hasChanged()&&_.isDefined(t.input)&&"SELECT"!=t.input.nodeName&&(t.lastValue=t.input.value,t.serialize())}},100),e.isTop||e.processor.getTop().rcEventMonitor._inputSerial.apply())}},{key:"_scrollElsCapture",value:function(e){for(var t=e.querySelectorAll(config.getConfig("scrollEls","record")),r=this,n=function(e,t){t||(t=e.target||e.srcElement),t&&r.eventWriter.append(constants.event_types.NODE_SCROLL,{x:r.eventWriter.logXPath(globalCacheObj.getDomPath(t)),ps:{x:t.scrollLeft,y:t.scrollTop}},r.processor)},i=0;i<t.length;i++)t[i]._arScrollCapture||(_.addEventListener(t[i],"scroll",_.throttle(n,400)),t[i]._arScrollCapture=!0)}},{key:"getMobileType",value:function(e){switch(e){case"tap":return constants.event_types.TAP;case"press":return constants.event_types.PRESS;case"swipe":case"pan":return constants.event_types.SWIPE;case"pinch":return constants.event_types.PINCH;default:return null}}},{key:"_resizeCapture",value:function(e){var t=this._sizeCapture(),r={zi:{cw:window.innerWidth,ch:window.innerHeight,w:t.width,h:t.height},ps:getScroll(e.win)};this.eventWriter.append(constants.event_types.ZOOM_IN_OUT,r,e)}},{key:"_captureMobileEvent",value:function(e,t){var r=getScroll(e.win),n=e.win.frameElement,i=(dom.getPositionRelativeToMainView(n,dom.getParentWindow(n),!1),{x:t.center.x,y:t.center.y}),a=getWinSize(e.win),o=dom.getSize(e.win);if("pinchin"===t.type||"pinchout"===t.type)t.type="pinch";else if("pan"===t.type)0===i.x&&0===i.y?(i.x=dom.getPosition(t.target,e.win).x,i.y=dom.getPosition(t.target,e.win).y,i.x<o.w/4&&(i.x=o.w/2)):(i.x+=r.x,i.y+=r.y);else{var s=o.w/a.w,c=o.h/a.h;i.x+=r.x*s,i.y+=r.y*c}var l=this.getMobileType(t.type);if(!l)return null;if(!i||0!==i.x&&!i.x||0!==i.y&&!i.y)return null;var u="";l===constants.event_types.PINCH&&(this._resizeCapture(e),u="pinchin"===t.additionalEvent?0:1);var h=-1;t.target&&(h=this.eventWriter.logXPath(globalCacheObj.getDomPath(t.target)));var f=this.eventGenerator.getEvent(t.srcEvent,constants.events.CLICKTRACKER);if(f){var d={ps:i,v:f.v,source:f.source,x:h};if(l===constants.event_types.SWIPE)return d.d=t.direction,d.ag=t.angle.toFixed(2),d.s=t.distance.toFixed(2),void(_.inArray(d.d,[2,4,8,16])&&this.eventWriter.append(l,d,e));l===constants.event_types.PINCH&&(d.e=u,d.d=t.direction,d.ag=t.angle.toFixed(2),d.s=t.distance.toFixed(2)),logger.log("XXX. Captured tap "+d.i,!0),this.eventWriter.append(l,d,e)}}},{key:"_mouseCaptureHandler",value:function(e,t,r,n){var i=constants.event_types,a={};if(r&&(e.delayed||r.getTop().isMousedOverWindow||(this.eventWriter.append(i.MOUSE_OUT_ENTER,{v:1},r),r.getTop().isMousedOverWindow=!0),r.getTop().isMousedOverWindow)){n=n||i.MOUSE_MOVE;var o=-1,s=e.explicitOriginalTarget||e.originalTarget||e.target||e.srcElement;if(s&&(o=this.eventWriter.logXPath(globalCacheObj.getDomPath(s))),n==i.MOUSE_CLICK||n==i.MOUSE_MOVE){var c="unknown"!=typeof e.clientX?e.clientX:"unknown"!=typeof e.screenX?e.screenX:e.sX,l="unknown"!=typeof e.clientY?e.clientY:"unknown"!=typeof e.screenY?e.screenY:e.sY,u=getScroll(r.win);if("number"==typeof c?(a.x=c+u.x,a.y=l+u.y,this.lastMousePosition={x:c,y:l}):(a.x=this.lastMousePosition.x+u.x,a.y=this.lastMousePosition.y+u.y),r.parentProcessor){var h=r.win.frameElement,f=dom.getPositionRelativeToMainView(h,dom.getParentWindow(h));a.x=c+f.x,a.y=l+f.y}var d=this.eventGenerator.getEvent(e,constants.events.CLICKTRACKER,{position:a});d&&(d.x=o,n===i.MOUSE_MOVE&&(d.source={},d.v="",d.content=""),this.eventWriter.append(n,d,r))}else this.eventWriter.append(n,{ps:this.eventGenerator.getPosition(e),x:o},r)}}},{key:"sendPinchEvent",value:function(e){var t=this.pinchEventArr.length;if(1<t){var r=this.pinchEventArr[t-2],n="";n="pinchout"===r.additionalEvent?"pinchout":"pinchin",(r=this.pinchEventArr[0]).additionalEvent=n,r.center.x+=e.x,r.center.y+=e.y,this._captureMobileEvent(this.processor,r),this.pinchEventArr=[]}}},{key:"_mouseCapture",value:function(e){var a=this,t=400,o=this.processor?this.processor.win:null,r=this.processor?this.processor.win.document:null;if(this.browser.isMobile)t=400,e.on("tap press",function(e){a._captureMobileEvent(a.processor,e)}),e.on("pan",_.throttle(function(e){a._captureMobileEvent(a.processor,e)},t,{leading:!0,trailing:!1})),e.on("pinchstart pinchin pinchout",function(e){if("pinchstart"===e.type){var t=getScroll(o);a.pinchEventArr=[],setTimeout(function(){a.sendPinchEvent(t)},400)}a.pinchEventArr.push(e)});else{var n=this.browser.isIE?this.processor.win.document:this.processor.win;_.addEventListener(n,"mousemove",_.throttle(function(e){return a._mouseCaptureHandler(e,n,a.processor,constants.event_types.MOUSE_MOVE)},250)),_.addEventListener(r,"mousedown",function(e){a._mouseCaptureHandler(e,r,a.processor,constants.event_types.MOUSE_CLICK)})}_.addEventListener(o,"scroll",_.throttle(function(e){var t=!0,r=a.processor;if(r&&r.win==r.win.top)if(a.browser.isMobile){var n=dom.getDocSize(r.doc),i={zi:{cw:window.innerWidth,ch:window.innerHeight,w:n.width,h:n.height},ps:getScroll(r.win)};t=!1,a.eventWriter.append(constants.event_types.ZOOM_IN_OUT,i,a.processor)}else a._mouseCaptureHandler(e,o,a.processor,constants.event_types.MOUSE_MOVE);t&&a.eventWriter.append(constants.event_types.WINDOW_SCROLL,{ps:getScroll(r.win)},a.processor)},t)),this.isTop&&(!this.browser.isMobile&&this.processor&&(this.processor.isMousedOverWindow=!0,_.addEventListener(r,"mouseover",function(e){!a.processor||a.processor.isMousedOverWindow||e.relatedTarget||e.fromElement||(a.eventWriter.append(constants.event_types.MOUSE_OUT_ENTER,{v:1},a.processor),a.processor.isMousedOverWindow=!0)}),_.addEventListener(r,"mouseout",function(e){var t=(e=e||o.event).relatedTarget||e.toElement,r=void 0;try{t&&(r=t.nodeName)}catch(e){}a.processor&&a.processor.isMousedOverWindow&&(!t||r&&"HTML"==r)&&(a.eventWriter.append(constants.event_types.MOUSE_OUT_ENTER,{v:0},a.processor),a.processor.isMousedOverWindow=!1)})),this._measureSizeHandler(),this.domChangeMonitor.elementsUpdated.subscribe(this._measureSizeHandler))}},{key:"_measureSizeHandler",value:function(){}},{key:"seriaCalBack",value:function(t){setTimeout(function(){for(var e=0;e<t.length;e++)t[e].serialize()},1)}},{key:"processInputElements",value:function(e,t,r){for(var n=this,i=e.querySelectorAll("input, select, textarea"),a=i.length-1;0<=a;a--){var o=i[a];if(dom.isSecretEl(o))o=null;else{if(o._isArMonitored)for(var s=this.inputCaptures.length-1;0<=s;s--){var c=this.inputCaptures[s];if(c.input==o&&c.hasChanged()){c.serialize();break}}else this.inputCaptures.push(new RcInputMonitor(this.processor,o)),"reset"==o.getAttribute("type")&&_.addEventListener(o,"click",function(){return n.seriaCalBack(n.inputCaptures)});o=null}}e=i=null}},{key:"dispose",value:function(){this.domChangeMonitor.dispose(),this.domChangeMonitor=null;for(var e=this.inputCaptures,t=0;t<e.length;t++)e[t].dispose(),e.splice(t--,1);this.processor=null,this.inputCaptures=null,this.inputReserialize=null}}]),r}(),ReplayProcessor=function(){function i(e,t,r){var n=this;if(classCallCheck(this,i),logger.log("setting up record on ",t||"top frame"),this.browser=getInstance(),globalDataCache.reset(this.browser),this.isInit=!1,this.win=e,this.ready=new PubSubTopic,this.disposed=!1,this.instancePath=t||[],this.isMousedOverWindow=!1,this.eventWriter=EventWriter.getInstance(),this.parentProcessor=null,this.childProcessors=[],this.win.document){if(r)return this.parentProcessor=r,void this.initCapture();this.eventWriter=EventWriter.getInstance(),AurycPubSub.subscribe(constants.events.PAGEVIEWTRIGGER,function(e){n.newPage(!0,e)}),AurycPubSub.subscribe(constants.events.FEEDBACKTRIGGER,function(e){logger.log("subscribe replay FEEDBACKTRIGGER",e);var t={p:e.eventProperties.formid,et:e.eventProperties.et};n.getEventWriter().append(constants.event_types.CUSTOM_EVENT,{k:"feedback",v:JSON.stringify(t)})}),AurycPubSub.subscribe(constants.events.TRACKCUSTOMEVENT,function(e){logger.log("subscribe replay TRACKCUSTOMEVENT",e),n.getEventWriter().append(constants.event_types.CUSTOM_EVENT,{k:e.eventName,v:JSON.stringify(e.eventProperties)})})}else logger.error("Missing document object. Don't initialize")}return createClass(i,[{key:"logPageMarker",value:function(e,t){var r;r=t.basicProps?t.basicProps.currentTime:window.aurycStartTS?Math.max(_.now(),window.aurycStartTS):_.now();var n=getScreenResolution();t&&this.getEventWriter().append(constants.event_types.PAGEVIEW,_.extend({},t,{r:"W3C",l:config.getConfig("layout","record")||"",m:e.isMobile,url:t.content,t:t.name,dtm:r,ofs:(new Date).getTimezoneOffset(),sz:{w:n.w,h:n.h},f:document.referrer.toString()})),this.getEventWriter().logVisibilityChange(r),this.initSize()}},{key:"update",value:function(e){e||(e=this.doc.body),0!==e.childNodes.length&&(this.rcEventMonitor.processInputElements(e,!!e),this.rcFrame.performFrameBindings(this,e))}},{key:"getEventWriter",value:function(){return this.parentProcessor?this.parentProcessor.getEventWriter():this.eventWriter}},{key:"logUrlChangeEvent",value:function(e){var t=e.basicProps;_.isDefined(t)&&t.url&&config.isSPAEnabled()&&this.newPage(!0,e)}},{key:"newPage",value:function(e,t){globalDataCache.reset(this.browser),e&&this.getEventWriter().resetDomPathCache(),this.logPageMarker(this.browser,t),this.serializeDom(!0,t),this.initCapture()}},{key:"initSize",value:function(){var e=dom.getSize(this.win),t=0,r=this.getEventWriter(),n=dom.getDocSize(this.doc),i={w:n.width,h:n.height};if(this.docSize=n,this.browser.isMobile){var a=e;e=i,i=a,t=window.orientation}0<e.w&&0<e.h&&0<i.w&&0<i.h&&r.append(constants.event_types.WIN_SIZE,{sz:e,avs:i,v:t,m:this.browser.isMobile},r.logXPath(this.getPath())),0<n.width&&0<n.height&&(r.append(constants.event_types.DOCUMENT_SIZE,{sz:{w:n.width,h:n.height}},r.logXPath(this.getPath())),r.logXPath(this.getPath()))}},{key:"getPath",value:function(){return this._getPathCache||(this.parentProcessor?this._getPathCache=this.instancePath.concat(this.parentProcessor.getPath()):this._getPathCache=this.instancePath),this._getPathCache}},{key:"getTop",value:function(){return this.parentProcessor?this.parentProcessor.getTop():this}},{key:"setReady",value:function(){this.getEventWriter().setReady()}},{key:"setNotReady",value:function(){this.getEventWriter().setNotReady()}},{key:"cancelProcessing",value:function(e){this.getEventWriter().cancelProcessing(e)}},{key:"dispose",value:function(){if(!this.disposed){if(this.disposed=!0,this.childProcessors)for(var e=0;e<this.childProcessors.length;e++)this.childProcessors[e].dispose();this.rcEventMonitor&&this.rcEventMonitor.dispose(),this.lastRawMouseCoords&&(this.lastRawMouseCoords=null),this.rcEventMonitor=null,this.win=null,this.parentProcessor=null,this.DomUpdated.unsubscribeAll(),this.DomUpdated=null,this.eventWriter&&(this.eventWriter.dispose(),this.eventWriter=null)}}},{key:"getDomLoadTime",value:function(){var e=_.now(),t=window.performance&&window.performance.timing&&window.performance.timing.responseStart,r=window.performance&&window.performance.timing&&window.performance.timing.responseEnd,n=t&&r?r-t:-1;return Math.min(Math.max(1,n,e-window.aurycStartTS),1e4)}},{key:"serializeDom",value:function(e,t){if(this.getEventWriter()){var r;if(this.win===this.win.top&&!e){var n=this.win.document.body;r=globalDataCache.getObject(n.innerHTML,globalCacheObj.getDomPath(n)).uid}getPIIHandler().tag();var i=0;t&&t.basicProps&&t.basicProps.currentTime&&(i=t.basicProps.currentTime);var a=i||globalSessionTracker.getPVStartTS();delete dom.kl,this.eventWriter.append(constants.event_types.HTML_CONTENT,_.extend({},{dom:DomSerialize.getInstance().serialize(this.win,this.getPath()),url:this.win.location.href.toString(),id:r,tl:a,td:this.getDomLoadTime(),k:DomSerialize.getInstance().getDocType()}),this.eventWriter.logXPath(this.getPath()))}e||(this.isInit=!0)}},{key:"initCapture",value:function(){var t=this;this.rcEventMonitor||(this.DomUpdated=new PubSubTopic,this.rcEventMonitor=new RcEventMonitor(this,this.browser),this.DomUpdated.subscribe(function(e){return t.update(e)}),this.rcFrame=RcFrame.getInstance(),this.rcFrame.performFrameBindings(this))}}]),i}(),RcTrigger=function(){function n(e,t,r){classCallCheck(this,n),this.rcCtrl=e,this.config=t,this.browser=r}return createClass(n,[{key:"supported",value:function(){for(var e=0;e<this.config.device_blacklist.length;e++)if(-1<this.browser.agent.toLowerCase().indexOf(this.config.device_blacklist[e].toLowerCase()))return!1;return!0}},{key:"enabled",value:function(){var e=this.config,t=e.filters,r=!0;if(t&&t.mode)if("w"===t.mode){r=!1;var n=t.domains;if(n&&0<n.length)for(var i=0;i<n.length;i++){new RegExp(n[i],"i").test(location.href)&&(r=!0)}}else if("b"===t.mode){var a=t.domains;if(a&&0<a.length)for(var o=0;o<a.length;o++){new RegExp(a[o],"i").test(location.href)&&(r=!0)}}if(r){var s=e.sampling;if(null==s)return r;if(0===s)r=!1;else{var c=sessionStorage.getItem("auryc_replay_v2");if(c)r="t"===c;else r=100*Math.random()<s,sessionStorage.setItem("auryc_replay_v2",r?"t":"f")}}return r}}]),n}(),RcController=function(){function n(e,t,r){classCallCheck(this,n),this.winobj=t,this.browser=e,this.cfg=config.getProductConfig("record"),this.isValidCfg=this._validateConfig(this.cfg),this.crit=new RcTrigger(this,this.cfg,e),this.stg=r,this.rcProcessor=null}return createClass(n,[{key:"init",value:function(e){this.crit.supported()&&this.crit.enabled()?(this.rcProcessor=new ReplayProcessor(this.winobj),e&&this.rcProcessor.setReady()):(this.crit.supported()||logger.warn("SR: record device or platform not supported"),this.crit.enabled()||logger.warn("SR: record not enabled"))}},{key:"_validateConfig",value:function(e){return e?!!(e.browser_cutoff&&e.platform_cutoff&&e.device_blacklist)||(logger.error("record: mandatory configs missing: browser_cutoff, platform_cutoff, device_blacklist"),!1):(logger.error("record: config object is null"),!1)}},{key:"setReady",value:function(){this.rcProcessor&&this.rcProcessor.setReady()}},{key:"suspend",value:function(){this.rcProcessor&&(this.rcProcessor.dispose(),this.rcProcessor=null)}}]),n}();function init$5(){if(!config.isProductEnabled("record"))return logger.warn("record product disabled"),void rcApi.inject(window,!1);logger.log("record product enabled"),AurycPubSub.subscribe(constants.events.UBTINIT,function(){var e=globalSessionTracker.getSessionStorage(),t=getInstance(),r=new RcController(t,window,e);config.isVisualEditorMode()?r.init():(r.init(!0),rcApi.inject(window,!0))})}var record$1={init:init$5},sessionKeys={AurycHashKey:"_aurychash",AurycTimeZone:"_aurycTimeZone",TimeTraveling:"timeTraveling",AurycMode:"_aurycMode"};function getHashParam$2(e,t){var r=e.match(new RegExp(t+"=([^&]*)"));return r?r[1]:null}function loadScript(e,t){var r=document.createElement("script");r.type="text/javascript",r.charset="UTF-8",r.src=e,t&&(r.onload=t);var n=document.getElementsByTagName("script");0<n.length?n[0].parentNode.insertBefore(r,n[0]):document.head.appendChild(r)}function loadCss(e,t){var r=document.createElement("link");r.rel="stylesheet",r.type="text/css",r.charset="UTF-8",r.href=e,t&&(r.onload=t),document.head.appendChild(r)}function loadEventEditor(e){var t=config.getConfig("editor_uri","base");loadCss(t+"/editor.css"),loadScript(t+"/editor.js",function(){window.aurycLoadEditor(e)})}function initEventEditor(e){if(Boolean.toString().indexOf("[native code]")<0){var t=document.createElement("iframe");document.documentElement.appendChild(t),window.Boolean=t.contentWindow.Boolean,document.documentElement.removeChild(t)}loadEventEditor({siteId:config.getConfig("siteid"),siteToken:config.getConfig("siteToken"),storage:e,timeZone:e.get("_aurycTimeZone"),utils:{eventElements:{normalize:normalize,attrCode:attrCode}}})}function isMatchingSite(e,t){if(!e||!t)return!1;var r=config.getConfig("siteid"),n=config.getConfig("siteToken");return e===r&&t===n}function init$6(){try{var e,t={},r=window.location.hash;if(r&&"editor"===getHashParam$2(r,"mode")){var n,i,a,o=window.history.length;history.replaceState("",document.title,window.location.pathname+window.location.search);var s=getHashParam$2(r,"t"),c=encoder.decodeBase64(s||"");if(!c)return void console.log("siteId or siteToken does not exist");if(i=getHashParam$2(c,"siteId"),a=getHashParam$2(c,"siteToken"),n=getHashParam$2(c,"timeZone"),!isMatchingSite(i,a))return void console.log("siteId or siteToken does not match");n&&(t[sessionKeys.AurycTimeZone]=n);var l=getHashParam$2(r,"mode");t[sessionKeys.AurycHashKey]=l,t[sessionKeys.TimeTraveling]=o,t[sessionKeys.AurycMode]="edit",initEventEditor(e=globalSessionTracker.setSessionValues(t))}else"editor"===(e=globalSessionTracker.getSession(sessionKeys)).get(sessionKeys.AurycHashKey)&&initEventEditor(e)}catch(e){}}var visualeditor={init:init$6};function initProducts(){logger.log("initializing products"),behavior.init(),feedback.init(),record$1.init(),visualeditor.init(),api.init()}function fail(){logger.error("Auryc SDK is not initizlied")}function polyfill(){window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){t=t||window;for(var r=0;r<this.length;r++)e.call(t,this[r],r,this)})}polyfill(),utils$1.init(initProducts,fail)}();
